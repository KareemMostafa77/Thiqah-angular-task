"use strict";(self.webpackChunkThiqah_Angular_Task=self.webpackChunkThiqah_Angular_Task||[]).push([[179],{6304:(ft,Me,k)=>{k.d(Me,{Dh:()=>Fe,GT:()=>ve,cc:()=>Oe,hO:()=>qe,on:()=>V,pX:()=>ne,xv:()=>we});var g=k(7989),J=k(7142),R=k(5781);ft=k.hmd(ft);const oe=["ngOnDestroy"],ne=(Le,at,it,K={})=>new Proxy(Le,{get:(he,Y)=>it.runOutsideAngular(()=>{var Ce;if(Le[Y])return!(null===(Ce=K?.spy)||void 0===Ce)&&Ce.get&&K.spy.get(Y,Le[Y]),Le[Y];if(oe.indexOf(Y)>-1)return()=>{};const ke=at.toPromise().then(Ze=>{const re=Ze&&Ze[Y];return"function"==typeof re?re.bind(Ze):re&&re.then?re.then(ut=>it.run(()=>ut)):it.run(()=>re)});return new Proxy(()=>{},{get:(Ze,re)=>ke[re],apply:(Ze,re,ut)=>ke.then(kt=>{var sr;const jr=kt&&kt(...ut);return!(null===(sr=K?.spy)||void 0===sr)&&sr.apply&&K.spy.apply(Y,ut,jr),jr})})})}),ve=(Le,at)=>{at.forEach(it=>{Object.getOwnPropertyNames(it.prototype||it).forEach(K=>{Object.defineProperty(Le.prototype,K,Object.getOwnPropertyDescriptor(it.prototype||it,K))})})};class fe{constructor(at){return at}}const Fe=new g.OlP("angularfire2.app.options"),we=new g.OlP("angularfire2.app.name");function V(Le,at,it){const he="object"==typeof it&&it||{};he.name=he.name||"string"==typeof it&&it||"[DEFAULT]";const Ce=J.Z.apps.filter(ke=>ke&&ke.name===he.name)[0]||at.runOutsideAngular(()=>J.Z.initializeApp(Le,he));try{JSON.stringify(Le)!==JSON.stringify(Ce.options)&&H("error",`${Ce.name} Firebase App already initialized with different options${ft.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch{}return new fe(Ce)}const H=(Le,...at)=>{(0,g.X6Q)()&&typeof console<"u"&&console[Le](...at)},ie={provide:fe,useFactory:V,deps:[Fe,g.R0b,[new g.FiY,we]]};let qe=(()=>{class Le{constructor(it){J.Z.registerVersion("angularfire",R.q4.full,"core"),J.Z.registerVersion("angularfire",R.q4.full,"app-compat"),J.Z.registerVersion("angular",g.q4F.full,it.toString())}static initializeApp(it,K){return{ngModule:Le,providers:[{provide:Fe,useValue:it},{provide:we,useValue:K}]}}}return Le.\u0275fac=function(it){return new(it||Le)(g.LFG(g.Lbi))},Le.\u0275mod=g.oAB({type:Le}),Le.\u0275inj=g.cJS({providers:[ie]}),Le})();function Oe(Le,at,it,K,he){const[,Y,Ce]=globalThis.\u0275AngularfireInstanceCache.find(ke=>ke[0]===Le)||[];if(Y)return function lt(Le,at){try{return Le.toString()===at.toString()}catch{return Le===at}}(he,Ce)||(Ue("error",`${at} was already initialized on the ${it} Firebase App with different settings.${pe?" You may need to reload as Firebase is not HMR aware.":""}`),Ue("warn",{is:he,was:Ce})),Y;{const ke=K();return globalThis.\u0275AngularfireInstanceCache.push([Le,ke,he]),ke}}const pe=!!ft.hot,Ue=(Le,...at)=>{(0,g.X6Q)()&&typeof console<"u"&&console[Le](...at)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},5781:(ft,Me,k)=>{k.d(Me,{q4:()=>cc,iC:()=>sa,HU:()=>Al,vb:()=>lc,JM:()=>Ja});var g=k(7989),J=k(3182),R=k(5861),oe=k(534),ne=k(9058),ve=k(4537),fe=k(7879);const Fe=(I,C)=>C.some(A=>I instanceof A);let we,V;const qe=new WeakMap,Oe=new WeakMap,lt=new WeakMap,pe=new WeakMap,Ue=new WeakMap;let it={get(I,C,A){if(I instanceof IDBTransaction){if("done"===C)return Oe.get(I);if("objectStoreNames"===C)return I.objectStoreNames||lt.get(I);if("store"===C)return A.objectStoreNames[1]?void 0:A.objectStore(A.objectStoreNames[0])}return Ce(I[C])},set:(I,C,A)=>(I[C]=A,!0),has:(I,C)=>I instanceof IDBTransaction&&("done"===C||"store"===C)||C in I};function Y(I){return"function"==typeof I?function he(I){return I!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function ie(){return V||(V=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(I)?function(...C){return I.apply(ke(this),C),Ce(qe.get(this))}:function(...C){return Ce(I.apply(ke(this),C))}:function(C,...A){const P=I.call(ke(this),C,...A);return lt.set(P,C.sort?C.sort():[C]),Ce(P)}}(I):(I instanceof IDBTransaction&&function at(I){if(Oe.has(I))return;const C=new Promise((A,P)=>{const $=()=>{I.removeEventListener("complete",q),I.removeEventListener("error",ae),I.removeEventListener("abort",ae)},q=()=>{A(),$()},ae=()=>{P(I.error||new DOMException("AbortError","AbortError")),$()};I.addEventListener("complete",q),I.addEventListener("error",ae),I.addEventListener("abort",ae)});Oe.set(I,C)}(I),Fe(I,function H(){return we||(we=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(I,it):I)}function Ce(I){if(I instanceof IDBRequest)return function Le(I){const C=new Promise((A,P)=>{const $=()=>{I.removeEventListener("success",q),I.removeEventListener("error",ae)},q=()=>{A(Ce(I.result)),$()},ae=()=>{P(I.error),$()};I.addEventListener("success",q),I.addEventListener("error",ae)});return C.then(A=>{A instanceof IDBCursor&&qe.set(A,I)}).catch(()=>{}),Ue.set(C,I),C}(I);if(pe.has(I))return pe.get(I);const C=Y(I);return C!==I&&(pe.set(I,C),Ue.set(C,I)),C}const ke=I=>Ue.get(I),ut=["get","getKey","getAll","getAllKeys","count"],kt=["put","add","delete","clear"],sr=new Map;function jr(I,C){if(!(I instanceof IDBDatabase)||C in I||"string"!=typeof C)return;if(sr.get(C))return sr.get(C);const A=C.replace(/FromIndex$/,""),P=C!==A,$=kt.includes(A);if(!(A in(P?IDBIndex:IDBObjectStore).prototype)||!$&&!ut.includes(A))return;const q=function(){var ae=(0,R.Z)(function*(He,...Ne){const We=this.transaction(He,$?"readwrite":"readonly");let Dt=We.store;return P&&(Dt=Dt.index(Ne.shift())),(yield Promise.all([Dt[A](...Ne),$&&We.done]))[0]});return function(Ne){return ae.apply(this,arguments)}}();return sr.set(C,q),q}!function K(I){it=I(it)}(I=>({...I,get:(C,A,P)=>jr(C,A)||I.get(C,A,P),has:(C,A)=>!!jr(C,A)||I.has(C,A)}));const cs="@firebase/installations",Pn="0.6.4",Fo=1e4,ls=`w:${Pn}`,ue="FIS_v2",le="https://firebaseinstallations.googleapis.com/v1",ge=36e5,et=new ne.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function $e(I){return I instanceof ne.ZR&&I.code.includes("request-failed")}function Sn({projectId:I}){return`${le}/projects/${I}/installations`}function pt(I){return{token:I.token,requestStatus:2,expiresIn:Ar(I.expiresIn),creationTime:Date.now()}}function Gt(I,C){return Mt.apply(this,arguments)}function Mt(){return(Mt=(0,R.Z)(function*(I,C){const P=(yield C.json()).error;return et.create("request-failed",{requestName:I,serverCode:P.code,serverMessage:P.message,serverStatus:P.status})})).apply(this,arguments)}function hn({apiKey:I}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":I})}function or(I){return nn.apply(this,arguments)}function nn(){return(nn=(0,R.Z)(function*(I){const C=yield I();return C.status>=500&&C.status<600?I():C})).apply(this,arguments)}function Ar(I){return Number(I.replace("s","000"))}function ii(){return(ii=(0,R.Z)(function*({appConfig:I,heartbeatServiceProvider:C},{fid:A}){const P=Sn(I),$=hn(I),q=C.getImmediate({optional:!0});if(q){const We=yield q.getHeartbeatsHeader();We&&$.append("x-firebase-client",We)}const He={method:"POST",headers:$,body:JSON.stringify({fid:A,authVersion:ue,appId:I.appId,sdkVersion:ls})},Ne=yield or(()=>fetch(P,He));if(Ne.ok){const We=yield Ne.json();return{fid:We.fid||A,registrationStatus:2,refreshToken:We.refreshToken,authToken:pt(We.authToken)}}throw yield Gt("Create Installation",Ne)})).apply(this,arguments)}function si(I){return new Promise(C=>{setTimeout(C,I)})}const ba=/^[cdef][\w-]{21}$/,gt="";function Ft(){try{const I=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(I),I[0]=112+I[0]%16;const A=function Ct(I){return function Cs(I){return btoa(String.fromCharCode(...I)).replace(/\+/g,"-").replace(/\//g,"_")}(I).substr(0,22)}(I);return ba.test(A)?A:gt}catch{return gt}}function rn(I){return`${I.appName}!${I.appId}`}const vn=new Map;function Hr(I,C){const A=rn(I);Ta(A,C),function qt(I,C){const A=function Lt(){return!$r&&"BroadcastChannel"in self&&($r=new BroadcastChannel("[Firebase] FID Change"),$r.onmessage=I=>{Ta(I.data.key,I.data.fid)}),$r}();A&&A.postMessage({key:I,fid:C}),function ds(){0===vn.size&&$r&&($r.close(),$r=null)}()}(A,C)}function Ta(I,C){const A=vn.get(I);if(A)for(const P of A)P(C)}let $r=null;const Zs="firebase-installations-database",Ks=1,yi="firebase-installations-store";let bs=null;function xi(){return bs||(bs=function Ze(I,C,{blocked:A,upgrade:P,blocking:$,terminated:q}={}){const ae=indexedDB.open(I,C),He=Ce(ae);return P&&ae.addEventListener("upgradeneeded",Ne=>{P(Ce(ae.result),Ne.oldVersion,Ne.newVersion,Ce(ae.transaction))}),A&&ae.addEventListener("blocked",()=>A()),He.then(Ne=>{q&&Ne.addEventListener("close",()=>q()),$&&Ne.addEventListener("versionchange",()=>$())}).catch(()=>{}),He}(Zs,Ks,{upgrade:(I,C)=>{0===C&&I.createObjectStore(yi)}})),bs}function Kn(I,C){return Yn.apply(this,arguments)}function Yn(){return(Yn=(0,R.Z)(function*(I,C){const A=rn(I),$=(yield xi()).transaction(yi,"readwrite"),q=$.objectStore(yi),ae=yield q.get(A);return yield q.put(C,A),yield $.done,(!ae||ae.fid!==C.fid)&&Hr(I,C.fid),C})).apply(this,arguments)}function Gr(I){return Rn.apply(this,arguments)}function Rn(){return(Rn=(0,R.Z)(function*(I){const C=rn(I),P=(yield xi()).transaction(yi,"readwrite");yield P.objectStore(yi).delete(C),yield P.done})).apply(this,arguments)}function _i(I,C){return vi.apply(this,arguments)}function vi(){return(vi=(0,R.Z)(function*(I,C){const A=rn(I),$=(yield xi()).transaction(yi,"readwrite"),q=$.objectStore(yi),ae=yield q.get(A),He=C(ae);return void 0===He?yield q.delete(A):yield q.put(He,A),yield $.done,He&&(!ae||ae.fid!==He.fid)&&Hr(I,He.fid),He})).apply(this,arguments)}function B(I){return L.apply(this,arguments)}function L(){return L=(0,R.Z)(function*(I){let C;const A=yield _i(I.appConfig,P=>{const $=function G(I){return bt(I||{fid:Ft(),registrationStatus:0})}(P),q=function ye(I,C){if(0===C.registrationStatus){if(!navigator.onLine)return{installationEntry:C,registrationPromise:Promise.reject(et.create("app-offline"))};const A={fid:C.fid,registrationStatus:1,registrationTime:Date.now()},P=function te(I,C){return Ye.apply(this,arguments)}(I,A);return{installationEntry:A,registrationPromise:P}}return 1===C.registrationStatus?{installationEntry:C,registrationPromise:Et(I)}:{installationEntry:C}}(I,$);return C=q.registrationPromise,q.installationEntry});return A.fid===gt?{installationEntry:yield C}:{installationEntry:A,registrationPromise:C}}),L.apply(this,arguments)}function Ye(){return Ye=(0,R.Z)(function*(I,C){try{const A=yield function Ws(I,C){return ii.apply(this,arguments)}(I,C);return Kn(I.appConfig,A)}catch(A){throw $e(A)&&409===A.customData.serverCode?yield Gr(I.appConfig):yield Kn(I.appConfig,{fid:C.fid,registrationStatus:0}),A}}),Ye.apply(this,arguments)}function Et(I){return yt.apply(this,arguments)}function yt(){return(yt=(0,R.Z)(function*(I){let C=yield Qn(I.appConfig);for(;1===C.registrationStatus;)yield si(100),C=yield Qn(I.appConfig);if(0===C.registrationStatus){const{installationEntry:A,registrationPromise:P}=yield B(I);return P||A}return C})).apply(this,arguments)}function Qn(I){return _i(I,C=>{if(!C)throw et.create("installation-not-found");return bt(C)})}function bt(I){return function Dn(I){return 1===I.registrationStatus&&I.registrationTime+Fo<Date.now()}(I)?{fid:I.fid,registrationStatus:0}:I}function Hn(){return(Hn=(0,R.Z)(function*({appConfig:I,heartbeatServiceProvider:C},A){const P=function Gi(I,{fid:C}){return`${Sn(I)}/${C}/authTokens:generate`}(I,A),$=function _n(I,{refreshToken:C}){const A=hn(I);return A.append("Authorization",function ri(I){return`${ue} ${I}`}(C)),A}(I,A),q=C.getImmediate({optional:!0});if(q){const We=yield q.getHeartbeatsHeader();We&&$.append("x-firebase-client",We)}const He={method:"POST",headers:$,body:JSON.stringify({installation:{sdkVersion:ls,appId:I.appId}})},Ne=yield or(()=>fetch(P,He));if(Ne.ok)return pt(yield Ne.json());throw yield Gt("Generate Auth Token",Ne)})).apply(this,arguments)}function hs(I){return Sa.apply(this,arguments)}function Sa(){return Sa=(0,R.Z)(function*(I,C=!1){let A;const P=yield _i(I.appConfig,q=>{if(!xt(q))throw et.create("not-registered");const ae=q.authToken;if(!C&&function zt(I){return 2===I.requestStatus&&!function kn(I){const C=Date.now();return C<I.creationTime||I.creationTime+I.expiresIn<C+ge}(I)}(ae))return q;if(1===ae.requestStatus)return A=function ce(I,C){return Q.apply(this,arguments)}(I,C),q;{if(!navigator.onLine)throw et.create("app-offline");const He=function Fn(I){const C={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},I),{authToken:C})}(q);return A=function nt(I,C){return Ge.apply(this,arguments)}(I,He),He}});return A?yield A:P.authToken}),Sa.apply(this,arguments)}function Q(){return(Q=(0,R.Z)(function*(I,C){let A=yield Ae(I.appConfig);for(;1===A.authToken.requestStatus;)yield si(100),A=yield Ae(I.appConfig);const P=A.authToken;return 0===P.requestStatus?hs(I,C):P})).apply(this,arguments)}function Ae(I){return _i(I,C=>{if(!xt(C))throw et.create("not-registered");return function ur(I){return 1===I.requestStatus&&I.requestTime+Fo<Date.now()}(C.authToken)?Object.assign(Object.assign({},C),{authToken:{requestStatus:0}}):C})}function Ge(){return Ge=(0,R.Z)(function*(I,C){try{const A=yield function jt(I,C){return Hn.apply(this,arguments)}(I,C),P=Object.assign(Object.assign({},C),{authToken:A});return yield Kn(I.appConfig,P),A}catch(A){if(!$e(A)||401!==A.customData.serverCode&&404!==A.customData.serverCode){const P=Object.assign(Object.assign({},C),{authToken:{requestStatus:0}});yield Kn(I.appConfig,P)}else yield Gr(I.appConfig);throw A}}),Ge.apply(this,arguments)}function xt(I){return void 0!==I&&2===I.registrationStatus}function Lo(){return(Lo=(0,R.Z)(function*(I){const C=I,{installationEntry:A,registrationPromise:P}=yield B(C);return P?P.catch(console.error):hs(C).catch(console.error),A.fid})).apply(this,arguments)}function Vo(){return Vo=(0,R.Z)(function*(I,C=!1){const A=I;return yield function Kc(I){return wi.apply(this,arguments)}(A),(yield hs(A,C)).token}),Vo.apply(this,arguments)}function wi(){return(wi=(0,R.Z)(function*(I){const{registrationPromise:C}=yield B(I);C&&(yield C)})).apply(this,arguments)}function Bo(I){return et.create("missing-app-config-values",{valueName:I})}const Qc="installations",Bg=I=>{const C=I.getProvider("app").getImmediate(),A=function zr(I){if(!I||!I.options)throw Bo("App Configuration");if(!I.name)throw Bo("App Name");const C=["projectId","apiKey","appId"];for(const A of C)if(!I.options[A])throw Bo(A);return{appName:I.name,projectId:I.options.projectId,apiKey:I.options.apiKey,appId:I.options.appId}}(C);return{app:C,appConfig:A,heartbeatServiceProvider:(0,oe._getProvider)(C,"heartbeat"),_delete:()=>Promise.resolve()}},Js=I=>{const C=I.getProvider("app").getImmediate(),A=(0,oe._getProvider)(C,Qc).getImmediate();return{getId:()=>function zi(I){return Lo.apply(this,arguments)}(A),getToken:$=>function Zc(I){return Vo.apply(this,arguments)}(A,$)}};(function Df(){(0,oe._registerComponent)(new ve.wA(Qc,Bg,"PUBLIC")),(0,oe._registerComponent)(new ve.wA("installations-internal",Js,"PRIVATE"))})(),(0,oe.registerVersion)(cs,Pn),(0,oe.registerVersion)(cs,Pn,"esm2017");const Ma="@firebase/remote-config",Ir=new ne.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class mt{constructor(C,A,P,$){this.client=C,this.storage=A,this.storageCache=P,this.logger=$}isCachedDataFresh(C,A){if(!A)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const P=Date.now()-A,$=P<=C;return this.logger.debug(`Config fetch cache check. Cache age millis: ${P}. Cache max age millis (minimumFetchIntervalMillis setting): ${C}. Is cache hit: ${$}.`),$}fetch(C){var A=this;return(0,R.Z)(function*(){const[P,$]=yield Promise.all([A.storage.getLastSuccessfulFetchTimestampMillis(),A.storage.getLastSuccessfulFetchResponse()]);if($&&A.isCachedDataFresh(C.cacheMaxAgeMillis,P))return $;C.eTag=$&&$.eTag;const q=yield A.client.fetch(C),ae=[A.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===q.status&&ae.push(A.storage.setLastSuccessfulFetchResponse(q)),yield Promise.all(ae),q})()}}function pn(I=navigator){return I.languages&&I.languages[0]||I.language}class Nr{constructor(C,A,P,$,q,ae){this.firebaseInstallations=C,this.sdkVersion=A,this.namespace=P,this.projectId=$,this.apiKey=q,this.appId=ae}fetch(C){var A=this;return(0,R.Z)(function*(){const[P,$]=yield Promise.all([A.firebaseInstallations.getId(),A.firebaseInstallations.getToken()]),ae=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${A.projectId}/namespaces/${A.namespace}:fetch?key=${A.apiKey}`,He={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":C.eTag||"*"},Ne={sdk_version:A.sdkVersion,app_instance_id:P,app_instance_id_token:$,app_id:A.appId,language_code:pn()},We={method:"POST",headers:He,body:JSON.stringify(Ne)},Dt=fetch(ae,We),st=new Promise((Fi,Ji)=>{C.signal.addEventListener(()=>{const Io=new Error("The operation was aborted.");Io.name="AbortError",Ji(Io)})});let Or;try{yield Promise.race([Dt,st]),Or=yield Dt}catch(Fi){let Ji="fetch-client-network";throw"AbortError"===Fi?.name&&(Ji="fetch-timeout"),Ir.create(Ji,{originalErrorMessage:Fi?.message})}let Cn=Or.status;const aa=Or.headers.get("ETag")||void 0;let Cr,ki;if(200===Or.status){let Fi;try{Fi=yield Or.json()}catch(Ji){throw Ir.create("fetch-client-parse",{originalErrorMessage:Ji?.message})}Cr=Fi.entries,ki=Fi.state}if("INSTANCE_STATE_UNSPECIFIED"===ki?Cn=500:"NO_CHANGE"===ki?Cn=304:("NO_TEMPLATE"===ki||"EMPTY_CONFIG"===ki)&&(Cr={}),304!==Cn&&200!==Cn)throw Ir.create("fetch-status",{httpStatus:Cn});return{status:Cn,eTag:aa,config:Cr}})()}}class Oa{constructor(C,A){this.client=C,this.storage=A}fetch(C){var A=this;return(0,R.Z)(function*(){const P=(yield A.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return A.attemptFetch(C,P)})()}attemptFetch(C,{throttleEndTimeMillis:A,backoffCount:P}){var $=this;return(0,R.Z)(function*(){yield function eo(I,C){return new Promise((A,P)=>{const $=Math.max(C-Date.now(),0),q=setTimeout(A,$);I.addEventListener(()=>{clearTimeout(q),P(Ir.create("fetch-throttle",{throttleEndTimeMillis:C}))})})}(C.signal,A);try{const q=yield $.client.fetch(C);return yield $.storage.deleteThrottleMetadata(),q}catch(q){if(!function cr(I){if(!(I instanceof ne.ZR&&I.customData))return!1;const C=Number(I.customData.httpStatus);return 429===C||500===C||503===C||504===C}(q))throw q;const ae={throttleEndTimeMillis:Date.now()+(0,ne.$s)(P),backoffCount:P+1};return yield $.storage.setThrottleMetadata(ae),$.attemptFetch(C,ae)}})()}}class jo{constructor(C,A,P,$,q){this.app=C,this._client=A,this._storageCache=P,this._storage=$,this._logger=q,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function _t(I,C){const A=I.target.error||void 0;return Ir.create(C,{originalErrorMessage:A&&A?.message})}const lr="app_namespace_store";class tl{constructor(C,A,P,$=function gn(){return new Promise((I,C)=>{try{const A=indexedDB.open("firebase_remote_config",1);A.onerror=P=>{C(_t(P,"storage-open"))},A.onsuccess=P=>{I(P.target.result)},A.onupgradeneeded=P=>{0===P.oldVersion&&P.target.result.createObjectStore(lr,{keyPath:"compositeKey"})}}catch(A){C(Ir.create("storage-open",{originalErrorMessage:A?.message}))}})}()){this.appId=C,this.appName=A,this.namespace=P,this.openDbPromise=$}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(C){return this.set("last_fetch_status",C)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(C){return this.set("last_successful_fetch_timestamp_millis",C)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(C){return this.set("last_successful_fetch_response",C)}getActiveConfig(){return this.get("active_config")}setActiveConfig(C){return this.set("active_config",C)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(C){return this.set("active_config_etag",C)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(C){return this.set("throttle_metadata",C)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(C){var A=this;return(0,R.Z)(function*(){const P=yield A.openDbPromise;return new Promise(($,q)=>{const He=P.transaction([lr],"readonly").objectStore(lr),Ne=A.createCompositeKey(C);try{const We=He.get(Ne);We.onerror=Dt=>{q(_t(Dt,"storage-get"))},We.onsuccess=Dt=>{const st=Dt.target.result;$(st?st.value:void 0)}}catch(We){q(Ir.create("storage-get",{originalErrorMessage:We?.message}))}})})()}set(C,A){var P=this;return(0,R.Z)(function*(){const $=yield P.openDbPromise;return new Promise((q,ae)=>{const Ne=$.transaction([lr],"readwrite").objectStore(lr),We=P.createCompositeKey(C);try{const Dt=Ne.put({compositeKey:We,value:A});Dt.onerror=st=>{ae(_t(st,"storage-set"))},Dt.onsuccess=()=>{q()}}catch(Dt){ae(Ir.create("storage-set",{originalErrorMessage:Dt?.message}))}})})()}delete(C){var A=this;return(0,R.Z)(function*(){const P=yield A.openDbPromise;return new Promise(($,q)=>{const He=P.transaction([lr],"readwrite").objectStore(lr),Ne=A.createCompositeKey(C);try{const We=He.delete(Ne);We.onerror=Dt=>{q(_t(Dt,"storage-delete"))},We.onsuccess=()=>{$()}}catch(We){q(Ir.create("storage-delete",{originalErrorMessage:We?.message}))}})})()}createCompositeKey(C){return[this.appId,this.appName,this.namespace,C].join()}}class to{constructor(C){this.storage=C}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var C=this;return(0,R.Z)(function*(){const A=C.storage.getLastFetchStatus(),P=C.storage.getLastSuccessfulFetchTimestampMillis(),$=C.storage.getActiveConfig(),q=yield A;q&&(C.lastFetchStatus=q);const ae=yield P;ae&&(C.lastSuccessfulFetchTimestampMillis=ae);const He=yield $;He&&(C.activeConfig=He)})()}setLastFetchStatus(C){return this.lastFetchStatus=C,this.storage.setLastFetchStatus(C)}setLastSuccessfulFetchTimestampMillis(C){return this.lastSuccessfulFetchTimestampMillis=C,this.storage.setLastSuccessfulFetchTimestampMillis(C)}setActiveConfig(C){return this.activeConfig=C,this.storage.setActiveConfig(C)}}function Ss(){return Di.apply(this,arguments)}function Di(){return(Di=(0,R.Z)(function*(){if(!(0,ne.hl)())return!1;try{return yield(0,ne.eu)()}catch{return!1}})).apply(this,arguments)}!function dr(){(0,oe._registerComponent)(new ve.wA("remote-config",function I(C,{instanceIdentifier:A}){const P=C.getProvider("app").getImmediate(),$=C.getProvider("installations-internal").getImmediate();if(typeof window>"u")throw Ir.create("registration-window");if(!(0,ne.hl)())throw Ir.create("indexed-db-unavailable");const{projectId:q,apiKey:ae,appId:He}=P.options;if(!q)throw Ir.create("registration-project-id");if(!ae)throw Ir.create("registration-api-key");if(!He)throw Ir.create("registration-app-id");const Ne=new tl(He,P.name,A=A||"firebase"),We=new to(Ne),Dt=new fe.Yd(Ma);Dt.logLevel=fe.in.ERROR;const st=new Nr($,oe.SDK_VERSION,A,q,ae,He),Or=new Oa(st,Ne),Cn=new mt(Or,Ne,We,Dt),aa=new jo(P,Cn,We,Ne,Dt);return function Mr(I){const C=(0,ne.m9)(I);C._initializePromise||(C._initializePromise=C._storageCache.loadFromStorage().then(()=>{C._isInitializationComplete=!0}))}(aa),aa},"PUBLIC").setMultipleInstances(!0)),(0,oe.registerVersion)(Ma,"0.4.4"),(0,oe.registerVersion)(Ma,"0.4.4","esm2017")}();const Pa=(I,C)=>C.some(A=>I instanceof A);let As,Pt;const ju=new WeakMap,Jn=new WeakMap,no=new WeakMap,Xn=new WeakMap,Ms=new WeakMap;let er={get(I,C,A){if(I instanceof IDBTransaction){if("done"===C)return Jn.get(I);if("objectStoreNames"===C)return I.objectStoreNames||no.get(I);if("store"===C)return A.objectStoreNames[1]?void 0:A.objectStore(A.objectStoreNames[0])}return oi(I[C])},set:(I,C,A)=>(I[C]=A,!0),has:(I,C)=>I instanceof IDBTransaction&&("done"===C||"store"===C)||C in I};function ro(I){return"function"==typeof I?function Hu(I){return I!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function Ho(){return Pt||(Pt=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(I)?function(...C){return I.apply(qr(this),C),oi(ju.get(this))}:function(...C){return oi(I.apply(qr(this),C))}:function(C,...A){const P=I.call(qr(this),C,...A);return no.set(P,C.sort?C.sort():[C]),oi(P)}}(I):(I instanceof IDBTransaction&&function Tf(I){if(Jn.has(I))return;const C=new Promise((A,P)=>{const $=()=>{I.removeEventListener("complete",q),I.removeEventListener("error",ae),I.removeEventListener("abort",ae)},q=()=>{A(),$()},ae=()=>{P(I.error||new DOMException("AbortError","AbortError")),$()};I.addEventListener("complete",q),I.addEventListener("error",ae),I.addEventListener("abort",ae)});Jn.set(I,C)}(I),Pa(I,function Ug(){return As||(As=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(I,er):I)}function oi(I){if(I instanceof IDBRequest)return function hr(I){const C=new Promise((A,P)=>{const $=()=>{I.removeEventListener("success",q),I.removeEventListener("error",ae)},q=()=>{A(oi(I.result)),$()},ae=()=>{P(I.error),$()};I.addEventListener("success",q),I.addEventListener("error",ae)});return C.then(A=>{A instanceof IDBCursor&&ju.set(A,I)}).catch(()=>{}),Ms.set(C,I),C}(I);if(Xn.has(I))return Xn.get(I);const C=ro(I);return C!==I&&(Xn.set(I,C),Ms.set(C,I)),C}const qr=I=>Ms.get(I);function $o(I,C,{blocked:A,upgrade:P,blocking:$,terminated:q}={}){const ae=indexedDB.open(I,C),He=oi(ae);return P&&ae.addEventListener("upgradeneeded",Ne=>{P(oi(ae.result),Ne.oldVersion,Ne.newVersion,oi(ae.transaction))}),A&&ae.addEventListener("blocked",()=>A()),He.then(Ne=>{q&&Ne.addEventListener("close",()=>q()),$&&Ne.addEventListener("versionchange",()=>$())}).catch(()=>{}),He}function Go(I,{blocked:C}={}){const A=indexedDB.deleteDatabase(I);return C&&A.addEventListener("blocked",()=>C()),oi(A).then(()=>{})}const nl=["get","getKey","getAll","getAllKeys","count"],jg=["put","add","delete","clear"],$u=new Map;function rl(I,C){if(!(I instanceof IDBDatabase)||C in I||"string"!=typeof C)return;if($u.get(C))return $u.get(C);const A=C.replace(/FromIndex$/,""),P=C!==A,$=jg.includes(A);if(!(A in(P?IDBIndex:IDBObjectStore).prototype)||!$&&!nl.includes(A))return;const q=function(){var ae=(0,R.Z)(function*(He,...Ne){const We=this.transaction(He,$?"readwrite":"readonly");let Dt=We.store;return P&&(Dt=Dt.index(Ne.shift())),(yield Promise.all([Dt[A](...Ne),$&&We.done]))[0]});return function(Ne){return ae.apply(this,arguments)}}();return $u.set(C,q),q}!function Er(I){er=I(er)}(I=>({...I,get:(C,A,P)=>rl(C,A)||I.get(C,A,P),has:(C,A)=>!!rl(C,A)||I.has(C,A)}));const bd="/firebase-messaging-sw.js",il="/firebase-cloud-messaging-push-scope",Td="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",Hg="https://fcmregistrations.googleapis.com/v1",mn="google.c.a.c_id",$g="google.c.a.c_l",Sf="google.c.a.ts";var Sd=function(I){return I.PUSH_RECEIVED="push-received",I.NOTIFICATION_CLICKED="notification-clicked",I}(Sd||{});function ms(I){const C=new Uint8Array(I);return btoa(String.fromCharCode(...C)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function sl(I){const A=(I+"=".repeat((4-I.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),P=atob(A),$=new Uint8Array(P.length);for(let q=0;q<P.length;++q)$[q]=P.charCodeAt(q);return $}const zo="fcm_token_details_db",ol=5,Ra="fcm_token_object_Store";function ka(){return ka=(0,R.Z)(function*(I){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(q=>q.name).includes(zo))return null;let C=null;return(yield $o(zo,ol,{upgrade:(P=(0,R.Z)(function*($,q,ae,He){var Ne;if(q<2||!$.objectStoreNames.contains(Ra))return;const We=He.objectStore(Ra),Dt=yield We.index("fcmSenderId").get(I);if(yield We.clear(),Dt)if(2===q){const st=Dt;if(!st.auth||!st.p256dh||!st.endpoint)return;C={token:st.fcmToken,createTime:null!==(Ne=st.createTime)&&void 0!==Ne?Ne:Date.now(),subscriptionOptions:{auth:st.auth,p256dh:st.p256dh,endpoint:st.endpoint,swScope:st.swScope,vapidKey:"string"==typeof st.vapidKey?st.vapidKey:ms(st.vapidKey)}}}else if(3===q){const st=Dt;C={token:st.fcmToken,createTime:st.createTime,subscriptionOptions:{auth:ms(st.auth),p256dh:ms(st.p256dh),endpoint:st.endpoint,swScope:st.swScope,vapidKey:ms(st.vapidKey)}}}else if(4===q){const st=Dt;C={token:st.fcmToken,createTime:st.createTime,subscriptionOptions:{auth:ms(st.auth),p256dh:ms(st.p256dh),endpoint:st.endpoint,swScope:st.swScope,vapidKey:ms(st.vapidKey)}}}}),function(q,ae,He,Ne){return P.apply(this,arguments)})})).close(),yield Go(zo),yield Go("fcm_vapid_details_db"),yield Go("undefined"),function io(I){if(!I||!I.subscriptionOptions)return!1;const{subscriptionOptions:C}=I;return"number"==typeof I.createTime&&I.createTime>0&&"string"==typeof I.token&&I.token.length>0&&"string"==typeof C.auth&&C.auth.length>0&&"string"==typeof C.p256dh&&C.p256dh.length>0&&"string"==typeof C.endpoint&&C.endpoint.length>0&&"string"==typeof C.swScope&&C.swScope.length>0&&"string"==typeof C.vapidKey&&C.vapidKey.length>0}(C)?C:null;var P}),ka.apply(this,arguments)}const qi="firebase-messaging-database",Ad=1,Ci="firebase-messaging-store";let $n=null;function so(){return $n||($n=$o(qi,Ad,{upgrade:(I,C)=>{0===C&&I.createObjectStore(Ci)}})),$n}function Wr(I){return oo.apply(this,arguments)}function oo(){return oo=(0,R.Z)(function*(I){const C=La(I),P=yield(yield so()).transaction(Ci).objectStore(Ci).get(C);if(P)return P;{const $=yield function M_(I){return ka.apply(this,arguments)}(I.appConfig.senderId);if($)return yield al(I,$),$}}),oo.apply(this,arguments)}function al(I,C){return Fa.apply(this,arguments)}function Fa(){return(Fa=(0,R.Z)(function*(I,C){const A=La(I),$=(yield so()).transaction(Ci,"readwrite");return yield $.objectStore(Ci).put(C,A),yield $.done,C})).apply(this,arguments)}function qo(){return(qo=(0,R.Z)(function*(I){const C=La(I),P=(yield so()).transaction(Ci,"readwrite");yield P.objectStore(Ci).delete(C),yield P.done})).apply(this,arguments)}function La({appConfig:I}){return I.appId}const tr=new ne.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function ul(I,C){return cl.apply(this,arguments)}function cl(){return(cl=(0,R.Z)(function*(I,C){const A=yield Nd(I),P=Gg(C),$={method:"POST",headers:A,body:JSON.stringify(P)};let q;try{q=yield(yield fetch(Ba(I.appConfig),$)).json()}catch(ae){throw tr.create("token-subscribe-failed",{errorInfo:ae?.toString()})}if(q.error)throw tr.create("token-subscribe-failed",{errorInfo:q.error.message});if(!q.token)throw tr.create("token-subscribe-no-token");return q.token})).apply(this,arguments)}function Va(){return(Va=(0,R.Z)(function*(I,C){const A=yield Nd(I),P=Gg(C.subscriptionOptions),$={method:"PATCH",headers:A,body:JSON.stringify(P)};let q;try{q=yield(yield fetch(`${Ba(I.appConfig)}/${C.token}`,$)).json()}catch(ae){throw tr.create("token-update-failed",{errorInfo:ae?.toString()})}if(q.error)throw tr.create("token-update-failed",{errorInfo:q.error.message});if(!q.token)throw tr.create("token-update-no-token");return q.token})).apply(this,arguments)}function ao(I,C){return xs.apply(this,arguments)}function xs(){return(xs=(0,R.Z)(function*(I,C){const P={method:"DELETE",headers:yield Nd(I)};try{const q=yield(yield fetch(`${Ba(I.appConfig)}/${C}`,P)).json();if(q.error)throw tr.create("token-unsubscribe-failed",{errorInfo:q.error.message})}catch($){throw tr.create("token-unsubscribe-failed",{errorInfo:$?.toString()})}})).apply(this,arguments)}function Ba({projectId:I}){return`${Hg}/projects/${I}/registrations`}function Nd(I){return Gu.apply(this,arguments)}function Gu(){return(Gu=(0,R.Z)(function*({appConfig:I,installations:C}){const A=yield C.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":I.apiKey,"x-goog-firebase-installations-auth":`FIS ${A}`})})).apply(this,arguments)}function Gg({p256dh:I,auth:C,endpoint:A,vapidKey:P}){const $={web:{endpoint:A,auth:C,p256dh:I}};return P!==Td&&($.web.applicationPubKey=P),$}const Od=6048e5;function dl(){return dl=(0,R.Z)(function*(I){const C=yield function Ua(I,C){return hl.apply(this,arguments)}(I.swRegistration,I.vapidKey),A={vapidKey:I.vapidKey,swScope:I.swRegistration.scope,endpoint:C.endpoint,auth:ms(C.getKey("auth")),p256dh:ms(C.getKey("p256dh"))},P=yield Wr(I.firebaseDependencies);if(P){if(function Rd(I,C){return C.vapidKey===I.vapidKey&&C.endpoint===I.endpoint&&C.auth===I.auth&&C.p256dh===I.p256dh}(P.subscriptionOptions,A))return Date.now()>=P.createTime+Od?function Mf(I,C){return Wo.apply(this,arguments)}(I,{token:P.token,createTime:Date.now(),subscriptionOptions:A}):P.token;try{yield ao(I.firebaseDependencies,P.token)}catch($){console.warn($)}return qg(I.firebaseDependencies,A)}return qg(I.firebaseDependencies,A)}),dl.apply(this,arguments)}function zu(){return zu=(0,R.Z)(function*(I){const C=yield Wr(I.firebaseDependencies);C&&(yield ao(I.firebaseDependencies,C.token),yield function Md(I){return qo.apply(this,arguments)}(I.firebaseDependencies));const A=yield I.swRegistration.pushManager.getSubscription();return!A||A.unsubscribe()}),zu.apply(this,arguments)}function Wo(){return Wo=(0,R.Z)(function*(I,C){try{const A=yield function ll(I,C){return Va.apply(this,arguments)}(I.firebaseDependencies,C),P=Object.assign(Object.assign({},C),{token:A,createTime:Date.now()});return yield al(I.firebaseDependencies,P),A}catch(A){throw yield function Pd(I){return zu.apply(this,arguments)}(I),A}}),Wo.apply(this,arguments)}function qg(I,C){return Zo.apply(this,arguments)}function Zo(){return(Zo=(0,R.Z)(function*(I,C){const P={token:yield ul(I,C),createTime:Date.now(),subscriptionOptions:C};return yield al(I,P),P.token})).apply(this,arguments)}function hl(){return(hl=(0,R.Z)(function*(I,C){return(yield I.pushManager.getSubscription())||I.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:sl(C)})})).apply(this,arguments)}function qu(I){const C={from:I.from,collapseKey:I.collapse_key,messageId:I.fcmMessageId};return function ja(I,C){if(!C.notification)return;I.notification={};const A=C.notification.title;A&&(I.notification.title=A);const P=C.notification.body;P&&(I.notification.body=P);const $=C.notification.image;$&&(I.notification.image=$);const q=C.notification.icon;q&&(I.notification.icon=q)}(C,I),function xf(I,C){C.data&&(I.data=C.data)}(C,I),function fl(I,C){var A,P,$,q,ae;if(!(C.fcmOptions||null!==(A=C.notification)&&void 0!==A&&A.click_action))return;I.fcmOptions={};const He=null!==($=null===(P=C.fcmOptions)||void 0===P?void 0:P.link)&&void 0!==$?$:null===(q=C.notification)||void 0===q?void 0:q.click_action;He&&(I.fcmOptions.link=He);const Ne=null===(ae=C.fcmOptions)||void 0===ae?void 0:ae.analytics_label;Ne&&(I.fcmOptions.analyticsLabel=Ne)}(C,I),C}function pl(I,C){const A=[];for(let P=0;P<I.length;P++)A.push(I.charAt(P)),P<C.length&&A.push(C.charAt(P));return A.join("")}function gl(I){return tr.create("missing-app-config-values",{valueName:I})}pl("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),pl("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class Of{constructor(C,A,P){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const $=function Nf(I){if(!I||!I.options)throw gl("App Configuration Object");if(!I.name)throw gl("App Name");const C=["projectId","apiKey","appId","messagingSenderId"],{options:A}=I;for(const P of C)if(!A[P])throw gl(P);return{appName:I.name,projectId:A.projectId,apiKey:A.apiKey,appId:A.appId,senderId:A.messagingSenderId}}(C);this.firebaseDependencies={app:C,appConfig:$,installations:A,analyticsProvider:P}}_delete(){return Promise.resolve()}}function Ha(){return(Ha=(0,R.Z)(function*(I){try{I.swRegistration=yield navigator.serviceWorker.register(bd,{scope:il}),I.swRegistration.update().catch(()=>{})}catch(C){throw tr.create("failed-service-worker-registration",{browserErrorMessage:C?.message})}})).apply(this,arguments)}function uo(){return(uo=(0,R.Z)(function*(I,C){if(!C&&!I.swRegistration&&(yield function Wu(I){return Ha.apply(this,arguments)}(I)),C||!I.swRegistration){if(!(C instanceof ServiceWorkerRegistration))throw tr.create("invalid-sw-registration");I.swRegistration=C}})).apply(this,arguments)}function co(){return(co=(0,R.Z)(function*(I,C){C?I.vapidKey=C:I.vapidKey||(I.vapidKey=Td)})).apply(this,arguments)}function $a(){return $a=(0,R.Z)(function*(I,C){if(!navigator)throw tr.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw tr.create("permission-blocked");return yield function Wi(I,C){return co.apply(this,arguments)}(I,C?.vapidKey),yield function Pf(I,C){return uo.apply(this,arguments)}(I,C?.serviceWorkerRegistration),function zg(I){return dl.apply(this,arguments)}(I)}),$a.apply(this,arguments)}function Ni(){return(Ni=(0,R.Z)(function*(I,C,A){const P=function Fd(I){switch(I){case Sd.NOTIFICATION_CLICKED:return"notification_open";case Sd.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}(C);(yield I.firebaseDependencies.analyticsProvider.get()).logEvent(P,{message_id:A[mn],message_name:A[$g],message_time:A[Sf],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function Kt(){return Kt=(0,R.Z)(function*(I,C){const A=C.data;if(!A.isFirebaseMessaging)return;I.onMessageHandler&&A.messageType===Sd.PUSH_RECEIVED&&("function"==typeof I.onMessageHandler?I.onMessageHandler(qu(A)):I.onMessageHandler.next(qu(A)));const P=A.data;(function Wg(I){return"object"==typeof I&&!!I&&mn in I})(P)&&"1"===P["google.c.a.e"]&&(yield function Rf(I,C,A){return Ni.apply(this,arguments)}(I,A.messageType,P))}),Kt.apply(this,arguments)}const lo="@firebase/messaging",fr=I=>{const C=new Of(I.getProvider("app").getImmediate(),I.getProvider("installations-internal").getImmediate(),I.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",A=>function Ld(I,C){return Kt.apply(this,arguments)}(C,A)),C},kf=I=>{const C=I.getProvider("messaging").getImmediate();return{getToken:P=>function kd(I,C){return $a.apply(this,arguments)}(C,P)}};function fo(){return pr.apply(this,arguments)}function pr(){return(pr=(0,R.Z)(function*(){try{yield(0,ne.eu)()}catch{return!1}return typeof window<"u"&&(0,ne.hl)()&&(0,ne.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function ml(){(0,oe._registerComponent)(new ve.wA("messaging",fr,"PUBLIC")),(0,oe._registerComponent)(new ve.wA("messaging-internal",kf,"PRIVATE")),(0,oe.registerVersion)(lo,"0.12.4"),(0,oe.registerVersion)(lo,"0.12.4","esm2017")}();const un="analytics",Kg="firebase_id",vt="origin",Vd=6e4,Bd="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Ku="https://www.googletagmanager.com/gtag/js",nr=new fe.Yd("@firebase/analytics"),gr=new ne.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."});function Zi(I){if(!I.startsWith(Ku)){const C=gr.create("invalid-gtag-resource",{gtagURL:I});return nr.warn(C.message),""}return I}function _l(I){return Promise.all(I.map(C=>C.catch(A=>A)))}function Te(){return(Te=(0,R.Z)(function*(I,C,A,P,$,q){const ae=P[$];try{if(ae)yield C[ae];else{const Ne=(yield _l(A)).find(We=>We.measurementId===$);Ne&&(yield C[Ne.appId])}}catch(He){nr.error(He)}I("config",$,q)})).apply(this,arguments)}function Oi(){return(Oi=(0,R.Z)(function*(I,C,A,P,$){try{let q=[];if($&&$.send_to){let ae=$.send_to;Array.isArray(ae)||(ae=[ae]);const He=yield _l(A);for(const Ne of ae){const We=He.find(st=>st.measurementId===Ne),Dt=We&&C[We.appId];if(!Dt){q=[];break}q.push(Dt)}}0===q.length&&(q=Object.values(C)),yield Promise.all(q),I("event",P,$||{})}catch(q){nr.error(q)}})).apply(this,arguments)}const Yo=30,vl=new class po{constructor(C={},A=1e3){this.throttleMetadata=C,this.intervalMillis=A}getThrottleMetadata(C){return this.throttleMetadata[C]}setThrottleMetadata(C,A){this.throttleMetadata[C]=A}deleteThrottleMetadata(C){delete this.throttleMetadata[C]}};function Bf(I){return new Headers({Accept:"application/json","x-goog-api-key":I})}function wl(){return(wl=(0,R.Z)(function*(I){var C;const{appId:A,apiKey:P}=I,$={method:"GET",headers:Bf(P)},q=Bd.replace("{app-id}",A),ae=yield fetch(q,$);if(200!==ae.status&&304!==ae.status){let He="";try{const Ne=yield ae.json();null!==(C=Ne.error)&&void 0!==C&&C.message&&(He=Ne.error.message)}catch{}throw gr.create("config-fetch-failed",{httpStatus:ae.status,responseMessage:He})}return ae.json()})).apply(this,arguments)}function ai(){return(ai=(0,R.Z)(function*(I,C=vl,A){const{appId:P,apiKey:$,measurementId:q}=I.options;if(!P)throw gr.create("no-app-id");if(!$){if(q)return{measurementId:q,appId:P};throw gr.create("no-api-key")}const ae=C.getThrottleMetadata(P)||{backoffCount:0,throttleEndTimeMillis:Date.now()},He=new Gd;return setTimeout((0,R.Z)(function*(){He.abort()}),void 0!==A?A:Vd),Hd({appId:P,apiKey:$,measurementId:q},ae,He,C)})).apply(this,arguments)}function Hd(I,C,A){return go.apply(this,arguments)}function go(){return go=(0,R.Z)(function*(I,{throttleEndTimeMillis:C,backoffCount:A},P,$=vl){var q;const{appId:ae,measurementId:He}=I;try{yield function Os(I,C){return new Promise((A,P)=>{const $=Math.max(C-Date.now(),0),q=setTimeout(A,$);I.addEventListener(()=>{clearTimeout(q),P(gr.create("fetch-throttle",{throttleEndTimeMillis:C}))})})}(P,C)}catch(Ne){if(He)return nr.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${He} provided in the "measurementId" field in the local Firebase config. [${Ne?.message}]`),{appId:ae,measurementId:He};throw Ne}try{const Ne=yield function x_(I){return wl.apply(this,arguments)}(I);return $.deleteThrottleMetadata(ae),Ne}catch(Ne){const We=Ne;if(!function $d(I){if(!(I instanceof ne.ZR&&I.customData))return!1;const C=Number(I.customData.httpStatus);return 429===C||500===C||503===C||504===C}(We)){if($.deleteThrottleMetadata(ae),He)return nr.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${He} provided in the "measurementId" field in the local Firebase config. [${We?.message}]`),{appId:ae,measurementId:He};throw Ne}const Dt=503===Number(null===(q=We?.customData)||void 0===q?void 0:q.httpStatus)?(0,ne.$s)(A,$.intervalMillis,Yo):(0,ne.$s)(A,$.intervalMillis),st={throttleEndTimeMillis:Date.now()+Dt,backoffCount:A+1};return $.setThrottleMetadata(ae,st),nr.debug(`Calling attemptFetch again in ${Dt} millis`),Hd(I,st,P,$)}}),go.apply(this,arguments)}class Gd{constructor(){this.listeners=[]}addEventListener(C){this.listeners.push(C)}abort(){this.listeners.forEach(C=>C())}}let ec,za;function tc(){return(tc=(0,R.Z)(function*(I,C,A,P,$){if($&&$.global)I("event",A,P);else{const q=yield C;I("event",A,Object.assign(Object.assign({},P),{send_to:q}))}})).apply(this,arguments)}function Pi(){return(Pi=(0,R.Z)(function*(){if(!(0,ne.hl)())return nr.warn(gr.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,ne.eu)()}catch(I){return nr.warn(gr.create("indexeddb-unavailable",{errorInfo:I?.toString()}).message),!1}return!0})).apply(this,arguments)}function wn(){return wn=(0,R.Z)(function*(I,C,A,P,$,q,ae){var He;const Ne=function Kr(I){return ai.apply(this,arguments)}(I);Ne.then(Cn=>{A[Cn.measurementId]=Cn.appId,I.options.measurementId&&Cn.measurementId!==I.options.measurementId&&nr.warn(`The measurement ID in the local Firebase config (${I.options.measurementId}) does not match the measurement ID fetched from the server (${Cn.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(Cn=>nr.error(Cn)),C.push(Ne);const We=function mr(){return Pi.apply(this,arguments)}().then(Cn=>{if(Cn)return P.getId()}),[Dt,st]=yield Promise.all([Ne,We]);(function Xu(I){const C=window.document.getElementsByTagName("script");for(const A of Object.values(C))if(A.src&&A.src.includes(Ku)&&A.src.includes(I))return A;return null})(q)||function Qu(I,C){const A=function Yu(I,C){let A;return window.trustedTypes&&(A=window.trustedTypes.createPolicy(I,C)),A}("firebase-js-sdk-policy",{createScriptURL:Zi}),P=document.createElement("script"),$=`${Ku}?l=${I}&id=${C}`;P.src=A?A?.createScriptURL($):$,P.async=!0,document.head.appendChild(P)}(q,Dt.measurementId),za&&($("consent","default",za),function rc(I){za=I}(void 0)),$("js",new Date);const Or=null!==(He=ae?.config)&&void 0!==He?He:{};return Or[vt]="firebase",Or.update=!0,null!=st&&(Or[Kg]=st),$("config",Dt.measurementId,Or),ec&&($("set",ec),function qa(I){ec=I}(void 0)),Dt.measurementId}),wn.apply(this,arguments)}class mo{constructor(C){this.app=C}_delete(){return delete ui[this.app.options.appId],Promise.resolve()}}let ui={},Kd=[];const Il={};let Dr,Gn,Wa="dataLayer",Xo=!1;function Za(I,C,A){!function ic(){const I=[];if((0,ne.ru)()&&I.push("This is a browser extension environment."),(0,ne.zI)()||I.push("Cookies are not available."),I.length>0){const C=I.map((P,$)=>`(${$+1}) ${P}`).join(" "),A=gr.create("invalid-analytics-context",{errorInfo:C});nr.warn(A.message)}}();const P=I.options.appId;if(!P)throw gr.create("no-app-id");if(!I.options.apiKey){if(!I.options.measurementId)throw gr.create("no-api-key");nr.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${I.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=ui[P])throw gr.create("already-exists",{id:P});if(!Xo){!function Yg(I){let C=[];Array.isArray(window[I])?C=window[I]:window[I]=C}(Wa);const{wrappedGtag:q,gtagCore:ae}=function rr(I,C,A,P,$){let q=function(...ae){window[P].push(arguments)};return window[$]&&"function"==typeof window[$]&&(q=window[$]),window[$]=function Ju(I,C,A,P){function q(){return q=(0,R.Z)(function*(ae,...He){try{if("event"===ae){const[Ne,We]=He;yield function Bt(I,C,A,P,$){return Oi.apply(this,arguments)}(I,C,A,Ne,We)}else if("config"===ae){const[Ne,We]=He;yield function jd(I,C,A,P,$,q){return Te.apply(this,arguments)}(I,C,A,P,Ne,We)}else if("consent"===ae){const[Ne]=He;I("consent","update",Ne)}else if("get"===ae){const[Ne,We,Dt]=He;I("get",Ne,We,Dt)}else if("set"===ae){const[Ne]=He;I("set",Ne)}else I(ae,...He)}catch(Ne){nr.error(Ne)}}),q.apply(this,arguments)}return function $(ae){return q.apply(this,arguments)}}(q,I,C,A),{gtagCore:q,wrappedGtag:window[$]}}(ui,Kd,Il,Wa,"gtag");Gn=q,Dr=ae,Xo=!0}return ui[P]=function Yt(I,C,A,P,$,q,ae){return wn.apply(this,arguments)}(I,Kd,Il,C,Dr,Wa,A),new mo(I)}function Ki(){return ys.apply(this,arguments)}function ys(){return(ys=(0,R.Z)(function*(){if((0,ne.ru)()||!(0,ne.zI)()||!(0,ne.hl)())return!1;try{return yield(0,ne.eu)()}catch{return!1}})).apply(this,arguments)}const ta="@firebase/analytics";!function Jd(){(0,oe._registerComponent)(new ve.wA(un,(C,{options:A})=>Za(C.getProvider("app").getImmediate(),C.getProvider("installations-internal").getImmediate(),A),"PUBLIC")),(0,oe._registerComponent)(new ve.wA("analytics-internal",function I(C){try{const A=C.getProvider(un).getImmediate();return{logEvent:(P,$,q)=>function Cl(I,C,A,P){I=(0,ne.m9)(I),function Qg(I,C,A,P,$){return tc.apply(this,arguments)}(Gn,ui[I.app.options.appId],C,A,P).catch($=>nr.error($))}(A,P,$,q)}}catch(A){throw gr.create("interop-component-reg-failed",{reason:A})}},"PRIVATE")),(0,oe.registerVersion)(ta,"0.10.0"),(0,oe.registerVersion)(ta,"0.10.0","esm2017")}();var Yi=k(1954),Ka=k(2631);const Tl=new class bl extends Ka.v{}(class sc extends Yi.o{constructor(C,A){super(C,A),this.scheduler=C,this.work=A}schedule(C,A=0){return A>0?super.schedule(C,A):(this.delay=A,this.state=C,this.scheduler.flush(this),this)}execute(C,A){return A>0||this.closed?super.execute(C,A):this._execute(C,A)}requestAsyncId(C,A,P=0){return null!=P&&P>0||null==P&&this.delay>0?super.requestAsyncId(C,A,P):(C.flush(this),0)}});var oc=k(6321),Ri=k(4674),Ya=k(9360),ks=k(8251),vo=k(2737),wo=k(5137),uc=k(3093);const cc=new g.GfV("7.6.1"),Fs="__angularfire_symbol__analyticsIsSupportedValue",na="__angularfire_symbol__analyticsIsSupported",Qa="__angularfire_symbol__remoteConfigIsSupportedValue",ra="__angularfire_symbol__remoteConfigIsSupported",zn="__angularfire_symbol__messagingIsSupportedValue",ci="__angularfire_symbol__messagingIsSupported";function Ja(I,C,A){if(C){if(1===C.length)return C[0];const q=C.filter(ae=>ae.app===A);if(1===q.length)return q[0]}return A.container.getProvider(I).getImmediate({optional:!0})}globalThis[na]||(globalThis[na]=Ki().then(I=>globalThis[Fs]=I).catch(()=>globalThis[Fs]=!1)),globalThis[ci]||(globalThis[ci]=fo().then(I=>globalThis[zn]=I).catch(()=>globalThis[zn]=!1)),globalThis[ra]||(globalThis[ra]=Ss().then(I=>globalThis[Qa]=I).catch(()=>globalThis[Qa]=!1));const lc=(I,C)=>{const A=C?[C]:(0,J.C6)(),P=[];return A.forEach($=>{$.container.getProvider(I).instances.forEach(ae=>{P.includes(ae)||P.push(ae)})}),P};function En(){}class Xa{constructor(C,A=Tl){this.zone=C,this.delegate=A}now(){return this.delegate.now()}schedule(C,A,P){const $=this.zone;return this.delegate.schedule(function(ae){$.runGuarded(()=>{C.apply(this,[ae])})},A,P)}}class dc{constructor(C){this.zone=C,this.task=null}call(C,A){const P=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",En,{},En,En)),A.pipe(function ac(I,C,A){const P=(0,Ri.m)(I)||C||A?{next:I,error:C,complete:A}:I;return P?(0,Ya.e)(($,q)=>{var ae;null===(ae=P.subscribe)||void 0===ae||ae.call(P);let He=!0;$.subscribe((0,ks.x)(q,Ne=>{var We;null===(We=P.next)||void 0===We||We.call(P,Ne),q.next(Ne)},()=>{var Ne;He=!1,null===(Ne=P.complete)||void 0===Ne||Ne.call(P),q.complete()},Ne=>{var We;He=!1,null===(We=P.error)||void 0===We||We.call(P,Ne),q.error(Ne)},()=>{var Ne,We;He&&(null===(Ne=P.unsubscribe)||void 0===Ne||Ne.call(P)),null===(We=P.finalize)||void 0===We||We.call(P)}))}):vo.y}({next:P,complete:P,error:P})).subscribe(C).add(P)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let Al=(()=>{class I{constructor(A){this.ngZone=A,this.outsideAngular=A.runOutsideAngular(()=>new Xa(Zone.current)),this.insideAngular=A.run(()=>new Xa(Zone.current,oc.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return I.\u0275fac=function(A){return new(A||I)(g.LFG(g.R0b))},I.\u0275prov=g.Yz7({token:I,factory:I.\u0275fac,providedIn:"root"}),I})();function ia(){const I=globalThis.\u0275AngularFireScheduler;if(!I)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return I}function sa(I){return ia(),function Ml(I){return function(A){return(A=A.lift(new dc(I.ngZone))).pipe((0,wo.R)(I.outsideAngular),(0,uc.Q)(I.insideAngular))}}(ia())(I)}},9058:(ft,Me,k)=>{k.d(Me,{$s:()=>Gr,BH:()=>Y,G6:()=>ls,L:()=>we,LL:()=>be,Pz:()=>he,Sg:()=>Ce,UG:()=>re,US:()=>ve,ZB:()=>ie,ZR:()=>Ie,aH:()=>K,b$:()=>sr,eu:()=>le,hl:()=>ue,jU:()=>ut,m9:()=>vi,ne:()=>rn,pd:()=>Ft,r3:()=>nn,ru:()=>kt,tV:()=>V,uI:()=>Ze,vZ:()=>ii,w1:()=>cs,xO:()=>ba,xb:()=>ri,z$:()=>ke,zI:()=>ge,zd:()=>gt});const oe=function(B){const L=[];let G=0;for(let ye=0;ye<B.length;ye++){let te=B.charCodeAt(ye);te<128?L[G++]=te:te<2048?(L[G++]=te>>6|192,L[G++]=63&te|128):55296==(64512&te)&&ye+1<B.length&&56320==(64512&B.charCodeAt(ye+1))?(te=65536+((1023&te)<<10)+(1023&B.charCodeAt(++ye)),L[G++]=te>>18|240,L[G++]=te>>12&63|128,L[G++]=te>>6&63|128,L[G++]=63&te|128):(L[G++]=te>>12|224,L[G++]=te>>6&63|128,L[G++]=63&te|128)}return L},ve={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(B,L){if(!Array.isArray(B))throw Error("encodeByteArray takes an array as a parameter");this.init_();const G=L?this.byteToCharMapWebSafe_:this.byteToCharMap_,ye=[];for(let te=0;te<B.length;te+=3){const Ye=B[te],Et=te+1<B.length,yt=Et?B[te+1]:0,Qn=te+2<B.length,bt=Qn?B[te+2]:0;let Hn=(15&yt)<<2|bt>>6,Gi=63&bt;Qn||(Gi=64,Et||(Hn=64)),ye.push(G[Ye>>2],G[(3&Ye)<<4|yt>>4],G[Hn],G[Gi])}return ye.join("")},encodeString(B,L){return this.HAS_NATIVE_SUPPORT&&!L?btoa(B):this.encodeByteArray(oe(B),L)},decodeString(B,L){return this.HAS_NATIVE_SUPPORT&&!L?atob(B):function(B){const L=[];let G=0,ye=0;for(;G<B.length;){const te=B[G++];if(te<128)L[ye++]=String.fromCharCode(te);else if(te>191&&te<224){const Ye=B[G++];L[ye++]=String.fromCharCode((31&te)<<6|63&Ye)}else if(te>239&&te<365){const Qn=((7&te)<<18|(63&B[G++])<<12|(63&B[G++])<<6|63&B[G++])-65536;L[ye++]=String.fromCharCode(55296+(Qn>>10)),L[ye++]=String.fromCharCode(56320+(1023&Qn))}else{const Ye=B[G++],Et=B[G++];L[ye++]=String.fromCharCode((15&te)<<12|(63&Ye)<<6|63&Et)}}return L.join("")}(this.decodeStringToByteArray(B,L))},decodeStringToByteArray(B,L){this.init_();const G=L?this.charToByteMapWebSafe_:this.charToByteMap_,ye=[];for(let te=0;te<B.length;){const Ye=G[B.charAt(te++)],yt=te<B.length?G[B.charAt(te)]:0;++te;const bt=te<B.length?G[B.charAt(te)]:64;++te;const jt=te<B.length?G[B.charAt(te)]:64;if(++te,null==Ye||null==yt||null==bt||null==jt)throw new fe;ye.push(Ye<<2|yt>>4),64!==bt&&(ye.push(yt<<4&240|bt>>2),64!==jt&&ye.push(bt<<6&192|jt))}return ye},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let B=0;B<this.ENCODED_VALS.length;B++)this.byteToCharMap_[B]=this.ENCODED_VALS.charAt(B),this.charToByteMap_[this.byteToCharMap_[B]]=B,this.byteToCharMapWebSafe_[B]=this.ENCODED_VALS_WEBSAFE.charAt(B),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[B]]=B,B>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(B)]=B,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(B)]=B)}}};class fe extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const we=function(B){return function(B){const L=oe(B);return ve.encodeByteArray(L,!0)}(B).replace(/\./g,"")},V=function(B){try{return ve.decodeString(B,!0)}catch(L){console.error("base64Decode failed: ",L)}return null};function ie(B,L){if(!(L instanceof Object))return L;switch(L.constructor){case Date:return new Date(L.getTime());case Object:void 0===B&&(B={});break;case Array:B=[];break;default:return L}for(const G in L)!L.hasOwnProperty(G)||!qe(G)||(B[G]=ie(B[G],L[G]));return B}function qe(B){return"__proto__"!==B}const Le=()=>{try{return function Oe(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const B=process.env.__FIREBASE_DEFAULTS__;return B?JSON.parse(B):void 0})()||(()=>{if(typeof document>"u")return;let B;try{B=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const L=B&&V(B[1]);return L&&JSON.parse(L)})()}catch(B){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${B}`)}},K=()=>{var B;return null===(B=Le())||void 0===B?void 0:B.config},he=B=>{var L;return null===(L=Le())||void 0===L?void 0:L[`_${B}`]};class Y{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((L,G)=>{this.resolve=L,this.reject=G})}wrapCallback(L){return(G,ye)=>{G?this.reject(G):this.resolve(ye),"function"==typeof L&&(this.promise.catch(()=>{}),1===L.length?L(G):L(G,ye))}}}function Ce(B,L){if(B.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const ye=L||"demo-project",te=B.iat||0,Ye=B.sub||B.user_id;if(!Ye)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const Et=Object.assign({iss:`https://securetoken.google.com/${ye}`,aud:ye,iat:te,exp:te+3600,auth_time:te,sub:Ye,user_id:Ye,firebase:{sign_in_provider:"custom",identities:{}}},B);return[we(JSON.stringify({alg:"none",type:"JWT"})),we(JSON.stringify(Et)),""].join(".")}function ke(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function Ze(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(ke())}function re(){var B;const L=null===(B=Le())||void 0===B?void 0:B.forceEnvironment;if("node"===L)return!0;if("browser"===L)return!1;try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function ut(){return"object"==typeof self&&self.self===self}function kt(){const B="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof B&&void 0!==B.id}function sr(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function cs(){const B=ke();return B.indexOf("MSIE ")>=0||B.indexOf("Trident/")>=0}function ls(){return!re()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function ue(){try{return"object"==typeof indexedDB}catch{return!1}}function le(){return new Promise((B,L)=>{try{let G=!0;const ye="validate-browser-context-for-indexeddb-analytics-module",te=self.indexedDB.open(ye);te.onsuccess=()=>{te.result.close(),G||self.indexedDB.deleteDatabase(ye),B(!0)},te.onupgradeneeded=()=>{G=!1},te.onerror=()=>{var Ye;L((null===(Ye=te.error)||void 0===Ye?void 0:Ye.message)||"")}}catch(G){L(G)}})}function ge(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}class Ie extends Error{constructor(L,G,ye){super(G),this.code=L,this.customData=ye,this.name="FirebaseError",Object.setPrototypeOf(this,Ie.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,be.prototype.create)}}class be{constructor(L,G,ye){this.service=L,this.serviceName=G,this.errors=ye}create(L,...G){const ye=G[0]||{},te=`${this.service}/${L}`,Ye=this.errors[L],Et=Ye?function et(B,L){return B.replace($e,(G,ye)=>{const te=L[ye];return null!=te?String(te):`<${ye}?>`})}(Ye,ye):"Error";return new Ie(te,`${this.serviceName}: ${Et} (${te}).`,ye)}}const $e=/\{\$([^}]+)}/g;function nn(B,L){return Object.prototype.hasOwnProperty.call(B,L)}function ri(B){for(const L in B)if(Object.prototype.hasOwnProperty.call(B,L))return!1;return!0}function ii(B,L){if(B===L)return!0;const G=Object.keys(B),ye=Object.keys(L);for(const te of G){if(!ye.includes(te))return!1;const Ye=B[te],Et=L[te];if(si(Ye)&&si(Et)){if(!ii(Ye,Et))return!1}else if(Ye!==Et)return!1}for(const te of ye)if(!G.includes(te))return!1;return!0}function si(B){return null!==B&&"object"==typeof B}function ba(B){const L=[];for(const[G,ye]of Object.entries(B))Array.isArray(ye)?ye.forEach(te=>{L.push(encodeURIComponent(G)+"="+encodeURIComponent(te))}):L.push(encodeURIComponent(G)+"="+encodeURIComponent(ye));return L.length?"&"+L.join("&"):""}function gt(B){const L={};return B.replace(/^\?/,"").split("&").forEach(ye=>{if(ye){const[te,Ye]=ye.split("=");L[decodeURIComponent(te)]=decodeURIComponent(Ye)}}),L}function Ft(B){const L=B.indexOf("?");if(!L)return"";const G=B.indexOf("#",L);return B.substring(L,G>0?G:void 0)}function rn(B,L){const G=new vn(B,L);return G.subscribe.bind(G)}class vn{constructor(L,G){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=G,this.task.then(()=>{L(this)}).catch(ye=>{this.error(ye)})}next(L){this.forEachObserver(G=>{G.next(L)})}error(L){this.forEachObserver(G=>{G.error(L)}),this.close(L)}complete(){this.forEachObserver(L=>{L.complete()}),this.close()}subscribe(L,G,ye){let te;if(void 0===L&&void 0===G&&void 0===ye)throw new Error("Missing Observer.");te=function Qt(B,L){if("object"!=typeof B||null===B)return!1;for(const G of L)if(G in B&&"function"==typeof B[G])return!0;return!1}(L,["next","error","complete"])?L:{next:L,error:G,complete:ye},void 0===te.next&&(te.next=ar),void 0===te.error&&(te.error=ar),void 0===te.complete&&(te.complete=ar);const Ye=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?te.error(this.finalError):te.complete()}catch{}}),this.observers.push(te),Ye}unsubscribeOne(L){void 0===this.observers||void 0===this.observers[L]||(delete this.observers[L],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(L){if(!this.finalized)for(let G=0;G<this.observers.length;G++)this.sendOne(G,L)}sendOne(L,G){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[L])try{G(this.observers[L])}catch(ye){typeof console<"u"&&console.error&&console.error(ye)}})}close(L){this.finalized||(this.finalized=!0,void 0!==L&&(this.finalError=L),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function ar(){}const bs=1e3,xi=2,Kn=144e5,Yn=.5;function Gr(B,L=bs,G=xi){const ye=L*Math.pow(G,B),te=Math.round(Yn*ye*(Math.random()-.5)*2);return Math.min(Kn,ye+te)}function vi(B){return B&&B._delegate?B._delegate:B}},8680:(ft,Me,k)=>{var g=k(7989);let J=null;function R(){return J}class ne{}const ve=new g.OlP("DocumentToken"),Lo=/\s+/,Zc=[];let Vo=(()=>{class n{constructor(t,i,a,c){this._iterableDiffers=t,this._keyValueDiffers=i,this._ngEl=a,this._renderer=c,this.initialClasses=Zc,this.stateMap=new Map}set klass(t){this.initialClasses=null!=t?t.trim().split(Lo):Zc}set ngClass(t){this.rawClass="string"==typeof t?t.trim().split(Lo):t}ngDoCheck(){for(const i of this.initialClasses)this._updateState(i,!0);const t=this.rawClass;if(Array.isArray(t)||t instanceof Set)for(const i of t)this._updateState(i,!0);else if(null!=t)for(const i of Object.keys(t))this._updateState(i,!!t[i]);this._applyStateDiff()}_updateState(t,i){const a=this.stateMap.get(t);void 0!==a?(a.enabled!==i&&(a.changed=!0,a.enabled=i),a.touched=!0):this.stateMap.set(t,{enabled:i,changed:!0,touched:!0})}_applyStateDiff(){for(const t of this.stateMap){const i=t[0],a=t[1];a.changed?(this._toggleClass(i,a.enabled),a.changed=!1):a.touched||(a.enabled&&this._toggleClass(i,!1),this.stateMap.delete(i)),a.touched=!1}}_toggleClass(t,i){(t=t.trim()).length>0&&t.split(Lo).forEach(a=>{i?this._renderer.addClass(this._ngEl.nativeElement,a):this._renderer.removeClass(this._ngEl.nativeElement,a)})}static#e=this.\u0275fac=function(i){return new(i||n)(g.Y36(g.ZZ4),g.Y36(g.aQg),g.Y36(g.SBq),g.Y36(g.Qsj))};static#t=this.\u0275dir=g.lG2({type:n,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"},standalone:!0})}return n})();class Ys{constructor(e,t,i,a){this.$implicit=e,this.ngForOf=t,this.index=i,this.count=a}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let Aa=(()=>{class n{set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}constructor(t,i,a){this._viewContainer=t,this._template=i,this._differs=a,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const i=this._viewContainer;t.forEachOperation((a,c,d)=>{if(null==a.previousIndex)i.createEmbeddedView(this._template,new Ys(a.item,this._ngForOf,-1,-1),null===d?void 0:d);else if(null==d)i.remove(null===c?void 0:c);else if(null!==c){const _=i.get(c);i.move(_,d),Yc(_,a)}});for(let a=0,c=i.length;a<c;a++){const _=i.get(a).context;_.index=a,_.count=c,_.ngForOf=this._ngForOf}t.forEachIdentityChange(a=>{Yc(i.get(a.currentIndex),a)})}static ngTemplateContextGuard(t,i){return!0}static#e=this.\u0275fac=function(i){return new(i||n)(g.Y36(g.s_b),g.Y36(g.Rgc),g.Y36(g.ZZ4))};static#t=this.\u0275dir=g.lG2({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0})}return n})();function Yc(n,e){n.context.$implicit=e.item}let Qs=(()=>{class n{constructor(t,i){this._viewContainer=t,this._context=new Vg,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=i}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){Ef("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){Ef("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,i){return!0}static#e=this.\u0275fac=function(i){return new(i||n)(g.Y36(g.s_b),g.Y36(g.Rgc))};static#t=this.\u0275dir=g.lG2({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0})}return n})();class Vg{constructor(){this.$implicit=null,this.ngIf=null}}function Ef(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${(0,g.AaK)(e)}'.`)}let an=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=g.oAB({type:n});static#n=this.\u0275inj=g.cJS({})}return n})();function ps(n){return"server"===n}class Rd extends ne{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class qu extends Rd{static makeCurrent(){!function oe(n){J||(J=n)}(new qu)}onAndCancel(e,t,i){return e.addEventListener(t,i),()=>{e.removeEventListener(t,i)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function xf(){return ja=ja||document.querySelector("base"),ja?ja.getAttribute("href"):null}();return null==t?null:function Wg(n){fl=fl||document.createElement("a"),fl.setAttribute("href",n);const e=fl.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){ja=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function zi(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const i=t.indexOf("="),[a,c]=-1==i?[t,""]:[t.slice(0,i),t.slice(i+1)];if(a.trim()===e)return decodeURIComponent(c)}return null}(document.cookie,e)}}let fl,ja=null,Nf=(()=>{class n{build(){return new XMLHttpRequest}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac})}return n})();const gl=new g.OlP("EventManagerPlugins");let Of=(()=>{class n{constructor(t,i){this._zone=i,this._eventNameToPlugin=new Map,t.forEach(a=>{a.manager=this}),this._plugins=t.slice().reverse()}addEventListener(t,i,a){return this._findPluginFor(i).addEventListener(t,i,a)}getZone(){return this._zone}_findPluginFor(t){let i=this._eventNameToPlugin.get(t);if(i)return i;if(i=this._plugins.find(c=>c.supports(t)),!i)throw new g.vHH(5101,!1);return this._eventNameToPlugin.set(t,i),i}static#e=this.\u0275fac=function(i){return new(i||n)(g.LFG(gl),g.LFG(g.R0b))};static#t=this.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac})}return n})();class Wu{constructor(e){this._doc=e}}const Ha="ng-app-id";let Pf=(()=>{class n{constructor(t,i,a,c={}){this.doc=t,this.appId=i,this.nonce=a,this.platformId=c,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=ps(c),this.resetHostNodes()}addStyles(t){for(const i of t)1===this.changeUsageCount(i,1)&&this.onStyleAdded(i)}removeStyles(t){for(const i of t)this.changeUsageCount(i,-1)<=0&&this.onStyleRemoved(i)}ngOnDestroy(){const t=this.styleNodesInDOM;t&&(t.forEach(i=>i.remove()),t.clear());for(const i of this.getAllStyles())this.onStyleRemoved(i);this.resetHostNodes()}addHost(t){this.hostNodes.add(t);for(const i of this.getAllStyles())this.addStyleToHost(t,i)}removeHost(t){this.hostNodes.delete(t)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(t){for(const i of this.hostNodes)this.addStyleToHost(i,t)}onStyleRemoved(t){const i=this.styleRef;i.get(t)?.elements?.forEach(a=>a.remove()),i.delete(t)}collectServerRenderedStyles(){const t=this.doc.head?.querySelectorAll(`style[${Ha}="${this.appId}"]`);if(t?.length){const i=new Map;return t.forEach(a=>{null!=a.textContent&&i.set(a.textContent,a)}),i}return null}changeUsageCount(t,i){const a=this.styleRef;if(a.has(t)){const c=a.get(t);return c.usage+=i,c.usage}return a.set(t,{usage:i,elements:[]}),i}getStyleElement(t,i){const a=this.styleNodesInDOM,c=a?.get(i);if(c?.parentNode===t)return a.delete(i),c.removeAttribute(Ha),c;{const d=this.doc.createElement("style");return this.nonce&&d.setAttribute("nonce",this.nonce),d.textContent=i,this.platformIsServer&&d.setAttribute(Ha,this.appId),d}}addStyleToHost(t,i){const a=this.getStyleElement(t,i);t.appendChild(a);const c=this.styleRef,d=c.get(i)?.elements;d?d.push(a):c.set(i,{elements:[a],usage:1})}resetHostNodes(){const t=this.hostNodes;t.clear(),t.add(this.doc.head)}static#e=this.\u0275fac=function(i){return new(i||n)(g.LFG(ve),g.LFG(g.AFp),g.LFG(g.Ojb,8),g.LFG(g.Lbi))};static#t=this.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac})}return n})();const uo={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},Wi=/%COMP%/g,Ni=new g.OlP("RemoveStylesOnCompDestroy",{providedIn:"root",factory:()=>!1});function Kt(n,e){return e.map(t=>t.replace(Wi,n))}let lo=(()=>{class n{constructor(t,i,a,c,d,_,D,b=null){this.eventManager=t,this.sharedStylesHost=i,this.appId=a,this.removeStylesOnCompDestroy=c,this.doc=d,this.platformId=_,this.ngZone=D,this.nonce=b,this.rendererByCompId=new Map,this.platformIsServer=ps(_),this.defaultRenderer=new ho(t,d,D,this.platformIsServer)}createRenderer(t,i){if(!t||!i)return this.defaultRenderer;this.platformIsServer&&i.encapsulation===g.ifc.ShadowDom&&(i={...i,encapsulation:g.ifc.Emulated});const a=this.getOrCreateRenderer(t,i);return a instanceof Ff?a.applyToHost(t):a instanceof pr&&a.applyStyles(),a}getOrCreateRenderer(t,i){const a=this.rendererByCompId;let c=a.get(i.id);if(!c){const d=this.doc,_=this.ngZone,D=this.eventManager,b=this.sharedStylesHost,M=this.removeStylesOnCompDestroy,O=this.platformIsServer;switch(i.encapsulation){case g.ifc.Emulated:c=new Ff(D,b,i,this.appId,M,d,_,O);break;case g.ifc.ShadowDom:return new fo(D,b,t,i,d,_,this.nonce,O);default:c=new pr(D,b,i,M,d,_,O)}a.set(i.id,c)}return c}ngOnDestroy(){this.rendererByCompId.clear()}static#e=this.\u0275fac=function(i){return new(i||n)(g.LFG(Of),g.LFG(Pf),g.LFG(g.AFp),g.LFG(Ni),g.LFG(ve),g.LFG(g.Lbi),g.LFG(g.R0b),g.LFG(g.Ojb))};static#t=this.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac})}return n})();class ho{constructor(e,t,i,a){this.eventManager=e,this.doc=t,this.ngZone=i,this.platformIsServer=a,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?this.doc.createElementNS(uo[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(ml(e)?e.content:e).appendChild(t)}insertBefore(e,t,i){e&&(ml(e)?e.content:e).insertBefore(t,i)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let i="string"==typeof e?this.doc.querySelector(e):e;if(!i)throw new g.vHH(-5104,!1);return t||(i.textContent=""),i}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,i,a){if(a){t=a+":"+t;const c=uo[a];c?e.setAttributeNS(c,t,i):e.setAttribute(t,i)}else e.setAttribute(t,i)}removeAttribute(e,t,i){if(i){const a=uo[i];a?e.removeAttributeNS(a,t):e.removeAttribute(`${i}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,i,a){a&(g.JOm.DashCase|g.JOm.Important)?e.style.setProperty(t,i,a&g.JOm.Important?"important":""):e.style[t]=i}removeStyle(e,t,i){i&g.JOm.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,i){e[t]=i}setValue(e,t){e.nodeValue=t}listen(e,t,i){if("string"==typeof e&&!(e=R().getGlobalEventTarget(this.doc,e)))throw new Error(`Unsupported event target ${e} for event ${t}`);return this.eventManager.addEventListener(e,t,this.decoratePreventDefault(i))}decoratePreventDefault(e){return t=>{if("__ngUnwrap__"===t)return e;!1===(this.platformIsServer?this.ngZone.runGuarded(()=>e(t)):e(t))&&t.preventDefault()}}}function ml(n){return"TEMPLATE"===n.tagName&&void 0!==n.content}class fo extends ho{constructor(e,t,i,a,c,d,_,D){super(e,c,d,D),this.sharedStylesHost=t,this.hostEl=i,this.shadowRoot=i.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const b=Kt(a.id,a.styles);for(const M of b){const O=document.createElement("style");_&&O.setAttribute("nonce",_),O.textContent=M,this.shadowRoot.appendChild(O)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,i){return super.insertBefore(this.nodeOrShadowRoot(e),t,i)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class pr extends ho{constructor(e,t,i,a,c,d,_,D){super(e,c,d,_),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=a,this.styles=D?Kt(D,i.styles):i.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}}class Ff extends pr{constructor(e,t,i,a,c,d,_,D){const b=a+"-"+i.id;super(e,t,i,c,d,_,D,b),this.contentAttr=function Fd(n){return"_ngcontent-%COMP%".replace(Wi,n)}(b),this.hostAttr=function Ld(n){return"_nghost-%COMP%".replace(Wi,n)}(b)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){const i=super.createElement(e,t);return super.setAttribute(i,this.contentAttr,""),i}}let Ko=(()=>{class n extends Wu{constructor(t){super(t)}supports(t){return!0}addEventListener(t,i,a){return t.addEventListener(i,a,!1),()=>this.removeEventListener(t,i,a)}removeEventListener(t,i,a){return t.removeEventListener(i,a)}static#e=this.\u0275fac=function(i){return new(i||n)(g.LFG(ve))};static#t=this.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac})}return n})();const Lf=["alt","control","meta","shift"],Zr={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Vf={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let yl=(()=>{class n extends Wu{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,i,a){const c=n.parseEventName(i),d=n.eventCallback(c.fullKey,a,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>R().onAndCancel(t,c.domEventName,d))}static parseEventName(t){const i=t.toLowerCase().split("."),a=i.shift();if(0===i.length||"keydown"!==a&&"keyup"!==a)return null;const c=n._normalizeKey(i.pop());let d="",_=i.indexOf("code");if(_>-1&&(i.splice(_,1),d="code."),Lf.forEach(b=>{const M=i.indexOf(b);M>-1&&(i.splice(M,1),d+=b+".")}),d+=c,0!=i.length||0===c.length)return null;const D={};return D.domEventName=a,D.fullKey=d,D}static matchEventFullKeyCode(t,i){let a=Zr[t.key]||t.key,c="";return i.indexOf("code.")>-1&&(a=t.code,c="code."),!(null==a||!a)&&(a=a.toLowerCase()," "===a?a="space":"."===a&&(a="dot"),Lf.forEach(d=>{d!==a&&(0,Vf[d])(t)&&(c+=d+".")}),c+=a,c===i)}static eventCallback(t,i,a){return c=>{n.matchEventFullKeyCode(c,t)&&a.runGuarded(()=>i(c))}}static _normalizeKey(t){return"esc"===t?"escape":t}static#e=this.\u0275fac=function(i){return new(i||n)(g.LFG(ve))};static#t=this.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac})}return n})();const nr=(0,g.eFA)(g._c5,"browser",[{provide:g.Lbi,useValue:"browser"},{provide:g.g9A,useValue:function vt(){qu.makeCurrent()},multi:!0},{provide:ve,useFactory:function Bd(){return(0,g.RDi)(document),document},deps:[]}]),Ud=new g.OlP(""),gr=[{provide:g.rWj,useClass:class pl{addToWindow(e){g.dqk.getAngularTestability=(i,a=!0)=>{const c=e.findTestabilityInTree(i,a);if(null==c)throw new g.vHH(5103,!1);return c},g.dqk.getAllAngularTestabilities=()=>e.getAllTestabilities(),g.dqk.getAllAngularRootElements=()=>e.getAllRootElements(),g.dqk.frameworkStabilizers||(g.dqk.frameworkStabilizers=[]),g.dqk.frameworkStabilizers.push(i=>{const a=g.dqk.getAllAngularTestabilities();let c=a.length,d=!1;const _=function(D){d=d||D,c--,0==c&&i(d)};a.forEach(D=>{D.whenStable(_)})})}findTestabilityInTree(e,t,i){return null==t?null:e.getTestability(t)??(i?R().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}},deps:[]},{provide:g.lri,useClass:g.dDg,deps:[g.R0b,g.eoX,g.rWj]},{provide:g.dDg,useClass:g.dDg,deps:[g.R0b,g.eoX,g.rWj]}],Zi=[{provide:g.zSh,useValue:"root"},{provide:g.qLn,useFactory:function Vd(){return new g.qLn},deps:[]},{provide:gl,useClass:Ko,multi:!0,deps:[ve,g.R0b,g.Lbi]},{provide:gl,useClass:yl,multi:!0,deps:[ve]},lo,Pf,Of,{provide:g.FYo,useExisting:lo},{provide:class Di{},useClass:Nf,deps:[]},[]];let _l=(()=>{class n{constructor(t){}static withServerTransition(t){return{ngModule:n,providers:[{provide:g.AFp,useValue:t.appId}]}}static#e=this.\u0275fac=function(i){return new(i||n)(g.LFG(Ud,12))};static#t=this.\u0275mod=g.oAB({type:n});static#n=this.\u0275inj=g.cJS({providers:[...Zi,...gr],imports:[an,g.hGG]})}return n})();typeof window<"u"&&window;var Yr=k(2459),Ga=k(3018);const{isArray:Qo}=Array,{getPrototypeOf:Zd,prototype:Jo,keys:za}=Object;var mr=k(4829),Pi=k(4564),Yt=k(8251),wn=k(7398);const{isArray:mo}=Array;function Il(n,e){return n.reduce((t,i,a)=>(t[i]=e[a],t),{})}let Ps=(()=>{class n{constructor(t,i){this._renderer=t,this._elementRef=i,this.onChange=a=>{},this.onTouched=()=>{}}setProperty(t,i){this._renderer.setProperty(this._elementRef.nativeElement,t,i)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}static#e=this.\u0275fac=function(i){return new(i||n)(g.Y36(g.Qsj),g.Y36(g.SBq))};static#t=this.\u0275dir=g.lG2({type:n})}return n})(),Dr=(()=>{class n extends Ps{static#e=this.\u0275fac=function(){let t;return function(a){return(t||(t=g.n5z(n)))(a||n)}}();static#t=this.\u0275dir=g.lG2({type:n,features:[g.qOj]})}return n})();const Gn=new g.OlP("NgValueAccessor"),ic={provide:Gn,useExisting:(0,g.Gpc)(()=>Rs),multi:!0},jf=new g.OlP("CompositionEventMode");let Rs=(()=>{class n extends Ps{constructor(t,i,a){super(t,i),this._compositionMode=a,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function Za(){const n=R()?R().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(t){this.setProperty("value",t??"")}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}static#e=this.\u0275fac=function(i){return new(i||n)(g.Y36(g.Qsj),g.Y36(g.SBq),g.Y36(jf,8))};static#t=this.\u0275dir=g.lG2({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(i,a){1&i&&g.NdJ("input",function(d){return a._handleInput(d.target.value)})("blur",function(){return a.onTouched()})("compositionstart",function(){return a._compositionStart()})("compositionend",function(d){return a._compositionEnd(d.target.value)})},features:[g._Bn([ic]),g.qOj]})}return n})();const In=new g.OlP("NgValidators"),yo=new g.OlP("NgAsyncValidators");function sc(n){return null!=n}function Ka(n){return(0,g.QGY)(n)?(0,Yr.D)(n):n}function bl(n){let e={};return n.forEach(t=>{e=null!=t?{...e,...t}:e}),0===Object.keys(e).length?null:e}function Tl(n,e){return e.map(t=>t(n))}function oc(n){return n.map(e=>function Gf(n){return!n.validate}(e)?e:t=>e.validate(t))}function Ya(n){return null!=n?function Ri(n){if(!n)return null;const e=n.filter(sc);return 0==e.length?null:function(t){return bl(Tl(t,e))}}(oc(n)):null}function ks(n){if(!n)return null;const e=n.filter(sc);return 0==e.length?null:function(t){return function Wa(...n){const e=(0,Pi.jO)(n),{args:t,keys:i}=function rc(n){if(1===n.length){const e=n[0];if(Qo(e))return{args:e,keys:null};if(function qa(n){return n&&"object"==typeof n&&Zd(n)===Jo}(e)){const t=za(e);return{args:t.map(i=>e[i]),keys:t}}}return{args:n,keys:null}}(n),a=new Ga.y(c=>{const{length:d}=t;if(!d)return void c.complete();const _=new Array(d);let D=d,b=d;for(let M=0;M<d;M++){let O=!1;(0,mr.Xf)(t[M]).subscribe((0,Yt.x)(c,z=>{O||(O=!0,b--),_[M]=z},()=>D--,void 0,()=>{(!D||!O)&&(b||c.next(i?Il(i,_):_),c.complete())}))}});return e?a.pipe(function Kd(n){return(0,wn.U)(e=>function ui(n,e){return mo(e)?n(...e):n(e)}(n,e))}(e)):a}(Tl(t,e).map(Ka)).pipe((0,wn.U)(bl))}}function vo(n){return null!=n?ks(oc(n)):null}function ac(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function cc(n){return n?Array.isArray(n)?n:[n]:[]}function Fs(n,e){return Array.isArray(n)?n.includes(e):n===e}function na(n,e){const t=cc(e);return cc(n).forEach(a=>{Fs(t,a)||t.push(a)}),t}function Qa(n,e){return cc(e).filter(t=>!Fs(n,t))}class ra{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=Ya(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=vo(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}class zn extends ra{get formDirective(){return null}get path(){return null}}class ci extends ra{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class Qi{constructor(e){this._cd=e}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let Sl=(()=>{class n extends Qi{constructor(t){super(t)}static#e=this.\u0275fac=function(i){return new(i||n)(g.Y36(ci,2))};static#t=this.\u0275dir=g.lG2({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(i,a){2&i&&g.ekj("ng-untouched",a.isUntouched)("ng-touched",a.isTouched)("ng-pristine",a.isPristine)("ng-dirty",a.isDirty)("ng-valid",a.isValid)("ng-invalid",a.isInvalid)("ng-pending",a.isPending)},features:[g.qOj]})}return n})();const P="VALID",$="INVALID",q="PENDING",ae="DISABLED";function st(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}class aa{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===P}get invalid(){return this.status===$}get pending(){return this.status==q}get disabled(){return this.status===ae}get enabled(){return this.status!==ae}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(na(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(na(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(Qa(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(Qa(e,this._rawAsyncValidators))}hasValidator(e){return Fs(this._rawValidators,e)}hasAsyncValidator(e){return Fs(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=q,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=ae,this.errors=null,this._forEachChild(i=>{i.disable({...e,onlySelf:!0})}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(i=>i(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=P,this._forEachChild(i=>{i.enable({...e,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(i=>i(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===P||this.status===q)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?ae:P}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=q,this._hasOwnPendingAsyncValidator=!0;const t=Ka(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(i=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(i,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){let t=e;return null==t||(Array.isArray(t)||(t=t.split(".")),0===t.length)?null:t.reduce((i,a)=>i&&i._find(a),this)}getError(e,t){const i=t?this.get(t):this;return i&&i.errors?i.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new g.vpe,this.statusChanges=new g.vpe}_calculateStatus(){return this._allControlsDisabled()?ae:this.errors?$:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(q)?q:this._anyControlsHaveStatus($)?$:P}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){st(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=function Ne(n){return Array.isArray(n)?Ya(n):n||null}(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=function Dt(n){return Array.isArray(n)?vo(n):n||null}(this._rawAsyncValidators)}}const eu=new g.OlP("CallSetDisabledState",{providedIn:"root",factory:()=>pc}),pc="always";function Ol(n,e,t=pc){(function Jg(n,e){const t=function wo(n){return n._rawValidators}(n);null!==e.validator?n.setValidators(ac(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const i=function uc(n){return n._rawAsyncValidators}(n);null!==e.asyncValidator?n.setAsyncValidators(ac(i,e.asyncValidator)):"function"==typeof i&&n.setAsyncValidators([i]);const a=()=>n.updateValueAndValidity();gc(e._rawValidators,a),gc(e._rawAsyncValidators,a)})(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||"always"===t)&&e.valueAccessor.setDisabledState?.(n.disabled),function Xg(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&P_(n,e)})}(n,e),function tu(n,e){const t=(i,a)=>{e.valueAccessor.writeValue(i),a&&e.viewToModelUpdate(i)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function O_(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&P_(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function mc(n,e){if(e.valueAccessor.setDisabledState){const t=i=>{e.valueAccessor.setDisabledState(i)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}function gc(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function P_(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function iu(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}function rh(n){return"object"==typeof n&&null!==n&&2===Object.keys(n).length&&"value"in n&&"disabled"in n}const V_=class extends aa{constructor(e=null,t,i){super(function He(n){return(st(n)?n.validators:n)||null}(t),function We(n,e){return(st(e)?e.asyncValidators:n)||null}(i,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),st(t)&&(t.nonNullable||t.initialValueIsDefault)&&(this.defaultValue=rh(e)?e.value:e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(i=>i(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){iu(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){iu(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){rh(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}},Jf={provide:ci,useExisting:(0,g.Gpc)(()=>Fl)},U_=(()=>Promise.resolve())();let Fl=(()=>{class n extends ci{constructor(t,i,a,c,d,_){super(),this._changeDetectorRef=d,this.callSetDisabledState=_,this.control=new V_,this._registered=!1,this.name="",this.update=new g.vpe,this._parent=t,this._setValidators(i),this._setAsyncValidators(a),this.valueAccessor=function ru(n,e){if(!e)return null;let t,i,a;return Array.isArray(e),e.forEach(c=>{c.constructor===Rs?t=c:function k_(n){return Object.getPrototypeOf(n.constructor)===Dr}(c)?i=c:a=c}),a||i||t||null}(0,c)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){const i=t.name.previousValue;this.formDirective.removeControl({name:i,path:this._getPath(i)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),function nu(n,e){if(!n.hasOwnProperty("model"))return!1;const t=n.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)}(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){Ol(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(t){U_.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){const i=t.isDisabled.currentValue,a=0!==i&&(0,g.VuI)(i);U_.then(()=>{a&&!this.control.disabled?this.control.disable():!a&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?function Nl(n,e){return[...e.path,n]}(t,this._parent):[t]}static#e=this.\u0275fac=function(i){return new(i||n)(g.Y36(zn,9),g.Y36(In,10),g.Y36(yo,10),g.Y36(Gn,10),g.Y36(g.sBO,8),g.Y36(eu,8))};static#t=this.\u0275dir=g.lG2({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[g._Bn([Jf]),g.qOj,g.TTD]})}return n})(),H_=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=g.oAB({type:n});static#n=this.\u0275inj=g.cJS({})}return n})(),tt=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=g.oAB({type:n});static#n=this.\u0275inj=g.cJS({imports:[H_]})}return n})(),uu=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:eu,useValue:t.callSetDisabledState??pc}]}}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=g.oAB({type:n});static#n=this.\u0275inj=g.cJS({imports:[tt]})}return n})(),fm=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275cmp=g.Xpm({type:n,selectors:[["app-header"]],decls:20,vars:0,consts:[[1,"header-bg-layout"],[1,"header-content"],[1,"system-title-container","right-skew"],[1,"bardcode-container"],["src","assets/images/barcode.png","alt","barcode-image"],[1,"system-title"],[1,"department-title-container","left-skew"],[1,"depratment-title"],[1,"depratment-logo"],["xmlns","http://www.w3.org/2000/svg","height","4em","viewBox","0 0 448 512"],["d","M64 32C28.7 32 0 60.7 0 96V416c0 35.3 28.7 64 64 64H384c35.3 0 64-28.7 64-64V96c0-35.3-28.7-64-64-64H64zM351.3 199.3v0c0 86.7-66 186.6-186.6 186.6c-37.2 0-71.7-10.8-100.7-29.4c5.3 .6 10.4 .8 15.8 .8c30.7 0 58.9-10.4 81.4-28c-28.8-.6-53-19.5-61.3-45.5c10.1 1.5 19.2 1.5 29.6-1.2c-30-6.1-52.5-32.5-52.5-64.4v-.8c8.7 4.9 18.9 7.9 29.6 8.3c-9-6-16.4-14.1-21.5-23.6s-7.8-20.2-7.7-31c0-12.2 3.2-23.4 8.9-33.1c32.3 39.8 80.8 65.8 135.2 68.6c-9.3-44.5 24-80.6 64-80.6c18.9 0 35.9 7.9 47.9 20.7c14.8-2.8 29-8.3 41.6-15.8c-4.9 15.2-15.2 28-28.8 36.1c13.2-1.4 26-5.1 37.8-10.2c-8.9 13.1-20.1 24.7-32.9 34c.2 2.8 .2 5.7 .2 8.5z"]],template:function(i,a){1&i&&(g.TgZ(0,"header"),g._UZ(1,"div",0),g.TgZ(2,"div",1)(3,"div",2)(4,"div",3),g._UZ(5,"img",4),g.qZA(),g.TgZ(6,"div",5)(7,"h2"),g._uU(8," \u0646\u0638\u0627\u0645 \u0625\u062f\u0627\u0631\u0629 \u0627\u0644\u0645\u0647\u0627\u0645 "),g.qZA(),g.TgZ(9,"h4"),g._uU(10," Task Management System "),g.qZA()()(),g.TgZ(11,"div",6)(12,"div",7)(13,"h2"),g._uU(14," \u0625\u062f\u0627\u0631\u0629 \u0627\u0644\u0645\u0648\u0638\u0641\u064a\u0646 "),g.qZA()(),g.TgZ(15,"div",8),g.O4$(),g.TgZ(16,"svg",9)(17,"style"),g._uU(18," svg { fill: #004e75 } "),g.qZA(),g._UZ(19,"path",10),g.qZA()()()()())},styles:['*[_ngcontent-%COMP%]{margin:0;padding:0;box-sizing:border-box;font-family:Changa,sans-serif}body[_ngcontent-%COMP%]{background-color:#f0efea}header[_ngcontent-%COMP%]{position:relative;width:100%;padding:30px 0}header[_ngcontent-%COMP%]   .header-bg-layout[_ngcontent-%COMP%]{z-index:-2;position:absolute;background-color:#03b0ac;inset:0;clip-path:polygon(0 0,55% 0,45% 100%,0% 100%)}header[_ngcontent-%COMP%]   .header-content[_ngcontent-%COMP%]{position:relative;display:flex;justify-content:space-between;flex-wrap:wrap}header[_ngcontent-%COMP%]   .header-content[_ngcontent-%COMP%]   .system-title-container[_ngcontent-%COMP%]{width:100%;display:flex;justify-content:space-between;align-items:flex-start;width:53%;text-align:right;background-color:#004e75;padding:10px 30px 10px 50px;color:#fff}header[_ngcontent-%COMP%]   .header-content[_ngcontent-%COMP%]   .right-skew[_ngcontent-%COMP%]{position:relative}header[_ngcontent-%COMP%]   .header-content[_ngcontent-%COMP%]   .right-skew[_ngcontent-%COMP%]:before{z-index:-1;content:"";position:absolute;top:0;bottom:0;right:-35px;display:block;width:70px;background:#004e75;transform:skew(-35deg)}header[_ngcontent-%COMP%]   .header-content[_ngcontent-%COMP%]   .left-skew[_ngcontent-%COMP%]{position:relative}header[_ngcontent-%COMP%]   .header-content[_ngcontent-%COMP%]   .left-skew[_ngcontent-%COMP%]:before{z-index:-1;content:"";position:absolute;top:0;bottom:0;left:-30px;display:block;width:60px;background:white;transform:skew(-35deg)}header[_ngcontent-%COMP%]   .header-content[_ngcontent-%COMP%]   .bardcode-container[_ngcontent-%COMP%]{position:relative;width:150px}header[_ngcontent-%COMP%]   .header-content[_ngcontent-%COMP%]   .bardcode-container[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{position:absolute;top:10px;left:0;width:100%;z-index:1}header[_ngcontent-%COMP%]   .header-content[_ngcontent-%COMP%]   .department-title-container[_ngcontent-%COMP%]{width:35%;text-align:right;background-color:#fff;padding:10px 30px;color:#03b0ac;margin:0 30px;display:flex;align-items:center;justify-content:flex-end}header[_ngcontent-%COMP%]   .header-content[_ngcontent-%COMP%]   .department-title-container[_ngcontent-%COMP%]   .depratment-logo[_ngcontent-%COMP%]{display:flex}header[_ngcontent-%COMP%]   .header-content[_ngcontent-%COMP%]   .department-title-container[_ngcontent-%COMP%]   .depratment-title[_ngcontent-%COMP%]{margin:0 20px}[dir=rtl][_ngcontent-%COMP%]   header[_ngcontent-%COMP%]   .header-bg-layout[_ngcontent-%COMP%]{clip-path:polygon(100% 0,55% 0,45% 100%,100% 100%)}[dir=rtl][_ngcontent-%COMP%]   header[_ngcontent-%COMP%]   .header-content[_ngcontent-%COMP%]   .right-skew[_ngcontent-%COMP%]:before{z-index:-1;content:"";position:absolute;top:0;bottom:0;right:unset;left:-35px;display:block;width:70px;background:#004e75;transform:skew(-35deg)}[dir=rtl][_ngcontent-%COMP%]   header[_ngcontent-%COMP%]   .header-content[_ngcontent-%COMP%]   .left-skew[_ngcontent-%COMP%]:before{z-index:-1;content:"";position:absolute;top:0;bottom:0;right:-30px;display:block;width:60px;background:white;transform:skew(-35deg)}@media (max-width: 575.98px){header[_ngcontent-%COMP%]{padding:15px 0}header[_ngcontent-%COMP%]   .header-bg-layout[_ngcontent-%COMP%]{clip-path:polygon(0 0,100% 0,100% 100%,0% 100%)}header[_ngcontent-%COMP%]   .header-content[_ngcontent-%COMP%]   .left-skew[_ngcontent-%COMP%]:before{display:none}header[_ngcontent-%COMP%]   .header-content[_ngcontent-%COMP%]   .right-skew[_ngcontent-%COMP%]:before{display:none}header[_ngcontent-%COMP%]   .header-content[_ngcontent-%COMP%]   .system-title-container[_ngcontent-%COMP%]{width:100%;padding:10px 20px}header[_ngcontent-%COMP%]   .header-content[_ngcontent-%COMP%]   .bardcode-container[_ngcontent-%COMP%]{width:75px}header[_ngcontent-%COMP%]   .header-content[_ngcontent-%COMP%]   .system-title[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:.8rem!important}header[_ngcontent-%COMP%]   .header-content[_ngcontent-%COMP%]   .system-title[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-size:.5rem!important}header[_ngcontent-%COMP%]   .header-content[_ngcontent-%COMP%]   .department-title-container[_ngcontent-%COMP%]{width:100%;padding:10px 20px 10px 0;margin:0}header[_ngcontent-%COMP%]   .header-content[_ngcontent-%COMP%]   .department-title-container[_ngcontent-%COMP%]   .depratment-title[_ngcontent-%COMP%]{margin:0 5px}header[_ngcontent-%COMP%]   .header-content[_ngcontent-%COMP%]   .department-title-container[_ngcontent-%COMP%]   .depratment-title[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:.9rem!important}header[_ngcontent-%COMP%]   .header-content[_ngcontent-%COMP%]   .department-title-container[_ngcontent-%COMP%]   .depratment-logo[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{height:2em!important}}@media (min-width: 576px) and (max-width: 767.98px){header[_ngcontent-%COMP%]{padding:15px 0}header[_ngcontent-%COMP%]   .header-content[_ngcontent-%COMP%]   .system-title-container[_ngcontent-%COMP%]{width:55%;padding:10px 20px}header[_ngcontent-%COMP%]   .header-content[_ngcontent-%COMP%]   .bardcode-container[_ngcontent-%COMP%]{width:75px}header[_ngcontent-%COMP%]   .header-content[_ngcontent-%COMP%]   .system-title[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1rem!important}header[_ngcontent-%COMP%]   .header-content[_ngcontent-%COMP%]   .system-title[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-size:.7rem!important}header[_ngcontent-%COMP%]   .header-content[_ngcontent-%COMP%]   .department-title-container[_ngcontent-%COMP%]{width:30%;padding:10px 20px 10px 0;margin:0 10px}header[_ngcontent-%COMP%]   .header-content[_ngcontent-%COMP%]   .department-title-container[_ngcontent-%COMP%]   .depratment-title[_ngcontent-%COMP%]{margin:0 5px}header[_ngcontent-%COMP%]   .header-content[_ngcontent-%COMP%]   .department-title-container[_ngcontent-%COMP%]   .depratment-title[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:.9rem!important}}@media (min-width: 768px) and (max-width: 991.98px){header[_ngcontent-%COMP%]{padding:15px 0}header[_ngcontent-%COMP%]   .header-content[_ngcontent-%COMP%]   .system-title-container[_ngcontent-%COMP%]{width:55%}header[_ngcontent-%COMP%]   .header-content[_ngcontent-%COMP%]   .bardcode-container[_ngcontent-%COMP%]{width:100px}header[_ngcontent-%COMP%]   .header-content[_ngcontent-%COMP%]   .system-title[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.4rem!important}header[_ngcontent-%COMP%]   .header-content[_ngcontent-%COMP%]   .system-title[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-size:.9rem!important}header[_ngcontent-%COMP%]   .header-content[_ngcontent-%COMP%]   .department-title-container[_ngcontent-%COMP%]{width:30%;padding:5px 10px}header[_ngcontent-%COMP%]   .header-content[_ngcontent-%COMP%]   .department-title-container[_ngcontent-%COMP%]   .depratment-title[_ngcontent-%COMP%]{margin:0 10px}header[_ngcontent-%COMP%]   .header-content[_ngcontent-%COMP%]   .department-title-container[_ngcontent-%COMP%]   .depratment-title[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1rem!important}}']})}return n})();var sp=k(6321),cu=k(2096),Rr=k(5781),op=k(2372);function ap(...n){return function pm(){return(0,op.J)(1)}()((0,Yr.D)(n,(0,Pi.yG)(n)))}var lu=k(9360);function up(...n){const e=(0,Pi.yG)(n);return(0,lu.e)((t,i)=>{(e?ap(n,t,e):ap(n,t)).subscribe(i)})}function Z_(){return(0,lu.e)((n,e)=>{let t,i=!1;n.subscribe((0,Yt.x)(e,a=>{const c=t;t=a,i&&e.next([c,a]),i=!0}))})}function cp(n,e){return(0,lu.e)(function cb(n,e,t,i,a){return(c,d)=>{let _=t,D=e,b=0;c.subscribe((0,Yt.x)(d,M=>{const O=b++;D=_?n(D,M,O):(_=!0,M),i&&d.next(D)},a&&(()=>{_&&d.next(D),d.complete()})))}}(n,e,arguments.length>=2,!0))}var OI=k(3997);function la(n,e){return(0,lu.e)((t,i)=>{let a=0;t.subscribe((0,Yt.x)(i,c=>n.call(e,c,a++)&&i.next(c)))})}var Xe,Bs=k(6304),db=(k(5967),k(3106)),_e=k(5861),da=k(534),gm=k(4537),du=k(7879),en=k(9058),PI=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},vs={},ph=ph||{},Tt=PI||self;function lp(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function Vl(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var ym="closure_uid_"+(1e9*Math.random()>>>0),K_=0;function dp(n,e,t){return n.call.apply(n.bind,arguments)}function hb(n,e,t){if(!n)throw Error();if(2<arguments.length){var i=Array.prototype.slice.call(arguments,2);return function(){var a=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(a,i),n.apply(e,a)}}return function(){return n.apply(e,arguments)}}function li(n,e,t){return(li=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?dp:hb).apply(null,arguments)}function _m(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var i=t.slice();return i.push.apply(i,arguments),n.apply(this,i)}}function ei(n,e){function t(){}t.prototype=e.prototype,n.$=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.ac=function(i,a,c){for(var d=Array(arguments.length-2),_=2;_<arguments.length;_++)d[_-2]=arguments[_];return e.prototype[a].apply(i,d)}}function Ic(){this.s=this.s,this.o=this.o}Ic.prototype.s=!1,Ic.prototype.sa=function(){!this.s&&(this.s=!0,this.N(),0)&&function mm(n){Object.prototype.hasOwnProperty.call(n,ym)&&n[ym]||(n[ym]=++K_)}(this)},Ic.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const Y_=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1};function gh(n){const e=n.length;if(0<e){const t=Array(e);for(let i=0;i<e;i++)t[i]=n[i];return t}return[]}function vm(n,e){for(let t=1;t<arguments.length;t++){const i=arguments[t];if(lp(i)){const a=n.length||0,c=i.length||0;n.length=a+c;for(let d=0;d<c;d++)n[a+d]=i[d]}else n.push(i)}}function yr(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}yr.prototype.h=function(){this.defaultPrevented=!0};var fb=function(){if(!Tt.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{Tt.addEventListener("test",()=>{},e),Tt.removeEventListener("test",()=>{},e)}catch{}return n}();function hp(n){return/^[\s\xa0]*$/.test(n)}function Q_(){var n=Tt.navigator;return n&&(n=n.userAgent)?n:""}function ha(n){return-1!=Q_().indexOf(n)}function fp(n){return fp[" "](n),n}fp[" "]=function(){};var ev,n,mh=ha("Opera"),hu=ha("Trident")||ha("MSIE"),wm=ha("Edge"),Im=wm||hu,J_=ha("Gecko")&&!(-1!=Q_().toLowerCase().indexOf("webkit")&&!ha("Edge"))&&!(ha("Trident")||ha("MSIE"))&&!ha("Edge"),kI=-1!=Q_().toLowerCase().indexOf("webkit")&&!ha("Edge");function X_(){var n=Tt.document;return n?n.documentMode:void 0}e:{var tv="",nv=(n=Q_(),J_?/rv:([^\);]+)(\)|;)/.exec(n):wm?/Edge\/([\d\.]+)/.exec(n):hu?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):kI?/WebKit\/(\S+)/.exec(n):mh?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(nv&&(tv=nv?nv[1]:""),hu){var rv=X_();if(null!=rv&&rv>parseFloat(tv)){ev=String(rv);break e}}ev=tv}var pp=Tt.document&&hu&&(X_()||parseInt(ev,10))||void 0;function gp(n,e){if(yr.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,i=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(J_){e:{try{fp(e.nodeName);var a=!0;break e}catch{}a=!1}a||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,i?(this.clientX=void 0!==i.clientX?i.clientX:i.pageX,this.clientY=void 0!==i.clientY?i.clientY:i.pageY,this.screenX=i.screenX||0,this.screenY=i.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:CA[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&gp.$.h.call(this)}}ei(gp,yr);var CA={2:"touch",3:"pen",4:"mouse"};gp.prototype.h=function(){gp.$.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var Em="closure_listenable_"+(1e6*Math.random()|0),bA=0;function TA(n,e,t,i,a){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!i,this.la=a,this.key=++bA,this.fa=this.ia=!1}function sv(n){n.fa=!0,n.listener=null,n.proxy=null,n.src=null,n.la=null}function Dm(n,e,t){for(const i in n)e.call(t,n[i],i,n)}function FI(n){const e={};for(const t in n)e[t]=n[t];return e}const LI="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function VI(n,e){let t,i;for(let a=1;a<arguments.length;a++){for(t in i=arguments[a],i)n[t]=i[t];for(let c=0;c<LI.length;c++)t=LI[c],Object.prototype.hasOwnProperty.call(i,t)&&(n[t]=i[t])}}function yh(n){this.src=n,this.g={},this.h=0}function Do(n,e){var t=e.type;if(t in n.g){var c,i=n.g[t],a=Y_(i,e);(c=0<=a)&&Array.prototype.splice.call(i,a,1),c&&(sv(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function Bl(n,e,t,i){for(var a=0;a<n.length;++a){var c=n[a];if(!c.fa&&c.listener==e&&c.capture==!!t&&c.la==i)return a}return-1}yh.prototype.add=function(n,e,t,i,a){var c=n.toString();(n=this.g[c])||(n=this.g[c]=[],this.h++);var d=Bl(n,e,i,a);return-1<d?(e=n[d],t||(e.ia=!1)):((e=new TA(e,this.src,c,!!i,a)).ia=t,n.push(e)),e};var Cm="closure_lm_"+(1e6*Math.random()|0),bm={};function ov(n,e,t,i,a){if(i&&i.once)return yb(n,e,t,i,a);if(Array.isArray(e)){for(var c=0;c<e.length;c++)ov(n,e[c],t,i,a);return null}return t=uv(t),n&&n[Em]?n.O(e,t,Vl(i)?!!i.capture:!!i,a):mb(n,e,t,!1,i,a)}function mb(n,e,t,i,a,c){if(!e)throw Error("Invalid event type");var d=Vl(a)?!!a.capture:!!a,_=Sm(n);if(_||(n[Cm]=_=new yh(n)),(t=_.add(e,t,i,d,c)).proxy)return t;if(i=function SA(){const e=AA;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=i,i.src=n,i.listener=t,n.addEventListener)fb||(a=d),void 0===a&&(a=!1),n.addEventListener(e.toString(),i,a);else if(n.attachEvent)n.attachEvent(_b(e.toString()),i);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(i)}return t}function yb(n,e,t,i,a){if(Array.isArray(e)){for(var c=0;c<e.length;c++)yb(n,e[c],t,i,a);return null}return t=uv(t),n&&n[Em]?n.P(e,t,Vl(i)?!!i.capture:!!i,a):mb(n,e,t,!0,i,a)}function Tm(n,e,t,i,a){if(Array.isArray(e))for(var c=0;c<e.length;c++)Tm(n,e[c],t,i,a);else i=Vl(i)?!!i.capture:!!i,t=uv(t),n&&n[Em]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=Bl(c=n.g[e],t,i,a))&&(sv(c[t]),Array.prototype.splice.call(c,t,1),0==c.length&&(delete n.g[e],n.h--))):n&&(n=Sm(n))&&(e=n.g[e.toString()],n=-1,e&&(n=Bl(e,t,i,a)),(t=-1<n?e[n]:null)&&mp(t))}function mp(n){if("number"!=typeof n&&n&&!n.fa){var e=n.src;if(e&&e[Em])Do(e.i,n);else{var t=n.type,i=n.proxy;e.removeEventListener?e.removeEventListener(t,i,n.capture):e.detachEvent?e.detachEvent(_b(t),i):e.addListener&&e.removeListener&&e.removeListener(i),(t=Sm(e))?(Do(t,n),0==t.h&&(t.src=null,e[Cm]=null)):sv(n)}}}function _b(n){return n in bm?bm[n]:bm[n]="on"+n}function AA(n,e){if(n.fa)n=!0;else{e=new gp(e,this);var t=n.listener,i=n.la||n.src;n.ia&&mp(n),n=t.call(i,e)}return n}function Sm(n){return(n=n[Cm])instanceof yh?n:null}var av="__closure_events_fn_"+(1e9*Math.random()>>>0);function uv(n){return"function"==typeof n?n:(n[av]||(n[av]=function(e){return n.handleEvent(e)}),n[av])}function ti(){Ic.call(this),this.i=new yh(this),this.S=this,this.J=null}function di(n,e){var t,i=n.J;if(i)for(t=[];i;i=i.J)t.push(i);if(n=n.S,i=e.type||e,"string"==typeof e)e=new yr(e,n);else if(e instanceof yr)e.target=e.target||n;else{var a=e;VI(e=new yr(i,n),a)}if(a=!0,t)for(var c=t.length-1;0<=c;c--){var d=e.g=t[c];a=yp(d,i,!0,e)&&a}if(a=yp(d=e.g=n,i,!0,e)&&a,a=yp(d,i,!1,e)&&a,t)for(c=0;c<t.length;c++)a=yp(d=e.g=t[c],i,!1,e)&&a}function yp(n,e,t,i){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var a=!0,c=0;c<e.length;++c){var d=e[c];if(d&&!d.fa&&d.capture==t){var _=d.listener,D=d.la||d.src;d.ia&&Do(n.i,d),a=!1!==_.call(D,i)&&a}}return a&&!i.defaultPrevented}ei(ti,Ic),ti.prototype[Em]=!0,ti.prototype.removeEventListener=function(n,e,t,i){Tm(this,n,e,t,i)},ti.prototype.N=function(){if(ti.$.N.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],i=0;i<t.length;i++)sv(t[i]);delete n.g[e],n.h--}}this.J=null},ti.prototype.O=function(n,e,t,i){return this.i.add(String(n),e,!1,t,i)},ti.prototype.P=function(n,e,t,i){return this.i.add(String(n),e,!0,t,i)};var _h=Tt.JSON.stringify;function cv(){var n=lv;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var Ul=new class vb{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}(()=>new Ib,n=>n.reset());class Ib{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function Eb(n){var e=1;n=n.split(":");const t=[];for(;0<e&&n.length;)t.push(n.shift()),e--;return n.length&&t.push(n.join(":")),t}function BI(n){Tt.setTimeout(()=>{throw n},0)}let vh,_p=!1,lv=new class wb{constructor(){this.h=this.g=null}add(e,t){const i=Ul.get();i.set(e,t),this.h?this.h.next=i:this.g=i,this.h=i}},UI=()=>{const n=Tt.Promise.resolve(void 0);vh=()=>{n.then(Db)}};var Db=()=>{for(var n;n=cv();){try{n.h.call(n.g)}catch(t){BI(t)}var e=Ul;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}_p=!1};function Am(n,e){ti.call(this),this.h=n||1,this.g=e||Tt,this.j=li(this.qb,this),this.l=Date.now()}function jI(n){n.ga=!1,n.T&&(n.g.clearTimeout(n.T),n.T=null)}function HI(n,e,t){if("function"==typeof n)t&&(n=li(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=li(n.handleEvent,n)}return 2147483647<Number(e)?-1:Tt.setTimeout(n,e||0)}function wh(n){n.g=HI(()=>{n.g=null,n.i&&(n.i=!1,wh(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}ei(Am,ti),(Xe=Am.prototype).ga=!1,Xe.T=null,Xe.qb=function(){if(this.ga){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-n):(this.T&&(this.g.clearTimeout(this.T),this.T=null),di(this,"tick"),this.ga&&(jI(this),this.start()))}},Xe.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())},Xe.N=function(){Am.$.N.call(this),jI(this),delete this.g};class sn extends Ic{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:wh(this)}N(){super.N(),this.g&&(Tt.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ec(n){Ic.call(this),this.h=n,this.g={}}ei(Ec,Ic);var dv=[];function hv(n,e,t,i){Array.isArray(t)||(t&&(dv[0]=t.toString()),t=dv);for(var a=0;a<t.length;a++){var c=ov(e,t[a],i||n.handleEvent,!1,n.h||n);if(!c)break;n.g[c.key]=c}}function Mm(n){Dm(n.g,function(e,t){this.g.hasOwnProperty(t)&&mp(e)},n),n.g={}}function vp(){this.g=!0}function jl(n,e,t,i){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function MA(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var i=t[n];if(!(2>i.length)){var a=i[1];if(Array.isArray(a)&&!(1>a.length)){var c=a[0];if("noop"!=c&&"stop"!=c&&"close"!=c)for(var d=1;d<a.length;d++)a[d]=""}}}return _h(t)}catch{return e}}(n,t)+(i?" "+i:"")})}Ec.prototype.N=function(){Ec.$.N.call(this),Mm(this)},Ec.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},vp.prototype.Ea=function(){this.g=!1},vp.prototype.info=function(){};var pu={},GI=null;function Ih(){return GI=GI||new ti}function fv(n){yr.call(this,pu.Ta,n)}function Eh(n){const e=Ih();di(e,new fv(e))}function Dc(n,e){yr.call(this,pu.STAT_EVENT,n),this.stat=e}function Li(n){const e=Ih();di(e,new Dc(e,n))}function Nm(n,e){yr.call(this,pu.Ua,n),this.size=e}function Cc(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return Tt.setTimeout(function(){n()},e)}pu.Ta="serverreachability",ei(fv,yr),pu.STAT_EVENT="statevent",ei(Dc,yr),pu.Ua="timingevent",ei(Nm,yr);var Om={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},Pm={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function Dh(){}function wp(){}Dh.prototype.h=null;var Rm,Hl={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function pv(){yr.call(this,"d")}function gv(){yr.call(this,"c")}function gu(){}function Ip(n,e,t,i){this.l=n,this.j=e,this.m=t,this.W=i||1,this.U=new Ec(this),this.P=bb,this.V=new Am(n=Im?125:void 0),this.I=null,this.i=!1,this.s=this.A=this.v=this.L=this.G=this.Y=this.B=null,this.F=[],this.g=null,this.C=0,this.o=this.u=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new zI}function zI(){this.i=null,this.g="",this.h=!1}ei(pv,yr),ei(gv,yr),ei(gu,Dh),gu.prototype.g=function(){return new XMLHttpRequest},gu.prototype.i=function(){return{}},Rm=new gu;var bb=45e3,Ep={},Dp={};function mv(n,e,t){n.L=1,n.v=Dv(Us(e)),n.s=t,n.S=!0,yv(n,null)}function yv(n,e){n.G=Date.now(),Cp(n),n.A=Us(n.v);var t=n.A,i=n.W;Array.isArray(i)||(i=[String(i)]),Tp(t.i,"t",i),n.C=0,t=n.l.J,n.h=new zI,n.g=cE(n.l,t?e:null,!n.s),0<n.O&&(n.M=new sn(li(n.Pa,n,n.g),n.O)),hv(n.U,n.g,"readystatechange",n.nb),e=n.I?FI(n.I):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.ha(n.A,n.u,n.s,e)):(n.u="GET",n.g.ha(n.A,n.u,null,e)),Eh(),function Cb(n,e,t,i,a,c){n.info(function(){if(n.g)if(c)for(var d="",_=c.split("&"),D=0;D<_.length;D++){var b=_[D].split("=");if(1<b.length){var M=b[0];b=b[1];var O=M.split("_");d=2<=O.length&&"type"==O[1]?d+(M+"=")+b+"&":d+(M+"=redacted&")}}else d=null;else d=c;return"XMLHTTP REQ ("+i+") [attempt "+a+"]: "+e+"\n"+t+"\n"+d})}(n.j,n.u,n.A,n.m,n.W,n.s)}function km(n){return!!n.g&&"GET"==n.u&&2!=n.L&&n.l.Ha}function Tb(n,e,t){let a,i=!0;for(;!n.J&&n.C<t.length;){if(a=xA(n,t),a==Dp){4==e&&(n.o=4,Li(14),i=!1),jl(n.j,n.m,null,"[Incomplete Response]");break}if(a==Ep){n.o=4,Li(15),jl(n.j,n.m,t,"[Invalid Chunk]"),i=!1;break}jl(n.j,n.m,a,null),vv(n,a)}km(n)&&a!=Dp&&a!=Ep&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,Li(16),i=!1),n.i=n.i&&i,i?0<t.length&&!n.ba&&(n.ba=!0,(e=n.l).g==n&&e.ca&&!e.M&&(e.l.info("Great, no buffering proxy detected. Bytes received: "+t.length),br(e),e.M=!0,Li(11))):(jl(n.j,n.m,t,"[Invalid Chunked Response]"),pa(n),Fm(n))}function xA(n,e){var t=n.C,i=e.indexOf("\n",t);return-1==i?Dp:(t=Number(e.substring(t,i)),isNaN(t)?Ep:(i+=1)+t>e.length?Dp:(e=e.slice(i,i+t),n.C=i+t,e))}function Cp(n){n.Y=Date.now()+n.P,qI(n,n.P)}function qI(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=Cc(li(n.lb,n),e)}function _v(n){n.B&&(Tt.clearTimeout(n.B),n.B=null)}function Fm(n){0==n.l.H||n.J||aE(n.l,n)}function pa(n){_v(n);var e=n.M;e&&"function"==typeof e.sa&&e.sa(),n.M=null,jI(n.V),Mm(n.U),n.g&&(e=n.g,n.g=null,e.abort(),e.sa())}function vv(n,e){try{var t=n.l;if(0!=t.H&&(t.g==n||Sv(t.i,n)))if(!n.K&&Sv(t.i,n)&&3==t.H){try{var i=t.Ja.g.parse(e)}catch{i=null}if(Array.isArray(i)&&3==i.length){var a=i;if(0==a[0]){e:if(!t.u){if(t.g){if(!(t.g.G+3e3<n.G))break e;xh(t),Mh(t)}sE(t),Li(18)}}else t.Fa=a[1],0<t.Fa-t.V&&37500>a[2]&&t.G&&0==t.A&&!t.v&&(t.v=Cc(li(t.ib,t),6e3));if(1>=Tv(t.i)&&t.oa){try{t.oa()}catch{}t.oa=void 0}}else vu(t,11)}else if((n.K||t.g==n)&&xh(t),!hp(e))for(a=t.Ja.g.parse(e),e=0;e<a.length;e++){let b=a[e];if(t.V=b[0],b=b[1],2==t.H)if("c"==b[0]){t.K=b[1],t.pa=b[2];const M=b[3];null!=M&&(t.ra=M,t.l.info("VER="+t.ra));const O=b[4];null!=O&&(t.Ga=O,t.l.info("SVER="+t.Ga));const z=b[5];null!=z&&"number"==typeof z&&0<z&&(t.L=i=1.5*z,t.l.info("backChannelRequestTimeoutMs_="+i)),i=t;const ee=n.g;if(ee){const De=ee.g?ee.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(De){var c=i.i;c.g||-1==De.indexOf("spdy")&&-1==De.indexOf("quic")&&-1==De.indexOf("h2")||(c.j=c.l,c.g=new Set,c.h&&(jm(c,c.h),c.h=null))}if(i.F){const Be=ee.g?ee.g.getResponseHeader("X-HTTP-Session-Id"):null;Be&&(i.Da=Be,yn(i.I,i.F,Be))}}t.H=3,t.h&&t.h.Ba(),t.ca&&(t.S=Date.now()-n.G,t.l.info("Handshake RTT: "+t.S+"ms"));var d=n;if((i=t).wa=Fv(i,i.J?i.pa:null,i.Y),d.K){Ob(i.i,d);var _=d,D=i.L;D&&_.setTimeout(D),_.B&&(_v(_),Cp(_)),i.g=d}else iE(i);0<t.j.length&&Pv(t)}else"stop"!=b[0]&&"close"!=b[0]||vu(t,7);else 3==t.H&&("stop"==b[0]||"close"==b[0]?"stop"==b[0]?vu(t,7):ga(t):"noop"!=b[0]&&t.h&&t.h.Aa(b),t.A=0)}Eh()}catch{}}function $l(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(lp(n)||"string"==typeof n)Array.prototype.forEach.call(n,e,void 0);else for(var t=function Iv(n){if(n.ta&&"function"==typeof n.ta)return n.ta();if(!n.Z||"function"!=typeof n.Z){if(typeof Map<"u"&&n instanceof Map)return Array.from(n.keys());if(!(typeof Set<"u"&&n instanceof Set)){if(lp(n)||"string"==typeof n){var e=[];n=n.length;for(var t=0;t<n;t++)e.push(t);return e}e=[],t=0;for(const i in n)e[t++]=i;return e}}}(n),i=function wv(n){if(n.Z&&"function"==typeof n.Z)return n.Z();if(typeof Map<"u"&&n instanceof Map||typeof Set<"u"&&n instanceof Set)return Array.from(n.values());if("string"==typeof n)return n.split("");if(lp(n)){for(var e=[],t=n.length,i=0;i<t;i++)e.push(n[i]);return e}for(i in e=[],t=0,n)e[t++]=n[i];return e}(n),a=i.length,c=0;c<a;c++)e.call(void 0,i[c],t&&t[c],n)}(Xe=Ip.prototype).setTimeout=function(n){this.P=n},Xe.nb=function(n){n=n.target;const e=this.M;e&&3==_u(n)?e.l():this.Pa(n)},Xe.Pa=function(n){try{if(n==this.g)e:{const M=_u(this.g);var e=this.g.Ia();if(this.g.da(),!(3>M)&&(3!=M||Im||this.g&&(this.h.h||this.g.ja()||Ov(this.g)))){this.J||4!=M||7==e||Eh(),_v(this);var t=this.g.da();this.ca=t;t:if(km(this)){var i=Ov(this.g);n="";var a=i.length,c=4==_u(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){pa(this),Fm(this);var d="";break t}this.h.i=new Tt.TextDecoder}for(e=0;e<a;e++)this.h.h=!0,n+=this.h.i.decode(i[e],{stream:c&&e==a-1});i.splice(0,a),this.h.g+=n,this.C=0,d=this.h.g}else d=this.g.ja();if(this.i=200==t,function $I(n,e,t,i,a,c,d){n.info(function(){return"XMLHTTP RESP ("+i+") [ attempt "+a+"]: "+e+"\n"+t+"\n"+c+" "+d})}(this.j,this.u,this.A,this.m,this.W,M,t),this.i){if(this.aa&&!this.K){t:{if(this.g){var _,D=this.g;if((_=D.g?D.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!hp(_)){var b=_;break t}}b=null}if(!(t=b)){this.i=!1,this.o=3,Li(12),pa(this),Fm(this);break e}jl(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,vv(this,t)}this.S?(Tb(this,M,d),Im&&this.i&&3==M&&(hv(this.U,this.V,"tick",this.mb),this.V.start())):(jl(this.j,this.m,d,null),vv(this,d)),4==M&&pa(this),this.i&&!this.J&&(4==M?aE(this.l,this):(this.i=!1,Cp(this)))}else(function nE(n){const e={};n=(n.g&&2<=_u(n)&&n.g.getAllResponseHeaders()||"").split("\r\n");for(let i=0;i<n.length;i++){if(hp(n[i]))continue;var t=Eb(n[i]);const a=t[0];if("string"!=typeof(t=t[1]))continue;t=t.trim();const c=e[a]||[];e[a]=c,c.push(t)}!function gb(n,e){for(const t in n)e.call(void 0,n[t],t,n)}(e,function(i){return i.join(", ")})})(this.g),400==t&&0<d.indexOf("Unknown SID")?(this.o=3,Li(12)):(this.o=0,Li(13)),pa(this),Fm(this)}}}catch{}},Xe.mb=function(){if(this.g){var n=_u(this.g),e=this.g.ja();this.C<e.length&&(_v(this),Tb(this,n,e),this.i&&4!=n&&Cp(this))}},Xe.cancel=function(){this.J=!0,pa(this)},Xe.lb=function(){this.B=null;const n=Date.now();0<=n-this.Y?(function xm(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.L&&(Eh(),Li(17)),pa(this),this.o=2,Fm(this)):qI(this,this.Y-n)};var Lm=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Co(n){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,n instanceof Co){this.h=n.h,mu(this,n.j),this.s=n.s,this.g=n.g,Ch(this,n.m),this.l=n.l;var e=n.i,t=new bp;t.i=e.i,e.g&&(t.g=new Map(e.g),t.h=e.h),Vm(this,t),this.o=n.o}else n&&(e=String(n).match(Lm))?(this.h=!1,mu(this,e[1]||"",!0),this.s=Gl(e[2]||""),this.g=Gl(e[3]||"",!0),Ch(this,e[4]),this.l=Gl(e[5]||"",!0),Vm(this,e[6]||"",!0),this.o=Gl(e[7]||"")):(this.h=!1,this.i=new bp(null,this.h))}function Us(n){return new Co(n)}function mu(n,e,t){n.j=t?Gl(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function Ch(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function Vm(n,e,t){e instanceof bp?(n.i=e,function Nb(n,e){e&&!n.j&&(bc(n),n.i=null,n.g.forEach(function(t,i){var a=i.toLowerCase();i!=a&&(xb(this,i),Tp(this,a,t))},n)),n.j=e}(n.i,n.h)):(t||(e=yu(e,bv)),n.i=new bp(e,n.h))}function yn(n,e,t){n.i.set(e,t)}function Dv(n){return yn(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function Gl(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function yu(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,Sb),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function Sb(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}Co.prototype.toString=function(){var n=[],e=this.j;e&&n.push(yu(e,Cv,!0),":");var t=this.g;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(yu(e,Cv,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.g&&"/"!=t.charAt(0)&&n.push("/"),n.push(yu(t,"/"==t.charAt(0)?Mb:Ab,!0))),(t=this.i.toString())&&n.push("?",t),(t=this.o)&&n.push("#",yu(t,WI)),n.join("")};var Cv=/[#\/\?@]/g,Ab=/[#\?:]/g,Mb=/[#\?]/g,bv=/[#\?@]/g,WI=/#/g;function bp(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function bc(n){n.g||(n.g=new Map,n.h=0,n.i&&function Ev(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var i=n[t].indexOf("="),a=null;if(0<=i){var c=n[t].substring(0,i);a=n[t].substring(i+1)}else c=n[t];e(c,a?decodeURIComponent(a.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function xb(n,e){bc(n),e=Tc(n,e),n.g.has(e)&&(n.i=null,n.h-=n.g.get(e).length,n.g.delete(e))}function ZI(n,e){return bc(n),e=Tc(n,e),n.g.has(e)}function Tp(n,e,t){xb(n,e),0<t.length&&(n.i=null,n.g.set(Tc(n,e),gh(t)),n.h+=t.length)}function Tc(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function Bm(n){this.l=n||Um,n=Tt.PerformanceNavigationTiming?0<(n=Tt.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(Tt.g&&Tt.g.Ka&&Tt.g.Ka()&&Tt.g.Ka().ec),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(Xe=bp.prototype).add=function(n,e){bc(this),this.i=null,n=Tc(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},Xe.forEach=function(n,e){bc(this),this.g.forEach(function(t,i){t.forEach(function(a){n.call(e,a,i,this)},this)},this)},Xe.ta=function(){bc(this);const n=Array.from(this.g.values()),e=Array.from(this.g.keys()),t=[];for(let i=0;i<e.length;i++){const a=n[i];for(let c=0;c<a.length;c++)t.push(e[i])}return t},Xe.Z=function(n){bc(this);let e=[];if("string"==typeof n)ZI(this,n)&&(e=e.concat(this.g.get(Tc(this,n))));else{n=Array.from(this.g.values());for(let t=0;t<n.length;t++)e=e.concat(n[t])}return e},Xe.set=function(n,e){return bc(this),this.i=null,ZI(this,n=Tc(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},Xe.get=function(n,e){return n&&0<(n=this.Z(n)).length?String(n[0]):e},Xe.toString=function(){if(this.i)return this.i;if(!this.g)return"";const n=[],e=Array.from(this.g.keys());for(var t=0;t<e.length;t++){var i=e[t];const c=encodeURIComponent(String(i)),d=this.Z(i);for(i=0;i<d.length;i++){var a=c;""!==d[i]&&(a+="="+encodeURIComponent(String(d[i]))),n.push(a)}}return this.i=n.join("&")};var Um=10;function YI(n){return!!n.h||!!n.g&&n.g.size>=n.j}function Tv(n){return n.h?1:n.g?n.g.size:0}function Sv(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function jm(n,e){n.g?n.g.add(e):n.h=e}function Ob(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function QI(n){if(null!=n.h)return n.i.concat(n.h.F);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.F);return e}return gh(n.i)}Bm.prototype.cancel=function(){if(this.i=QI(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}};var Hm=class{stringify(n){return Tt.JSON.stringify(n,void 0)}parse(n){return Tt.JSON.parse(n,void 0)}};function Pb(){this.g=new Hm}function bh(n,e,t){const i=t||"";try{$l(n,function(a,c){let d=a;Vl(a)&&(d=_h(a)),e.push(i+c+"="+encodeURIComponent(d))})}catch(a){throw e.push(i+"type="+encodeURIComponent("_badmap")),a}}function $m(n,e,t,i,a){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,a(i)}catch{}}function Th(n){this.l=n.fc||null,this.j=n.ob||!1}function Gm(n,e){ti.call(this),this.F=n,this.u=e,this.m=void 0,this.readyState=Av,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}ei(Th,Dh),Th.prototype.g=function(){return new Gm(this.l,this.j)},Th.prototype.i=function(n){return function(){return n}}({}),ei(Gm,ti);var Av=0;function JI(n){n.j.read().then(n.Xa.bind(n)).catch(n.ka.bind(n))}function Sh(n){n.readyState=4,n.l=null,n.j=null,n.A=null,Ah(n)}function Ah(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(Xe=Gm.prototype).open=function(n,e){if(this.readyState!=Av)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,Ah(this)},Xe.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.F||Tt).fetch(new Request(this.B,e)).then(this.$a.bind(this),this.ka.bind(this))},Xe.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Sh(this)),this.readyState=Av},Xe.$a=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,Ah(this)),this.g&&(this.readyState=3,Ah(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(typeof Tt.ReadableStream<"u"&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;JI(this)}else n.text().then(this.Za.bind(this),this.ka.bind(this))},Xe.Xa=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?Sh(this):Ah(this),3==this.readyState&&JI(this)}},Xe.Za=function(n){this.g&&(this.response=this.responseText=n,Sh(this))},Xe.Ya=function(n){this.g&&(this.response=n,Sh(this))},Xe.ka=function(){this.g&&Sh(this)},Xe.setRequestHeader=function(n,e){this.v.append(n,e)},Xe.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},Xe.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(Gm.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var Mv=Tt.JSON.parse;function _r(n){ti.call(this),this.headers=new Map,this.u=n||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=zm,this.L=this.M=!1}ei(_r,ti);var zm="",XI=/^https?$/i,Rb=["POST","PUT"];function xv(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,eE(n),qm(n)}function eE(n){n.F||(n.F=!0,di(n,"complete"),di(n,"error"))}function Nv(n){if(n.h&&typeof ph<"u"&&(!n.C[1]||4!=_u(n)||2!=n.da()))if(n.v&&4==_u(n))HI(n.La,0,n);else if(di(n,"readystatechange"),4==_u(n)){n.h=!1;try{const d=n.da();e:switch(d){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var i;if(i=0===d){var a=String(n.I).match(Lm)[1]||null;!a&&Tt.self&&Tt.self.location&&(a=Tt.self.location.protocol.slice(0,-1)),i=!XI.test(a?a.toLowerCase():"")}t=i}if(t)di(n,"complete"),di(n,"success");else{n.m=6;try{var c=2<_u(n)?n.g.statusText:""}catch{c=""}n.j=c+" ["+n.da()+"]",eE(n)}}finally{qm(n)}}}function qm(n,e){if(n.g){tE(n);const t=n.g,i=n.C[0]?()=>{}:null;n.g=null,n.C=null,e||di(n,"ready");try{t.onreadystatechange=i}catch{}}}function tE(n){n.g&&n.L&&(n.g.ontimeout=null),n.A&&(Tt.clearTimeout(n.A),n.A=null)}function _u(n){return n.g?n.g.readyState:0}function Ov(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.K){case zm:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch{return null}}function js(n){let e="";return Dm(n,function(t,i){e+=i,e+=":",e+=t,e+="\r\n"}),e}function Wm(n,e,t){e:{for(i in t){var i=!1;break e}i=!0}i||(t=js(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):yn(n,e,t))}function Zm(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function Km(n){this.Ga=0,this.j=[],this.l=new vp,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=Zm("failFast",!1,n),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=Zm("baseRetryDelayMs",5e3,n),this.hb=Zm("retryDelaySeedMs",1e4,n),this.eb=Zm("forwardChannelMaxRetries",2,n),this.xa=Zm("forwardChannelRequestTimeoutMs",2e4,n),this.va=n&&n.xmlHttpFactory||void 0,this.Ha=n&&n.dc||!1,this.L=void 0,this.J=n&&n.supportsCrossDomainXhr||!1,this.K="",this.i=new Bm(n&&n.concurrentRequestLimit),this.Ja=new Pb,this.P=n&&n.fastHandshake||!1,this.O=n&&n.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=n&&n.bc||!1,n&&n.Ea&&this.l.Ea(),n&&n.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&n&&n.detectBufferingProxy||!1,this.qa=void 0,n&&n.longPollingTimeout&&0<n.longPollingTimeout&&(this.qa=n.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}function ga(n){if(rE(n),3==n.H){var e=n.W++,t=Us(n.I);if(yn(t,"SID",n.K),yn(t,"RID",e),yn(t,"TYPE","terminate"),Xi(n,t),(e=new Ip(n,n.l,e)).L=2,e.v=Dv(Us(t)),t=!1,Tt.navigator&&Tt.navigator.sendBeacon)try{t=Tt.navigator.sendBeacon(e.v.toString(),"")}catch{}!t&&Tt.Image&&((new Image).src=e.v,t=!0),t||(e.g=cE(e.l,null),e.g.ha(e.v)),e.G=Date.now(),Cp(e)}kv(n)}function Mh(n){n.g&&(br(n),n.g.cancel(),n.g=null)}function rE(n){Mh(n),n.u&&(Tt.clearTimeout(n.u),n.u=null),xh(n),n.i.cancel(),n.m&&("number"==typeof n.m&&Tt.clearTimeout(n.m),n.m=null)}function Pv(n){if(!YI(n.i)&&!n.m){n.m=!0;var e=n.Na;vh||UI(),_p||(vh(),_p=!0),lv.add(e,n),n.C=0}}function Ym(n,e){var t;t=e?e.m:n.W++;const i=Us(n.I);yn(i,"SID",n.K),yn(i,"RID",t),yn(i,"AID",n.V),Xi(n,i),n.o&&n.s&&Wm(i,n.o,n.s),t=new Ip(n,n.l,t,n.C+1),null===n.o&&(t.I=n.s),e&&(n.j=e.F.concat(n.j)),e=Rv(n,t,1e3),t.setTimeout(Math.round(.5*n.xa)+Math.round(.5*n.xa*Math.random())),jm(n.i,t),mv(t,i,e)}function Xi(n,e){n.na&&Dm(n.na,function(t,i){yn(e,i,t)}),n.h&&$l({},function(t,i){yn(e,i,t)})}function Rv(n,e,t){t=Math.min(n.j.length,t);var i=n.h?li(n.h.Va,n.h,n):null;e:{var a=n.j;let c=-1;for(;;){const d=["count="+t];-1==c?0<t?(c=a[0].g,d.push("ofs="+c)):c=0:d.push("ofs="+c);let _=!0;for(let D=0;D<t;D++){let b=a[D].g;const M=a[D].map;if(b-=c,0>b)c=Math.max(0,a[D].g-100),_=!1;else try{bh(M,d,"req"+b+"_")}catch{i&&i(M)}}if(_){i=d.join("&");break e}}}return n=n.j.splice(0,t),e.F=n,i}function iE(n){if(!n.g&&!n.u){n.ba=1;var e=n.Ma;vh||UI(),_p||(vh(),_p=!0),lv.add(e,n),n.A=0}}function sE(n){return!(n.g||n.u||3<=n.A||(n.ba++,n.u=Cc(li(n.Ma,n),uE(n,n.A)),n.A++,0))}function br(n){null!=n.B&&(Tt.clearTimeout(n.B),n.B=null)}function oE(n){n.g=new Ip(n,n.l,"rpc",n.ba),null===n.o&&(n.g.I=n.s),n.g.O=0;var e=Us(n.wa);yn(e,"RID","rpc"),yn(e,"SID",n.K),yn(e,"AID",n.V),yn(e,"CI",n.G?"0":"1"),!n.G&&n.qa&&yn(e,"TO",n.qa),yn(e,"TYPE","xmlhttp"),Xi(n,e),n.o&&n.s&&Wm(e,n.o,n.s),n.L&&n.g.setTimeout(n.L);var t=n.g;n=n.pa,t.L=1,t.v=Dv(Us(e)),t.s=null,t.S=!0,yv(t,n)}function xh(n){null!=n.v&&(Tt.clearTimeout(n.v),n.v=null)}function aE(n,e){var t=null;if(n.g==e){xh(n),br(n),n.g=null;var i=2}else{if(!Sv(n.i,e))return;t=e.F,Ob(n.i,e),i=1}if(0!=n.H)if(e.i)if(1==i){t=e.s?e.s.length:0,e=Date.now()-e.G;var a=n.C;di(i=Ih(),new Nm(i,t)),Pv(n)}else iE(n);else if(3==(a=e.o)||0==a&&0<e.ca||!(1==i&&function Fb(n,e){return!(Tv(n.i)>=n.i.j-(n.m?1:0)||(n.m?(n.j=e.F.concat(n.j),0):1==n.H||2==n.H||n.C>=(n.cb?0:n.eb)||(n.m=Cc(li(n.Na,n,e),uE(n,n.C)),n.C++,0)))}(n,e)||2==i&&sE(n)))switch(t&&0<t.length&&(e=n.i,e.i=e.i.concat(t)),a){case 1:vu(n,5);break;case 4:vu(n,10);break;case 3:vu(n,6);break;default:vu(n,2)}}function uE(n,e){let t=n.ab+Math.floor(Math.random()*n.hb);return n.isActive()||(t*=2),t*e}function vu(n,e){if(n.l.info("Error code "+e),2==e){var t=null;n.h&&(t=null);var i=li(n.pb,n);t||(t=new Co("//www.google.com/images/cleardot.gif"),Tt.location&&"http"==Tt.location.protocol||mu(t,"https"),Dv(t)),function Sp(n,e){const t=new vp;if(Tt.Image){const i=new Image;i.onload=_m($m,t,i,"TestLoadImage: loaded",!0,e),i.onerror=_m($m,t,i,"TestLoadImage: error",!1,e),i.onabort=_m($m,t,i,"TestLoadImage: abort",!1,e),i.ontimeout=_m($m,t,i,"TestLoadImage: timeout",!1,e),Tt.setTimeout(function(){i.ontimeout&&i.ontimeout()},1e4),i.src=n}else e(!1)}(t.toString(),i)}else Li(2);n.H=0,n.h&&n.h.za(e),kv(n),rE(n)}function kv(n){if(n.H=0,n.ma=[],n.h){const e=QI(n.i);(0!=e.length||0!=n.j.length)&&(vm(n.ma,e),vm(n.ma,n.j),n.i.i.length=0,gh(n.j),n.j.length=0),n.h.ya()}}function Fv(n,e,t){var i=t instanceof Co?Us(t):new Co(t);if(""!=i.g)e&&(i.g=e+"."+i.g),Ch(i,i.m);else{var a=Tt.location;i=a.protocol,e=e?e+"."+a.hostname:a.hostname,a=+a.port;var c=new Co(null);i&&mu(c,i),e&&(c.g=e),a&&Ch(c,a),t&&(c.l=t),i=c}return e=n.Da,(t=n.F)&&e&&yn(i,t,e),yn(i,"VER",n.ra),Xi(n,i),i}function cE(n,e,t){if(e&&!n.J)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new _r(t&&n.Ha&&!n.va?new Th({ob:!0}):n.va)).Oa(n.J),e}function Lv(){}function Ap(){if(hu&&!(10<=Number(pp)))throw Error("Environmental error: no available transport.")}function ws(n,e){ti.call(this),this.g=new Km(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.Ca&&(n?n["X-WebChannel-Client-Profile"]=e.Ca:n={"X-WebChannel-Client-Profile":e.Ca}),this.g.U=n,(n=e&&e.cc)&&!hp(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!hp(e)&&(this.g.F=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new zl(this)}function lE(n){pv.call(this),n.__headers__&&(this.headers=n.__headers__,this.statusCode=n.__status__,delete n.__headers__,delete n.__status__);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function dE(){gv.call(this),this.status=1}function zl(n){this.g=n}function kr(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}function Sc(n,e,t){t||(t=0);var i=Array(16);if("string"==typeof e)for(var a=0;16>a;++a)i[a]=e.charCodeAt(t++)|e.charCodeAt(t++)<<8|e.charCodeAt(t++)<<16|e.charCodeAt(t++)<<24;else for(a=0;16>a;++a)i[a]=e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24;var c=n.g[3],d=(e=n.g[0])+(c^(t=n.g[1])&((a=n.g[2])^c))+i[0]+3614090360&4294967295;d=(t=(a=(c=(e=(t=(a=(c=(e=(t=(a=(c=(e=(t=(a=(c=(e=(t=(a=(c=(e=(t=(a=(c=(e=(t=(a=(c=(e=(t=(a=(c=(e=(t=(a=(c=(e=(t=(a=(c=(e=(t=(a=(c=(e=(t=(a=(c=(e=(t=(a=(c=(e=(t=(a=(c=(e=(t=(a=(c=(e=t+(d<<7&4294967295|d>>>25))+((d=c+(a^e&(t^a))+i[1]+3905402710&4294967295)<<12&4294967295|d>>>20))+((d=a+(t^c&(e^t))+i[2]+606105819&4294967295)<<17&4294967295|d>>>15))+((d=t+(e^a&(c^e))+i[3]+3250441966&4294967295)<<22&4294967295|d>>>10))+((d=e+(c^t&(a^c))+i[4]+4118548399&4294967295)<<7&4294967295|d>>>25))+((d=c+(a^e&(t^a))+i[5]+1200080426&4294967295)<<12&4294967295|d>>>20))+((d=a+(t^c&(e^t))+i[6]+2821735955&4294967295)<<17&4294967295|d>>>15))+((d=t+(e^a&(c^e))+i[7]+4249261313&4294967295)<<22&4294967295|d>>>10))+((d=e+(c^t&(a^c))+i[8]+1770035416&4294967295)<<7&4294967295|d>>>25))+((d=c+(a^e&(t^a))+i[9]+2336552879&4294967295)<<12&4294967295|d>>>20))+((d=a+(t^c&(e^t))+i[10]+4294925233&4294967295)<<17&4294967295|d>>>15))+((d=t+(e^a&(c^e))+i[11]+2304563134&4294967295)<<22&4294967295|d>>>10))+((d=e+(c^t&(a^c))+i[12]+1804603682&4294967295)<<7&4294967295|d>>>25))+((d=c+(a^e&(t^a))+i[13]+4254626195&4294967295)<<12&4294967295|d>>>20))+((d=a+(t^c&(e^t))+i[14]+2792965006&4294967295)<<17&4294967295|d>>>15))+((d=t+(e^a&(c^e))+i[15]+1236535329&4294967295)<<22&4294967295|d>>>10))+((d=e+(a^c&(t^a))+i[1]+4129170786&4294967295)<<5&4294967295|d>>>27))+((d=c+(t^a&(e^t))+i[6]+3225465664&4294967295)<<9&4294967295|d>>>23))+((d=a+(e^t&(c^e))+i[11]+643717713&4294967295)<<14&4294967295|d>>>18))+((d=t+(c^e&(a^c))+i[0]+3921069994&4294967295)<<20&4294967295|d>>>12))+((d=e+(a^c&(t^a))+i[5]+3593408605&4294967295)<<5&4294967295|d>>>27))+((d=c+(t^a&(e^t))+i[10]+38016083&4294967295)<<9&4294967295|d>>>23))+((d=a+(e^t&(c^e))+i[15]+3634488961&4294967295)<<14&4294967295|d>>>18))+((d=t+(c^e&(a^c))+i[4]+3889429448&4294967295)<<20&4294967295|d>>>12))+((d=e+(a^c&(t^a))+i[9]+568446438&4294967295)<<5&4294967295|d>>>27))+((d=c+(t^a&(e^t))+i[14]+3275163606&4294967295)<<9&4294967295|d>>>23))+((d=a+(e^t&(c^e))+i[3]+4107603335&4294967295)<<14&4294967295|d>>>18))+((d=t+(c^e&(a^c))+i[8]+1163531501&4294967295)<<20&4294967295|d>>>12))+((d=e+(a^c&(t^a))+i[13]+2850285829&4294967295)<<5&4294967295|d>>>27))+((d=c+(t^a&(e^t))+i[2]+4243563512&4294967295)<<9&4294967295|d>>>23))+((d=a+(e^t&(c^e))+i[7]+1735328473&4294967295)<<14&4294967295|d>>>18))+((d=t+(c^e&(a^c))+i[12]+2368359562&4294967295)<<20&4294967295|d>>>12))+((d=e+(t^a^c)+i[5]+4294588738&4294967295)<<4&4294967295|d>>>28))+((d=c+(e^t^a)+i[8]+2272392833&4294967295)<<11&4294967295|d>>>21))+((d=a+(c^e^t)+i[11]+1839030562&4294967295)<<16&4294967295|d>>>16))+((d=t+(a^c^e)+i[14]+4259657740&4294967295)<<23&4294967295|d>>>9))+((d=e+(t^a^c)+i[1]+2763975236&4294967295)<<4&4294967295|d>>>28))+((d=c+(e^t^a)+i[4]+1272893353&4294967295)<<11&4294967295|d>>>21))+((d=a+(c^e^t)+i[7]+4139469664&4294967295)<<16&4294967295|d>>>16))+((d=t+(a^c^e)+i[10]+3200236656&4294967295)<<23&4294967295|d>>>9))+((d=e+(t^a^c)+i[13]+681279174&4294967295)<<4&4294967295|d>>>28))+((d=c+(e^t^a)+i[0]+3936430074&4294967295)<<11&4294967295|d>>>21))+((d=a+(c^e^t)+i[3]+3572445317&4294967295)<<16&4294967295|d>>>16))+((d=t+(a^c^e)+i[6]+76029189&4294967295)<<23&4294967295|d>>>9))+((d=e+(t^a^c)+i[9]+3654602809&4294967295)<<4&4294967295|d>>>28))+((d=c+(e^t^a)+i[12]+3873151461&4294967295)<<11&4294967295|d>>>21))+((d=a+(c^e^t)+i[15]+530742520&4294967295)<<16&4294967295|d>>>16))+((d=t+(a^c^e)+i[2]+3299628645&4294967295)<<23&4294967295|d>>>9))+((d=e+(a^(t|~c))+i[0]+4096336452&4294967295)<<6&4294967295|d>>>26))+((d=c+(t^(e|~a))+i[7]+1126891415&4294967295)<<10&4294967295|d>>>22))+((d=a+(e^(c|~t))+i[14]+2878612391&4294967295)<<15&4294967295|d>>>17))+((d=t+(c^(a|~e))+i[5]+4237533241&4294967295)<<21&4294967295|d>>>11))+((d=e+(a^(t|~c))+i[12]+1700485571&4294967295)<<6&4294967295|d>>>26))+((d=c+(t^(e|~a))+i[3]+2399980690&4294967295)<<10&4294967295|d>>>22))+((d=a+(e^(c|~t))+i[10]+4293915773&4294967295)<<15&4294967295|d>>>17))+((d=t+(c^(a|~e))+i[1]+2240044497&4294967295)<<21&4294967295|d>>>11))+((d=e+(a^(t|~c))+i[8]+1873313359&4294967295)<<6&4294967295|d>>>26))+((d=c+(t^(e|~a))+i[15]+4264355552&4294967295)<<10&4294967295|d>>>22))+((d=a+(e^(c|~t))+i[6]+2734768916&4294967295)<<15&4294967295|d>>>17))+((d=t+(c^(a|~e))+i[13]+1309151649&4294967295)<<21&4294967295|d>>>11))+((c=(e=t+((d=e+(a^(t|~c))+i[4]+4149444226&4294967295)<<6&4294967295|d>>>26))+((d=c+(t^(e|~a))+i[11]+3174756917&4294967295)<<10&4294967295|d>>>22))^((a=c+((d=a+(e^(c|~t))+i[2]+718787259&4294967295)<<15&4294967295|d>>>17))|~e))+i[9]+3951481745&4294967295,n.g[0]=n.g[0]+e&4294967295,n.g[1]=n.g[1]+(a+(d<<21&4294967295|d>>>11))&4294967295,n.g[2]=n.g[2]+a&4294967295,n.g[3]=n.g[3]+c&4294967295}function cn(n,e){this.h=e;for(var t=[],i=!0,a=n.length-1;0<=a;a--){var c=0|n[a];i&&c==e||(t[a]=c,i=!1)}this.g=t}(Xe=_r.prototype).Oa=function(n){this.M=n},Xe.ha=function(n,e,t,i){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+n);e=e?e.toUpperCase():"GET",this.I=n,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():Rm.g(),this.C=function fa(n){return n.h||(n.h=n.i())}(this.u?this.u:Rm),this.g.onreadystatechange=li(this.La,this);try{this.G=!0,this.g.open(e,String(n),!0),this.G=!1}catch(c){return void xv(this,c)}if(n=t||"",t=new Map(this.headers),i)if(Object.getPrototypeOf(i)===Object.prototype)for(var a in i)t.set(a,i[a]);else{if("function"!=typeof i.keys||"function"!=typeof i.get)throw Error("Unknown input type for opt_headers: "+String(i));for(const c of i.keys())t.set(c,i.get(c))}i=Array.from(t.keys()).find(c=>"content-type"==c.toLowerCase()),a=Tt.FormData&&n instanceof Tt.FormData,!(0<=Y_(Rb,e))||i||a||t.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[c,d]of t)this.g.setRequestHeader(c,d);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{tE(this),0<this.B&&((this.L=function kb(n){return hu&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=li(this.ua,this)):this.A=HI(this.ua,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(c){xv(this,c)}},Xe.ua=function(){typeof ph<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,di(this,"timeout"),this.abort(8))},Xe.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,di(this,"complete"),di(this,"abort"),qm(this))},Xe.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),qm(this,!0)),_r.$.N.call(this)},Xe.La=function(){this.s||(this.G||this.v||this.l?Nv(this):this.kb())},Xe.kb=function(){Nv(this)},Xe.isActive=function(){return!!this.g},Xe.da=function(){try{return 2<_u(this)?this.g.status:-1}catch{return-1}},Xe.ja=function(){try{return this.g?this.g.responseText:""}catch{return""}},Xe.Wa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),Mv(e)}},Xe.Ia=function(){return this.m},Xe.Sa=function(){return"string"==typeof this.j?this.j:String(this.j)},(Xe=Km.prototype).ra=8,Xe.H=1,Xe.Na=function(n){if(this.m)if(this.m=null,1==this.H){if(!n){this.W=Math.floor(1e5*Math.random()),n=this.W++;const a=new Ip(this,this.l,n);let c=this.s;if(this.U&&(c?(c=FI(c),VI(c,this.U)):c=this.U),null!==this.o||this.O||(a.I=c,c=null),this.P)e:{for(var e=0,t=0;t<this.j.length;t++){var i=this.j[t];if(void 0===(i="__data__"in i.map&&"string"==typeof(i=i.map.__data__)?i.length:void 0))break;if(4096<(e+=i)){e=t;break e}if(4096===e||t===this.j.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=Rv(this,a,e),yn(t=Us(this.I),"RID",n),yn(t,"CVER",22),this.F&&yn(t,"X-HTTP-Session-Id",this.F),Xi(this,t),c&&(this.O?e="headers="+encodeURIComponent(String(js(c)))+"&"+e:this.o&&Wm(t,this.o,c)),jm(this.i,a),this.bb&&yn(t,"TYPE","init"),this.P?(yn(t,"$req",e),yn(t,"SID","null"),a.aa=!0,mv(a,t,null)):mv(a,t,e),this.H=2}}else 3==this.H&&(n?Ym(this,n):0==this.j.length||YI(this.i)||Ym(this))},Xe.Ma=function(){if(this.u=null,oE(this),this.ca&&!(this.M||null==this.g||0>=this.S)){var n=2*this.S;this.l.info("BP detection timer enabled: "+n),this.B=Cc(li(this.jb,this),n)}},Xe.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,Li(10),Mh(this),oE(this))},Xe.ib=function(){null!=this.v&&(this.v=null,Mh(this),sE(this),Li(19))},Xe.pb=function(n){n?(this.l.info("Successfully pinged google.com"),Li(2)):(this.l.info("Failed to ping google.com"),Li(1))},Xe.isActive=function(){return!!this.h&&this.h.isActive(this)},(Xe=Lv.prototype).Ba=function(){},Xe.Aa=function(){},Xe.za=function(){},Xe.ya=function(){},Xe.isActive=function(){return!0},Xe.Va=function(){},Ap.prototype.g=function(n,e){return new ws(n,e)},ei(ws,ti),ws.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var n=this.g,e=this.l,t=this.h||void 0;Li(0),n.Y=e,n.na=t||{},n.G=n.aa,n.I=Fv(n,null,n.Y),Pv(n)},ws.prototype.close=function(){ga(this.g)},ws.prototype.u=function(n){var e=this.g;if("string"==typeof n){var t={};t.__data__=n,n=t}else this.v&&((t={}).__data__=_h(n),n=t);e.j.push(new class{constructor(n,e){this.g=n,this.map=e}}(e.fb++,n)),3==e.H&&Pv(e)},ws.prototype.N=function(){this.g.h=null,delete this.j,ga(this.g),delete this.g,ws.$.N.call(this)},ei(lE,pv),ei(dE,gv),ei(zl,Lv),zl.prototype.Ba=function(){di(this.g,"a")},zl.prototype.Aa=function(n){di(this.g,new lE(n))},zl.prototype.za=function(n){di(this.g,new dE)},zl.prototype.ya=function(){di(this.g,"b")},ei(kr,function Nh(){this.blockSize=-1}),kr.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0},kr.prototype.j=function(n,e){void 0===e&&(e=n.length);for(var t=e-this.blockSize,i=this.m,a=this.h,c=0;c<e;){if(0==a)for(;c<=t;)Sc(this,n,c),c+=this.blockSize;if("string"==typeof n){for(;c<e;)if(i[a++]=n.charCodeAt(c++),a==this.blockSize){Sc(this,i),a=0;break}}else for(;c<e;)if(i[a++]=n[c++],a==this.blockSize){Sc(this,i),a=0;break}}this.h=a,this.i+=e},kr.prototype.l=function(){var n=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);n[0]=128;for(var e=1;e<n.length-8;++e)n[e]=0;var t=8*this.i;for(e=n.length-8;e<n.length;++e)n[e]=255&t,t/=256;for(this.j(n),n=Array(16),e=t=0;4>e;++e)for(var i=0;32>i;i+=8)n[t++]=this.g[e]>>>i&255;return n};var Lb={};function Qm(n){return-128<=n&&128>n?function pb(n,e){var t=Lb;return Object.prototype.hasOwnProperty.call(t,n)?t[n]:t[n]=e(n)}(n,function(e){return new cn([0|e],0>e?-1:0)}):new cn([0|n],0>n?-1:0)}function bo(n){if(isNaN(n)||!isFinite(n))return wu;if(0>n)return hi(bo(-n));for(var e=[],t=1,i=0;n>=t;i++)e[i]=n/t|0,t*=ql;return new cn(e,0)}var ql=4294967296,wu=Qm(0),Xm=Qm(1),Vv=Qm(16777216);function Iu(n){if(0!=n.h)return!1;for(var e=0;e<n.g.length;e++)if(0!=n.g[e])return!1;return!0}function Hs(n){return-1==n.h}function hi(n){for(var e=n.g.length,t=[],i=0;i<e;i++)t[i]=~n.g[i];return new cn(t,~n.h).add(Xm)}function ey(n,e){return n.add(hi(e))}function Mp(n,e){for(;(65535&n[e])!=n[e];)n[e+1]+=n[e]>>>16,n[e]&=65535,e++}function ty(n,e){this.g=n,this.h=e}function ny(n,e){if(Iu(e))throw Error("division by zero");if(Iu(n))return new ty(wu,wu);if(Hs(n))return e=ny(hi(n),e),new ty(hi(e.g),hi(e.h));if(Hs(e))return e=ny(n,hi(e)),new ty(hi(e.g),e.h);if(30<n.g.length){if(Hs(n)||Hs(e))throw Error("slowDivide_ only works with positive integers.");for(var t=Xm,i=e;0>=i.X(n);)t=Vb(t),i=Vb(i);var a=xp(t,1),c=xp(i,1);for(i=xp(i,2),t=xp(t,2);!Iu(i);){var d=c.add(i);0>=d.X(n)&&(a=a.add(t),c=d),i=xp(i,1),t=xp(t,1)}return e=ey(n,a.R(e)),new ty(a,e)}for(a=wu;0<=n.X(e);){for(t=Math.max(1,Math.floor(n.ea()/e.ea())),i=48>=(i=Math.ceil(Math.log(t)/Math.LN2))?1:Math.pow(2,i-48),d=(c=bo(t)).R(e);Hs(d)||0<d.X(n);)d=(c=bo(t-=i)).R(e);Iu(c)&&(c=Xm),a=a.add(c),n=ey(n,d)}return new ty(a,n)}function Vb(n){for(var e=n.g.length+1,t=[],i=0;i<e;i++)t[i]=n.D(i)<<1|n.D(i-1)>>>31;return new cn(t,n.h)}function xp(n,e){var t=e>>5;e%=32;for(var i=n.g.length-t,a=[],c=0;c<i;c++)a[c]=0<e?n.D(c+t)>>>e|n.D(c+t+1)<<32-e:n.D(c+t);return new cn(a,n.h)}(Xe=cn.prototype).ea=function(){if(Hs(this))return-hi(this).ea();for(var n=0,e=1,t=0;t<this.g.length;t++){var i=this.D(t);n+=(0<=i?i:ql+i)*e,e*=ql}return n},Xe.toString=function(n){if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if(Iu(this))return"0";if(Hs(this))return"-"+hi(this).toString(n);for(var e=bo(Math.pow(n,6)),t=this,i="";;){var a=ny(t,e).g,c=((0<(t=ey(t,a.R(e))).g.length?t.g[0]:t.h)>>>0).toString(n);if(Iu(t=a))return c+i;for(;6>c.length;)c="0"+c;i=c+i}},Xe.D=function(n){return 0>n?0:n<this.g.length?this.g[n]:this.h},Xe.X=function(n){return Hs(n=ey(this,n))?-1:Iu(n)?0:1},Xe.abs=function(){return Hs(this)?hi(this):this},Xe.add=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],i=0,a=0;a<=e;a++){var c=i+(65535&this.D(a))+(65535&n.D(a)),d=(c>>>16)+(this.D(a)>>>16)+(n.D(a)>>>16);i=d>>>16,t[a]=(d&=65535)<<16|(c&=65535)}return new cn(t,-2147483648&t[t.length-1]?-1:0)},Xe.R=function(n){if(Iu(this)||Iu(n))return wu;if(Hs(this))return Hs(n)?hi(this).R(hi(n)):hi(hi(this).R(n));if(Hs(n))return hi(this.R(hi(n)));if(0>this.X(Vv)&&0>n.X(Vv))return bo(this.ea()*n.ea());for(var e=this.g.length+n.g.length,t=[],i=0;i<2*e;i++)t[i]=0;for(i=0;i<this.g.length;i++)for(var a=0;a<n.g.length;a++){var c=this.D(i)>>>16,d=65535&this.D(i),_=n.D(a)>>>16,D=65535&n.D(a);t[2*i+2*a]+=d*D,Mp(t,2*i+2*a),t[2*i+2*a+1]+=c*D,Mp(t,2*i+2*a+1),t[2*i+2*a+1]+=d*_,Mp(t,2*i+2*a+1),t[2*i+2*a+2]+=c*_,Mp(t,2*i+2*a+2)}for(i=0;i<e;i++)t[i]=t[2*i+1]<<16|t[2*i];for(i=e;i<2*e;i++)t[i]=0;return new cn(t,0)},Xe.gb=function(n){return ny(this,n).h},Xe.and=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],i=0;i<e;i++)t[i]=this.D(i)&n.D(i);return new cn(t,this.h&n.h)},Xe.or=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],i=0;i<e;i++)t[i]=this.D(i)|n.D(i);return new cn(t,this.h|n.h)},Xe.xor=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],i=0;i<e;i++)t[i]=this.D(i)^n.D(i);return new cn(t,this.h^n.h)},Ap.prototype.createWebChannel=Ap.prototype.g,ws.prototype.send=ws.prototype.u,ws.prototype.open=ws.prototype.m,ws.prototype.close=ws.prototype.close,Om.NO_ERROR=0,Om.TIMEOUT=8,Om.HTTP_ERROR=6,Pm.COMPLETE="complete",wp.EventType=Hl,Hl.OPEN="a",Hl.CLOSE="b",Hl.ERROR="c",Hl.MESSAGE="d",ti.prototype.listen=ti.prototype.O,_r.prototype.listenOnce=_r.prototype.P,_r.prototype.getLastError=_r.prototype.Sa,_r.prototype.getLastErrorCode=_r.prototype.Ia,_r.prototype.getStatus=_r.prototype.da,_r.prototype.getResponseJson=_r.prototype.Wa,_r.prototype.getResponseText=_r.prototype.ja,_r.prototype.send=_r.prototype.ha,_r.prototype.setWithCredentials=_r.prototype.Oa,kr.prototype.digest=kr.prototype.l,kr.prototype.reset=kr.prototype.reset,kr.prototype.update=kr.prototype.j,cn.prototype.add=cn.prototype.add,cn.prototype.multiply=cn.prototype.R,cn.prototype.modulo=cn.prototype.gb,cn.prototype.compare=cn.prototype.X,cn.prototype.toNumber=cn.prototype.ea,cn.prototype.toString=cn.prototype.toString,cn.prototype.getBits=cn.prototype.D,cn.fromNumber=bo,cn.fromString=function Jm(n,e){if(0==n.length)throw Error("number format error: empty string");if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if("-"==n.charAt(0))return hi(Jm(n.substring(1),e));if(0<=n.indexOf("-"))throw Error('number format error: interior "-" character');for(var t=bo(Math.pow(e,8)),i=wu,a=0;a<n.length;a+=8){var c=Math.min(8,n.length-a),d=parseInt(n.substring(a,a+c),e);8>c?(c=bo(Math.pow(e,c)),i=i.R(c).add(bo(d))):i=(i=i.R(t)).add(bo(d))}return i};var hE=vs.createWebChannelTransport=function(){return new Ap},fE=vs.getStatEventTarget=function(){return Ih()},pE=vs.ErrorCode=Om,ry=vs.EventType=Pm,NA=vs.Event=pu,Bv=vs.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},gE=vs.FetchXmlHttpFactory=Th,iy=vs.WebChannel=wp,mE=vs.XhrIo=_r,yE=vs.Md5=kr,St=vs.Integer=cn;const Uv="@firebase/firestore";class Fr{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Fr.UNAUTHENTICATED=new Fr(null),Fr.GOOGLE_CREDENTIALS=new Fr("google-credentials-uid"),Fr.FIRST_PARTY=new Fr("first-party-uid"),Fr.MOCK_USER=new Fr("mock-user");let To="9.23.0";const Ac=new du.Yd("@firebase/firestore");function jv(){return Ac.logLevel}function Pe(n,...e){if(Ac.logLevel<=du.in.DEBUG){const t=e.map(oy);Ac.debug(`Firestore (${To}): ${n}`,...t)}}function qn(n,...e){if(Ac.logLevel<=du.in.ERROR){const t=e.map(oy);Ac.error(`Firestore (${To}): ${n}`,...t)}}function bi(n,...e){if(Ac.logLevel<=du.in.WARN){const t=e.map(oy);Ac.warn(`Firestore (${To}): ${n}`,...t)}}function oy(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch{return n}}function rt(n="Unexpected state"){const e=`FIRESTORE (${To}) INTERNAL ASSERTION FAILED: `+n;throw qn(e),new Error(e)}function ct(n,e){n||rt()}function Qe(n,e){return n}const se={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Se extends en.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Lr{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class _E{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class vE{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Fr.UNAUTHENTICATED))}shutdown(){}}class Bb{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class Ub{constructor(e){this.t=e,this.currentUser=Fr.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var i=this;let a=this.i;const c=b=>this.i!==a?(a=this.i,t(b)):Promise.resolve();let d=new Lr;this.o=()=>{this.i++,this.currentUser=this.u(),d.resolve(),d=new Lr,e.enqueueRetryable(()=>c(this.currentUser))};const _=()=>{const b=d;e.enqueueRetryable((0,_e.Z)(function*(){yield b.promise,yield c(i.currentUser)}))},D=b=>{Pe("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=b,this.auth.addAuthTokenListener(this.o),_()};this.t.onInit(b=>D(b)),setTimeout(()=>{if(!this.auth){const b=this.t.getImmediate({optional:!0});b?D(b):(Pe("FirebaseAuthCredentialsProvider","Auth not yet detected"),d.resolve(),d=new Lr)}},0),_()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(i=>this.i!==e?(Pe("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(ct("string"==typeof i.accessToken),new _E(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return ct(null===e||"string"==typeof e),new Fr(e)}}class jb{constructor(e,t,i){this.h=e,this.l=t,this.m=i,this.type="FirstParty",this.user=Fr.FIRST_PARTY,this.g=new Map}p(){return this.m?this.m():null}get headers(){this.g.set("X-Goog-AuthUser",this.h);const e=this.p();return e&&this.g.set("Authorization",e),this.l&&this.g.set("X-Goog-Iam-Authorization-Token",this.l),this.g}}class Hb{constructor(e,t,i){this.h=e,this.l=t,this.m=i}getToken(){return Promise.resolve(new jb(this.h,this.l,this.m))}start(e,t){e.enqueueRetryable(()=>t(Fr.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class $v{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class wE{constructor(e){this.I=e,this.forceRefresh=!1,this.appCheck=null,this.T=null}start(e,t){const i=c=>{null!=c.error&&Pe("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${c.error.message}`);const d=c.token!==this.T;return this.T=c.token,Pe("FirebaseAppCheckTokenProvider",`Received ${d?"new":"existing"} token.`),d?t(c.token):Promise.resolve()};this.o=c=>{e.enqueueRetryable(()=>i(c))};const a=c=>{Pe("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=c,this.appCheck.addTokenListener(this.o)};this.I.onInit(c=>a(c)),setTimeout(()=>{if(!this.appCheck){const c=this.I.getImmediate({optional:!0});c?a(c):Pe("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(ct("string"==typeof t.token),this.T=t.token,new $v(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function $b(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let i=0;i<n;i++)t[i]=Math.floor(256*Math.random());return t}class es{static A(){const t=62*Math.floor(256/62);let i="";for(;i.length<20;){const a=$b(40);for(let c=0;c<a.length;++c)i.length<20&&a[c]<t&&(i+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(a[c]%62))}return i}}function Rt(n,e){return n<e?-1:n>e?1:0}function Oh(n,e,t){return n.length===e.length&&n.every((i,a)=>t(i,e[a]))}function Gb(n){return n+"\0"}class bn{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Se(se.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Se(se.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Se(se.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Se(se.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return bn.fromMillis(Date.now())}static fromDate(e){return bn.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),i=Math.floor(1e6*(e-1e3*t));return new bn(t,i)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Rt(this.nanoseconds,e.nanoseconds):Rt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class ht{constructor(e){this.timestamp=e}static fromTimestamp(e){return new ht(e)}static min(){return new ht(new bn(0,0))}static max(){return new ht(new bn(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class Np{constructor(e,t,i){void 0===t?t=0:t>e.length&&rt(),void 0===i?i=e.length-t:i>e.length-t&&rt(),this.segments=e,this.offset=t,this.len=i}get length(){return this.len}isEqual(e){return 0===Np.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Np?e.forEach(i=>{t.push(i)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,i=this.limit();t<i;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const i=Math.min(e.length,t.length);for(let a=0;a<i;a++){const c=e.get(a),d=t.get(a);if(c<d)return-1;if(c>d)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class Jt extends Np{construct(e,t,i){return new Jt(e,t,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const i of e){if(i.indexOf("//")>=0)throw new Se(se.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);t.push(...i.split("/").filter(a=>a.length>0))}return new Jt(t)}static emptyPath(){return new Jt([])}}const zb=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Wn extends Np{construct(e,t,i){return new Wn(e,t,i)}static isValidIdentifier(e){return zb.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Wn.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Wn(["__name__"])}static fromServerFormat(e){const t=[];let i="",a=0;const c=()=>{if(0===i.length)throw new Se(se.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(i),i=""};let d=!1;for(;a<e.length;){const _=e[a];if("\\"===_){if(a+1===e.length)throw new Se(se.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const D=e[a+1];if("\\"!==D&&"."!==D&&"`"!==D)throw new Se(se.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=D,a+=2}else"`"===_?(d=!d,a++):"."!==_||d?(i+=_,a++):(c(),a++)}if(c(),d)throw new Se(se.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Wn(t)}static emptyPath(){return new Wn([])}}class Ke{constructor(e){this.path=e}static fromPath(e){return new Ke(Jt.fromString(e))}static fromName(e){return new Ke(Jt.fromString(e).popFirst(5))}static empty(){return new Ke(Jt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===Jt.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return Jt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ke(new Jt(e.slice()))}}class ay{constructor(e,t,i,a){this.indexId=e,this.collectionGroup=t,this.fields=i,this.indexState=a}}function Op(n){return n.fields.find(e=>2===e.kind)}function Wl(n){return n.fields.filter(e=>2!==e.kind)}ay.UNKNOWN_ID=-1;class uy{constructor(e,t){this.fieldPath=e,this.kind=t}}class Pp{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new Pp(0,Is.min())}}function So(n,e){const t=n.toTimestamp().seconds,i=n.toTimestamp().nanoseconds+1,a=ht.fromTimestamp(1e9===i?new bn(t+1,0):new bn(t,i));return new Is(a,Ke.empty(),e)}function cy(n){return new Is(n.readTime,n.key,-1)}class Is{constructor(e,t,i){this.readTime=e,this.documentKey=t,this.largestBatchId=i}static min(){return new Is(ht.min(),Ke.empty(),-1)}static max(){return new Is(ht.max(),Ke.empty(),-1)}}function ly(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=Ke.comparator(n.documentKey,e.documentKey),0!==t?t:Rt(n.largestBatchId,e.largestBatchId))}const IE="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Gv{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function Eu(n){return Ph.apply(this,arguments)}function Ph(){return Ph=(0,_e.Z)(function*(n){if(n.code!==se.FAILED_PRECONDITION||n.message!==IE)throw n;Pe("LocalStore","Unexpectedly lost primary lease")}),Ph.apply(this,arguments)}class X{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&rt(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new X((i,a)=>{this.nextCallback=c=>{this.wrapSuccess(e,c).next(i,a)},this.catchCallback=c=>{this.wrapFailure(t,c).next(i,a)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof X?t:X.resolve(t)}catch(t){return X.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):X.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):X.reject(t)}static resolve(e){return new X((t,i)=>{t(e)})}static reject(e){return new X((t,i)=>{i(e)})}static waitFor(e){return new X((t,i)=>{let a=0,c=0,d=!1;e.forEach(_=>{++a,_.next(()=>{++c,d&&c===a&&t()},D=>i(D))}),d=!0,c===a&&t()})}static or(e){let t=X.resolve(!1);for(const i of e)t=t.next(a=>a?X.resolve(a):i());return t}static forEach(e,t){const i=[];return e.forEach((a,c)=>{i.push(t.call(this,a,c))}),this.waitFor(i)}static mapArray(e,t){return new X((i,a)=>{const c=e.length,d=new Array(c);let _=0;for(let D=0;D<c;D++){const b=D;t(e[b]).next(M=>{d[b]=M,++_,_===c&&i(d)},M=>a(M))}})}static doWhile(e,t){return new X((i,a)=>{const c=()=>{!0===e()?t().next(()=>{c()},a):i()};c()})}}class zv{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.v=new Lr,this.transaction.oncomplete=()=>{this.v.resolve()},this.transaction.onabort=()=>{t.error?this.v.reject(new Rh(e,t.error)):this.v.resolve()},this.transaction.onerror=i=>{const a=Wv(i.target.error);this.v.reject(new Rh(e,a))}}static open(e,t,i,a){try{return new zv(t,e.transaction(a,i))}catch(c){throw new Rh(t,c)}}get R(){return this.v.promise}abort(e){e&&this.v.reject(e),this.aborted||(Pe("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}P(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new qv(t)}}class $s{constructor(e,t,i){this.name=e,this.version=t,this.V=i,12.2===$s.S((0,en.z$)())&&qn("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Pe("SimpleDb","Removing database:",e),Vi(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!(0,en.hl)())return!1;if($s.C())return!0;const e=(0,en.z$)(),t=$s.S(e),i=0<t&&t<10,a=$s.N(e),c=0<a&&a<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||i||c)}static C(){var e;return typeof process<"u"&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.k)}static M(e,t){return e.store(t)}static S(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),i=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(i)}static N(e){const t=e.match(/Android ([\d.]+)/i),i=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(i)}$(e){var t=this;return(0,_e.Z)(function*(){return t.db||(Pe("SimpleDb","Opening database:",t.name),t.db=yield new Promise((i,a)=>{const c=indexedDB.open(t.name,t.version);c.onsuccess=d=>{i(d.target.result)},c.onblocked=()=>{a(new Rh(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},c.onerror=d=>{const _=d.target.error;a("VersionError"===_.name?new Se(se.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===_.name?new Se(se.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+_):new Rh(e,_))},c.onupgradeneeded=d=>{Pe("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',d.oldVersion),t.V.O(d.target.result,c.transaction,d.oldVersion,t.version).next(()=>{Pe("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.F&&(t.db.onversionchange=i=>t.F(i)),t.db})()}B(e){this.F=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,i,a){var c=this;return(0,_e.Z)(function*(){const d="readonly"===t;let _=0;for(;;){++_;try{c.db=yield c.$(e);const D=zv.open(c.db,e,d?"readonly":"readwrite",i),b=a(D).next(M=>(D.P(),M)).catch(M=>(D.abort(M),X.reject(M))).toPromise();return b.catch(()=>{}),yield D.R,b}catch(D){const b=D,M="FirebaseError"!==b.name&&_<3;if(Pe("SimpleDb","Transaction failed with error:",b.message,"Retrying:",M),c.close(),!M)return Promise.reject(b)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class EE{constructor(e){this.L=e,this.q=!1,this.U=null}get isDone(){return this.q}get K(){return this.U}set cursor(e){this.L=e}done(){this.q=!0}G(e){this.U=e}delete(){return Vi(this.L.delete())}}class Rh extends Se{constructor(e,t){super(se.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function Du(n){return"IndexedDbTransactionError"===n.name}class qv{constructor(e){this.store=e}put(e,t){let i;return void 0!==t?(Pe("SimpleDb","PUT",this.store.name,e,t),i=this.store.put(t,e)):(Pe("SimpleDb","PUT",this.store.name,"<auto-key>",e),i=this.store.put(e)),Vi(i)}add(e){return Pe("SimpleDb","ADD",this.store.name,e,e),Vi(this.store.add(e))}get(e){return Vi(this.store.get(e)).next(t=>(void 0===t&&(t=null),Pe("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return Pe("SimpleDb","DELETE",this.store.name,e),Vi(this.store.delete(e))}count(){return Pe("SimpleDb","COUNT",this.store.name),Vi(this.store.count())}j(e,t){const i=this.options(e,t);if(i.index||"function"!=typeof this.store.getAll){const a=this.cursor(i),c=[];return this.W(a,(d,_)=>{c.push(_)}).next(()=>c)}{const a=this.store.getAll(i.range);return new X((c,d)=>{a.onerror=_=>{d(_.target.error)},a.onsuccess=_=>{c(_.target.result)}})}}H(e,t){const i=this.store.getAll(e,null===t?void 0:t);return new X((a,c)=>{i.onerror=d=>{c(d.target.error)},i.onsuccess=d=>{a(d.target.result)}})}J(e,t){Pe("SimpleDb","DELETE ALL",this.store.name);const i=this.options(e,t);i.Y=!1;const a=this.cursor(i);return this.W(a,(c,d,_)=>_.delete())}X(e,t){let i;t?i=e:(i={},t=e);const a=this.cursor(i);return this.W(a,t)}Z(e){const t=this.cursor({});return new X((i,a)=>{t.onerror=c=>{const d=Wv(c.target.error);a(d)},t.onsuccess=c=>{const d=c.target.result;d?e(d.primaryKey,d.value).next(_=>{_?d.continue():i()}):i()}})}W(e,t){const i=[];return new X((a,c)=>{e.onerror=d=>{c(d.target.error)},e.onsuccess=d=>{const _=d.target.result;if(!_)return void a();const D=new EE(_),b=t(_.primaryKey,_.value,D);if(b instanceof X){const M=b.catch(O=>(D.done(),X.reject(O)));i.push(M)}D.isDone?a():null===D.K?_.continue():_.continue(D.K)}}).next(()=>X.waitFor(i))}options(e,t){let i;return void 0!==e&&("string"==typeof e?i=e:t=e),{index:i,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const i=this.store.index(e.index);return e.Y?i.openKeyCursor(e.range,t):i.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function Vi(n){return new X((e,t)=>{n.onsuccess=i=>{e(i.target.result)},n.onerror=i=>{const a=Wv(i.target.error);t(a)}})}let DE=!1;function Wv(n){const e=$s.S((0,en.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const i=new Se("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return DE||(DE=!0,setTimeout(()=>{throw i},0)),i}}return n}class Zv{constructor(e,t){this.asyncQueue=e,this.tt=t,this.task=null}start(){this.et(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}et(e){var t=this;Pe("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,_e.Z)(function*(){t.task=null;try{Pe("IndexBackiller",`Documents written: ${yield t.tt.nt()}`)}catch(i){Du(i)?Pe("IndexBackiller","Ignoring IndexedDB error during index backfill: ",i):yield Eu(i)}yield t.et(6e4)}))}}class Zb{constructor(e,t){this.localStore=e,this.persistence=t}nt(e=50){var t=this;return(0,_e.Z)(function*(){return t.persistence.runTransaction("Backfill Indexes","readwrite-primary",i=>t.st(i,e))})()}st(e,t){const i=new Set;let a=t,c=!0;return X.doWhile(()=>!0===c&&a>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(d=>{if(null!==d&&!i.has(d))return Pe("IndexBackiller",`Processing collection: ${d}`),this.it(e,d,a).next(_=>{a-=_,i.add(d)});c=!1})).next(()=>t-a)}it(e,t,i){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(a=>this.localStore.localDocuments.getNextDocuments(e,t,a,i).next(c=>{const d=c.changes;return this.localStore.indexManager.updateIndexEntries(e,d).next(()=>this.rt(a,c)).next(_=>(Pe("IndexBackiller",`Updating offset: ${_}`),this.localStore.indexManager.updateCollectionGroup(e,t,_))).next(()=>d.size)}))}rt(e,t){let i=e;return t.changes.forEach((a,c)=>{const d=cy(c);ly(d,i)>0&&(i=d)}),new Is(i.readTime,i.documentKey,Math.max(t.batchId,e.largestBatchId))}}let ts=(()=>{class n{constructor(t,i){this.previousValue=t,i&&(i.sequenceNumberHandler=a=>this.ot(a),this.ut=a=>i.writeSequenceNumber(a))}ot(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ut&&this.ut(t),t}}return n.ct=-1,n})();function Rp(n){return null==n}function Mc(n){return 0===n&&1/n==-1/0}function kh(n){return"number"==typeof n&&Number.isInteger(n)&&!Mc(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}function fi(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=Kb(e)),e=dy(n.get(t),e);return Kb(e)}function dy(n,e){let t=e;const i=n.length;for(let a=0;a<i;a++){const c=n.charAt(a);switch(c){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=c}}return t}function Kb(n){return n+"\x01\x01"}function ma(n){const e=n.length;if(ct(e>=2),2===e)return ct("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),Jt.emptyPath();const t=e-2,i=[];let a="";for(let c=0;c<e;){const d=n.indexOf("\x01",c);switch((d<0||d>t)&&rt(),n.charAt(d+1)){case"\x01":const _=n.substring(c,d);let D;0===a.length?D=_:(a+=_,D=a,a=""),i.push(D);break;case"\x10":a+=n.substring(c,d),a+="\0";break;case"\x11":a+=n.substring(c,d+1);break;default:rt()}c=d+2}return new Jt(i)}const Kv=["userId","batchId"];function kp(n,e){return[n,fi(e)]}function CE(n,e,t){return[n,fi(e),t]}const Yb={},bE=["prefixPath","collectionGroup","readTime","documentId"],TE=["prefixPath","collectionGroup","documentId"],Fp=["collectionGroup","readTime","prefixPath","documentId"],Qb=["canonicalId","targetId"],SE=["targetId","path"],AE=["path","targetId"],Jb=["collectionId","parent"],Xb=["indexId","uid"],Lp=["uid","sequenceNumber"],eT=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],tT=["indexId","uid","orderedDocumentKey"],nT=["userId","collectionPath","documentId"],rT=["userId","collectionPath","largestBatchId"],iT=["userId","collectionGroup","largestBatchId"],ME=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],sT=[...ME,"documentOverlays"],xE=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],Yv=xE,Qv=[...Yv,"indexConfiguration","indexState","indexEntries"];class Jv extends Gv{constructor(e,t){super(),this.ht=e,this.currentSequenceNumber=t}}function vr(n,e){const t=Qe(n);return $s.M(t.ht,e)}function NE(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function xc(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function OE(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}class Tn{constructor(e,t){this.comparator=e,this.root=t||pi.EMPTY}insert(e,t){return new Tn(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,pi.BLACK,null,null))}remove(e){return new Tn(this.comparator,this.root.remove(e,this.comparator).copy(null,null,pi.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const i=this.comparator(e,t.key);if(0===i)return t.value;i<0?t=t.left:i>0&&(t=t.right)}return null}indexOf(e){let t=0,i=this.root;for(;!i.isEmpty();){const a=this.comparator(e,i.key);if(0===a)return t+i.left.size;a<0?i=i.left:(t+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,i)=>(e(t,i),!1))}toString(){const e=[];return this.inorderTraversal((t,i)=>(e.push(`${t}:${i}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new hy(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new hy(this.root,e,this.comparator,!1)}getReverseIterator(){return new hy(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new hy(this.root,e,this.comparator,!0)}}class hy{constructor(e,t,i,a){this.isReverse=a,this.nodeStack=[];let c=1;for(;!e.isEmpty();)if(c=t?i(e.key,t):1,t&&a&&(c*=-1),c<0)e=this.isReverse?e.left:e.right;else{if(0===c){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class pi{constructor(e,t,i,a,c){this.key=e,this.value=t,this.color=i??pi.RED,this.left=a??pi.EMPTY,this.right=c??pi.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,i,a,c){return new pi(e??this.key,t??this.value,i??this.color,a??this.left,c??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,i){let a=this;const c=i(e,a.key);return a=c<0?a.copy(null,null,null,a.left.insert(e,t,i),null):0===c?a.copy(null,t,null,null,null):a.copy(null,null,null,null,a.right.insert(e,t,i)),a.fixUp()}removeMin(){if(this.left.isEmpty())return pi.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let i,a=this;if(t(e,a.key)<0)a.left.isEmpty()||a.left.isRed()||a.left.left.isRed()||(a=a.moveRedLeft()),a=a.copy(null,null,null,a.left.remove(e,t),null);else{if(a.left.isRed()&&(a=a.rotateRight()),a.right.isEmpty()||a.right.isRed()||a.right.left.isRed()||(a=a.moveRedRight()),0===t(e,a.key)){if(a.right.isEmpty())return pi.EMPTY;i=a.right.min(),a=a.copy(i.key,i.value,null,null,a.right.removeMin())}a=a.copy(null,null,null,null,a.right.remove(e,t))}return a.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,pi.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,pi.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw rt();const e=this.left.check();if(e!==this.right.check())throw rt();return e+(this.isRed()?0:1)}}pi.EMPTY=null,pi.RED=!0,pi.BLACK=!1,pi.EMPTY=new class{constructor(){this.size=0}get key(){throw rt()}get value(){throw rt()}get color(){throw rt()}get left(){throw rt()}get right(){throw rt()}copy(n,e,t,i,a){return this}insert(n,e,t){return new pi(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class xn{constructor(e){this.comparator=e,this.data=new Tn(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,i)=>(e(t),!1))}forEachInRange(e,t){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const a=i.getNext();if(this.comparator(a.key,e[1])>=0)return;t(a.key)}}forEachWhile(e,t){let i;for(i=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Xv(this.data.getIterator())}getIteratorFrom(e){return new Xv(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(i=>{t=t.add(i)}),t}isEqual(e){if(!(e instanceof xn)||this.size!==e.size)return!1;const t=this.data.getIterator(),i=e.data.getIterator();for(;t.hasNext();){const a=t.getNext().key,c=i.getNext().key;if(0!==this.comparator(a,c))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new xn(this.comparator);return t.data=e,t}}class Xv{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Zl(n){return n.hasNext()?n.getNext():void 0}class ns{constructor(e){this.fields=e,e.sort(Wn.comparator)}static empty(){return new ns([])}unionWith(e){let t=new xn(Wn.comparator);for(const i of this.fields)t=t.add(i);for(const i of e)t=t.add(i);return new ns(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Oh(this.fields,e.fields,(t,i)=>t.isEqual(i))}}class oT extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Vr{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(i){try{return atob(i)}catch(a){throw typeof DOMException<"u"&&a instanceof DOMException?new oT("Invalid base64 string: "+a):a}}(e);return new Vr(t)}static fromUint8Array(e){const t=function(i){let a="";for(let c=0;c<i.length;++c)a+=String.fromCharCode(i[c]);return a}(e);return new Vr(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let i=0;i<e.length;i++)t[i]=e.charCodeAt(i);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Rt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Vr.EMPTY_BYTE_STRING=new Vr("");const PA=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ao(n){if(ct(!!n),"string"==typeof n){let e=0;const t=PA.exec(n);if(ct(!!t),t[1]){let a=t[1];a=(a+"000000000").substr(0,9),e=Number(a)}const i=new Date(n);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:ir(n.seconds),nanos:ir(n.nanos)}}function ir(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function Cu(n){return"string"==typeof n?Vr.fromBase64String(n):Vr.fromUint8Array(n)}function Fh(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=n?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function fy(n){const e=n.mapValue.fields.__previous_value__;return Fh(e)?fy(e):e}function rs(n){const e=Ao(n.mapValue.fields.__local_write_time__.timestampValue);return new bn(e.seconds,e.nanos)}class Vp{constructor(e,t,i,a,c,d,_,D,b){this.databaseId=e,this.appId=t,this.persistenceKey=i,this.host=a,this.ssl=c,this.forceLongPolling=d,this.autoDetectLongPolling=_,this.longPollingOptions=D,this.useFetchStreams=b}}class Zn{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new Zn("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof Zn&&e.projectId===this.projectId&&e.database===this.database}}const is={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Kl={nullValue:"NULL_VALUE"};function Br(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Fh(n)?4:n0(n)?9007199254740991:10:rt()}function Gs(n,e){if(n===e)return!0;const t=Br(n);if(t!==Br(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return rs(n).isEqual(rs(e));case 3:return function(i,a){if("string"==typeof i.timestampValue&&"string"==typeof a.timestampValue&&i.timestampValue.length===a.timestampValue.length)return i.timestampValue===a.timestampValue;const c=Ao(i.timestampValue),d=Ao(a.timestampValue);return c.seconds===d.seconds&&c.nanos===d.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return a=e,Cu(n.bytesValue).isEqual(Cu(a.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(i,a){return ir(i.geoPointValue.latitude)===ir(a.geoPointValue.latitude)&&ir(i.geoPointValue.longitude)===ir(a.geoPointValue.longitude)}(n,e);case 2:return function(i,a){if("integerValue"in i&&"integerValue"in a)return ir(i.integerValue)===ir(a.integerValue);if("doubleValue"in i&&"doubleValue"in a){const c=ir(i.doubleValue),d=ir(a.doubleValue);return c===d?Mc(c)===Mc(d):isNaN(c)&&isNaN(d)}return!1}(n,e);case 9:return Oh(n.arrayValue.values||[],e.arrayValue.values||[],Gs);case 10:return function(i,a){const c=i.mapValue.fields||{},d=a.mapValue.fields||{};if(NE(c)!==NE(d))return!1;for(const _ in c)if(c.hasOwnProperty(_)&&(void 0===d[_]||!Gs(c[_],d[_])))return!1;return!0}(n,e);default:return rt()}var a}function ya(n,e){return void 0!==(n.values||[]).find(t=>Gs(t,e))}function Es(n,e){if(n===e)return 0;const t=Br(n),i=Br(e);if(t!==i)return Rt(t,i);switch(t){case 0:case 9007199254740991:return 0;case 1:return Rt(n.booleanValue,e.booleanValue);case 2:return function(a,c){const d=ir(a.integerValue||a.doubleValue),_=ir(c.integerValue||c.doubleValue);return d<_?-1:d>_?1:d===_?0:isNaN(d)?isNaN(_)?0:-1:1}(n,e);case 3:return Yl(n.timestampValue,e.timestampValue);case 4:return Yl(rs(n),rs(e));case 5:return Rt(n.stringValue,e.stringValue);case 6:return function(a,c){const d=Cu(a),_=Cu(c);return d.compareTo(_)}(n.bytesValue,e.bytesValue);case 7:return function(a,c){const d=a.split("/"),_=c.split("/");for(let D=0;D<d.length&&D<_.length;D++){const b=Rt(d[D],_[D]);if(0!==b)return b}return Rt(d.length,_.length)}(n.referenceValue,e.referenceValue);case 8:return function(a,c){const d=Rt(ir(a.latitude),ir(c.latitude));return 0!==d?d:Rt(ir(a.longitude),ir(c.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(a,c){const d=a.values||[],_=c.values||[];for(let D=0;D<d.length&&D<_.length;++D){const b=Es(d[D],_[D]);if(b)return b}return Rt(d.length,_.length)}(n.arrayValue,e.arrayValue);case 10:return function(a,c){if(a===is.mapValue&&c===is.mapValue)return 0;if(a===is.mapValue)return 1;if(c===is.mapValue)return-1;const d=a.fields||{},_=Object.keys(d),D=c.fields||{},b=Object.keys(D);_.sort(),b.sort();for(let M=0;M<_.length&&M<b.length;++M){const O=Rt(_[M],b[M]);if(0!==O)return O;const z=Es(d[_[M]],D[b[M]]);if(0!==z)return z}return Rt(_.length,b.length)}(n.mapValue,e.mapValue);default:throw rt()}}function Yl(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return Rt(n,e);const t=Ao(n),i=Ao(e),a=Rt(t.seconds,i.seconds);return 0!==a?a:Rt(t.nanos,i.nanos)}function Mo(n){return Nc(n)}function Nc(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(i){const a=Ao(i);return`time(${a.seconds},${a.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?Cu(n.bytesValue).toBase64():"referenceValue"in n?Ke.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(i){let a="[",c=!0;for(const d of i.values||[])c?c=!1:a+=",",a+=Nc(d);return a+"]"}(n.arrayValue):"mapValue"in n?function(i){const a=Object.keys(i.fields||{}).sort();let c="{",d=!0;for(const _ of a)d?d=!1:c+=",",c+=`${_}:${Nc(i.fields[_])}`;return c+"}"}(n.mapValue):rt();var e}function zs(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function Oc(n){return!!n&&"integerValue"in n}function _a(n){return!!n&&"arrayValue"in n}function e0(n){return!!n&&"nullValue"in n}function t0(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Bp(n){return!!n&&"mapValue"in n}function Lh(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return xc(n.mapValue.fields,(t,i)=>e.mapValue.fields[t]=Lh(i)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Lh(n.arrayValue.values[t]);return e}return Object.assign({},n)}function n0(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function RE(n){return"nullValue"in n?Kl:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?zs(Zn.empty(),Ke.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?{mapValue:{}}:rt()}function kE(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?zs(Zn.empty(),Ke.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?{mapValue:{}}:"mapValue"in n?is:rt()}function r0(n,e){const t=Es(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function s0(n,e){const t=Es(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}class Ur{constructor(e){this.value=e}static empty(){return new Ur({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let i=0;i<e.length-1;++i)if(t=(t.mapValue.fields||{})[e.get(i)],!Bp(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Lh(t)}setAll(e){let t=Wn.emptyPath(),i={},a=[];e.forEach((d,_)=>{if(!t.isImmediateParentOf(_)){const D=this.getFieldsMap(t);this.applyChanges(D,i,a),i={},a=[],t=_.popLast()}d?i[_.lastSegment()]=Lh(d):a.push(_.lastSegment())});const c=this.getFieldsMap(t);this.applyChanges(c,i,a)}delete(e){const t=this.field(e.popLast());Bp(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Gs(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let i=0;i<e.length;++i){let a=t.mapValue.fields[e.get(i)];Bp(a)&&a.mapValue.fields||(a={mapValue:{fields:{}}},t.mapValue.fields[e.get(i)]=a),t=a}return t.mapValue.fields}applyChanges(e,t,i){xc(t,(a,c)=>e[a]=c);for(const a of i)delete e[a]}clone(){return new Ur(Lh(this.value))}}function FE(n){const e=[];return xc(n.fields,(t,i)=>{const a=new Wn([t]);if(Bp(i)){const c=FE(i.mapValue).fields;if(0===c.length)e.push(a);else for(const d of c)e.push(a.child(d))}else e.push(a)}),new ns(e)}class Vn{constructor(e,t,i,a,c,d,_){this.key=e,this.documentType=t,this.version=i,this.readTime=a,this.createTime=c,this.data=d,this.documentState=_}static newInvalidDocument(e){return new Vn(e,0,ht.min(),ht.min(),ht.min(),Ur.empty(),0)}static newFoundDocument(e,t,i,a){return new Vn(e,1,t,ht.min(),i,a,0)}static newNoDocument(e,t){return new Vn(e,2,t,ht.min(),ht.min(),Ur.empty(),0)}static newUnknownDocument(e,t){return new Vn(e,3,t,ht.min(),ht.min(),Ur.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(ht.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Ur.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Ur.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ht.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Vn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Vn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Ql{constructor(e,t){this.position=e,this.inclusive=t}}function LE(n,e,t){let i=0;for(let a=0;a<n.position.length;a++){const c=e[a],d=n.position[a];if(i=c.field.isKeyField()?Ke.comparator(Ke.fromName(d.referenceValue),t.key):Es(d,t.data.field(c.field)),"desc"===c.dir&&(i*=-1),0!==i)break}return i}function VE(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Gs(n.position[t],e.position[t]))return!1;return!0}class Up{constructor(e,t="asc"){this.field=e,this.dir=t}}function aT(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}class uT{}class Wt extends uT{constructor(e,t,i){super(),this.field=e,this.op=t,this.value=i}static create(e,t,i){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,i):new cT(e,t,i):"array-contains"===t?new dT(e,i):"in"===t?new UE(e,i):"not-in"===t?new u0(e,i):"array-contains-any"===t?new gy(e,i):new Wt(e,t,i)}static createKeyFieldInFilter(e,t,i){return"in"===t?new Hp(e,i):new lT(e,i)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(Es(t,this.value)):null!==t&&Br(this.value)===Br(t)&&this.matchesComparison(Es(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return rt()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}getFirstInequalityField(){return this.isInequality()?this.field:null}}class ln extends uT{constructor(e,t){super(),this.filters=e,this.op=t,this.lt=null}static create(e,t){return new ln(e,t)}matches(e){return Vh(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.lt||(this.lt=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.lt}getFilters(){return Object.assign([],this.filters)}getFirstInequalityField(){const e=this.ft(t=>t.isInequality());return null!==e?e.field:null}ft(e){for(const t of this.getFlattenedFilters())if(e(t))return t;return null}}function Vh(n){return"and"===n.op}function jp(n){return"or"===n.op}function Jl(n){return py(n)&&Vh(n)}function py(n){for(const e of n.filters)if(e instanceof ln)return!1;return!0}function Bh(n){if(n instanceof Wt)return n.field.canonicalString()+n.op.toString()+Mo(n.value);if(Jl(n))return n.filters.map(e=>Bh(e)).join(",");{const e=n.filters.map(t=>Bh(t)).join(",");return`${n.op}(${e})`}}function o0(n,e){return n instanceof Wt?(t=n,(i=e)instanceof Wt&&t.op===i.op&&t.field.isEqual(i.field)&&Gs(t.value,i.value)):n instanceof ln?function(t,i){return i instanceof ln&&t.op===i.op&&t.filters.length===i.filters.length&&t.filters.reduce((a,c,d)=>a&&o0(c,i.filters[d]),!0)}(n,e):void rt();var t,i}function Uh(n,e){const t=n.filters.concat(e);return ln.create(t,n.op)}function a0(n){return n instanceof Wt?`${(e=n).field.canonicalString()} ${e.op} ${Mo(e.value)}`:n instanceof ln?function(e){return e.op.toString()+" {"+e.getFilters().map(a0).join(" ,")+"}"}(n):"Filter";var e}class cT extends Wt{constructor(e,t,i){super(e,t,i),this.key=Ke.fromName(i.referenceValue)}matches(e){const t=Ke.comparator(e.key,this.key);return this.matchesComparison(t)}}class Hp extends Wt{constructor(e,t){super(e,"in",t),this.keys=BE(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class lT extends Wt{constructor(e,t){super(e,"not-in",t),this.keys=BE(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function BE(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(i=>Ke.fromName(i.referenceValue))}class dT extends Wt{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return _a(t)&&ya(t.arrayValue,this.value)}}class UE extends Wt{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&ya(this.value.arrayValue,t)}}class u0 extends Wt{constructor(e,t){super(e,"not-in",t)}matches(e){if(ya(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!ya(this.value.arrayValue,t)}}class gy extends Wt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!_a(t)||!t.arrayValue.values)&&t.arrayValue.values.some(i=>ya(this.value.arrayValue,i))}}class my{constructor(e,t=null,i=[],a=[],c=null,d=null,_=null){this.path=e,this.collectionGroup=t,this.orderBy=i,this.filters=a,this.limit=c,this.startAt=d,this.endAt=_,this.dt=null}}function jE(n,e=null,t=[],i=[],a=null,c=null,d=null){return new my(n,e,t,i,a,c,d)}function Xl(n){const e=Qe(n);if(null===e.dt){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(i=>Bh(i)).join(","),t+="|ob:",t+=e.orderBy.map(i=>{return(a=i).field.canonicalString()+a.dir;var a}).join(","),Rp(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(i=>Mo(i)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(i=>Mo(i)).join(",")),e.dt=t}return e.dt}function $p(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!aT(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!o0(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!VE(n.startAt,e.startAt)&&VE(n.endAt,e.endAt)}function jh(n){return Ke.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function yy(n,e){return n.filters.filter(t=>t instanceof Wt&&t.field.isEqual(e))}function c0(n,e,t){let i=Kl,a=!0;for(const c of yy(n,e)){let d=Kl,_=!0;switch(c.op){case"<":case"<=":d=RE(c.value);break;case"==":case"in":case">=":d=c.value;break;case">":d=c.value,_=!1;break;case"!=":case"not-in":d=Kl}r0({value:i,inclusive:a},{value:d,inclusive:_})<0&&(i=d,a=_)}if(null!==t)for(let c=0;c<n.orderBy.length;++c)if(n.orderBy[c].field.isEqual(e)){const d=t.position[c];r0({value:i,inclusive:a},{value:d,inclusive:t.inclusive})<0&&(i=d,a=t.inclusive);break}return{value:i,inclusive:a}}function HE(n,e,t){let i=is,a=!0;for(const c of yy(n,e)){let d=is,_=!0;switch(c.op){case">=":case">":d=kE(c.value),_=!1;break;case"==":case"in":case"<=":d=c.value;break;case"<":d=c.value,_=!1;break;case"!=":case"not-in":d=is}s0({value:i,inclusive:a},{value:d,inclusive:_})>0&&(i=d,a=_)}if(null!==t)for(let c=0;c<n.orderBy.length;++c)if(n.orderBy[c].field.isEqual(e)){const d=t.position[c];s0({value:i,inclusive:a},{value:d,inclusive:t.inclusive})>0&&(i=d,a=t.inclusive);break}return{value:i,inclusive:a}}class Tu{constructor(e,t=null,i=[],a=[],c=null,d="F",_=null,D=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=i,this.filters=a,this.limit=c,this.limitType=d,this.startAt=_,this.endAt=D,this.wt=null,this._t=null}}function l0(n,e,t,i,a,c,d,_){return new Tu(n,e,t,i,a,c,d,_)}function ed(n){return new Tu(n)}function d0(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}function h0(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function _y(n){for(const e of n.filters){const t=e.getFirstInequalityField();if(null!==t)return t}return null}function f0(n){return null!==n.collectionGroup}function td(n){const e=Qe(n);if(null===e.wt){e.wt=[];const t=_y(e),i=h0(e);if(null!==t&&null===i)t.isKeyField()||e.wt.push(new Up(t)),e.wt.push(new Up(Wn.keyField(),"asc"));else{let a=!1;for(const c of e.explicitOrderBy)e.wt.push(c),c.field.isKeyField()&&(a=!0);if(!a){const c=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.wt.push(new Up(Wn.keyField(),c))}}}return e.wt}function gi(n){const e=Qe(n);if(!e._t)if("F"===e.limitType)e._t=jE(e.path,e.collectionGroup,td(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const c of td(e))t.push(new Up(c.field,"desc"===c.dir?"asc":"desc"));const i=e.endAt?new Ql(e.endAt.position,e.endAt.inclusive):null,a=e.startAt?new Ql(e.startAt.position,e.startAt.inclusive):null;e._t=jE(e.path,e.collectionGroup,t,e.filters,e.limit,i,a)}return e._t}function Gp(n,e){e.getFirstInequalityField(),_y(n);const t=n.filters.concat([e]);return new Tu(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function vy(n,e,t){return new Tu(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Pc(n,e){return $p(gi(n),gi(e))&&n.limitType===e.limitType}function zp(n){return`${Xl(gi(n))}|lt:${n.limitType}`}function qp(n){return`Query(target=${function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=`, filters: [${e.filters.map(i=>a0(i)).join(", ")}]`),Rp(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=`, orderBy: [${e.orderBy.map(i=>{return`${(a=i).field.canonicalString()} (${a.dir})`;var a}).join(", ")}]`),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(i=>Mo(i)).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(i=>Mo(i)).join(",")),`Target(${t})`}(gi(n))}; limitType=${n.limitType})`}function Hh(n,e){return e.isFoundDocument()&&function(t,i){const a=i.key.path;return null!==t.collectionGroup?i.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(a):Ke.isDocumentKey(t.path)?t.path.isEqual(a):t.path.isImmediateParentOf(a)}(n,e)&&function(t,i){for(const a of td(t))if(!a.field.isKeyField()&&null===i.data.field(a.field))return!1;return!0}(n,e)&&function(t,i){for(const a of t.filters)if(!a.matches(i))return!1;return!0}(n,e)&&(i=e,!((t=n).startAt&&!function(a,c,d){const _=LE(a,c,d);return a.inclusive?_<=0:_<0}(t.startAt,td(t),i)||t.endAt&&!function(a,c,d){const _=LE(a,c,d);return a.inclusive?_>=0:_>0}(t.endAt,td(t),i)));var t,i}function $E(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function GE(n){return(e,t)=>{let i=!1;for(const a of td(n)){const c=hT(a,e,t);if(0!==c)return c;i=i||a.field.isKeyField()}return 0}}function hT(n,e,t){const i=n.field.isKeyField()?Ke.comparator(e.key,t.key):function(a,c,d){const _=c.data.field(a),D=d.data.field(a);return null!==_&&null!==D?Es(_,D):rt()}(n.field,e,t);switch(n.dir){case"asc":return i;case"desc":return-1*i;default:return rt()}}class xo{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),i=this.inner[t];if(void 0!==i)for(const[a,c]of i)if(this.equalsFn(a,e))return c}has(e){return void 0!==this.get(e)}set(e,t){const i=this.mapKeyFn(e),a=this.inner[i];if(void 0===a)return this.inner[i]=[[e,t]],void this.innerSize++;for(let c=0;c<a.length;c++)if(this.equalsFn(a[c][0],e))return void(a[c]=[e,t]);a.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),i=this.inner[t];if(void 0===i)return!1;for(let a=0;a<i.length;a++)if(this.equalsFn(i[a][0],e))return 1===i.length?delete this.inner[t]:i.splice(a,1),this.innerSize--,!0;return!1}forEach(e){xc(this.inner,(t,i)=>{for(const[a,c]of i)e(a,c)})}isEmpty(){return OE(this.inner)}size(){return this.innerSize}}const p0=new Tn(Ke.comparator);function Bi(){return p0}const g0=new Tn(Ke.comparator);function Wp(...n){let e=g0;for(const t of n)e=e.insert(t.key,t);return e}function zE(n){let e=g0;return n.forEach((t,i)=>e=e.insert(t,i.overlayedDocument)),e}function No(){return $h()}function wy(){return $h()}function $h(){return new xo(n=>n.toString(),(n,e)=>n.isEqual(e))}const m0=new Tn(Ke.comparator),qE=new xn(Ke.comparator);function Vt(...n){let e=qE;for(const t of n)e=e.add(t);return e}const WE=new xn(Rt);function Iy(){return WE}function y0(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Mc(e)?"-0":e}}function _0(n){return{integerValue:""+n}}function ZE(n,e){return kh(e)?_0(e):y0(n,e)}class Ey{constructor(){this._=void 0}}function fT(n,e,t){return n instanceof nd?function(i,a){const c={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return a&&Fh(a)&&(a=fy(a)),a&&(c.fields.__previous_value__=a),{mapValue:c}}(t,e):n instanceof Rc?w0(n,e):n instanceof kc?I0(n,e):function(i,a){const c=Dy(i,a),d=E0(c)+E0(i.gt);return Oc(c)&&Oc(i.gt)?_0(d):y0(i.serializer,d)}(n,e)}function v0(n,e,t){return n instanceof Rc?w0(n,e):n instanceof kc?I0(n,e):t}function Dy(n,e){return n instanceof rd?Oc(t=e)||(i=t)&&"doubleValue"in i?e:{integerValue:0}:null;var i,t}class nd extends Ey{}class Rc extends Ey{constructor(e){super(),this.elements=e}}function w0(n,e){const t=D0(e);for(const i of n.elements)t.some(a=>Gs(a,i))||t.push(i);return{arrayValue:{values:t}}}class kc extends Ey{constructor(e){super(),this.elements=e}}function I0(n,e){let t=D0(e);for(const i of n.elements)t=t.filter(a=>!Gs(a,i));return{arrayValue:{values:t}}}class rd extends Ey{constructor(e,t){super(),this.serializer=e,this.gt=t}}function E0(n){return ir(n.integerValue||n.doubleValue)}function D0(n){return _a(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class Fc{constructor(e,t){this.field=e,this.transform=t}}class pT{constructor(e,t){this.version=e,this.transformResults=t}}class Bn{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Bn}static exists(e){return new Bn(void 0,e)}static updateTime(e){return new Bn(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Gh(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class va{}function Cy(n,e){if(!n.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return n.isNoDocument()?new sd(n.key,Bn.none()):new zh(n.key,n.data,Bn.none());{const t=n.data,i=Ur.empty();let a=new xn(Wn.comparator);for(let c of e.fields)if(!a.has(c)){let d=t.field(c);null===d&&c.length>1&&(c=c.popLast(),d=t.field(c)),null===d?i.delete(c):i.set(c,d),a=a.add(c)}return new Su(n.key,i,new ns(a.toArray()),Bn.none())}}function gT(n,e,t){n instanceof zh?function(i,a,c){const d=i.value.clone(),_=KE(i.fieldTransforms,a,c.transformResults);d.setAll(_),a.convertToFoundDocument(c.version,d).setHasCommittedMutations()}(n,e,t):n instanceof Su?function(i,a,c){if(!Gh(i.precondition,a))return void a.convertToUnknownDocument(c.version);const d=KE(i.fieldTransforms,a,c.transformResults),_=a.data;_.setAll(C0(i)),_.setAll(d),a.convertToFoundDocument(c.version,_).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function id(n,e,t,i){return n instanceof zh?function(a,c,d,_){if(!Gh(a.precondition,c))return d;const D=a.value.clone(),b=Tr(a.fieldTransforms,_,c);return D.setAll(b),c.convertToFoundDocument(c.version,D).setHasLocalMutations(),null}(n,e,t,i):n instanceof Su?function(a,c,d,_){if(!Gh(a.precondition,c))return d;const D=Tr(a.fieldTransforms,_,c),b=c.data;return b.setAll(C0(a)),b.setAll(D),c.convertToFoundDocument(c.version,b).setHasLocalMutations(),null===d?null:d.unionWith(a.fieldMask.fields).unionWith(a.fieldTransforms.map(M=>M.field))}(n,e,t,i):(d=t,Gh(n.precondition,c=e)?(c.convertToNoDocument(c.version).setHasLocalMutations(),null):d);var c,d}function RA(n,e){let t=null;for(const i of n.fieldTransforms){const a=e.data.field(i.field),c=Dy(i.transform,a||null);null!=c&&(null===t&&(t=Ur.empty()),t.set(i.field,c))}return t||null}function mT(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(i=e.fieldTransforms,!!(void 0===(t=n.fieldTransforms)&&void 0===i||t&&i&&Oh(t,i,(a,c)=>function Lc(n,e){return n.field.isEqual(e.field)&&(i=e.transform,(t=n.transform)instanceof Rc&&i instanceof Rc||t instanceof kc&&i instanceof kc?Oh(t.elements,i.elements,Gs):t instanceof rd&&i instanceof rd?Gs(t.gt,i.gt):t instanceof nd&&i instanceof nd);var t,i}(a,c))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var t,i}class zh extends va{constructor(e,t,i,a=[]){super(),this.key=e,this.value=t,this.precondition=i,this.fieldTransforms=a,this.type=0}getFieldMask(){return null}}class Su extends va{constructor(e,t,i,a,c=[]){super(),this.key=e,this.data=t,this.fieldMask=i,this.precondition=a,this.fieldTransforms=c,this.type=1}getFieldMask(){return this.fieldMask}}function C0(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const i=n.data.field(t);e.set(t,i)}}),e}function KE(n,e,t){const i=new Map;ct(n.length===t.length);for(let a=0;a<t.length;a++){const c=n[a],d=c.transform,_=e.data.field(c.field);i.set(c.field,v0(d,_,t[a]))}return i}function Tr(n,e,t){const i=new Map;for(const a of n){const c=a.transform,d=t.data.field(a.field);i.set(a.field,fT(c,d,e))}return i}class sd extends va{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class b0 extends va{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class T0{constructor(e,t,i,a){this.batchId=e,this.localWriteTime=t,this.baseMutations=i,this.mutations=a}applyToRemoteDocument(e,t){const i=t.mutationResults;for(let a=0;a<this.mutations.length;a++){const c=this.mutations[a];c.key.isEqual(e.key)&&gT(c,e,i[a])}}applyToLocalView(e,t){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(t=id(i,e,t,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(t=id(i,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const i=wy();return this.mutations.forEach(a=>{const c=e.get(a.key),d=c.overlayedDocument;let _=this.applyToLocalView(d,c.mutatedFields);_=t.has(a.key)?null:_;const D=Cy(d,_);null!==D&&i.set(a.key,D),d.isValidDocument()||d.convertToNoDocument(ht.min())}),i}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Vt())}isEqual(e){return this.batchId===e.batchId&&Oh(this.mutations,e.mutations,(t,i)=>mT(t,i))&&Oh(this.baseMutations,e.baseMutations,(t,i)=>mT(t,i))}}class by{constructor(e,t,i,a){this.batch=e,this.commitVersion=t,this.mutationResults=i,this.docVersions=a}static from(e,t,i){ct(e.mutations.length===i.length);let a=m0;const c=e.mutations;for(let d=0;d<c.length;d++)a=a.insert(c[d].key,i[d].version);return new by(e,t,i,a)}}class S0{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class QE{constructor(e,t){this.count=e,this.unchangedNames=t}}var Nn,Xt;function JE(n){switch(n){default:return rt();case se.CANCELLED:case se.UNKNOWN:case se.DEADLINE_EXCEEDED:case se.RESOURCE_EXHAUSTED:case se.INTERNAL:case se.UNAVAILABLE:case se.UNAUTHENTICATED:return!1;case se.INVALID_ARGUMENT:case se.NOT_FOUND:case se.ALREADY_EXISTS:case se.PERMISSION_DENIED:case se.FAILED_PRECONDITION:case se.ABORTED:case se.OUT_OF_RANGE:case se.UNIMPLEMENTED:case se.DATA_LOSS:return!0}}function A0(n){if(void 0===n)return qn("GRPC error has no .code"),se.UNKNOWN;switch(n){case Nn.OK:return se.OK;case Nn.CANCELLED:return se.CANCELLED;case Nn.UNKNOWN:return se.UNKNOWN;case Nn.DEADLINE_EXCEEDED:return se.DEADLINE_EXCEEDED;case Nn.RESOURCE_EXHAUSTED:return se.RESOURCE_EXHAUSTED;case Nn.INTERNAL:return se.INTERNAL;case Nn.UNAVAILABLE:return se.UNAVAILABLE;case Nn.UNAUTHENTICATED:return se.UNAUTHENTICATED;case Nn.INVALID_ARGUMENT:return se.INVALID_ARGUMENT;case Nn.NOT_FOUND:return se.NOT_FOUND;case Nn.ALREADY_EXISTS:return se.ALREADY_EXISTS;case Nn.PERMISSION_DENIED:return se.PERMISSION_DENIED;case Nn.FAILED_PRECONDITION:return se.FAILED_PRECONDITION;case Nn.ABORTED:return se.ABORTED;case Nn.OUT_OF_RANGE:return se.OUT_OF_RANGE;case Nn.UNIMPLEMENTED:return se.UNIMPLEMENTED;case Nn.DATA_LOSS:return se.DATA_LOSS;default:return rt()}}(Xt=Nn||(Nn={}))[Xt.OK=0]="OK",Xt[Xt.CANCELLED=1]="CANCELLED",Xt[Xt.UNKNOWN=2]="UNKNOWN",Xt[Xt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Xt[Xt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Xt[Xt.NOT_FOUND=5]="NOT_FOUND",Xt[Xt.ALREADY_EXISTS=6]="ALREADY_EXISTS",Xt[Xt.PERMISSION_DENIED=7]="PERMISSION_DENIED",Xt[Xt.UNAUTHENTICATED=16]="UNAUTHENTICATED",Xt[Xt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Xt[Xt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Xt[Xt.ABORTED=10]="ABORTED",Xt[Xt.OUT_OF_RANGE=11]="OUT_OF_RANGE",Xt[Xt.UNIMPLEMENTED=12]="UNIMPLEMENTED",Xt[Xt.INTERNAL=13]="INTERNAL",Xt[Xt.UNAVAILABLE=14]="UNAVAILABLE",Xt[Xt.DATA_LOSS=15]="DATA_LOSS";class M0{constructor(){this.onExistenceFilterMismatchCallbacks=new Map}static get instance(){return Zp}static getOrCreateInstance(){return null===Zp&&(Zp=new M0),Zp}onExistenceFilterMismatch(e){const t=Symbol();return this.onExistenceFilterMismatchCallbacks.set(t,e),()=>this.onExistenceFilterMismatchCallbacks.delete(t)}notifyOnExistenceFilterMismatch(e){this.onExistenceFilterMismatchCallbacks.forEach(t=>t(e))}}let Zp=null;function yT(){return new TextEncoder}const XE=new St([4294967295,4294967295],0);function Ty(n){const e=yT().encode(n),t=new yE;return t.update(e),new Uint8Array(t.digest())}function Oo(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),i=e.getUint32(4,!0),a=e.getUint32(8,!0),c=e.getUint32(12,!0);return[new St([t,i],0),new St([a,c],0)]}class x0{constructor(e,t,i){if(this.bitmap=e,this.padding=t,this.hashCount=i,t<0||t>=8)throw new Kp(`Invalid padding: ${t}`);if(i<0)throw new Kp(`Invalid hash count: ${i}`);if(e.length>0&&0===this.hashCount)throw new Kp(`Invalid hash count: ${i}`);if(0===e.length&&0!==t)throw new Kp(`Invalid padding when bitmap length is 0: ${t}`);this.It=8*e.length-t,this.Tt=St.fromNumber(this.It)}Et(e,t,i){let a=e.add(t.multiply(St.fromNumber(i)));return 1===a.compare(XE)&&(a=new St([a.getBits(0),a.getBits(1)],0)),a.modulo(this.Tt).toNumber()}At(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}vt(e){if(0===this.It)return!1;const t=Ty(e),[i,a]=Oo(t);for(let c=0;c<this.hashCount;c++){const d=this.Et(i,a,c);if(!this.At(d))return!1}return!0}static create(e,t,i){const a=e%8==0?0:8-e%8,c=new Uint8Array(Math.ceil(e/8)),d=new x0(c,a,t);return i.forEach(_=>d.insert(_)),d}insert(e){if(0===this.It)return;const t=Ty(e),[i,a]=Oo(t);for(let c=0;c<this.hashCount;c++){const d=this.Et(i,a,c);this.Rt(d)}}Rt(e){const t=Math.floor(e/8);this.bitmap[t]|=1<<e%8}}class Kp extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class ss{constructor(e,t,i,a,c){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=i,this.documentUpdates=a,this.resolvedLimboDocuments=c}static createSynthesizedRemoteEventForCurrentChange(e,t,i){const a=new Map;return a.set(e,Ui.createSynthesizedTargetChangeForCurrentChange(e,t,i)),new ss(ht.min(),a,new Tn(Rt),Bi(),Vt())}}class Ui{constructor(e,t,i,a,c){this.resumeToken=e,this.current=t,this.addedDocuments=i,this.modifiedDocuments=a,this.removedDocuments=c}static createSynthesizedTargetChangeForCurrentChange(e,t,i){return new Ui(i,t,Vt(),Vt(),Vt())}}class os{constructor(e,t,i,a){this.Pt=e,this.removedTargetIds=t,this.key=i,this.bt=a}}class N0{constructor(e,t){this.targetId=e,this.Vt=t}}class O0{constructor(e,t,i=Vr.EMPTY_BYTE_STRING,a=null){this.state=e,this.targetIds=t,this.resumeToken=i,this.cause=a}}class eD{constructor(){this.St=0,this.Dt=nD(),this.Ct=Vr.EMPTY_BYTE_STRING,this.xt=!1,this.Nt=!0}get current(){return this.xt}get resumeToken(){return this.Ct}get kt(){return 0!==this.St}get Mt(){return this.Nt}$t(e){e.approximateByteSize()>0&&(this.Nt=!0,this.Ct=e)}Ot(){let e=Vt(),t=Vt(),i=Vt();return this.Dt.forEach((a,c)=>{switch(c){case 0:e=e.add(a);break;case 2:t=t.add(a);break;case 1:i=i.add(a);break;default:rt()}}),new Ui(this.Ct,this.xt,e,t,i)}Ft(){this.Nt=!1,this.Dt=nD()}Bt(e,t){this.Nt=!0,this.Dt=this.Dt.insert(e,t)}Lt(e){this.Nt=!0,this.Dt=this.Dt.remove(e)}qt(){this.St+=1}Ut(){this.St-=1}Kt(){this.Nt=!0,this.xt=!0}}class _T{constructor(e){this.Gt=e,this.Qt=new Map,this.jt=Bi(),this.zt=tD(),this.Wt=new Tn(Rt)}Ht(e){for(const t of e.Pt)e.bt&&e.bt.isFoundDocument()?this.Jt(t,e.bt):this.Yt(t,e.key,e.bt);for(const t of e.removedTargetIds)this.Yt(t,e.key,e.bt)}Xt(e){this.forEachTarget(e,t=>{const i=this.Zt(t);switch(e.state){case 0:this.te(t)&&i.$t(e.resumeToken);break;case 1:i.Ut(),i.kt||i.Ft(),i.$t(e.resumeToken);break;case 2:i.Ut(),i.kt||this.removeTarget(t);break;case 3:this.te(t)&&(i.Kt(),i.$t(e.resumeToken));break;case 4:this.te(t)&&(this.ee(t),i.$t(e.resumeToken));break;default:rt()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Qt.forEach((i,a)=>{this.te(a)&&t(a)})}ne(e){var t;const i=e.targetId,a=e.Vt.count,c=this.se(i);if(c){const d=c.target;if(jh(d))if(0===a){const _=new Ke(d.path);this.Yt(i,_,Vn.newNoDocument(_,ht.min()))}else ct(1===a);else{const _=this.ie(i);if(_!==a){const D=this.re(e,_);0!==D&&(this.ee(i),this.Wt=this.Wt.insert(i,2===D?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch")),null===(t=M0.instance)||void 0===t||t.notifyOnExistenceFilterMismatch(function(b,M,O){var z,ee,De,Be,je,wt;const At={localCacheCount:M,existenceFilterCount:O.count},It=O.unchangedNames;return It&&(At.bloomFilter={applied:0===b,hashCount:null!==(z=It?.hashCount)&&void 0!==z?z:0,bitmapLength:null!==(Be=null===(De=null===(ee=It?.bits)||void 0===ee?void 0:ee.bitmap)||void 0===De?void 0:De.length)&&void 0!==Be?Be:0,padding:null!==(wt=null===(je=It?.bits)||void 0===je?void 0:je.padding)&&void 0!==wt?wt:0}),At}(D,_,e.Vt))}}}}re(e,t){const{unchangedNames:i,count:a}=e.Vt;if(!i||!i.bits)return 1;const{bits:{bitmap:c="",padding:d=0},hashCount:_=0}=i;let D,b;try{D=Cu(c).toUint8Array()}catch(M){if(M instanceof oT)return bi("Decoding the base64 bloom filter in existence filter failed ("+M.message+"); ignoring the bloom filter and falling back to full re-query."),1;throw M}try{b=new x0(D,d,_)}catch(M){return bi(M instanceof Kp?"BloomFilter error: ":"Applying bloom filter failed: ",M),1}return 0===b.It?1:a!==t-this.oe(e.targetId,b)?2:0}oe(e,t){const i=this.Gt.getRemoteKeysForTarget(e);let a=0;return i.forEach(c=>{const d=this.Gt.ue(),_=`projects/${d.projectId}/databases/${d.database}/documents/${c.path.canonicalString()}`;t.vt(_)||(this.Yt(e,c,null),a++)}),a}ce(e){const t=new Map;this.Qt.forEach((c,d)=>{const _=this.se(d);if(_){if(c.current&&jh(_.target)){const D=new Ke(_.target.path);null!==this.jt.get(D)||this.ae(d,D)||this.Yt(d,D,Vn.newNoDocument(D,e))}c.Mt&&(t.set(d,c.Ot()),c.Ft())}});let i=Vt();this.zt.forEach((c,d)=>{let _=!0;d.forEachWhile(D=>{const b=this.se(D);return!b||"TargetPurposeLimboResolution"===b.purpose||(_=!1,!1)}),_&&(i=i.add(c))}),this.jt.forEach((c,d)=>d.setReadTime(e));const a=new ss(e,t,this.Wt,this.jt,i);return this.jt=Bi(),this.zt=tD(),this.Wt=new Tn(Rt),a}Jt(e,t){if(!this.te(e))return;const i=this.ae(e,t.key)?2:0;this.Zt(e).Bt(t.key,i),this.jt=this.jt.insert(t.key,t),this.zt=this.zt.insert(t.key,this.he(t.key).add(e))}Yt(e,t,i){if(!this.te(e))return;const a=this.Zt(e);this.ae(e,t)?a.Bt(t,1):a.Lt(t),this.zt=this.zt.insert(t,this.he(t).delete(e)),i&&(this.jt=this.jt.insert(t,i))}removeTarget(e){this.Qt.delete(e)}ie(e){const t=this.Zt(e).Ot();return this.Gt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}qt(e){this.Zt(e).qt()}Zt(e){let t=this.Qt.get(e);return t||(t=new eD,this.Qt.set(e,t)),t}he(e){let t=this.zt.get(e);return t||(t=new xn(Rt),this.zt=this.zt.insert(e,t)),t}te(e){const t=null!==this.se(e);return t||Pe("WatchChangeAggregator","Detected inactive target",e),t}se(e){const t=this.Qt.get(e);return t&&t.kt?null:this.Gt.le(e)}ee(e){this.Qt.set(e,new eD),this.Gt.getRemoteKeysForTarget(e).forEach(t=>{this.Yt(e,t,null)})}ae(e,t){return this.Gt.getRemoteKeysForTarget(e).has(t)}}function tD(){return new Tn(Ke.comparator)}function nD(){return new Tn(Ke.comparator)}const P0={asc:"ASCENDING",desc:"DESCENDING"},Yp={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},vT={and:"AND",or:"OR"};class rD{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function R0(n,e){return n.useProto3Json||Rp(e)?e:{value:e}}function qh(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function k0(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function iD(n,e){return qh(n,e.toTimestamp())}function Un(n){return ct(!!n),ht.fromTimestamp(function(e){const t=Ao(e);return new bn(t.seconds,t.nanos)}(n))}function F0(n,e){return(t=n,new Jt(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function L0(n){const e=Jt.fromString(n);return ct(hD(e)),e}function Wh(n,e){return F0(n.databaseId,e.path)}function Po(n,e){const t=L0(e);if(t.get(1)!==n.databaseId.projectId)throw new Se(se.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Se(se.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Ke(Qp(t))}function V0(n,e){return F0(n.databaseId,e)}function sD(n){const e=L0(n);return 4===e.length?Jt.emptyPath():Qp(e)}function Zh(n){return new Jt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function Qp(n){return ct(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function B0(n,e,t){return{name:Wh(n,e),fields:t.value.mapValue.fields}}function U0(n,e,t){const i=Po(n,e.name),a=Un(e.updateTime),c=e.createTime?Un(e.createTime):ht.min(),d=new Ur({mapValue:{fields:e.fields}}),_=Vn.newFoundDocument(i,a,c,d);return t&&_.setHasCommittedMutations(),t?_.setHasCommittedMutations():_}function Kh(n,e){let t;if(e instanceof zh)t={update:B0(n,e.key,e.value)};else if(e instanceof sd)t={delete:Wh(n,e.key)};else if(e instanceof Su)t={update:B0(n,e.key,e.data),updateMask:CT(e.fieldMask)};else{if(!(e instanceof b0))return rt();t={verify:Wh(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(i=>function(a,c){const d=c.transform;if(d instanceof nd)return{fieldPath:c.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(d instanceof Rc)return{fieldPath:c.field.canonicalString(),appendMissingElements:{values:d.elements}};if(d instanceof kc)return{fieldPath:c.field.canonicalString(),removeAllFromArray:{values:d.elements}};if(d instanceof rd)return{fieldPath:c.field.canonicalString(),increment:d.gt};throw rt()}(0,i))),e.precondition.isNone||(t.currentDocument=void 0!==(a=e.precondition).updateTime?{updateTime:iD(n,a.updateTime)}:void 0!==a.exists?{exists:a.exists}:rt()),t;var a}function Sy(n,e){const t=e.currentDocument?void 0!==(a=e.currentDocument).updateTime?Bn.updateTime(Un(a.updateTime)):void 0!==a.exists?Bn.exists(a.exists):Bn.none():Bn.none(),i=e.updateTransforms?e.updateTransforms.map(a=>function(c,d){let _=null;"setToServerValue"in d?(ct("REQUEST_TIME"===d.setToServerValue),_=new nd):"appendMissingElements"in d?_=new Rc(d.appendMissingElements.values||[]):"removeAllFromArray"in d?_=new kc(d.removeAllFromArray.values||[]):"increment"in d?_=new rd(c,d.increment):rt();const D=Wn.fromServerFormat(d.fieldPath);return new Fc(D,_)}(n,a)):[];var a;if(e.update){const a=Po(n,e.update.name),c=new Ur({mapValue:{fields:e.update.fields}});if(e.updateMask){const d=new ns((e.updateMask.fieldPaths||[]).map(b=>Wn.fromServerFormat(b)));return new Su(a,c,d,t,i)}return new zh(a,c,t,i)}if(e.delete){const a=Po(n,e.delete);return new sd(a,t)}if(e.verify){const a=Po(n,e.verify);return new b0(a,t)}return rt()}function j0(n,e){return{documents:[V0(n,e.path)]}}function H0(n,e){const t={structuredQuery:{}},i=e.path;null!==e.collectionGroup?(t.parent=V0(n,i),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=V0(n,i.popLast()),t.structuredQuery.from=[{collectionId:i.lastSegment()}]);const a=function(D){if(0!==D.length)return dD(ln.create(D,"and"))}(e.filters);a&&(t.structuredQuery.where=a);const c=function(D){if(0!==D.length)return D.map(b=>{return{field:Vc((M=b).field),direction:IT(M.dir)};var M})}(e.orderBy);c&&(t.structuredQuery.orderBy=c);const d=R0(n,e.limit);var _,D;return null!==d&&(t.structuredQuery.limit=d),e.startAt&&(t.structuredQuery.startAt={before:(_=e.startAt).inclusive,values:_.position}),e.endAt&&(t.structuredQuery.endAt={before:!(D=e.endAt).inclusive,values:D.position}),t}function cD(n){let e=sD(n.parent);const t=n.structuredQuery,i=t.from?t.from.length:0;let a=null;if(i>0){ct(1===i);const M=t.from[0];M.allDescendants?a=M.collectionId:e=e.child(M.collectionId)}let c=[];t.where&&(c=function(M){const O=lD(M);return O instanceof ln&&Jl(O)?O.getFilters():[O]}(t.where));let d=[];t.orderBy&&(d=t.orderBy.map(M=>{return new Up(Yh((O=M).field),function(z){switch(z){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(O.direction));var O}));let _=null;t.limit&&(_=function(M){let O;return O="object"==typeof M?M.value:M,Rp(O)?null:O}(t.limit));let D=null;var M;t.startAt&&(D=new Ql((M=t.startAt).values||[],!!M.before));let b=null;return t.endAt&&(b=function(M){return new Ql(M.values||[],!M.before)}(t.endAt)),l0(e,a,d,c,_,"F",D,b)}function lD(n){return void 0!==n.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=Yh(e.unaryFilter.field);return Wt.create(t,"==",{doubleValue:NaN});case"IS_NULL":const i=Yh(e.unaryFilter.field);return Wt.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const a=Yh(e.unaryFilter.field);return Wt.create(a,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const c=Yh(e.unaryFilter.field);return Wt.create(c,"!=",{nullValue:"NULL_VALUE"});default:return rt()}}(n):void 0!==n.fieldFilter?Wt.create(Yh((e=n).fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return rt()}}(e.fieldFilter.op),e.fieldFilter.value):void 0!==n.compositeFilter?function(e){return ln.create(e.compositeFilter.filters.map(t=>lD(t)),function(t){switch(t){case"AND":return"and";case"OR":return"or";default:return rt()}}(e.compositeFilter.op))}(n):rt();var e}function IT(n){return P0[n]}function ET(n){return Yp[n]}function DT(n){return vT[n]}function Vc(n){return{fieldPath:n.canonicalString()}}function Yh(n){return Wn.fromServerFormat(n.fieldPath)}function dD(n){return n instanceof Wt?function(e){if("=="===e.op){if(t0(e.value))return{unaryFilter:{field:Vc(e.field),op:"IS_NAN"}};if(e0(e.value))return{unaryFilter:{field:Vc(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(t0(e.value))return{unaryFilter:{field:Vc(e.field),op:"IS_NOT_NAN"}};if(e0(e.value))return{unaryFilter:{field:Vc(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Vc(e.field),op:ET(e.op),value:e.value}}}(n):n instanceof ln?function(e){const t=e.getFilters().map(i=>dD(i));return 1===t.length?t[0]:{compositeFilter:{op:DT(e.op),filters:t}}}(n):rt()}function CT(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function hD(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}class Au{constructor(e,t,i,a,c=ht.min(),d=ht.min(),_=Vr.EMPTY_BYTE_STRING,D=null){this.target=e,this.targetId=t,this.purpose=i,this.sequenceNumber=a,this.snapshotVersion=c,this.lastLimboFreeSnapshotVersion=d,this.resumeToken=_,this.expectedCount=D}withSequenceNumber(e){return new Au(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Au(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Au(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Au(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class fD{constructor(e){this.fe=e}}function pD(n,e){const t=e.key,i={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:Ay(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())i.document={name:Wh(a=n.fe,(c=e).key),fields:c.data.value.mapValue.fields,updateTime:qh(a,c.version.toTimestamp()),createTime:qh(a,c.createTime.toTimestamp())};else if(e.isNoDocument())i.noDocument={path:t.path.toArray(),readTime:od(e.version)};else{if(!e.isUnknownDocument())return rt();i.unknownDocument={path:t.path.toArray(),version:od(e.version)}}var a,c;return i}function Ay(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function od(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Bc(n){const e=new bn(n.seconds,n.nanoseconds);return ht.fromTimestamp(e)}function Uc(n,e){const t=(e.baseMutations||[]).map(c=>Sy(n.fe,c));for(let c=0;c<e.mutations.length-1;++c)c+1<e.mutations.length&&void 0!==e.mutations[c+1].transform&&(e.mutations[c].updateTransforms=e.mutations[c+1].transform.fieldTransforms,e.mutations.splice(c+1,1),++c);const i=e.mutations.map(c=>Sy(n.fe,c)),a=bn.fromMillis(e.localWriteTimeMs);return new T0(e.batchId,a,t,i)}function Qh(n){const e=Bc(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?Bc(n.lastLimboFreeSnapshotVersion):ht.min();let i;var a;return void 0!==n.query.documents?(ct(1===(a=n.query).documents.length),i=gi(ed(sD(a.documents[0])))):i=gi(cD(n.query)),new Au(i,n.targetId,"TargetPurposeListen",n.lastListenSequenceNumber,e,t,Vr.fromBase64String(n.resumeToken))}function $0(n,e){const t=od(e.snapshotVersion),i=od(e.lastLimboFreeSnapshotVersion);let a;a=jh(e.target)?j0(n.fe,e.target):H0(n.fe,e.target);const c=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Xl(e.target),readTime:t,resumeToken:c,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:i,query:a}}function My(n){const e=cD({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?vy(e,e.limit,"L"):e}function xy(n,e){return new S0(e.largestBatchId,Sy(n.fe,e.overlayMutation))}function G0(n,e){const t=e.path.lastSegment();return[n,fi(e.path.popLast()),t]}function z0(n,e,t,i){return{indexId:n,uid:e.uid||"",sequenceNumber:t,readTime:od(i.readTime),documentKey:fi(i.documentKey.path),largestBatchId:i.largestBatchId}}class gD{getBundleMetadata(e,t){return q0(e).get(t).next(i=>{if(i)return{id:(a=i).bundleId,createTime:Bc(a.createTime),version:a.version};var a})}saveBundleMetadata(e,t){return q0(e).put({bundleId:(i=t).id,createTime:od(Un(i.createTime)),version:i.version});var i}getNamedQuery(e,t){return W0(e).get(t).next(i=>{if(i)return{name:(a=i).name,query:My(a.bundledQuery),readTime:Bc(a.readTime)};var a})}saveNamedQuery(e,t){return W0(e).put({name:(i=t).name,readTime:od(Un(i.readTime)),bundledQuery:i.bundledQuery});var i}}function q0(n){return vr(n,"bundles")}function W0(n){return vr(n,"namedQueries")}class wa{constructor(e,t){this.serializer=e,this.userId=t}static de(e,t){return new wa(e,t.uid||"")}getOverlay(e,t){return Jp(e).get(G0(this.userId,t)).next(i=>i?xy(this.serializer,i):null)}getOverlays(e,t){const i=No();return X.forEach(t,a=>this.getOverlay(e,a).next(c=>{null!==c&&i.set(a,c)})).next(()=>i)}saveOverlays(e,t,i){const a=[];return i.forEach((c,d)=>{const _=new S0(t,d);a.push(this.we(e,_))}),X.waitFor(a)}removeOverlaysForBatchId(e,t,i){const a=new Set;t.forEach(d=>a.add(fi(d.getCollectionPath())));const c=[];return a.forEach(d=>{const _=IDBKeyRange.bound([this.userId,d,i],[this.userId,d,i+1],!1,!0);c.push(Jp(e).J("collectionPathOverlayIndex",_))}),X.waitFor(c)}getOverlaysForCollection(e,t,i){const a=No(),c=fi(t),d=IDBKeyRange.bound([this.userId,c,i],[this.userId,c,Number.POSITIVE_INFINITY],!0);return Jp(e).j("collectionPathOverlayIndex",d).next(_=>{for(const D of _){const b=xy(this.serializer,D);a.set(b.getKey(),b)}return a})}getOverlaysForCollectionGroup(e,t,i,a){const c=No();let d;const _=IDBKeyRange.bound([this.userId,t,i],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Jp(e).X({index:"collectionGroupOverlayIndex",range:_},(D,b,M)=>{const O=xy(this.serializer,b);c.size()<a||O.largestBatchId===d?(c.set(O.getKey(),O),d=O.largestBatchId):M.done()}).next(()=>c)}we(e,t){return Jp(e).put(function(i,a,c){const[d,_,D]=G0(a,c.mutation.key);return{userId:a,collectionPath:_,documentId:D,collectionGroup:c.mutation.key.getCollectionGroup(),largestBatchId:c.largestBatchId,overlayMutation:Kh(i.fe,c.mutation)}}(this.serializer,this.userId,t))}}function Jp(n){return vr(n,"documentOverlays")}class ad{constructor(){}_e(e,t){this.me(e,t),t.ge()}me(e,t){if("nullValue"in e)this.ye(t,5);else if("booleanValue"in e)this.ye(t,10),t.pe(e.booleanValue?1:0);else if("integerValue"in e)this.ye(t,15),t.pe(ir(e.integerValue));else if("doubleValue"in e){const i=ir(e.doubleValue);isNaN(i)?this.ye(t,13):(this.ye(t,15),Mc(i)?t.pe(0):t.pe(i))}else if("timestampValue"in e){const i=e.timestampValue;this.ye(t,20),"string"==typeof i?t.Ie(i):(t.Ie(`${i.seconds||""}`),t.pe(i.nanos||0))}else if("stringValue"in e)this.Te(e.stringValue,t),this.Ee(t);else if("bytesValue"in e)this.ye(t,30),t.Ae(Cu(e.bytesValue)),this.Ee(t);else if("referenceValue"in e)this.ve(e.referenceValue,t);else if("geoPointValue"in e){const i=e.geoPointValue;this.ye(t,45),t.pe(i.latitude||0),t.pe(i.longitude||0)}else"mapValue"in e?n0(e)?this.ye(t,Number.MAX_SAFE_INTEGER):(this.Re(e.mapValue,t),this.Ee(t)):"arrayValue"in e?(this.Pe(e.arrayValue,t),this.Ee(t)):rt()}Te(e,t){this.ye(t,25),this.be(e,t)}be(e,t){t.Ie(e)}Re(e,t){const i=e.fields||{};this.ye(t,55);for(const a of Object.keys(i))this.Te(a,t),this.me(i[a],t)}Pe(e,t){const i=e.values||[];this.ye(t,50);for(const a of i)this.me(a,t)}ve(e,t){this.ye(t,37),Ke.fromName(e).path.forEach(i=>{this.ye(t,60),this.be(i,t)})}ye(e,t){e.pe(t)}Ee(e){e.pe(2)}}function Jh(n){if(0===n)return 8;let e=0;return!(n>>4)&&(e+=4,n<<=4),!(n>>6)&&(e+=2,n<<=2),!(n>>7)&&(e+=1),e}function TT(n){const e=64-function(t){let i=0;for(let a=0;a<8;++a){const c=Jh(255&t[a]);if(i+=c,8!==c)break}return i}(n);return Math.ceil(e/8)}ad.Ve=new ad;class Z0{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Se(e){const t=e[Symbol.iterator]();let i=t.next();for(;!i.done;)this.De(i.value),i=t.next();this.Ce()}xe(e){const t=e[Symbol.iterator]();let i=t.next();for(;!i.done;)this.Ne(i.value),i=t.next();this.ke()}Me(e){for(const t of e){const i=t.charCodeAt(0);if(i<128)this.De(i);else if(i<2048)this.De(960|i>>>6),this.De(128|63&i);else if(t<"\ud800"||"\udbff"<t)this.De(480|i>>>12),this.De(128|63&i>>>6),this.De(128|63&i);else{const a=t.codePointAt(0);this.De(240|a>>>18),this.De(128|63&a>>>12),this.De(128|63&a>>>6),this.De(128|63&a)}}this.Ce()}$e(e){for(const t of e){const i=t.charCodeAt(0);if(i<128)this.Ne(i);else if(i<2048)this.Ne(960|i>>>6),this.Ne(128|63&i);else if(t<"\ud800"||"\udbff"<t)this.Ne(480|i>>>12),this.Ne(128|63&i>>>6),this.Ne(128|63&i);else{const a=t.codePointAt(0);this.Ne(240|a>>>18),this.Ne(128|63&a>>>12),this.Ne(128|63&a>>>6),this.Ne(128|63&a)}}this.ke()}Oe(e){const t=this.Fe(e),i=TT(t);this.Be(1+i),this.buffer[this.position++]=255&i;for(let a=t.length-i;a<t.length;++a)this.buffer[this.position++]=255&t[a]}Le(e){const t=this.Fe(e),i=TT(t);this.Be(1+i),this.buffer[this.position++]=~(255&i);for(let a=t.length-i;a<t.length;++a)this.buffer[this.position++]=~(255&t[a])}qe(){this.Ue(255),this.Ue(255)}Ke(){this.Ge(255),this.Ge(255)}reset(){this.position=0}seed(e){this.Be(e.length),this.buffer.set(e,this.position),this.position+=e.length}Qe(){return this.buffer.slice(0,this.position)}Fe(e){const t=function(a){const c=new DataView(new ArrayBuffer(8));return c.setFloat64(0,a,!1),new Uint8Array(c.buffer)}(e),i=0!=(128&t[0]);t[0]^=i?255:128;for(let a=1;a<t.length;++a)t[a]^=i?255:0;return t}De(e){const t=255&e;0===t?(this.Ue(0),this.Ue(255)):255===t?(this.Ue(255),this.Ue(0)):this.Ue(t)}Ne(e){const t=255&e;0===t?(this.Ge(0),this.Ge(255)):255===t?(this.Ge(255),this.Ge(0)):this.Ge(e)}Ce(){this.Ue(0),this.Ue(1)}ke(){this.Ge(0),this.Ge(1)}Ue(e){this.Be(1),this.buffer[this.position++]=e}Ge(e){this.Be(1),this.buffer[this.position++]=~e}Be(e){const t=e+this.position;if(t<=this.buffer.length)return;let i=2*this.buffer.length;i<t&&(i=t);const a=new Uint8Array(i);a.set(this.buffer),this.buffer=a}}class kA{constructor(e){this.je=e}Ae(e){this.je.Se(e)}Ie(e){this.je.Me(e)}pe(e){this.je.Oe(e)}ge(){this.je.qe()}}class mD{constructor(e){this.je=e}Ae(e){this.je.xe(e)}Ie(e){this.je.$e(e)}pe(e){this.je.Le(e)}ge(){this.je.Ke()}}class Xh{constructor(){this.je=new Z0,this.ze=new kA(this.je),this.We=new mD(this.je)}seed(e){this.je.seed(e)}He(e){return 0===e?this.ze:this.We}Qe(){return this.je.Qe()}reset(){this.je.reset()}}class ef{constructor(e,t,i,a){this.indexId=e,this.documentKey=t,this.arrayValue=i,this.directionalValue=a}Je(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,i=new Uint8Array(t);return i.set(this.directionalValue,0),t!==e?i.set([0],this.directionalValue.length):++i[i.length-1],new ef(this.indexId,this.documentKey,this.arrayValue,i)}}function Ds(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=yD(n.arrayValue,e.arrayValue),0!==t?t:(t=yD(n.directionalValue,e.directionalValue),0!==t?t:Ke.comparator(n.documentKey,e.documentKey)))}function yD(n,e){for(let t=0;t<n.length&&t<e.length;++t){const i=n[t]-e[t];if(0!==i)return i}return n.length-e.length}class ST{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Ye=e.orderBy,this.Xe=[];for(const t of e.filters){const i=t;i.isInequality()?this.Ze=i:this.Xe.push(i)}}tn(e){ct(e.collectionGroup===this.collectionId);const t=Op(e);if(void 0!==t&&!this.en(t))return!1;const i=Wl(e);let a=new Set,c=0,d=0;for(;c<i.length&&this.en(i[c]);++c)a=a.add(i[c].fieldPath.canonicalString());if(c===i.length)return!0;if(void 0!==this.Ze){if(!a.has(this.Ze.field.canonicalString())){const _=i[c];if(!this.nn(this.Ze,_)||!this.sn(this.Ye[d++],_))return!1}++c}for(;c<i.length;++c)if(d>=this.Ye.length||!this.sn(this.Ye[d++],i[c]))return!1;return!0}en(e){for(const t of this.Xe)if(this.nn(t,e))return!0;return!1}nn(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}sn(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}function _D(n){var e,t;if(ct(n instanceof Wt||n instanceof ln),n instanceof Wt){if(n instanceof UE){const a=(null===(t=null===(e=n.value.arrayValue)||void 0===e?void 0:e.values)||void 0===t?void 0:t.map(c=>Wt.create(n.field,"==",c)))||[];return ln.create(a,"or")}return n}const i=n.filters.map(a=>_D(a));return ln.create(i,n.op)}function tf(n){if(0===n.getFilters().length)return[];const e=Ti(_D(n));return ct(Xp(e)),K0(e)||nf(e)?[e]:e.getFilters()}function K0(n){return n instanceof Wt}function nf(n){return n instanceof ln&&Jl(n)}function Xp(n){return K0(n)||nf(n)||function(e){if(e instanceof ln&&jp(e)){for(const t of e.getFilters())if(!K0(t)&&!nf(t))return!1;return!0}return!1}(n)}function Ti(n){if(ct(n instanceof Wt||n instanceof ln),n instanceof Wt)return n;if(1===n.filters.length)return Ti(n.filters[0]);const e=n.filters.map(i=>Ti(i));let t=ln.create(e,n.op);return t=eg(t),Xp(t)?t:(ct(t instanceof ln),ct(Vh(t)),ct(t.filters.length>1),t.filters.reduce((i,a)=>vD(i,a)))}function vD(n,e){let t;return ct(n instanceof Wt||n instanceof ln),ct(e instanceof Wt||e instanceof ln),t=n instanceof Wt?e instanceof Wt?ln.create([n,e],"and"):Y0(n,e):e instanceof Wt?Y0(e,n):function(i,a){if(ct(i.filters.length>0&&a.filters.length>0),Vh(i)&&Vh(a))return Uh(i,a.getFilters());const c=jp(i)?i:a,d=jp(i)?a:i,_=c.filters.map(D=>vD(D,d));return ln.create(_,"or")}(n,e),eg(t)}function Y0(n,e){if(Vh(e))return Uh(e,n.getFilters());{const t=e.filters.map(i=>vD(n,i));return ln.create(t,"or")}}function eg(n){if(ct(n instanceof Wt||n instanceof ln),n instanceof Wt)return n;const e=n.getFilters();if(1===e.length)return eg(e[0]);if(py(n))return n;const t=e.map(a=>eg(a)),i=[];return t.forEach(a=>{a instanceof Wt?i.push(a):a instanceof ln&&(a.op===n.op?i.push(...a.filters):i.push(a))}),1===i.length?i[0]:ln.create(i,n.op)}class AT{constructor(){this.rn=new Ny}addToCollectionParentIndex(e,t){return this.rn.add(t),X.resolve()}getCollectionParents(e,t){return X.resolve(this.rn.getEntries(t))}addFieldIndex(e,t){return X.resolve()}deleteFieldIndex(e,t){return X.resolve()}getDocumentsMatchingTarget(e,t){return X.resolve(null)}getIndexType(e,t){return X.resolve(0)}getFieldIndexes(e,t){return X.resolve([])}getNextCollectionGroupToUpdate(e){return X.resolve(null)}getMinOffset(e,t){return X.resolve(Is.min())}getMinOffsetFromCollectionGroup(e,t){return X.resolve(Is.min())}updateCollectionGroup(e,t,i){return X.resolve()}updateIndexEntries(e,t){return X.resolve()}}class Ny{constructor(){this.index={}}add(e){const t=e.lastSegment(),i=e.popLast(),a=this.index[t]||new xn(Jt.comparator),c=!a.has(i);return this.index[t]=a.add(i),c}has(e){const t=e.lastSegment(),i=e.popLast(),a=this.index[t];return a&&a.has(i)}getEntries(e){return(this.index[e]||new xn(Jt.comparator)).toArray()}}const tg=new Uint8Array(0);class wD{constructor(e,t){this.user=e,this.databaseId=t,this.on=new Ny,this.un=new xo(i=>Xl(i),(i,a)=>$p(i,a)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.on.has(t)){const i=t.lastSegment(),a=t.popLast();e.addOnCommittedListener(()=>{this.on.add(t)});const c={collectionId:i,parent:fi(a)};return Q0(e).put(c)}return X.resolve()}getCollectionParents(e,t){const i=[],a=IDBKeyRange.bound([t,""],[Gb(t),""],!1,!0);return Q0(e).j(a).next(c=>{for(const d of c){if(d.collectionId!==t)break;i.push(ma(d.parent))}return i})}addFieldIndex(e,t){const i=Oy(e),a={indexId:(d=t).indexId,collectionGroup:d.collectionGroup,fields:d.fields.map(_=>[_.fieldPath.canonicalString(),_.kind])};var d;delete a.indexId;const c=i.add(a);if(t.indexState){const d=rg(e);return c.next(_=>{d.put(z0(_,this.user,t.indexState.sequenceNumber,t.indexState.offset))})}return c.next()}deleteFieldIndex(e,t){const i=Oy(e),a=rg(e),c=ng(e);return i.delete(t.indexId).next(()=>a.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>c.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const i=ng(e);let a=!0;const c=new Map;return X.forEach(this.cn(t),d=>this.an(e,d).next(_=>{a&&(a=!!_),c.set(d,_)})).next(()=>{if(a){let d=Vt();const _=[];return X.forEach(c,(D,b)=>{var M;Pe("IndexedDbIndexManager",`Using index ${M=D,`id=${M.indexId}|cg=${M.collectionGroup}|f=${M.fields.map(It=>`${It.fieldPath}:${It.kind}`).join(",")}`} to execute ${Xl(t)}`);const O=function(It,Nt){const Ut=Op(Nt);if(void 0===Ut)return null;for(const tn of yy(It,Ut.fieldPath))switch(tn.op){case"array-contains-any":return tn.value.arrayValue.values||[];case"array-contains":return[tn.value]}return null}(b,D),z=function(It,Nt){const Ut=new Map;for(const tn of Wl(Nt))for(const us of yy(It,tn.fieldPath))switch(us.op){case"==":case"in":Ut.set(tn.fieldPath.canonicalString(),us.value);break;case"not-in":case"!=":return Ut.set(tn.fieldPath.canonicalString(),us.value),Array.from(Ut.values())}return null}(b,D),ee=function(It,Nt){const Ut=[];let tn=!0;for(const us of Wl(Nt)){const Lg=0===us.kind?c0(It,us.fieldPath,It.startAt):HE(It,us.fieldPath,It.startAt);Ut.push(Lg.value),tn&&(tn=Lg.inclusive)}return new Ql(Ut,tn)}(b,D),De=function(It,Nt){const Ut=[];let tn=!0;for(const us of Wl(Nt)){const Lg=0===us.kind?HE(It,us.fieldPath,It.endAt):c0(It,us.fieldPath,It.endAt);Ut.push(Lg.value),tn&&(tn=Lg.inclusive)}return new Ql(Ut,tn)}(b,D),Be=this.hn(D,b,ee),je=this.hn(D,b,De),wt=this.ln(D,b,z),At=this.fn(D.indexId,O,Be,ee.inclusive,je,De.inclusive,wt);return X.forEach(At,It=>i.H(It,t.limit).next(Nt=>{Nt.forEach(Ut=>{const tn=Ke.fromSegments(Ut.documentKey);d.has(tn)||(d=d.add(tn),_.push(tn))})}))}).next(()=>_)}return X.resolve(null)})}cn(e){let t=this.un.get(e);return t||(t=0===e.filters.length?[e]:tf(ln.create(e.filters,"and")).map(i=>jE(e.path,e.collectionGroup,e.orderBy,i.getFilters(),e.limit,e.startAt,e.endAt)),this.un.set(e,t),t)}fn(e,t,i,a,c,d,_){const D=(null!=t?t.length:1)*Math.max(i.length,c.length),b=D/(null!=t?t.length:1),M=[];for(let O=0;O<D;++O){const z=t?this.dn(t[O/b]):tg,ee=this.wn(e,z,i[O%b],a),De=this._n(e,z,c[O%b],d),Be=_.map(je=>this.wn(e,z,je,!0));M.push(...this.createRange(ee,De,Be))}return M}wn(e,t,i,a){const c=new ef(e,Ke.empty(),t,i);return a?c:c.Je()}_n(e,t,i,a){const c=new ef(e,Ke.empty(),t,i);return a?c.Je():c}an(e,t){const i=new ST(t),a=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,a).next(c=>{let d=null;for(const _ of c)i.tn(_)&&(!d||_.fields.length>d.fields.length)&&(d=_);return d})}getIndexType(e,t){let i=2;const a=this.cn(t);return X.forEach(a,c=>this.an(e,c).next(d=>{d?0!==i&&d.fields.length<function(_){let D=new xn(Wn.comparator),b=!1;for(const M of _.filters)for(const O of M.getFlattenedFilters())O.field.isKeyField()||("array-contains"===O.op||"array-contains-any"===O.op?b=!0:D=D.add(O.field));for(const M of _.orderBy)M.field.isKeyField()||(D=D.add(M.field));return D.size+(b?1:0)}(c)&&(i=1):i=0})).next(()=>null!==t.limit&&a.length>1&&2===i?1:i)}mn(e,t){const i=new Xh;for(const a of Wl(e)){const c=t.data.field(a.fieldPath);if(null==c)return null;const d=i.He(a.kind);ad.Ve._e(c,d)}return i.Qe()}dn(e){const t=new Xh;return ad.Ve._e(e,t.He(0)),t.Qe()}gn(e,t){const i=new Xh;return ad.Ve._e(zs(this.databaseId,t),i.He(function(a){const c=Wl(a);return 0===c.length?0:c[c.length-1].kind}(e))),i.Qe()}ln(e,t,i){if(null===i)return[];let a=[];a.push(new Xh);let c=0;for(const d of Wl(e)){const _=i[c++];for(const D of a)if(this.yn(t,d.fieldPath)&&_a(_))a=this.pn(a,d,_);else{const b=D.He(d.kind);ad.Ve._e(_,b)}}return this.In(a)}hn(e,t,i){return this.ln(e,t,i.position)}In(e){const t=[];for(let i=0;i<e.length;++i)t[i]=e[i].Qe();return t}pn(e,t,i){const a=[...e],c=[];for(const d of i.arrayValue.values||[])for(const _ of a){const D=new Xh;D.seed(_.Qe()),ad.Ve._e(d,D.He(t.kind)),c.push(D)}return c}yn(e,t){return!!e.filters.find(i=>i instanceof Wt&&i.field.isEqual(t)&&("in"===i.op||"not-in"===i.op))}getFieldIndexes(e,t){const i=Oy(e),a=rg(e);return(t?i.j("collectionGroupIndex",IDBKeyRange.bound(t,t)):i.j()).next(c=>{const d=[];return X.forEach(c,_=>a.get([_.indexId,this.uid]).next(D=>{d.push(function(b,M){const O=M?new Pp(M.sequenceNumber,new Is(Bc(M.readTime),new Ke(ma(M.documentKey)),M.largestBatchId)):Pp.empty(),z=b.fields.map(([ee,De])=>new uy(Wn.fromServerFormat(ee),De));return new ay(b.indexId,b.collectionGroup,z,O)}(_,D))})).next(()=>d)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((i,a)=>{const c=i.indexState.sequenceNumber-a.indexState.sequenceNumber;return 0!==c?c:Rt(i.collectionGroup,a.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,i){const a=Oy(e),c=rg(e);return this.Tn(e).next(d=>a.j("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(_=>X.forEach(_,D=>c.put(z0(D.indexId,this.user,d,i)))))}updateIndexEntries(e,t){const i=new Map;return X.forEach(t,(a,c)=>{const d=i.get(a.collectionGroup);return(d?X.resolve(d):this.getFieldIndexes(e,a.collectionGroup)).next(_=>(i.set(a.collectionGroup,_),X.forEach(_,D=>this.En(e,a,D).next(b=>{const M=this.An(c,D);return b.isEqual(M)?X.resolve():this.vn(e,c,D,b,M)}))))})}Rn(e,t,i,a){return ng(e).put({indexId:a.indexId,uid:this.uid,arrayValue:a.arrayValue,directionalValue:a.directionalValue,orderedDocumentKey:this.gn(i,t.key),documentKey:t.key.path.toArray()})}Pn(e,t,i,a){return ng(e).delete([a.indexId,this.uid,a.arrayValue,a.directionalValue,this.gn(i,t.key),t.key.path.toArray()])}En(e,t,i){const a=ng(e);let c=new xn(Ds);return a.X({index:"documentKeyIndex",range:IDBKeyRange.only([i.indexId,this.uid,this.gn(i,t)])},(d,_)=>{c=c.add(new ef(i.indexId,t,_.arrayValue,_.directionalValue))}).next(()=>c)}An(e,t){let i=new xn(Ds);const a=this.mn(t,e);if(null==a)return i;const c=Op(t);if(null!=c){const d=e.data.field(c.fieldPath);if(_a(d))for(const _ of d.arrayValue.values||[])i=i.add(new ef(t.indexId,e.key,this.dn(_),a))}else i=i.add(new ef(t.indexId,e.key,tg,a));return i}vn(e,t,i,a,c){Pe("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const d=[];return function(_,D,b,M,O){const z=_.getIterator(),ee=D.getIterator();let De=Zl(z),Be=Zl(ee);for(;De||Be;){let je=!1,wt=!1;if(De&&Be){const At=b(De,Be);At<0?wt=!0:At>0&&(je=!0)}else null!=De?wt=!0:je=!0;je?(M(Be),Be=Zl(ee)):wt?(O(De),De=Zl(z)):(De=Zl(z),Be=Zl(ee))}}(a,c,Ds,_=>{d.push(this.Rn(e,t,i,_))},_=>{d.push(this.Pn(e,t,i,_))}),X.waitFor(d)}Tn(e){let t=1;return rg(e).X({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(i,a,c)=>{c.done(),t=a.sequenceNumber+1}).next(()=>t)}createRange(e,t,i){i=i.sort((d,_)=>Ds(d,_)).filter((d,_,D)=>!_||0!==Ds(d,D[_-1]));const a=[];a.push(e);for(const d of i){const _=Ds(d,e),D=Ds(d,t);if(0===_)a[0]=e.Je();else if(_>0&&D<0)a.push(d),a.push(d.Je());else if(D>0)break}a.push(t);const c=[];for(let d=0;d<a.length;d+=2){if(this.bn(a[d],a[d+1]))return[];c.push(IDBKeyRange.bound([a[d].indexId,this.uid,a[d].arrayValue,a[d].directionalValue,tg,[]],[a[d+1].indexId,this.uid,a[d+1].arrayValue,a[d+1].directionalValue,tg,[]]))}return c}bn(e,t){return Ds(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(rf)}getMinOffset(e,t){return X.mapArray(this.cn(t),i=>this.an(e,i).next(a=>a||rt())).next(rf)}}function Q0(n){return vr(n,"collectionParents")}function ng(n){return vr(n,"indexEntries")}function Oy(n){return vr(n,"indexConfiguration")}function rg(n){return vr(n,"indexState")}function rf(n){ct(0!==n.length);let e=n[0].indexState.offset,t=e.largestBatchId;for(let i=1;i<n.length;i++){const a=n[i].indexState.offset;ly(a,e)<0&&(e=a),t<a.largestBatchId&&(t=a.largestBatchId)}return new Is(e.readTime,e.documentKey,t)}const ID={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Si{constructor(e,t,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=i}static withCacheSize(e){return new Si(e,Si.DEFAULT_COLLECTION_PERCENTILE,Si.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function ED(n,e,t){const i=n.store("mutations"),a=n.store("documentMutations"),c=[],d=IDBKeyRange.only(t.batchId);let _=0;const D=i.X({range:d},(M,O,z)=>(_++,z.delete()));c.push(D.next(()=>{ct(1===_)}));const b=[];for(const M of t.mutations){const O=CE(e,M.key.path,t.batchId);c.push(a.delete(O)),b.push(M.key)}return X.waitFor(c).next(()=>b)}function ud(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw rt();e=n.noDocument}return JSON.stringify(e).length}Si.DEFAULT_COLLECTION_PERCENTILE=10,Si.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Si.DEFAULT=new Si(41943040,Si.DEFAULT_COLLECTION_PERCENTILE,Si.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Si.DISABLED=new Si(-1,0,0);class ig{constructor(e,t,i,a){this.userId=e,this.serializer=t,this.indexManager=i,this.referenceDelegate=a,this.Vn={}}static de(e,t,i,a){ct(""!==e.uid);const c=e.isAuthenticated()?e.uid:"";return new ig(c,t,i,a)}checkEmpty(e){let t=!0;const i=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Mu(e).X({index:"userMutationsIndex",range:i},(a,c,d)=>{t=!1,d.done()}).next(()=>t)}addMutationBatch(e,t,i,a){const c=sf(e),d=Mu(e);return d.add({}).next(_=>{ct("number"==typeof _);const D=new T0(_,t,i,a),b=function(z,ee,De){const Be=De.baseMutations.map(wt=>Kh(z.fe,wt)),je=De.mutations.map(wt=>Kh(z.fe,wt));return{userId:ee,batchId:De.batchId,localWriteTimeMs:De.localWriteTime.toMillis(),baseMutations:Be,mutations:je}}(this.serializer,this.userId,D),M=[];let O=new xn((z,ee)=>Rt(z.canonicalString(),ee.canonicalString()));for(const z of a){const ee=CE(this.userId,z.key.path,_);O=O.add(z.key.path.popLast()),M.push(d.put(b)),M.push(c.put(ee,Yb))}return O.forEach(z=>{M.push(this.indexManager.addToCollectionParentIndex(e,z))}),e.addOnCommittedListener(()=>{this.Vn[_]=D.keys()}),X.waitFor(M).next(()=>D)})}lookupMutationBatch(e,t){return Mu(e).get(t).next(i=>i?(ct(i.userId===this.userId),Uc(this.serializer,i)):null)}Sn(e,t){return this.Vn[t]?X.resolve(this.Vn[t]):this.lookupMutationBatch(e,t).next(i=>{if(i){const a=i.keys();return this.Vn[t]=a,a}return null})}getNextMutationBatchAfterBatchId(e,t){const i=t+1,a=IDBKeyRange.lowerBound([this.userId,i]);let c=null;return Mu(e).X({index:"userMutationsIndex",range:a},(d,_,D)=>{_.userId===this.userId&&(ct(_.batchId>=i),c=Uc(this.serializer,_)),D.done()}).next(()=>c)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let i=-1;return Mu(e).X({index:"userMutationsIndex",range:t,reverse:!0},(a,c,d)=>{i=c.batchId,d.done()}).next(()=>i)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Mu(e).j("userMutationsIndex",t).next(i=>i.map(a=>Uc(this.serializer,a)))}getAllMutationBatchesAffectingDocumentKey(e,t){const i=kp(this.userId,t.path),a=IDBKeyRange.lowerBound(i),c=[];return sf(e).X({range:a},(d,_,D)=>{const[b,M,O]=d,z=ma(M);if(b===this.userId&&t.path.isEqual(z))return Mu(e).get(O).next(ee=>{if(!ee)throw rt();ct(ee.userId===this.userId),c.push(Uc(this.serializer,ee))});D.done()}).next(()=>c)}getAllMutationBatchesAffectingDocumentKeys(e,t){let i=new xn(Rt);const a=[];return t.forEach(c=>{const d=kp(this.userId,c.path),_=IDBKeyRange.lowerBound(d),D=sf(e).X({range:_},(b,M,O)=>{const[z,ee,De]=b,Be=ma(ee);z===this.userId&&c.path.isEqual(Be)?i=i.add(De):O.done()});a.push(D)}),X.waitFor(a).next(()=>this.Dn(e,i))}getAllMutationBatchesAffectingQuery(e,t){const i=t.path,a=i.length+1,c=kp(this.userId,i),d=IDBKeyRange.lowerBound(c);let _=new xn(Rt);return sf(e).X({range:d},(D,b,M)=>{const[O,z,ee]=D,De=ma(z);O===this.userId&&i.isPrefixOf(De)?De.length===a&&(_=_.add(ee)):M.done()}).next(()=>this.Dn(e,_))}Dn(e,t){const i=[],a=[];return t.forEach(c=>{a.push(Mu(e).get(c).next(d=>{if(null===d)throw rt();ct(d.userId===this.userId),i.push(Uc(this.serializer,d))}))}),X.waitFor(a).next(()=>i)}removeMutationBatch(e,t){return ED(e.ht,this.userId,t).next(i=>(e.addOnCommittedListener(()=>{this.Cn(t.batchId)}),X.forEach(i,a=>this.referenceDelegate.markPotentiallyOrphaned(e,a))))}Cn(e){delete this.Vn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return X.resolve();const i=IDBKeyRange.lowerBound([this.userId]),a=[];return sf(e).X({range:i},(c,d,_)=>{if(c[0]===this.userId){const D=ma(c[1]);a.push(D)}else _.done()}).next(()=>{ct(0===a.length)})})}containsKey(e,t){return J0(e,this.userId,t)}xn(e){return of(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function J0(n,e,t){const i=kp(e,t.path),a=i[1],c=IDBKeyRange.lowerBound(i);let d=!1;return sf(n).X({range:c,Y:!0},(_,D,b)=>{const[M,O,z]=_;M===e&&O===a&&(d=!0),b.done()}).next(()=>d)}function Mu(n){return vr(n,"mutations")}function sf(n){return vr(n,"documentMutations")}function of(n){return vr(n,"mutationQueues")}class Ro{constructor(e){this.Nn=e}next(){return this.Nn+=2,this.Nn}static kn(){return new Ro(0)}static Mn(){return new Ro(-1)}}class MT{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.$n(e).next(t=>{const i=new Ro(t.highestTargetId);return t.highestTargetId=i.next(),this.On(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.$n(e).next(t=>ht.fromTimestamp(new bn(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.$n(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,i){return this.$n(e).next(a=>(a.highestListenSequenceNumber=t,i&&(a.lastRemoteSnapshotVersion=i.toTimestamp()),t>a.highestListenSequenceNumber&&(a.highestListenSequenceNumber=t),this.On(e,a)))}addTargetData(e,t){return this.Fn(e,t).next(()=>this.$n(e).next(i=>(i.targetCount+=1,this.Bn(t,i),this.On(e,i))))}updateTargetData(e,t){return this.Fn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>af(e).delete(t.targetId)).next(()=>this.$n(e)).next(i=>(ct(i.targetCount>0),i.targetCount-=1,this.On(e,i)))}removeTargets(e,t,i){let a=0;const c=[];return af(e).X((d,_)=>{const D=Qh(_);D.sequenceNumber<=t&&null===i.get(D.targetId)&&(a++,c.push(this.removeTargetData(e,D)))}).next(()=>X.waitFor(c)).next(()=>a)}forEachTarget(e,t){return af(e).X((i,a)=>{const c=Qh(a);t(c)})}$n(e){return DD(e).get("targetGlobalKey").next(t=>(ct(null!==t),t))}On(e,t){return DD(e).put("targetGlobalKey",t)}Fn(e,t){return af(e).put($0(this.serializer,t))}Bn(e,t){let i=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,i=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,i=!0),i}getTargetCount(e){return this.$n(e).next(t=>t.targetCount)}getTargetData(e,t){const i=Xl(t),a=IDBKeyRange.bound([i,Number.NEGATIVE_INFINITY],[i,Number.POSITIVE_INFINITY]);let c=null;return af(e).X({range:a,index:"queryTargetsIndex"},(d,_,D)=>{const b=Qh(_);$p(t,b.target)&&(c=b,D.done())}).next(()=>c)}addMatchingKeys(e,t,i){const a=[],c=xu(e);return t.forEach(d=>{const _=fi(d.path);a.push(c.put({targetId:i,path:_})),a.push(this.referenceDelegate.addReference(e,i,d))}),X.waitFor(a)}removeMatchingKeys(e,t,i){const a=xu(e);return X.forEach(t,c=>{const d=fi(c.path);return X.waitFor([a.delete([i,d]),this.referenceDelegate.removeReference(e,i,c)])})}removeMatchingKeysForTargetId(e,t){const i=xu(e),a=IDBKeyRange.bound([t],[t+1],!1,!0);return i.delete(a)}getMatchingKeysForTargetId(e,t){const i=IDBKeyRange.bound([t],[t+1],!1,!0),a=xu(e);let c=Vt();return a.X({range:i,Y:!0},(d,_,D)=>{const b=ma(d[1]),M=new Ke(b);c=c.add(M)}).next(()=>c)}containsKey(e,t){const i=fi(t.path),a=IDBKeyRange.bound([i],[Gb(i)],!1,!0);let c=0;return xu(e).X({index:"documentTargetsIndex",Y:!0,range:a},([d,_],D,b)=>{0!==d&&(c++,b.done())}).next(()=>c>0)}le(e,t){return af(e).get(t).next(i=>i?Qh(i):null)}}function af(n){return vr(n,"targets")}function DD(n){return vr(n,"targetGlobal")}function xu(n){return vr(n,"targetDocuments")}function X0([n,e],[t,i]){const a=Rt(n,t);return 0===a?Rt(e,i):a}class CD{constructor(e){this.Ln=e,this.buffer=new xn(X0),this.qn=0}Un(){return++this.qn}Kn(e){const t=[e,this.Un()];if(this.buffer.size<this.Ln)this.buffer=this.buffer.add(t);else{const i=this.buffer.last();X0(t,i)<0&&(this.buffer=this.buffer.delete(i).add(t))}}get maxValue(){return this.buffer.last()[0]}}class bD{constructor(e,t,i){this.garbageCollector=e,this.asyncQueue=t,this.localStore=i,this.Gn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Qn(6e4)}stop(){this.Gn&&(this.Gn.cancel(),this.Gn=null)}get started(){return null!==this.Gn}Qn(e){var t=this;Pe("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Gn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,_e.Z)(function*(){t.Gn=null;try{yield t.localStore.collectGarbage(t.garbageCollector)}catch(i){Du(i)?Pe("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",i):yield Eu(i)}yield t.Qn(3e5)}))}}class TD{constructor(e,t){this.jn=e,this.params=t}calculateTargetCount(e,t){return this.jn.zn(e).next(i=>Math.floor(t/100*i))}nthSequenceNumber(e,t){if(0===t)return X.resolve(ts.ct);const i=new CD(t);return this.jn.forEachTarget(e,a=>i.Kn(a.sequenceNumber)).next(()=>this.jn.Wn(e,a=>i.Kn(a))).next(()=>i.maxValue)}removeTargets(e,t,i){return this.jn.removeTargets(e,t,i)}removeOrphanedDocuments(e,t){return this.jn.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(Pe("LruGarbageCollector","Garbage collection skipped; disabled"),X.resolve(ID)):this.getCacheSize(e).next(i=>i<this.params.cacheSizeCollectionThreshold?(Pe("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),ID):this.Hn(e,t))}getCacheSize(e){return this.jn.getCacheSize(e)}Hn(e,t){let i,a,c,d,_,D,b;const M=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(O=>(O>this.params.maximumSequenceNumbersToCollect?(Pe("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${O}`),a=this.params.maximumSequenceNumbersToCollect):a=O,d=Date.now(),this.nthSequenceNumber(e,a))).next(O=>(i=O,_=Date.now(),this.removeTargets(e,i,t))).next(O=>(c=O,D=Date.now(),this.removeOrphanedDocuments(e,i))).next(O=>(b=Date.now(),jv()<=du.in.DEBUG&&Pe("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${d-M}ms\n\tDetermined least recently used ${a} in `+(_-d)+`ms\n\tRemoved ${c} targets in `+(D-_)+`ms\n\tRemoved ${O} documents in `+(b-D)+`ms\nTotal Duration: ${b-M}ms`),X.resolve({didRun:!0,sequenceNumbersCollected:a,targetsRemoved:c,documentsRemoved:O})))}}class xT{constructor(e,t){this.db=e,this.garbageCollector=function SD(n,e){return new TD(n,e)}(this,t)}zn(e){const t=this.Jn(e);return this.db.getTargetCache().getTargetCount(e).next(i=>t.next(a=>i+a))}Jn(e){let t=0;return this.Wn(e,i=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Wn(e,t){return this.Yn(e,(i,a)=>t(a))}addReference(e,t,i){return ew(e,i)}removeReference(e,t,i){return ew(e,i)}removeTargets(e,t,i){return this.db.getTargetCache().removeTargets(e,t,i)}markPotentiallyOrphaned(e,t){return ew(e,t)}Xn(e,t){return function(i,a){let c=!1;return of(i).Z(d=>J0(i,d,a).next(_=>(_&&(c=!0),X.resolve(!_)))).next(()=>c)}(e,t)}removeOrphanedDocuments(e,t){const i=this.db.getRemoteDocumentCache().newChangeBuffer(),a=[];let c=0;return this.Yn(e,(d,_)=>{if(_<=t){const D=this.Xn(e,d).next(b=>{if(!b)return c++,i.getEntry(e,d).next(()=>(i.removeEntry(d,ht.min()),xu(e).delete([0,fi(d.path)])))});a.push(D)}}).next(()=>X.waitFor(a)).next(()=>i.apply(e)).next(()=>c)}removeTarget(e,t){const i=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,i)}updateLimboDocument(e,t){return ew(e,t)}Yn(e,t){const i=xu(e);let a,c=ts.ct;return i.X({index:"documentTargetsIndex"},([d,_],{path:D,sequenceNumber:b})=>{0===d?(c!==ts.ct&&t(new Ke(ma(a)),c),c=b,a=D):c=ts.ct}).next(()=>{c!==ts.ct&&t(new Ke(ma(a)),c)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function ew(n,e){return xu(n).put((i=n.currentSequenceNumber,{targetId:0,path:fi(e.path),sequenceNumber:i}));var i}class NT{constructor(){this.changes=new xo(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Vn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const i=this.changes.get(t);return void 0!==i?X.resolve(i):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class FA{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,i){return cd(e).put(i)}removeEntry(e,t,i){return cd(e).delete(function(a,c){const d=a.path.toArray();return[d.slice(0,d.length-2),d[d.length-2],Ay(c),d[d.length-1]]}(t,i))}updateMetadata(e,t){return this.getMetadata(e).next(i=>(i.byteSize+=t,this.Zn(e,i)))}getEntry(e,t){let i=Vn.newInvalidDocument(t);return cd(e).X({index:"documentKeyIndex",range:IDBKeyRange.only(og(t))},(a,c)=>{i=this.ts(t,c)}).next(()=>i)}es(e,t){let i={size:0,document:Vn.newInvalidDocument(t)};return cd(e).X({index:"documentKeyIndex",range:IDBKeyRange.only(og(t))},(a,c)=>{i={document:this.ts(t,c),size:ud(c)}}).next(()=>i)}getEntries(e,t){let i=Bi();return this.ns(e,t,(a,c)=>{const d=this.ts(a,c);i=i.insert(a,d)}).next(()=>i)}ss(e,t){let i=Bi(),a=new Tn(Ke.comparator);return this.ns(e,t,(c,d)=>{const _=this.ts(c,d);i=i.insert(c,_),a=a.insert(c,ud(d))}).next(()=>({documents:i,rs:a}))}ns(e,t,i){if(t.isEmpty())return X.resolve();let a=new xn(uf);t.forEach(D=>a=a.add(D));const c=IDBKeyRange.bound(og(a.first()),og(a.last())),d=a.getIterator();let _=d.getNext();return cd(e).X({index:"documentKeyIndex",range:c},(D,b,M)=>{const O=Ke.fromSegments([...b.prefixPath,b.collectionGroup,b.documentId]);for(;_&&uf(_,O)<0;)i(_,null),_=d.getNext();_&&_.isEqual(O)&&(i(_,b),_=d.hasNext()?d.getNext():null),_?M.G(og(_)):M.done()}).next(()=>{for(;_;)i(_,null),_=d.hasNext()?d.getNext():null})}getDocumentsMatchingQuery(e,t,i,a){const c=t.path,d=[c.popLast().toArray(),c.lastSegment(),Ay(i.readTime),i.documentKey.path.isEmpty()?"":i.documentKey.path.lastSegment()],_=[c.popLast().toArray(),c.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return cd(e).j(IDBKeyRange.bound(d,_,!0)).next(D=>{let b=Bi();for(const M of D){const O=this.ts(Ke.fromSegments(M.prefixPath.concat(M.collectionGroup,M.documentId)),M);O.isFoundDocument()&&(Hh(t,O)||a.has(O.key))&&(b=b.insert(O.key,O))}return b})}getAllFromCollectionGroup(e,t,i,a){let c=Bi();const d=tw(t,i),_=tw(t,Is.max());return cd(e).X({index:"collectionGroupIndex",range:IDBKeyRange.bound(d,_,!0)},(D,b,M)=>{const O=this.ts(Ke.fromSegments(b.prefixPath.concat(b.collectionGroup,b.documentId)),b);c=c.insert(O.key,O),c.size===a&&M.done()}).next(()=>c)}newChangeBuffer(e){return new AD(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return sg(e).get("remoteDocumentGlobalKey").next(t=>(ct(!!t),t))}Zn(e,t){return sg(e).put("remoteDocumentGlobalKey",t)}ts(e,t){if(t){const i=function bT(n,e){let t;if(e.document)t=U0(n.fe,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const i=Ke.fromSegments(e.noDocument.path),a=Bc(e.noDocument.readTime);t=Vn.newNoDocument(i,a),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return rt();{const i=Ke.fromSegments(e.unknownDocument.path),a=Bc(e.unknownDocument.version);t=Vn.newUnknownDocument(i,a)}}return e.readTime&&t.setReadTime(function(i){const a=new bn(i[0],i[1]);return ht.fromTimestamp(a)}(e.readTime)),t}(this.serializer,t);if(!i.isNoDocument()||!i.version.isEqual(ht.min()))return i}return Vn.newInvalidDocument(e)}}function OT(n){return new FA(n)}class AD extends NT{constructor(e,t){super(),this.os=e,this.trackRemovals=t,this.us=new xo(i=>i.toString(),(i,a)=>i.isEqual(a))}applyChanges(e){const t=[];let i=0,a=new xn((c,d)=>Rt(c.canonicalString(),d.canonicalString()));return this.changes.forEach((c,d)=>{const _=this.us.get(c);if(t.push(this.os.removeEntry(e,c,_.readTime)),d.isValidDocument()){const D=pD(this.os.serializer,d);a=a.add(c.path.popLast());const b=ud(D);i+=b-_.size,t.push(this.os.addEntry(e,c,D))}else if(i-=_.size,this.trackRemovals){const D=pD(this.os.serializer,d.convertToNoDocument(ht.min()));t.push(this.os.addEntry(e,c,D))}}),a.forEach(c=>{t.push(this.os.indexManager.addToCollectionParentIndex(e,c))}),t.push(this.os.updateMetadata(e,i)),X.waitFor(t)}getFromCache(e,t){return this.os.es(e,t).next(i=>(this.us.set(t,{size:i.size,readTime:i.document.readTime}),i.document))}getAllFromCache(e,t){return this.os.ss(e,t).next(({documents:i,rs:a})=>(a.forEach((c,d)=>{this.us.set(c,{size:d,readTime:i.get(c).readTime})}),i))}}function sg(n){return vr(n,"remoteDocumentGlobal")}function cd(n){return vr(n,"remoteDocumentsV14")}function og(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function tw(n,e){const t=e.documentKey.path.toArray();return[n,Ay(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function uf(n,e){const t=n.path.toArray(),i=e.path.toArray();let a=0;for(let c=0;c<t.length-2&&c<i.length-2;++c)if(a=Rt(t[c],i[c]),a)return a;return a=Rt(t.length,i.length),a||(a=Rt(t[t.length-2],i[i.length-2]),a||Rt(t[t.length-1],i[i.length-1]))}class PT{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class MD{constructor(e,t,i,a){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=i,this.indexManager=a}getDocument(e,t){let i=null;return this.documentOverlayCache.getOverlay(e,t).next(a=>(i=a,this.remoteDocumentCache.getEntry(e,t))).next(a=>(null!==i&&id(i.mutation,a,ns.empty(),bn.now()),a))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(i=>this.getLocalViewOfDocuments(e,i,Vt()).next(()=>i))}getLocalViewOfDocuments(e,t,i=Vt()){const a=No();return this.populateOverlays(e,a,t).next(()=>this.computeViews(e,t,a,i).next(c=>{let d=Wp();return c.forEach((_,D)=>{d=d.insert(_,D.overlayedDocument)}),d}))}getOverlayedDocuments(e,t){const i=No();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,Vt()))}populateOverlays(e,t,i){const a=[];return i.forEach(c=>{t.has(c)||a.push(c)}),this.documentOverlayCache.getOverlays(e,a).next(c=>{c.forEach((d,_)=>{t.set(d,_)})})}computeViews(e,t,i,a){let c=Bi();const d=$h(),_=$h();return t.forEach((D,b)=>{const M=i.get(b.key);a.has(b.key)&&(void 0===M||M.mutation instanceof Su)?c=c.insert(b.key,b):void 0!==M?(d.set(b.key,M.mutation.getFieldMask()),id(M.mutation,b,M.mutation.getFieldMask(),bn.now())):d.set(b.key,ns.empty())}),this.recalculateAndSaveOverlays(e,c).next(D=>(D.forEach((b,M)=>d.set(b,M)),t.forEach((b,M)=>{var O;return _.set(b,new PT(M,null!==(O=d.get(b))&&void 0!==O?O:null))}),_))}recalculateAndSaveOverlays(e,t){const i=$h();let a=new Tn((d,_)=>d-_),c=Vt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(d=>{for(const _ of d)_.keys().forEach(D=>{const b=t.get(D);if(null===b)return;let M=i.get(D)||ns.empty();M=_.applyToLocalView(b,M),i.set(D,M);const O=(a.get(_.batchId)||Vt()).add(D);a=a.insert(_.batchId,O)})}).next(()=>{const d=[],_=a.getReverseIterator();for(;_.hasNext();){const D=_.getNext(),b=D.key,M=D.value,O=wy();M.forEach(z=>{if(!c.has(z)){const ee=Cy(t.get(z),i.get(z));null!==ee&&O.set(z,ee),c=c.add(z)}}),d.push(this.documentOverlayCache.saveOverlays(e,b,O))}return X.waitFor(d)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(i=>this.recalculateAndSaveOverlays(e,i))}getDocumentsMatchingQuery(e,t,i){return Ke.isDocumentKey((a=t).path)&&null===a.collectionGroup&&0===a.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):f0(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,i):this.getDocumentsMatchingCollectionQuery(e,t,i);var a}getNextDocuments(e,t,i,a){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,i,a).next(c=>{const d=a-c.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,i.largestBatchId,a-c.size):X.resolve(No());let _=-1,D=c;return d.next(b=>X.forEach(b,(M,O)=>(_<O.largestBatchId&&(_=O.largestBatchId),c.get(M)?X.resolve():this.remoteDocumentCache.getEntry(e,M).next(z=>{D=D.insert(M,z)}))).next(()=>this.populateOverlays(e,b,c)).next(()=>this.computeViews(e,D,b,Vt())).next(M=>({batchId:_,changes:zE(M)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Ke(t)).next(i=>{let a=Wp();return i.isFoundDocument()&&(a=a.insert(i.key,i)),a})}getDocumentsMatchingCollectionGroupQuery(e,t,i){const a=t.collectionGroup;let c=Wp();return this.indexManager.getCollectionParents(e,a).next(d=>X.forEach(d,_=>{const D=(b=t,M=_.child(a),new Tu(M,null,b.explicitOrderBy.slice(),b.filters.slice(),b.limit,b.limitType,b.startAt,b.endAt));var b,M;return this.getDocumentsMatchingCollectionQuery(e,D,i).next(b=>{b.forEach((M,O)=>{c=c.insert(M,O)})})}).next(()=>c))}getDocumentsMatchingCollectionQuery(e,t,i){let a;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,i.largestBatchId).next(c=>(a=c,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,i,a))).next(c=>{a.forEach((_,D)=>{const b=D.getKey();null===c.get(b)&&(c=c.insert(b,Vn.newInvalidDocument(b)))});let d=Wp();return c.forEach((_,D)=>{const b=a.get(_);void 0!==b&&id(b.mutation,D,ns.empty(),bn.now()),Hh(t,D)&&(d=d.insert(_,D))}),d})}}class RT{constructor(e){this.serializer=e,this.cs=new Map,this.hs=new Map}getBundleMetadata(e,t){return X.resolve(this.cs.get(t))}saveBundleMetadata(e,t){var i;return this.cs.set(t.id,{id:(i=t).id,version:i.version,createTime:Un(i.createTime)}),X.resolve()}getNamedQuery(e,t){return X.resolve(this.hs.get(t))}saveNamedQuery(e,t){return this.hs.set(t.name,{name:(i=t).name,query:My(i.bundledQuery),readTime:Un(i.readTime)}),X.resolve();var i}}class kT{constructor(){this.overlays=new Tn(Ke.comparator),this.ls=new Map}getOverlay(e,t){return X.resolve(this.overlays.get(t))}getOverlays(e,t){const i=No();return X.forEach(t,a=>this.getOverlay(e,a).next(c=>{null!==c&&i.set(a,c)})).next(()=>i)}saveOverlays(e,t,i){return i.forEach((a,c)=>{this.we(e,t,c)}),X.resolve()}removeOverlaysForBatchId(e,t,i){const a=this.ls.get(i);return void 0!==a&&(a.forEach(c=>this.overlays=this.overlays.remove(c)),this.ls.delete(i)),X.resolve()}getOverlaysForCollection(e,t,i){const a=No(),c=t.length+1,d=new Ke(t.child("")),_=this.overlays.getIteratorFrom(d);for(;_.hasNext();){const D=_.getNext().value,b=D.getKey();if(!t.isPrefixOf(b.path))break;b.path.length===c&&D.largestBatchId>i&&a.set(D.getKey(),D)}return X.resolve(a)}getOverlaysForCollectionGroup(e,t,i,a){let c=new Tn((b,M)=>b-M);const d=this.overlays.getIterator();for(;d.hasNext();){const b=d.getNext().value;if(b.getKey().getCollectionGroup()===t&&b.largestBatchId>i){let M=c.get(b.largestBatchId);null===M&&(M=No(),c=c.insert(b.largestBatchId,M)),M.set(b.getKey(),b)}}const _=No(),D=c.getIterator();for(;D.hasNext()&&(D.getNext().value.forEach((b,M)=>_.set(b,M)),!(_.size()>=a)););return X.resolve(_)}we(e,t,i){const a=this.overlays.get(i.key);if(null!==a){const d=this.ls.get(a.largestBatchId).delete(i.key);this.ls.set(a.largestBatchId,d)}this.overlays=this.overlays.insert(i.key,new S0(t,i));let c=this.ls.get(t);void 0===c&&(c=Vt(),this.ls.set(t,c)),this.ls.set(t,c.add(i.key))}}class xD{constructor(){this.fs=new xn(ni.ds),this.ws=new xn(ni._s)}isEmpty(){return this.fs.isEmpty()}addReference(e,t){const i=new ni(e,t);this.fs=this.fs.add(i),this.ws=this.ws.add(i)}gs(e,t){e.forEach(i=>this.addReference(i,t))}removeReference(e,t){this.ys(new ni(e,t))}ps(e,t){e.forEach(i=>this.removeReference(i,t))}Is(e){const t=new Ke(new Jt([])),i=new ni(t,e),a=new ni(t,e+1),c=[];return this.ws.forEachInRange([i,a],d=>{this.ys(d),c.push(d.key)}),c}Ts(){this.fs.forEach(e=>this.ys(e))}ys(e){this.fs=this.fs.delete(e),this.ws=this.ws.delete(e)}Es(e){const t=new Ke(new Jt([])),i=new ni(t,e),a=new ni(t,e+1);let c=Vt();return this.ws.forEachInRange([i,a],d=>{c=c.add(d.key)}),c}containsKey(e){const t=new ni(e,0),i=this.fs.firstAfterOrEqual(t);return null!==i&&e.isEqual(i.key)}}class ni{constructor(e,t){this.key=e,this.As=t}static ds(e,t){return Ke.comparator(e.key,t.key)||Rt(e.As,t.As)}static _s(e,t){return Rt(e.As,t.As)||Ke.comparator(e.key,t.key)}}class ND{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.vs=1,this.Rs=new xn(ni.ds)}checkEmpty(e){return X.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,i,a){const c=this.vs;this.vs++;const d=new T0(c,t,i,a);this.mutationQueue.push(d);for(const _ of a)this.Rs=this.Rs.add(new ni(_.key,c)),this.indexManager.addToCollectionParentIndex(e,_.key.path.popLast());return X.resolve(d)}lookupMutationBatch(e,t){return X.resolve(this.Ps(t))}getNextMutationBatchAfterBatchId(e,t){const a=this.bs(t+1),c=a<0?0:a;return X.resolve(this.mutationQueue.length>c?this.mutationQueue[c]:null)}getHighestUnacknowledgedBatchId(){return X.resolve(0===this.mutationQueue.length?-1:this.vs-1)}getAllMutationBatches(e){return X.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const i=new ni(t,0),a=new ni(t,Number.POSITIVE_INFINITY),c=[];return this.Rs.forEachInRange([i,a],d=>{const _=this.Ps(d.As);c.push(_)}),X.resolve(c)}getAllMutationBatchesAffectingDocumentKeys(e,t){let i=new xn(Rt);return t.forEach(a=>{const c=new ni(a,0),d=new ni(a,Number.POSITIVE_INFINITY);this.Rs.forEachInRange([c,d],_=>{i=i.add(_.As)})}),X.resolve(this.Vs(i))}getAllMutationBatchesAffectingQuery(e,t){const i=t.path,a=i.length+1;let c=i;Ke.isDocumentKey(c)||(c=c.child(""));const d=new ni(new Ke(c),0);let _=new xn(Rt);return this.Rs.forEachWhile(D=>{const b=D.key.path;return!!i.isPrefixOf(b)&&(b.length===a&&(_=_.add(D.As)),!0)},d),X.resolve(this.Vs(_))}Vs(e){const t=[];return e.forEach(i=>{const a=this.Ps(i);null!==a&&t.push(a)}),t}removeMutationBatch(e,t){ct(0===this.Ss(t.batchId,"removed")),this.mutationQueue.shift();let i=this.Rs;return X.forEach(t.mutations,a=>{const c=new ni(a.key,t.batchId);return i=i.delete(c),this.referenceDelegate.markPotentiallyOrphaned(e,a.key)}).next(()=>{this.Rs=i})}Cn(e){}containsKey(e,t){const i=new ni(t,0),a=this.Rs.firstAfterOrEqual(i);return X.resolve(t.isEqual(a&&a.key))}performConsistencyCheck(e){return X.resolve()}Ss(e,t){return this.bs(e)}bs(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Ps(e){const t=this.bs(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class FT{constructor(e){this.Ds=e,this.docs=new Tn(Ke.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const i=t.key,a=this.docs.get(i),c=a?a.size:0,d=this.Ds(t);return this.docs=this.docs.insert(i,{document:t.mutableCopy(),size:d}),this.size+=d-c,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const i=this.docs.get(t);return X.resolve(i?i.document.mutableCopy():Vn.newInvalidDocument(t))}getEntries(e,t){let i=Bi();return t.forEach(a=>{const c=this.docs.get(a);i=i.insert(a,c?c.document.mutableCopy():Vn.newInvalidDocument(a))}),X.resolve(i)}getDocumentsMatchingQuery(e,t,i,a){let c=Bi();const d=t.path,_=new Ke(d.child("")),D=this.docs.getIteratorFrom(_);for(;D.hasNext();){const{key:b,value:{document:M}}=D.getNext();if(!d.isPrefixOf(b.path))break;b.path.length>d.length+1||ly(cy(M),i)<=0||(a.has(M.key)||Hh(t,M))&&(c=c.insert(M.key,M.mutableCopy()))}return X.resolve(c)}getAllFromCollectionGroup(e,t,i,a){rt()}Cs(e,t){return X.forEach(this.docs,i=>t(i))}newChangeBuffer(e){return new LT(this)}getSize(e){return X.resolve(this.size)}}class LT extends NT{constructor(e){super(),this.os=e}applyChanges(e){const t=[];return this.changes.forEach((i,a)=>{a.isValidDocument()?t.push(this.os.addEntry(e,a)):this.os.removeEntry(i)}),X.waitFor(t)}getFromCache(e,t){return this.os.getEntry(e,t)}getAllFromCache(e,t){return this.os.getEntries(e,t)}}class ag{constructor(e){this.persistence=e,this.xs=new xo(t=>Xl(t),$p),this.lastRemoteSnapshotVersion=ht.min(),this.highestTargetId=0,this.Ns=0,this.ks=new xD,this.targetCount=0,this.Ms=Ro.kn()}forEachTarget(e,t){return this.xs.forEach((i,a)=>t(a)),X.resolve()}getLastRemoteSnapshotVersion(e){return X.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return X.resolve(this.Ns)}allocateTargetId(e){return this.highestTargetId=this.Ms.next(),X.resolve(this.highestTargetId)}setTargetsMetadata(e,t,i){return i&&(this.lastRemoteSnapshotVersion=i),t>this.Ns&&(this.Ns=t),X.resolve()}Fn(e){this.xs.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Ms=new Ro(t),this.highestTargetId=t),e.sequenceNumber>this.Ns&&(this.Ns=e.sequenceNumber)}addTargetData(e,t){return this.Fn(t),this.targetCount+=1,X.resolve()}updateTargetData(e,t){return this.Fn(t),X.resolve()}removeTargetData(e,t){return this.xs.delete(t.target),this.ks.Is(t.targetId),this.targetCount-=1,X.resolve()}removeTargets(e,t,i){let a=0;const c=[];return this.xs.forEach((d,_)=>{_.sequenceNumber<=t&&null===i.get(_.targetId)&&(this.xs.delete(d),c.push(this.removeMatchingKeysForTargetId(e,_.targetId)),a++)}),X.waitFor(c).next(()=>a)}getTargetCount(e){return X.resolve(this.targetCount)}getTargetData(e,t){const i=this.xs.get(t)||null;return X.resolve(i)}addMatchingKeys(e,t,i){return this.ks.gs(t,i),X.resolve()}removeMatchingKeys(e,t,i){this.ks.ps(t,i);const a=this.persistence.referenceDelegate,c=[];return a&&t.forEach(d=>{c.push(a.markPotentiallyOrphaned(e,d))}),X.waitFor(c)}removeMatchingKeysForTargetId(e,t){return this.ks.Is(t),X.resolve()}getMatchingKeysForTargetId(e,t){const i=this.ks.Es(t);return X.resolve(i)}containsKey(e,t){return X.resolve(this.ks.containsKey(t))}}class nw{constructor(e,t){this.$s={},this.overlays={},this.Os=new ts(0),this.Fs=!1,this.Fs=!0,this.referenceDelegate=e(this),this.Bs=new ag(this),this.indexManager=new AT,this.remoteDocumentCache=new FT(i=>this.referenceDelegate.Ls(i)),this.serializer=new fD(t),this.qs=new RT(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Fs=!1,Promise.resolve()}get started(){return this.Fs}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new kT,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let i=this.$s[e.toKey()];return i||(i=new ND(t,this.referenceDelegate),this.$s[e.toKey()]=i),i}getTargetCache(){return this.Bs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.qs}runTransaction(e,t,i){Pe("MemoryPersistence","Starting transaction:",e);const a=new OD(this.Os.next());return this.referenceDelegate.Us(),i(a).next(c=>this.referenceDelegate.Ks(a).next(()=>c)).toPromise().then(c=>(a.raiseOnCommittedEvent(),c))}Gs(e,t){return X.or(Object.values(this.$s).map(i=>()=>i.containsKey(e,t)))}}class OD extends Gv{constructor(e){super(),this.currentSequenceNumber=e}}class Py{constructor(e){this.persistence=e,this.Qs=new xD,this.js=null}static zs(e){return new Py(e)}get Ws(){if(this.js)return this.js;throw rt()}addReference(e,t,i){return this.Qs.addReference(i,t),this.Ws.delete(i.toString()),X.resolve()}removeReference(e,t,i){return this.Qs.removeReference(i,t),this.Ws.add(i.toString()),X.resolve()}markPotentiallyOrphaned(e,t){return this.Ws.add(t.toString()),X.resolve()}removeTarget(e,t){this.Qs.Is(t.targetId).forEach(a=>this.Ws.add(a.toString()));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,t.targetId).next(a=>{a.forEach(c=>this.Ws.add(c.toString()))}).next(()=>i.removeTargetData(e,t))}Us(){this.js=new Set}Ks(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return X.forEach(this.Ws,i=>{const a=Ke.fromPath(i);return this.Hs(e,a).next(c=>{c||t.removeEntry(a,ht.min())})}).next(()=>(this.js=null,t.apply(e)))}updateLimboDocument(e,t){return this.Hs(e,t).next(i=>{i?this.Ws.delete(t.toString()):this.Ws.add(t.toString())})}Ls(e){return 0}Hs(e,t){return X.or([()=>X.resolve(this.Qs.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Gs(e,t)])}}class VT{constructor(e){this.serializer=e}O(e,t,i,a){const c=new zv("createOrUpgrade",t);var _;i<1&&a>=1&&(e.createObjectStore("owner"),(_=e).createObjectStore("mutationQueues",{keyPath:"userId"}),_.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Kv,{unique:!0}),_.createObjectStore("documentMutations"),rw(e),function(_){_.createObjectStore("remoteDocuments")}(e));let d=X.resolve();return i<3&&a>=3&&(0!==i&&(function(_){_.deleteObjectStore("targetDocuments"),_.deleteObjectStore("targets"),_.deleteObjectStore("targetGlobal")}(e),rw(e)),d=d.next(()=>function(_){const D=_.store("targetGlobal"),b={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:ht.min().toTimestamp(),targetCount:0};return D.put("targetGlobalKey",b)}(c))),i<4&&a>=4&&(0!==i&&(d=d.next(()=>function(_,D){return D.store("mutations").j().next(b=>{_.deleteObjectStore("mutations"),_.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Kv,{unique:!0});const M=D.store("mutations"),O=b.map(z=>M.put(z));return X.waitFor(O)})}(e,c))),d=d.next(()=>{!function(_){_.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),i<5&&a>=5&&(d=d.next(()=>this.Ys(c))),i<6&&a>=6&&(d=d.next(()=>(function(_){_.createObjectStore("remoteDocumentGlobal")}(e),this.Xs(c)))),i<7&&a>=7&&(d=d.next(()=>this.Zs(c))),i<8&&a>=8&&(d=d.next(()=>this.ti(e,c))),i<9&&a>=9&&(d=d.next(()=>{!function(_){_.objectStoreNames.contains("remoteDocumentChanges")&&_.deleteObjectStore("remoteDocumentChanges")}(e)})),i<10&&a>=10&&(d=d.next(()=>this.ei(c))),i<11&&a>=11&&(d=d.next(()=>{(function(_){_.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(_){_.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),i<12&&a>=12&&(d=d.next(()=>{!function(_){const D=_.createObjectStore("documentOverlays",{keyPath:nT});D.createIndex("collectionPathOverlayIndex",rT,{unique:!1}),D.createIndex("collectionGroupOverlayIndex",iT,{unique:!1})}(e)})),i<13&&a>=13&&(d=d.next(()=>function(_){const D=_.createObjectStore("remoteDocumentsV14",{keyPath:bE});D.createIndex("documentKeyIndex",TE),D.createIndex("collectionGroupIndex",Fp)}(e)).next(()=>this.ni(e,c)).next(()=>e.deleteObjectStore("remoteDocuments"))),i<14&&a>=14&&(d=d.next(()=>this.si(e,c))),i<15&&a>=15&&(d=d.next(()=>function(_){_.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),_.createObjectStore("indexState",{keyPath:Xb}).createIndex("sequenceNumberIndex",Lp,{unique:!1}),_.createObjectStore("indexEntries",{keyPath:eT}).createIndex("documentKeyIndex",tT,{unique:!1})}(e))),d}Xs(e){let t=0;return e.store("remoteDocuments").X((i,a)=>{t+=ud(a)}).next(()=>{const i={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",i)})}Ys(e){const t=e.store("mutationQueues"),i=e.store("mutations");return t.j().next(a=>X.forEach(a,c=>{const d=IDBKeyRange.bound([c.userId,-1],[c.userId,c.lastAcknowledgedBatchId]);return i.j("userMutationsIndex",d).next(_=>X.forEach(_,D=>{ct(D.userId===c.userId);const b=Uc(this.serializer,D);return ED(e,c.userId,b).next(()=>{})}))}))}Zs(e){const t=e.store("targetDocuments"),i=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(a=>{const c=[];return i.X((d,_)=>{const D=new Jt(d),b=[0,fi(D)];c.push(t.get(b).next(M=>M?X.resolve():t.put({targetId:0,path:fi(D),sequenceNumber:a.highestListenSequenceNumber})))}).next(()=>X.waitFor(c))})}ti(e,t){e.createObjectStore("collectionParents",{keyPath:Jb});const i=t.store("collectionParents"),a=new Ny,c=d=>{if(a.add(d)){const _=d.lastSegment(),D=d.popLast();return i.put({collectionId:_,parent:fi(D)})}};return t.store("remoteDocuments").X({Y:!0},(d,_)=>{const D=new Jt(d);return c(D.popLast())}).next(()=>t.store("documentMutations").X({Y:!0},([d,_,D],b)=>{const M=ma(_);return c(M.popLast())}))}ei(e){const t=e.store("targets");return t.X((i,a)=>{const c=Qh(a),d=$0(this.serializer,c);return t.put(d)})}ni(e,t){const i=t.store("remoteDocuments"),a=[];return i.X((c,d)=>{const _=t.store("remoteDocumentsV14"),D=(b=d,b.document?new Ke(Jt.fromString(b.document.name).popFirst(5)):b.noDocument?Ke.fromSegments(b.noDocument.path):b.unknownDocument?Ke.fromSegments(b.unknownDocument.path):rt()).path.toArray();var b;const M={prefixPath:D.slice(0,D.length-2),collectionGroup:D[D.length-2],documentId:D[D.length-1],readTime:d.readTime||[0,0],unknownDocument:d.unknownDocument,noDocument:d.noDocument,document:d.document,hasCommittedMutations:!!d.hasCommittedMutations};a.push(_.put(M))}).next(()=>X.waitFor(a))}si(e,t){const i=t.store("mutations"),a=OT(this.serializer),c=new nw(Py.zs,this.serializer.fe);return i.j().next(d=>{const _=new Map;return d.forEach(D=>{var b;let M=null!==(b=_.get(D.userId))&&void 0!==b?b:Vt();Uc(this.serializer,D).keys().forEach(O=>M=M.add(O)),_.set(D.userId,M)}),X.forEach(_,(D,b)=>{const M=new Fr(b),O=wa.de(this.serializer,M),z=c.getIndexManager(M),ee=ig.de(M,this.serializer,z,c.referenceDelegate);return new MD(a,ee,O,z).recalculateAndSaveOverlaysForDocumentKeys(new Jv(t,ts.ct),D).next()})})}}function rw(n){n.createObjectStore("targetDocuments",{keyPath:SE}).createIndex("documentTargetsIndex",AE,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",Qb,{unique:!0}),n.createObjectStore("targetGlobal")}const iw="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class cg{constructor(e,t,i,a,c,d,_,D,b,M,O=15){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=i,this.ii=c,this.window=d,this.document=_,this.ri=b,this.oi=M,this.ui=O,this.Os=null,this.Fs=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ci=null,this.inForeground=!1,this.ai=null,this.hi=null,this.li=Number.NEGATIVE_INFINITY,this.fi=z=>Promise.resolve(),!cg.D())throw new Se(se.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new xT(this,a),this.di=t+"main",this.serializer=new fD(D),this.wi=new $s(this.di,this.ui,new VT(this.serializer)),this.Bs=new MT(this.referenceDelegate,this.serializer),this.remoteDocumentCache=OT(this.serializer),this.qs=new gD,this.window&&this.window.localStorage?this._i=this.window.localStorage:(this._i=null,!1===M&&qn("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.mi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Se(se.FAILED_PRECONDITION,iw);return this.gi(),this.yi(),this.pi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Bs.getHighestSequenceNumber(e))}).then(e=>{this.Os=new ts(e,this.ri)}).then(()=>{this.Fs=!0}).catch(e=>(this.wi&&this.wi.close(),Promise.reject(e)))}Ii(e){var t=this;return this.fi=function(){var i=(0,_e.Z)(function*(a){if(t.started)return e(a)});return function(a){return i.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.wi.B(function(){var t=(0,_e.Z)(function*(i){null===i.newVersion&&(yield e())});return function(i){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.ii.enqueueAndForget((0,_e.Z)(function*(){t.started&&(yield t.mi())})))}mi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>dg(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Ti(e).next(t=>{t||(this.isPrimary=!1,this.ii.enqueueRetryable(()=>this.fi(!1)))})}).next(()=>this.Ei(e)).next(t=>this.isPrimary&&!t?this.Ai(e).next(()=>!1):!!t&&this.vi(e).next(()=>!0))).catch(e=>{if(Du(e))return Pe("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Pe("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.ii.enqueueRetryable(()=>this.fi(e)),this.isPrimary=e})}Ti(e){return lg(e).get("owner").next(t=>X.resolve(this.Ri(t)))}Pi(e){return dg(e).delete(this.clientId)}bi(){var e=this;return(0,_e.Z)(function*(){if(e.isPrimary&&!e.Vi(e.li,18e5)){e.li=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",i=>{const a=vr(i,"clientMetadata");return a.j().next(c=>{const d=e.Si(c,18e5),_=c.filter(D=>-1===d.indexOf(D));return X.forEach(_,D=>a.delete(D.clientId)).next(()=>_)})}).catch(()=>[]);if(e._i)for(const i of t)e._i.removeItem(e.Di(i.clientId))}})()}pi(){this.hi=this.ii.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.mi().then(()=>this.bi()).then(()=>this.pi()))}Ri(e){return!!e&&e.ownerId===this.clientId}Ei(e){return this.oi?X.resolve(!0):lg(e).get("owner").next(t=>{if(null!==t&&this.Vi(t.leaseTimestampMs,5e3)&&!this.Ci(t.ownerId)){if(this.Ri(t)&&this.networkEnabled)return!0;if(!this.Ri(t)){if(!t.allowTabSynchronization)throw new Se(se.FAILED_PRECONDITION,iw);return!1}}return!(!this.networkEnabled||!this.inForeground)||dg(e).j().next(i=>void 0===this.Si(i,5e3).find(a=>!(this.clientId===a.clientId||!(!this.networkEnabled&&a.networkEnabled||!this.inForeground&&a.inForeground&&this.networkEnabled===a.networkEnabled))))}).next(t=>(this.isPrimary!==t&&Pe("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,_e.Z)(function*(){e.Fs=!1,e.xi(),e.hi&&(e.hi.cancel(),e.hi=null),e.Ni(),e.ki(),yield e.wi.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const i=new Jv(t,ts.ct);return e.Ai(i).next(()=>e.Pi(i))}),e.wi.close(),e.Mi()})()}Si(e,t){return e.filter(i=>this.Vi(i.updateTimeMs,t)&&!this.Ci(i.clientId))}$i(){return this.runTransaction("getActiveClients","readonly",e=>dg(e).j().next(t=>this.Si(t,18e5).map(i=>i.clientId)))}get started(){return this.Fs}getMutationQueue(e,t){return ig.de(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Bs}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new wD(e,this.serializer.fe.databaseId)}getDocumentOverlayCache(e){return wa.de(this.serializer,e)}getBundleCache(){return this.qs}runTransaction(e,t,i){Pe("IndexedDbPersistence","Starting transaction:",e);const a="readonly"===t?"readonly":"readwrite",c=15===(d=this.ui)?Qv:14===d?Yv:13===d?xE:12===d?sT:11===d?ME:void rt();var d;let _;return this.wi.runTransaction(e,a,c,D=>(_=new Jv(D,this.Os?this.Os.next():ts.ct),"readwrite-primary"===t?this.Ti(_).next(b=>!!b||this.Ei(_)).next(b=>{if(!b)throw qn(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.ii.enqueueRetryable(()=>this.fi(!1)),new Se(se.FAILED_PRECONDITION,IE);return i(_)}).next(b=>this.vi(_).next(()=>b)):this.Oi(_).next(()=>i(_)))).then(D=>(_.raiseOnCommittedEvent(),D))}Oi(e){return lg(e).get("owner").next(t=>{if(null!==t&&this.Vi(t.leaseTimestampMs,5e3)&&!this.Ci(t.ownerId)&&!this.Ri(t)&&!(this.oi||this.allowTabSynchronization&&t.allowTabSynchronization))throw new Se(se.FAILED_PRECONDITION,iw)})}vi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return lg(e).put("owner",t)}static D(){return $s.D()}Ai(e){const t=lg(e);return t.get("owner").next(i=>this.Ri(i)?(Pe("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):X.resolve())}Vi(e,t){const i=Date.now();return!(e<i-t||e>i&&(qn(`Detected an update time that is in the future: ${e} > ${i}`),1))}gi(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ai=()=>{this.ii.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.mi()))},this.document.addEventListener("visibilitychange",this.ai),this.inForeground="visible"===this.document.visibilityState)}Ni(){this.ai&&(this.document.removeEventListener("visibilitychange",this.ai),this.ai=null)}yi(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ci=()=>{this.xi();const t=/(?:Version|Mobile)\/1[456]/;(0,en.G6)()&&(navigator.appVersion.match(t)||navigator.userAgent.match(t))&&this.ii.enterRestrictedMode(!0),this.ii.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ci))}ki(){this.ci&&(this.window.removeEventListener("pagehide",this.ci),this.ci=null)}Ci(e){var t;try{const i=null!==(null===(t=this._i)||void 0===t?void 0:t.getItem(this.Di(e)));return Pe("IndexedDbPersistence",`Client '${e}' ${i?"is":"is not"} zombied in LocalStorage`),i}catch(i){return qn("IndexedDbPersistence","Failed to get zombied client id.",i),!1}}xi(){if(this._i)try{this._i.setItem(this.Di(this.clientId),String(Date.now()))}catch(e){qn("Failed to set zombie client id.",e)}}Mi(){if(this._i)try{this._i.removeItem(this.Di(this.clientId))}catch{}}Di(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function lg(n){return vr(n,"owner")}function dg(n){return vr(n,"clientMetadata")}function Ry(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class sw{constructor(e,t,i,a){this.targetId=e,this.fromCache=t,this.Fi=i,this.Bi=a}static Li(e,t){let i=Vt(),a=Vt();for(const c of t.docChanges)switch(c.type){case 0:i=i.add(c.doc.key);break;case 1:a=a.add(c.doc.key)}return new sw(e,t.fromCache,i,a)}}class PD{constructor(){this.qi=!1}initialize(e,t){this.Ui=e,this.indexManager=t,this.qi=!0}getDocumentsMatchingQuery(e,t,i,a){return this.Ki(e,t).next(c=>c||this.Gi(e,t,a,i)).next(c=>c||this.Qi(e,t))}Ki(e,t){if(d0(t))return X.resolve(null);let i=gi(t);return this.indexManager.getIndexType(e,i).next(a=>0===a?null:(null!==t.limit&&1===a&&(t=vy(t,null,"F"),i=gi(t)),this.indexManager.getDocumentsMatchingTarget(e,i).next(c=>{const d=Vt(...c);return this.Ui.getDocuments(e,d).next(_=>this.indexManager.getMinOffset(e,i).next(D=>{const b=this.ji(t,_);return this.zi(t,b,d,D.readTime)?this.Ki(e,vy(t,null,"F")):this.Wi(e,b,t,D)}))})))}Gi(e,t,i,a){return d0(t)||a.isEqual(ht.min())?this.Qi(e,t):this.Ui.getDocuments(e,i).next(c=>{const d=this.ji(t,c);return this.zi(t,d,i,a)?this.Qi(e,t):(jv()<=du.in.DEBUG&&Pe("QueryEngine","Re-using previous result from %s to execute query: %s",a.toString(),qp(t)),this.Wi(e,d,t,So(a,-1)))})}ji(e,t){let i=new xn(GE(e));return t.forEach((a,c)=>{Hh(e,c)&&(i=i.add(c))}),i}zi(e,t,i,a){if(null===e.limit)return!1;if(i.size!==t.size)return!0;const c="F"===e.limitType?t.last():t.first();return!!c&&(c.hasPendingWrites||c.version.compareTo(a)>0)}Qi(e,t){return jv()<=du.in.DEBUG&&Pe("QueryEngine","Using full collection scan to execute query:",qp(t)),this.Ui.getDocumentsMatchingQuery(e,t,Is.min())}Wi(e,t,i,a){return this.Ui.getDocumentsMatchingQuery(e,i,a).next(c=>(t.forEach(d=>{c=c.insert(d.key,d)}),c))}}class BT{constructor(e,t,i,a){this.persistence=e,this.Hi=t,this.serializer=a,this.Ji=new Tn(Rt),this.Yi=new xo(c=>Xl(c),$p),this.Xi=new Map,this.Zi=e.getRemoteDocumentCache(),this.Bs=e.getTargetCache(),this.qs=e.getBundleCache(),this.tr(i)}tr(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new MD(this.Zi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Zi.setIndexManager(this.indexManager),this.Hi.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ji))}}function ky(n,e,t,i){return new BT(n,e,t,i)}function RD(n,e){return Fy.apply(this,arguments)}function Fy(){return Fy=(0,_e.Z)(function*(n,e){const t=Qe(n);return yield t.persistence.runTransaction("Handle user change","readonly",i=>{let a;return t.mutationQueue.getAllMutationBatches(i).next(c=>(a=c,t.tr(e),t.mutationQueue.getAllMutationBatches(i))).next(c=>{const d=[],_=[];let D=Vt();for(const b of a){d.push(b.batchId);for(const M of b.mutations)D=D.add(M.key)}for(const b of c){_.push(b.batchId);for(const M of b.mutations)D=D.add(M.key)}return t.localDocuments.getDocuments(i,D).next(b=>({er:b,removedBatchIds:d,addedBatchIds:_}))})})}),Fy.apply(this,arguments)}function kD(n){const e=Qe(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Bs.getLastRemoteSnapshotVersion(t))}function FD(n,e,t){let i=Vt(),a=Vt();return t.forEach(c=>i=i.add(c)),e.getEntries(n,i).next(c=>{let d=Bi();return t.forEach((_,D)=>{const b=c.get(_);D.isFoundDocument()!==b.isFoundDocument()&&(a=a.add(_)),D.isNoDocument()&&D.version.isEqual(ht.min())?(e.removeEntry(_,D.readTime),d=d.insert(_,D)):!b.isValidDocument()||D.version.compareTo(b.version)>0||0===D.version.compareTo(b.version)&&b.hasPendingWrites?(e.addEntry(D),d=d.insert(_,D)):Pe("LocalStore","Ignoring outdated watch update for ",_,". Current version:",b.version," Watch version:",D.version)}),{nr:d,sr:a}})}function HT(n,e){const t=Qe(n);return t.persistence.runTransaction("Get next mutation batch","readonly",i=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(i,e)))}function cf(n,e){const t=Qe(n);return t.persistence.runTransaction("Allocate target","readwrite",i=>{let a;return t.Bs.getTargetData(i,e).next(c=>c?(a=c,X.resolve(a)):t.Bs.allocateTargetId(i).next(d=>(a=new Au(e,d,"TargetPurposeListen",i.currentSequenceNumber),t.Bs.addTargetData(i,a).next(()=>a))))}).then(i=>{const a=t.Ji.get(i.targetId);return(null===a||i.snapshotVersion.compareTo(a.snapshotVersion)>0)&&(t.Ji=t.Ji.insert(i.targetId,i),t.Yi.set(e,i.targetId)),i})}function lf(n,e,t){return ow.apply(this,arguments)}function ow(){return ow=(0,_e.Z)(function*(n,e,t){const i=Qe(n),a=i.Ji.get(e),c=t?"readwrite":"readwrite-primary";try{t||(yield i.persistence.runTransaction("Release target",c,d=>i.persistence.referenceDelegate.removeTarget(d,a)))}catch(d){if(!Du(d))throw d;Pe("LocalStore",`Failed to update sequence numbers for target ${e}: ${d}`)}i.Ji=i.Ji.remove(e),i.Yi.delete(a.target)}),ow.apply(this,arguments)}function hg(n,e,t){const i=Qe(n);let a=ht.min(),c=Vt();return i.persistence.runTransaction("Execute query","readonly",d=>function(_,D,b){const M=Qe(_),O=M.Yi.get(b);return void 0!==O?X.resolve(M.Ji.get(O)):M.Bs.getTargetData(D,b)}(i,d,gi(e)).next(_=>{if(_)return a=_.lastLimboFreeSnapshotVersion,i.Bs.getMatchingKeysForTargetId(d,_.targetId).next(D=>{c=D})}).next(()=>i.Hi.getDocumentsMatchingQuery(d,e,t?a:ht.min(),t?c:Vt())).next(_=>(VD(i,$E(e),_),{documents:_,ir:c})))}function aw(n,e){const t=Qe(n),i=Qe(t.Bs),a=t.Ji.get(e);return a?Promise.resolve(a.target):t.persistence.runTransaction("Get target data","readonly",c=>i.le(c,e).next(d=>d?d.target:null))}function LD(n,e){const t=Qe(n),i=t.Xi.get(e)||ht.min();return t.persistence.runTransaction("Get new document changes","readonly",a=>t.Zi.getAllFromCollectionGroup(a,e,So(i,-1),Number.MAX_SAFE_INTEGER)).then(a=>(VD(t,e,a),a))}function VD(n,e,t){let i=n.Xi.get(e)||ht.min();t.forEach((a,c)=>{c.readTime.compareTo(i)>0&&(i=c.readTime)}),n.Xi.set(e,i)}function uw(){return uw=(0,_e.Z)(function*(n,e,t,i){const a=Qe(n);let c=Vt(),d=Bi();for(const b of t){const M=e.rr(b.metadata.name);b.document&&(c=c.add(M));const O=e.ur(b);O.setReadTime(e.cr(b.metadata.readTime)),d=d.insert(M,O)}const _=a.Zi.newChangeBuffer({trackRemovals:!0}),D=yield cf(a,(b=i,gi(ed(Jt.fromString(`__bundle__/docs/${b}`)))));var b;return a.persistence.runTransaction("Apply bundle documents","readwrite",b=>FD(b,_,d).next(M=>(_.apply(b),M)).next(M=>a.Bs.removeMatchingKeysForTargetId(b,D.targetId).next(()=>a.Bs.addMatchingKeys(b,c,D.targetId)).next(()=>a.localDocuments.getLocalViewOfDocuments(b,M.nr,M.sr)).next(()=>M.nr)))}),uw.apply(this,arguments)}function $T(n,e){return cw.apply(this,arguments)}function cw(){return cw=(0,_e.Z)(function*(n,e,t=Vt()){const i=yield cf(n,gi(My(e.bundledQuery))),a=Qe(n);return a.persistence.runTransaction("Save named query","readwrite",c=>{const d=Un(e.readTime);if(i.snapshotVersion.compareTo(d)>=0)return a.qs.saveNamedQuery(c,e);const _=i.withResumeToken(Vr.EMPTY_BYTE_STRING,d);return a.Ji=a.Ji.insert(_.targetId,_),a.Bs.updateTargetData(c,_).next(()=>a.Bs.removeMatchingKeysForTargetId(c,i.targetId)).next(()=>a.Bs.addMatchingKeys(c,t,i.targetId)).next(()=>a.qs.saveNamedQuery(c,e))})}),cw.apply(this,arguments)}function UD(n,e){return`firestore_clients_${n}_${e}`}function Ly(n,e,t){let i=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(i+=`_${e.uid}`),i}function fg(n,e){return`firestore_targets_${n}_${e}`}class pg{constructor(e,t,i,a){this.user=e,this.batchId=t,this.state=i,this.error=a}static ar(e,t,i){const a=JSON.parse(i);let c,d="object"==typeof a&&-1!==["pending","acknowledged","rejected"].indexOf(a.state)&&(void 0===a.error||"object"==typeof a.error);return d&&a.error&&(d="string"==typeof a.error.message&&"string"==typeof a.error.code,d&&(c=new Se(a.error.code,a.error.message))),d?new pg(e,t,a.state,c):(qn("SharedClientState",`Failed to parse mutation state for ID '${t}': ${i}`),null)}hr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class ld{constructor(e,t,i){this.targetId=e,this.state=t,this.error=i}static ar(e,t){const i=JSON.parse(t);let a,c="object"==typeof i&&-1!==["not-current","current","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return c&&i.error&&(c="string"==typeof i.error.message&&"string"==typeof i.error.code,c&&(a=new Se(i.error.code,i.error.message))),c?new ld(e,i.state,a):(qn("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}hr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Vy{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static ar(e,t){const i=JSON.parse(t);let a="object"==typeof i&&i.activeTargetIds instanceof Array,c=Iy();for(let d=0;a&&d<i.activeTargetIds.length;++d)a=kh(i.activeTargetIds[d]),c=c.add(i.activeTargetIds[d]);return a?new Vy(e,c):(qn("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class lw{constructor(e,t){this.clientId=e,this.onlineState=t}static ar(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new lw(t.clientId,t.onlineState):(qn("SharedClientState",`Failed to parse online state: ${e}`),null)}}class gg{constructor(){this.activeTargetIds=Iy()}lr(e){this.activeTargetIds=this.activeTargetIds.add(e)}dr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}hr(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class dw{constructor(e,t,i,a,c){this.window=e,this.ii=t,this.persistenceKey=i,this.wr=a,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this._r=this.mr.bind(this),this.gr=new Tn(Rt),this.started=!1,this.yr=[];const d=i.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=c,this.pr=UD(this.persistenceKey,this.wr),this.Ir=`firestore_sequence_number_${this.persistenceKey}`,this.gr=this.gr.insert(this.wr,new gg),this.Tr=new RegExp(`^firestore_clients_${d}_([^_]*)$`),this.Er=new RegExp(`^firestore_mutations_${d}_(\\d+)(?:_(.*))?$`),this.Ar=new RegExp(`^firestore_targets_${d}_(\\d+)$`),this.vr=`firestore_online_state_${this.persistenceKey}`,this.Rr=function(_){return`firestore_bundle_loaded_v2_${_}`}(this.persistenceKey),this.window.addEventListener("storage",this._r)}static D(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,_e.Z)(function*(){const t=yield e.syncEngine.$i();for(const a of t){if(a===e.wr)continue;const c=e.getItem(UD(e.persistenceKey,a));if(c){const d=Vy.ar(a,c);d&&(e.gr=e.gr.insert(d.clientId,d))}}e.Pr();const i=e.storage.getItem(e.vr);if(i){const a=e.br(i);a&&e.Vr(a)}for(const a of e.yr)e.mr(a);e.yr=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.Ir,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Sr(this.gr)}isActiveQueryTarget(e){let t=!1;return this.gr.forEach((i,a)=>{a.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.Dr(e,"pending")}updateMutationState(e,t,i){this.Dr(e,t,i),this.Cr(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const i=this.storage.getItem(fg(this.persistenceKey,e));if(i){const a=ld.ar(e,i);a&&(t=a.state)}}return this.Nr.lr(e),this.Pr(),t}removeLocalQueryTarget(e){this.Nr.dr(e),this.Pr()}isLocalQueryTarget(e){return this.Nr.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(fg(this.persistenceKey,e))}updateQueryState(e,t,i){this.kr(e,t,i)}handleUserChange(e,t,i){t.forEach(a=>{this.Cr(a)}),this.currentUser=e,i.forEach(a=>{this.addPendingMutation(a)})}setOnlineState(e){this.Mr(e)}notifyBundleLoaded(e){this.$r(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this._r),this.removeItem(this.pr),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return Pe("SharedClientState","READ",e,t),t}setItem(e,t){Pe("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){Pe("SharedClientState","REMOVE",e),this.storage.removeItem(e)}mr(e){var t=this;const i=e;if(i.storageArea===this.storage){if(Pe("SharedClientState","EVENT",i.key,i.newValue),i.key===this.pr)return void qn("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.ii.enqueueRetryable((0,_e.Z)(function*(){if(t.started){if(null!==i.key)if(t.Tr.test(i.key)){if(null==i.newValue){const a=t.Or(i.key);return t.Fr(a,null)}{const a=t.Br(i.key,i.newValue);if(a)return t.Fr(a.clientId,a)}}else if(t.Er.test(i.key)){if(null!==i.newValue){const a=t.Lr(i.key,i.newValue);if(a)return t.qr(a)}}else if(t.Ar.test(i.key)){if(null!==i.newValue){const a=t.Ur(i.key,i.newValue);if(a)return t.Kr(a)}}else if(i.key===t.vr){if(null!==i.newValue){const a=t.br(i.newValue);if(a)return t.Vr(a)}}else if(i.key===t.Ir){const a=function(c){let d=ts.ct;if(null!=c)try{const _=JSON.parse(c);ct("number"==typeof _),d=_}catch(_){qn("SharedClientState","Failed to read sequence number from WebStorage",_)}return d}(i.newValue);a!==ts.ct&&t.sequenceNumberHandler(a)}else if(i.key===t.Rr){const a=t.Gr(i.newValue);yield Promise.all(a.map(c=>t.syncEngine.Qr(c)))}}else t.yr.push(i)}))}}get Nr(){return this.gr.get(this.wr)}Pr(){this.setItem(this.pr,this.Nr.hr())}Dr(e,t,i){const a=new pg(this.currentUser,e,t,i),c=Ly(this.persistenceKey,this.currentUser,e);this.setItem(c,a.hr())}Cr(e){const t=Ly(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Mr(e){this.storage.setItem(this.vr,JSON.stringify({clientId:this.wr,onlineState:e}))}kr(e,t,i){const a=fg(this.persistenceKey,e),c=new ld(e,t,i);this.setItem(a,c.hr())}$r(e){const t=JSON.stringify(Array.from(e));this.setItem(this.Rr,t)}Or(e){const t=this.Tr.exec(e);return t?t[1]:null}Br(e,t){const i=this.Or(e);return Vy.ar(i,t)}Lr(e,t){const i=this.Er.exec(e),a=Number(i[1]);return pg.ar(new Fr(void 0!==i[2]?i[2]:null),a,t)}Ur(e,t){const i=this.Ar.exec(e),a=Number(i[1]);return ld.ar(a,t)}br(e){return lw.ar(e)}Gr(e){return JSON.parse(e)}qr(e){var t=this;return(0,_e.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.jr(e.batchId,e.state,e.error);Pe("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}Kr(e){return this.syncEngine.zr(e.targetId,e.state,e.error)}Fr(e,t){const i=t?this.gr.insert(e,t):this.gr.remove(e),a=this.Sr(this.gr),c=this.Sr(i),d=[],_=[];return c.forEach(D=>{a.has(D)||d.push(D)}),a.forEach(D=>{c.has(D)||_.push(D)}),this.syncEngine.Wr(d,_).then(()=>{this.gr=i})}Vr(e){this.gr.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Sr(e){let t=Iy();return e.forEach((i,a)=>{t=t.unionWith(a.activeTargetIds)}),t}}class hw{constructor(){this.Hr=new gg,this.Jr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,i){}addLocalQueryTarget(e){return this.Hr.lr(e),this.Jr[e]||"not-current"}updateQueryState(e,t,i){this.Jr[e]=t}removeLocalQueryTarget(e){this.Hr.dr(e)}isLocalQueryTarget(e){return this.Hr.activeTargetIds.has(e)}clearQueryState(e){delete this.Jr[e]}getAllActiveQueryTargets(){return this.Hr.activeTargetIds}isActiveQueryTarget(e){return this.Hr.activeTargetIds.has(e)}start(){return this.Hr=new gg,Promise.resolve()}handleUserChange(e,t,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class dd{Yr(e){}shutdown(){}}class jD{constructor(){this.Xr=()=>this.Zr(),this.eo=()=>this.no(),this.so=[],this.io()}Yr(e){this.so.push(e)}shutdown(){window.removeEventListener("online",this.Xr),window.removeEventListener("offline",this.eo)}io(){window.addEventListener("online",this.Xr),window.addEventListener("offline",this.eo)}Zr(){Pe("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.so)e(0)}no(){Pe("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.so)e(1)}static D(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let By=null;function HD(){return null===By?By=268435456+Math.round(2147483648*Math.random()):By++,"0x"+By.toString(16)}const fw={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class pw{constructor(e){this.ro=e.ro,this.oo=e.oo}uo(e){this.co=e}ao(e){this.ho=e}onMessage(e){this.lo=e}close(){this.oo()}send(e){this.ro(e)}fo(){this.co()}wo(e){this.ho(e)}_o(e){this.lo(e)}}const Ai="WebChannelConnection";class $D extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.mo=(e.ssl?"https":"http")+"://"+e.host,this.yo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get po(){return!1}Io(e,t,i,a,c){const d=HD(),_=this.To(e,t);Pe("RestConnection",`Sending RPC '${e}' ${d}:`,_,i);const D={};return this.Eo(D,a,c),this.Ao(e,_,D,i).then(b=>(Pe("RestConnection",`Received RPC '${e}' ${d}: `,b),b),b=>{throw bi("RestConnection",`RPC '${e}' ${d} failed with error: `,b,"url: ",_,"request:",i),b})}vo(e,t,i,a,c,d){return this.Io(e,t,i,a,c)}Eo(e,t,i){e["X-Goog-Api-Client"]="gl-js/ fire/"+To,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((a,c)=>e[c]=a),i&&i.headers.forEach((a,c)=>e[c]=a)}To(e,t){return`${this.mo}/v1/${t}:${fw[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Ao(e,t,i,a){const c=HD();return new Promise((d,_)=>{const D=new mE;D.setWithCredentials(!0),D.listenOnce(ry.COMPLETE,()=>{try{switch(D.getLastErrorCode()){case pE.NO_ERROR:const M=D.getResponseJson();Pe(Ai,`XHR for RPC '${e}' ${c} received:`,JSON.stringify(M)),d(M);break;case pE.TIMEOUT:Pe(Ai,`RPC '${e}' ${c} timed out`),_(new Se(se.DEADLINE_EXCEEDED,"Request time out"));break;case pE.HTTP_ERROR:const O=D.getStatus();if(Pe(Ai,`RPC '${e}' ${c} failed with status:`,O,"response text:",D.getResponseText()),O>0){let z=D.getResponseJson();Array.isArray(z)&&(z=z[0]);const ee=z?.error;if(ee&&ee.status&&ee.message){const De=function(Be){const je=Be.toLowerCase().replace(/_/g,"-");return Object.values(se).indexOf(je)>=0?je:se.UNKNOWN}(ee.status);_(new Se(De,ee.message))}else _(new Se(se.UNKNOWN,"Server responded with status "+D.getStatus()))}else _(new Se(se.UNAVAILABLE,"Connection failed."));break;default:rt()}}finally{Pe(Ai,`RPC '${e}' ${c} completed.`)}});const b=JSON.stringify(a);Pe(Ai,`RPC '${e}' ${c} sending request:`,a),D.send(t,"POST",b,i,15)})}Ro(e,t,i){const a=HD(),c=[this.mo,"/","google.firestore.v1.Firestore","/",e,"/channel"],d=hE(),_=fE(),D={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},b=this.longPollingOptions.timeoutSeconds;void 0!==b&&(D.longPollingTimeout=Math.round(1e3*b)),this.useFetchStreams&&(D.xmlHttpFactory=new gE({})),this.Eo(D.initMessageHeaders,t,i),D.encodeInitMessageHeaders=!0;const M=c.join("");Pe(Ai,`Creating RPC '${e}' stream ${a}: ${M}`,D);const O=d.createWebChannel(M,D);let z=!1,ee=!1;const De=new pw({ro:je=>{ee?Pe(Ai,`Not sending because RPC '${e}' stream ${a} is closed:`,je):(z||(Pe(Ai,`Opening RPC '${e}' stream ${a} transport.`),O.open(),z=!0),Pe(Ai,`RPC '${e}' stream ${a} sending:`,je),O.send(je))},oo:()=>O.close()}),Be=(je,wt,At)=>{je.listen(wt,It=>{try{At(It)}catch(Nt){setTimeout(()=>{throw Nt},0)}})};return Be(O,iy.EventType.OPEN,()=>{ee||Pe(Ai,`RPC '${e}' stream ${a} transport opened.`)}),Be(O,iy.EventType.CLOSE,()=>{ee||(ee=!0,Pe(Ai,`RPC '${e}' stream ${a} transport closed`),De.wo())}),Be(O,iy.EventType.ERROR,je=>{ee||(ee=!0,bi(Ai,`RPC '${e}' stream ${a} transport errored:`,je),De.wo(new Se(se.UNAVAILABLE,"The operation could not be completed")))}),Be(O,iy.EventType.MESSAGE,je=>{var wt;if(!ee){const At=je.data[0];ct(!!At);const Nt=At.error||(null===(wt=At[0])||void 0===wt?void 0:wt.error);if(Nt){Pe(Ai,`RPC '${e}' stream ${a} received error:`,Nt);const Ut=Nt.status;let tn=function(Lg){const ax=Nn[Lg];if(void 0!==ax)return A0(ax)}(Ut),us=Nt.message;void 0===tn&&(tn=se.INTERNAL,us="Unknown error status: "+Ut+" with message "+Nt.message),ee=!0,De.wo(new Se(tn,us)),O.close()}else Pe(Ai,`RPC '${e}' stream ${a} received:`,At),De._o(At)}}),Be(_,NA.STAT_EVENT,je=>{je.stat===Bv.PROXY?Pe(Ai,`RPC '${e}' stream ${a} detected buffering proxy`):je.stat===Bv.NOPROXY&&Pe(Ai,`RPC '${e}' stream ${a} detected no buffering proxy`)}),setTimeout(()=>{De.fo()},0),De}}function GD(){return typeof window<"u"?window:null}function Uy(){return typeof document<"u"?document:null}function mg(n){return new rD(n,!0)}class yg{constructor(e,t,i=1e3,a=1.5,c=6e4){this.ii=e,this.timerId=t,this.Po=i,this.bo=a,this.Vo=c,this.So=0,this.Do=null,this.Co=Date.now(),this.reset()}reset(){this.So=0}xo(){this.So=this.Vo}No(e){this.cancel();const t=Math.floor(this.So+this.ko()),i=Math.max(0,Date.now()-this.Co),a=Math.max(0,t-i);a>0&&Pe("ExponentialBackoff",`Backing off for ${a} ms (base delay: ${this.So} ms, delay with jitter: ${t} ms, last attempt: ${i} ms ago)`),this.Do=this.ii.enqueueAfterDelay(this.timerId,a,()=>(this.Co=Date.now(),e())),this.So*=this.bo,this.So<this.Po&&(this.So=this.Po),this.So>this.Vo&&(this.So=this.Vo)}Mo(){null!==this.Do&&(this.Do.skipDelay(),this.Do=null)}cancel(){null!==this.Do&&(this.Do.cancel(),this.Do=null)}ko(){return(Math.random()-.5)*this.So}}class gw{constructor(e,t,i,a,c,d,_,D){this.ii=e,this.$o=i,this.Oo=a,this.connection=c,this.authCredentialsProvider=d,this.appCheckCredentialsProvider=_,this.listener=D,this.state=0,this.Fo=0,this.Bo=null,this.Lo=null,this.stream=null,this.qo=new yg(e,t)}Uo(){return 1===this.state||5===this.state||this.Ko()}Ko(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Go()}stop(){var e=this;return(0,_e.Z)(function*(){e.Uo()&&(yield e.close(0))})()}Qo(){this.state=0,this.qo.reset()}jo(){this.Ko()&&null===this.Bo&&(this.Bo=this.ii.enqueueAfterDelay(this.$o,6e4,()=>this.zo()))}Wo(e){this.Ho(),this.stream.send(e)}zo(){var e=this;return(0,_e.Z)(function*(){if(e.Ko())return e.close(0)})()}Ho(){this.Bo&&(this.Bo.cancel(),this.Bo=null)}Jo(){this.Lo&&(this.Lo.cancel(),this.Lo=null)}close(e,t){var i=this;return(0,_e.Z)(function*(){i.Ho(),i.Jo(),i.qo.cancel(),i.Fo++,4!==e?i.qo.reset():t&&t.code===se.RESOURCE_EXHAUSTED?(qn(t.toString()),qn("Using maximum backoff delay to prevent overloading the backend."),i.qo.xo()):t&&t.code===se.UNAUTHENTICATED&&3!==i.state&&(i.authCredentialsProvider.invalidateToken(),i.appCheckCredentialsProvider.invalidateToken()),null!==i.stream&&(i.Yo(),i.stream.close(),i.stream=null),i.state=e,yield i.listener.ao(t)})()}Yo(){}auth(){this.state=1;const e=this.Xo(this.Fo),t=this.Fo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,a])=>{this.Fo===t&&this.Zo(i,a)},i=>{e(()=>{const a=new Se(se.UNKNOWN,"Fetching auth token failed: "+i.message);return this.tu(a)})})}Zo(e,t){const i=this.Xo(this.Fo);this.stream=this.eu(e,t),this.stream.uo(()=>{i(()=>(this.state=2,this.Lo=this.ii.enqueueAfterDelay(this.Oo,1e4,()=>(this.Ko()&&(this.state=3),Promise.resolve())),this.listener.uo()))}),this.stream.ao(a=>{i(()=>this.tu(a))}),this.stream.onMessage(a=>{i(()=>this.onMessage(a))})}Go(){var e=this;this.state=5,this.qo.No((0,_e.Z)(function*(){e.state=0,e.start()}))}tu(e){return Pe("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Xo(e){return t=>{this.ii.enqueueAndForget(()=>this.Fo===e?t():(Pe("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class zD extends gw{constructor(e,t,i,a,c,d){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,i,a,d),this.serializer=c}eu(e,t){return this.connection.Ro("Listen",e,t)}onMessage(e){this.qo.reset();const t=function aD(n,e){let t;if("targetChange"in e){const i="NO_CHANGE"===(D=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===D?1:"REMOVE"===D?2:"CURRENT"===D?3:"RESET"===D?4:rt(),a=e.targetChange.targetIds||[],c=function(D,b){return D.useProto3Json?(ct(void 0===b||"string"==typeof b),Vr.fromBase64String(b||"")):(ct(void 0===b||b instanceof Uint8Array),Vr.fromUint8Array(b||new Uint8Array))}(n,e.targetChange.resumeToken),d=e.targetChange.cause,_=d&&function(D){const b=void 0===D.code?se.UNKNOWN:A0(D.code);return new Se(b,D.message||"")}(d);t=new O0(i,a,c,_||null)}else if("documentChange"in e){const i=e.documentChange,a=Po(n,i.document.name),c=Un(i.document.updateTime),d=i.document.createTime?Un(i.document.createTime):ht.min(),_=new Ur({mapValue:{fields:i.document.fields}}),D=Vn.newFoundDocument(a,c,d,_);t=new os(i.targetIds||[],i.removedTargetIds||[],D.key,D)}else if("documentDelete"in e){const i=e.documentDelete,a=Po(n,i.document),c=i.readTime?Un(i.readTime):ht.min(),d=Vn.newNoDocument(a,c);t=new os([],i.removedTargetIds||[],d.key,d)}else if("documentRemove"in e){const i=e.documentRemove,a=Po(n,i.document);t=new os([],i.removedTargetIds||[],a,null)}else{if(!("filter"in e))return rt();{const i=e.filter,{count:a=0,unchangedNames:c}=i,d=new QE(a,c);t=new N0(i.targetId,d)}}var D;return t}(this.serializer,e),i=function(a){if(!("targetChange"in a))return ht.min();const c=a.targetChange;return c.targetIds&&c.targetIds.length?ht.min():c.readTime?Un(c.readTime):ht.min()}(e);return this.listener.nu(t,i)}su(e){const t={};t.database=Zh(this.serializer),t.addTarget=function(a,c){let d;const _=c.target;if(d=jh(_)?{documents:j0(a,_)}:{query:H0(a,_)},d.targetId=c.targetId,c.resumeToken.approximateByteSize()>0){d.resumeToken=k0(a,c.resumeToken);const D=R0(a,c.expectedCount);null!==D&&(d.expectedCount=D)}else if(c.snapshotVersion.compareTo(ht.min())>0){d.readTime=qh(a,c.snapshotVersion.toTimestamp());const D=R0(a,c.expectedCount);null!==D&&(d.expectedCount=D)}return d}(this.serializer,e);const i=function wT(n,e){const t=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return rt()}}(e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);i&&(t.labels=i),this.Wo(t)}iu(e){const t={};t.database=Zh(this.serializer),t.removeTarget=e,this.Wo(t)}}class qD extends gw{constructor(e,t,i,a,c,d){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,i,a,d),this.serializer=c,this.ru=!1}get ou(){return this.ru}start(){this.ru=!1,this.lastStreamToken=void 0,super.start()}Yo(){this.ru&&this.uu([])}eu(e,t){return this.connection.Ro("Write",e,t)}onMessage(e){if(ct(!!e.streamToken),this.lastStreamToken=e.streamToken,this.ru){this.qo.reset();const t=function uD(n,e){return n&&n.length>0?(ct(void 0!==e),n.map(t=>function(i,a){let c=Un(i.updateTime?i.updateTime:a);return c.isEqual(ht.min())&&(c=Un(a)),new pT(c,i.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),i=Un(e.commitTime);return this.listener.cu(i,t)}return ct(!e.writeResults||0===e.writeResults.length),this.ru=!0,this.listener.au()}hu(){const e={};e.database=Zh(this.serializer),this.Wo(e)}uu(e){const t={streamToken:this.lastStreamToken,writes:e.map(i=>Kh(this.serializer,i))};this.Wo(t)}}class WD extends class{}{constructor(e,t,i,a){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=i,this.serializer=a,this.lu=!1}fu(){if(this.lu)throw new Se(se.FAILED_PRECONDITION,"The client has already been terminated.")}Io(e,t,i){return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,c])=>this.connection.Io(e,t,i,a,c)).catch(a=>{throw"FirebaseError"===a.name?(a.code===se.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new Se(se.UNKNOWN,a.toString())})}vo(e,t,i,a){return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([c,d])=>this.connection.vo(e,t,i,c,d,a)).catch(c=>{throw"FirebaseError"===c.name?(c.code===se.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new Se(se.UNKNOWN,c.toString())})}terminate(){this.lu=!0}}class zT{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.wu=0,this._u=null,this.mu=!0}gu(){0===this.wu&&(this.yu("Unknown"),this._u=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._u=null,this.pu("Backend didn't respond within 10 seconds."),this.yu("Offline"),Promise.resolve())))}Iu(e){"Online"===this.state?this.yu("Unknown"):(this.wu++,this.wu>=1&&(this.Tu(),this.pu(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.yu("Offline")))}set(e){this.Tu(),this.wu=0,"Online"===e&&(this.mu=!1),this.yu(e)}yu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}pu(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.mu?(qn(t),this.mu=!1):Pe("OnlineStateTracker",t)}Tu(){null!==this._u&&(this._u.cancel(),this._u=null)}}class qT{constructor(e,t,i,a,c){var d=this;this.localStore=e,this.datastore=t,this.asyncQueue=i,this.remoteSyncer={},this.Eu=[],this.Au=new Map,this.vu=new Set,this.Ru=[],this.Pu=c,this.Pu.Yr(_=>{i.enqueueAndForget((0,_e.Z)(function*(){var D;jc(d)&&(Pe("RemoteStore","Restarting streams for network reachability change."),yield(D=(0,_e.Z)(function*(b){const M=Qe(b);M.vu.add(4),yield hd(M),M.bu.set("Unknown"),M.vu.delete(4),yield df(M)}),function(b){return D.apply(this,arguments)})(d))}))}),this.bu=new zT(i,a)}}function df(n){return ZD.apply(this,arguments)}function ZD(){return ZD=(0,_e.Z)(function*(n){if(jc(n))for(const e of n.Ru)yield e(!0)}),ZD.apply(this,arguments)}function hd(n){return yw.apply(this,arguments)}function yw(){return yw=(0,_e.Z)(function*(n){for(const e of n.Ru)yield e(!1)}),yw.apply(this,arguments)}function jy(n,e){const t=Qe(n);t.Au.has(e.targetId)||(t.Au.set(e.targetId,e),$y(t)?vw(t):vg(t).Ko()&&_w(t,e))}function Hy(n,e){const t=Qe(n),i=vg(t);t.Au.delete(e),i.Ko()&&KD(t,e),0===t.Au.size&&(i.Ko()?i.jo():jc(t)&&t.bu.set("Unknown"))}function _w(n,e){if(n.Vu.qt(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ht.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}vg(n).su(e)}function KD(n,e){n.Vu.qt(e),vg(n).iu(e)}function vw(n){n.Vu=new _T({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),le:e=>n.Au.get(e)||null,ue:()=>n.datastore.serializer.databaseId}),vg(n).start(),n.bu.gu()}function $y(n){return jc(n)&&!vg(n).Uo()&&n.Au.size>0}function jc(n){return 0===Qe(n).vu.size}function YD(n){n.Vu=void 0}function WT(n){return ww.apply(this,arguments)}function ww(){return ww=(0,_e.Z)(function*(n){n.Au.forEach((e,t)=>{_w(n,e)})}),ww.apply(this,arguments)}function ZT(n,e){return Iw.apply(this,arguments)}function Iw(){return Iw=(0,_e.Z)(function*(n,e){YD(n),$y(n)?(n.bu.Iu(e),vw(n)):n.bu.set("Unknown")}),Iw.apply(this,arguments)}function KT(n,e,t){return Ew.apply(this,arguments)}function Ew(){return Ew=(0,_e.Z)(function*(n,e,t){if(n.bu.set("Online"),e instanceof O0&&2===e.state&&e.cause)try{yield(i=(0,_e.Z)(function*(a,c){const d=c.cause;for(const _ of c.targetIds)a.Au.has(_)&&(yield a.remoteSyncer.rejectListen(_,d),a.Au.delete(_),a.Vu.removeTarget(_))}),function(a,c){return i.apply(this,arguments)})(n,e)}catch(i){Pe("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),i),yield Hc(n,i)}else if(e instanceof os?n.Vu.Ht(e):e instanceof N0?n.Vu.ne(e):n.Vu.Xt(e),!t.isEqual(ht.min()))try{const i=yield kD(n.localStore);t.compareTo(i)>=0&&(yield function(a,c){const d=a.Vu.ce(c);return d.targetChanges.forEach((_,D)=>{if(_.resumeToken.approximateByteSize()>0){const b=a.Au.get(D);b&&a.Au.set(D,b.withResumeToken(_.resumeToken,c))}}),d.targetMismatches.forEach((_,D)=>{const b=a.Au.get(_);if(!b)return;a.Au.set(_,b.withResumeToken(Vr.EMPTY_BYTE_STRING,b.snapshotVersion)),KD(a,_);const M=new Au(b.target,_,D,b.sequenceNumber);_w(a,M)}),a.remoteSyncer.applyRemoteEvent(d)}(n,t))}catch(i){Pe("RemoteStore","Failed to raise snapshot:",i),yield Hc(n,i)}var i}),Ew.apply(this,arguments)}function Hc(n,e,t){return Gy.apply(this,arguments)}function Gy(){return Gy=(0,_e.Z)(function*(n,e,t){if(!Du(e))throw e;n.vu.add(1),yield hd(n),n.bu.set("Offline"),t||(t=()=>kD(n.localStore)),n.asyncQueue.enqueueRetryable((0,_e.Z)(function*(){Pe("RemoteStore","Retrying IndexedDB access"),yield t(),n.vu.delete(1),yield df(n)}))}),Gy.apply(this,arguments)}function Dw(n,e){return e().catch(t=>Hc(n,t,e))}function fd(n){return zy.apply(this,arguments)}function zy(){return zy=(0,_e.Z)(function*(n){const e=Qe(n),t=qs(e);let i=e.Eu.length>0?e.Eu[e.Eu.length-1].batchId:-1;for(;QD(e);)try{const a=yield HT(e.localStore,i);if(null===a){0===e.Eu.length&&t.jo();break}i=a.batchId,YT(e,a)}catch(a){yield Hc(e,a)}JD(e)&&QT(e)}),zy.apply(this,arguments)}function QD(n){return jc(n)&&n.Eu.length<10}function YT(n,e){n.Eu.push(e);const t=qs(n);t.Ko()&&t.ou&&t.uu(e.mutations)}function JD(n){return jc(n)&&!qs(n).Uo()&&n.Eu.length>0}function QT(n){qs(n).start()}function LA(n){return Cw.apply(this,arguments)}function Cw(){return Cw=(0,_e.Z)(function*(n){qs(n).hu()}),Cw.apply(this,arguments)}function JT(n){return bw.apply(this,arguments)}function bw(){return bw=(0,_e.Z)(function*(n){const e=qs(n);for(const t of n.Eu)e.uu(t.mutations)}),bw.apply(this,arguments)}function XT(n,e,t){return Tw.apply(this,arguments)}function Tw(){return Tw=(0,_e.Z)(function*(n,e,t){const i=n.Eu.shift(),a=by.from(i,e,t);yield Dw(n,()=>n.remoteSyncer.applySuccessfulWrite(a)),yield fd(n)}),Tw.apply(this,arguments)}function _g(n,e){return Sw.apply(this,arguments)}function Sw(){return Sw=(0,_e.Z)(function*(n,e){var t;e&&qs(n).ou&&(yield(t=(0,_e.Z)(function*(i,a){if(JE(c=a.code)&&c!==se.ABORTED){const d=i.Eu.shift();qs(i).Qo(),yield Dw(i,()=>i.remoteSyncer.rejectFailedWrite(d.batchId,a)),yield fd(i)}var c}),function(i,a){return t.apply(this,arguments)})(n,e)),JD(n)&&QT(n)}),Sw.apply(this,arguments)}function qy(n,e){return Aw.apply(this,arguments)}function Aw(){return Aw=(0,_e.Z)(function*(n,e){const t=Qe(n);t.asyncQueue.verifyOperationInProgress(),Pe("RemoteStore","RemoteStore received new credentials");const i=jc(t);t.vu.add(3),yield hd(t),i&&t.bu.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.vu.delete(3),yield df(t)}),Aw.apply(this,arguments)}function XD(n,e){return Mw.apply(this,arguments)}function Mw(){return Mw=(0,_e.Z)(function*(n,e){const t=Qe(n);e?(t.vu.delete(2),yield df(t)):e||(t.vu.add(2),yield hd(t),t.bu.set("Unknown"))}),Mw.apply(this,arguments)}function vg(n){return n.Su||(n.Su=function(e,t,i){const a=Qe(e);return a.fu(),new zD(t,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,i)}(n.datastore,n.asyncQueue,{uo:WT.bind(null,n),ao:ZT.bind(null,n),nu:KT.bind(null,n)}),n.Ru.push(function(){var e=(0,_e.Z)(function*(t){t?(n.Su.Qo(),$y(n)?vw(n):n.bu.set("Unknown")):(yield n.Su.stop(),YD(n))});return function(t){return e.apply(this,arguments)}}())),n.Su}function qs(n){return n.Du||(n.Du=function(e,t,i){const a=Qe(e);return a.fu(),new qD(t,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,i)}(n.datastore,n.asyncQueue,{uo:LA.bind(null,n),ao:_g.bind(null,n),au:JT.bind(null,n),cu:XT.bind(null,n)}),n.Ru.push(function(){var e=(0,_e.Z)(function*(t){t?(n.Du.Qo(),yield fd(n)):(yield n.Du.stop(),n.Eu.length>0&&(Pe("RemoteStore",`Stopping write stream with ${n.Eu.length} pending writes`),n.Eu=[]))});return function(t){return e.apply(this,arguments)}}())),n.Du}class xw{constructor(e,t,i,a,c){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=i,this.op=a,this.removalCallback=c,this.deferred=new Lr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(d=>{})}static createAndSchedule(e,t,i,a,c){const d=Date.now()+i,_=new xw(e,t,d,a,c);return _.start(i),_}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Se(se.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function hf(n,e){if(qn("AsyncQueue",`${e}: ${n}`),Du(n))return new Se(se.UNAVAILABLE,`${e}: ${n}`);throw n}class ff{constructor(e){this.comparator=e?(t,i)=>e(t,i)||Ke.comparator(t.key,i.key):(t,i)=>Ke.comparator(t.key,i.key),this.keyedMap=Wp(),this.sortedSet=new Tn(this.comparator)}static emptySet(e){return new ff(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,i)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof ff)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;t.hasNext();){const a=t.getNext().key,c=i.getNext().key;if(!a.isEqual(c))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const i=new ff;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=t,i}}class wg{constructor(){this.Cu=new Tn(Ke.comparator)}track(e){const t=e.doc.key,i=this.Cu.get(t);i?0!==e.type&&3===i.type?this.Cu=this.Cu.insert(t,e):3===e.type&&1!==i.type?this.Cu=this.Cu.insert(t,{type:i.type,doc:e.doc}):2===e.type&&2===i.type?this.Cu=this.Cu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===i.type?this.Cu=this.Cu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===i.type?this.Cu=this.Cu.remove(t):1===e.type&&2===i.type?this.Cu=this.Cu.insert(t,{type:1,doc:i.doc}):0===e.type&&1===i.type?this.Cu=this.Cu.insert(t,{type:2,doc:e.doc}):rt():this.Cu=this.Cu.insert(t,e)}xu(){const e=[];return this.Cu.inorderTraversal((t,i)=>{e.push(i)}),e}}class pd{constructor(e,t,i,a,c,d,_,D,b){this.query=e,this.docs=t,this.oldDocs=i,this.docChanges=a,this.mutatedKeys=c,this.fromCache=d,this.syncStateChanged=_,this.excludesMetadataChanges=D,this.hasCachedResults=b}static fromInitialDocuments(e,t,i,a,c){const d=[];return t.forEach(_=>{d.push({type:0,doc:_})}),new pd(e,t,ff.emptySet(t),d,i,a,!0,!1,c)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Pc(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,i=e.docChanges;if(t.length!==i.length)return!1;for(let a=0;a<t.length;a++)if(t[a].type!==i[a].type||!t[a].doc.isEqual(i[a].doc))return!1;return!0}}class eS{constructor(){this.Nu=void 0,this.listeners=[]}}class eC{constructor(){this.queries=new xo(e=>zp(e),Pc),this.onlineState="Unknown",this.ku=new Set}}function pf(n,e){return Nw.apply(this,arguments)}function Nw(){return Nw=(0,_e.Z)(function*(n,e){const t=Qe(n),i=e.query;let a=!1,c=t.queries.get(i);if(c||(a=!0,c=new eS),a)try{c.Nu=yield t.onListen(i)}catch(d){const _=hf(d,`Initialization of query '${qp(e.query)}' failed`);return void e.onError(_)}t.queries.set(i,c),c.listeners.push(e),e.Mu(t.onlineState),c.Nu&&e.$u(c.Nu)&&Zy(t)}),Nw.apply(this,arguments)}function Ow(n,e){return Wy.apply(this,arguments)}function Wy(){return Wy=(0,_e.Z)(function*(n,e){const t=Qe(n),i=e.query;let a=!1;const c=t.queries.get(i);if(c){const d=c.listeners.indexOf(e);d>=0&&(c.listeners.splice(d,1),a=0===c.listeners.length)}if(a)return t.queries.delete(i),t.onUnlisten(i)}),Wy.apply(this,arguments)}function tS(n,e){const t=Qe(n);let i=!1;for(const a of e){const d=t.queries.get(a.query);if(d){for(const _ of d.listeners)_.$u(a)&&(i=!0);d.Nu=a}}i&&Zy(t)}function nS(n,e,t){const i=Qe(n),a=i.queries.get(e);if(a)for(const c of a.listeners)c.onError(t);i.queries.delete(e)}function Zy(n){n.ku.forEach(e=>{e.next()})}class gf{constructor(e,t,i){this.query=e,this.Ou=t,this.Fu=!1,this.Bu=null,this.onlineState="Unknown",this.options=i||{}}$u(e){if(!this.options.includeMetadataChanges){const i=[];for(const a of e.docChanges)3!==a.type&&i.push(a);e=new pd(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Fu?this.Lu(e)&&(this.Ou.next(e),t=!0):this.qu(e,this.onlineState)&&(this.Uu(e),t=!0),this.Bu=e,t}onError(e){this.Ou.error(e)}Mu(e){this.onlineState=e;let t=!1;return this.Bu&&!this.Fu&&this.qu(this.Bu,e)&&(this.Uu(this.Bu),t=!0),t}qu(e,t){return!e.fromCache||(!this.options.Ku||!("Offline"!==t))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}Lu(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Bu&&this.Bu.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}Uu(e){e=pd.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Fu=!0,this.Ou.next(e)}}class rS{constructor(e,t){this.Gu=e,this.byteLength=t}Qu(){return"metadata"in this.Gu}}class tC{constructor(e){this.serializer=e}rr(e){return Po(this.serializer,e)}ur(e){return e.metadata.exists?U0(this.serializer,e.document,!1):Vn.newNoDocument(this.rr(e.metadata.name),this.cr(e.metadata.readTime))}cr(e){return Un(e)}}class nC{constructor(e,t,i){this.ju=e,this.localStore=t,this.serializer=i,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=Pw(e)}zu(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.Gu.namedQuery)this.queries.push(e.Gu.namedQuery);else if(e.Gu.documentMetadata){this.documents.push({metadata:e.Gu.documentMetadata}),e.Gu.documentMetadata.exists||++t;const i=Jt.fromString(e.Gu.documentMetadata.name);this.collectionGroups.add(i.get(i.length-2))}else e.Gu.document&&(this.documents[this.documents.length-1].document=e.Gu.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}Wu(e){const t=new Map,i=new tC(this.serializer);for(const a of e)if(a.metadata.queries){const c=i.rr(a.metadata.name);for(const d of a.metadata.queries){const _=(t.get(d)||Vt()).add(c);t.set(d,_)}}return t}complete(){var e=this;return(0,_e.Z)(function*(){const t=yield function BD(n,e,t,i){return uw.apply(this,arguments)}(e.localStore,new tC(e.serializer),e.documents,e.ju.id),i=e.Wu(e.documents);for(const a of e.queries)yield $T(e.localStore,a,i.get(a.name));return e.progress.taskState="Success",{progress:e.progress,Hu:e.collectionGroups,Ju:t}})()}}function Pw(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class Ky{constructor(e){this.key=e}}class Rw{constructor(e){this.key=e}}class rC{constructor(e,t){this.query=e,this.Yu=t,this.Xu=null,this.hasCachedResults=!1,this.current=!1,this.Zu=Vt(),this.mutatedKeys=Vt(),this.tc=GE(e),this.ec=new ff(this.tc)}get nc(){return this.Yu}sc(e,t){const i=t?t.ic:new wg,a=t?t.ec:this.ec;let c=t?t.mutatedKeys:this.mutatedKeys,d=a,_=!1;const D="F"===this.query.limitType&&a.size===this.query.limit?a.last():null,b="L"===this.query.limitType&&a.size===this.query.limit?a.first():null;if(e.inorderTraversal((M,O)=>{const z=a.get(M),ee=Hh(this.query,O)?O:null,De=!!z&&this.mutatedKeys.has(z.key),Be=!!ee&&(ee.hasLocalMutations||this.mutatedKeys.has(ee.key)&&ee.hasCommittedMutations);let je=!1;z&&ee?z.data.isEqual(ee.data)?De!==Be&&(i.track({type:3,doc:ee}),je=!0):this.rc(z,ee)||(i.track({type:2,doc:ee}),je=!0,(D&&this.tc(ee,D)>0||b&&this.tc(ee,b)<0)&&(_=!0)):!z&&ee?(i.track({type:0,doc:ee}),je=!0):z&&!ee&&(i.track({type:1,doc:z}),je=!0,(D||b)&&(_=!0)),je&&(ee?(d=d.add(ee),c=Be?c.add(M):c.delete(M)):(d=d.delete(M),c=c.delete(M)))}),null!==this.query.limit)for(;d.size>this.query.limit;){const M="F"===this.query.limitType?d.last():d.first();d=d.delete(M.key),c=c.delete(M.key),i.track({type:1,doc:M})}return{ec:d,ic:i,zi:_,mutatedKeys:c}}rc(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,i){const a=this.ec;this.ec=e.ec,this.mutatedKeys=e.mutatedKeys;const c=e.ic.xu();c.sort((b,M)=>function(O,z){const ee=De=>{switch(De){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return rt()}};return ee(O)-ee(z)}(b.type,M.type)||this.tc(b.doc,M.doc)),this.oc(i);const d=t?this.uc():[],_=0===this.Zu.size&&this.current?1:0,D=_!==this.Xu;return this.Xu=_,0!==c.length||D?{snapshot:new pd(this.query,e.ec,a,c,e.mutatedKeys,0===_,D,!1,!!i&&i.resumeToken.approximateByteSize()>0),cc:d}:{cc:d}}Mu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({ec:this.ec,ic:new wg,mutatedKeys:this.mutatedKeys,zi:!1},!1)):{cc:[]}}ac(e){return!this.Yu.has(e)&&!!this.ec.has(e)&&!this.ec.get(e).hasLocalMutations}oc(e){e&&(e.addedDocuments.forEach(t=>this.Yu=this.Yu.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Yu=this.Yu.delete(t)),this.current=e.current)}uc(){if(!this.current)return[];const e=this.Zu;this.Zu=Vt(),this.ec.forEach(i=>{this.ac(i.key)&&(this.Zu=this.Zu.add(i.key))});const t=[];return e.forEach(i=>{this.Zu.has(i)||t.push(new Rw(i))}),this.Zu.forEach(i=>{e.has(i)||t.push(new Ky(i))}),t}hc(e){this.Yu=e.ir,this.Zu=Vt();const t=this.sc(e.documents);return this.applyChanges(t,!0)}lc(){return pd.fromInitialDocuments(this.query,this.ec,this.mutatedKeys,0===this.Xu,this.hasCachedResults)}}class iC{constructor(e,t,i){this.query=e,this.targetId=t,this.view=i}}class sC{constructor(e){this.key=e,this.fc=!1}}class iS{constructor(e,t,i,a,c,d){this.localStore=e,this.remoteStore=t,this.eventManager=i,this.sharedClientState=a,this.currentUser=c,this.maxConcurrentLimboResolutions=d,this.dc={},this.wc=new xo(_=>zp(_),Pc),this._c=new Map,this.mc=new Set,this.gc=new Tn(Ke.comparator),this.yc=new Map,this.Ic=new xD,this.Tc={},this.Ec=new Map,this.Ac=Ro.Mn(),this.onlineState="Unknown",this.vc=void 0}get isPrimaryClient(){return!0===this.vc}}function sS(n,e){return Ig.apply(this,arguments)}function Ig(){return Ig=(0,_e.Z)(function*(n,e){const t=n_(n);let i,a;const c=t.wc.get(e);if(c)i=c.targetId,t.sharedClientState.addLocalQueryTarget(i),a=c.view.lc();else{const d=yield cf(t.localStore,gi(e)),_=t.sharedClientState.addLocalQueryTarget(d.targetId);i=d.targetId,a=yield Eg(t,e,i,"current"===_,d.resumeToken),t.isPrimaryClient&&jy(t.remoteStore,d)}return a}),Ig.apply(this,arguments)}function Eg(n,e,t,i,a){return Yy.apply(this,arguments)}function Yy(){return Yy=(0,_e.Z)(function*(n,e,t,i,a){n.Rc=(O,z,ee)=>{return(De=(0,_e.Z)(function*(Be,je,wt,At){let It=je.view.sc(wt);It.zi&&(It=yield hg(Be.localStore,je.query,!1).then(({documents:tn})=>je.view.sc(tn,It)));const Nt=At&&At.targetChanges.get(je.targetId),Ut=je.view.applyChanges(It,Be.isPrimaryClient,Nt);return $c(Be,je.targetId,Ut.cc),Ut.snapshot}),function(Be,je,wt,At){return De.apply(this,arguments)})(n,O,z,ee);var De};const c=yield hg(n.localStore,e,!0),d=new rC(e,c.ir),_=d.sc(c.documents),D=Ui.createSynthesizedTargetChangeForCurrentChange(t,i&&"Offline"!==n.onlineState,a),b=d.applyChanges(_,n.isPrimaryClient,D);$c(n,t,b.cc);const M=new iC(e,t,d);return n.wc.set(e,M),n._c.has(t)?n._c.get(t).push(e):n._c.set(t,[e]),b.snapshot}),Yy.apply(this,arguments)}function kw(n,e){return Dg.apply(this,arguments)}function Dg(){return Dg=(0,_e.Z)(function*(n,e){const t=Qe(n),i=t.wc.get(e),a=t._c.get(i.targetId);if(a.length>1)return t._c.set(i.targetId,a.filter(c=>!Pc(c,e))),void t.wc.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(i.targetId),t.sharedClientState.isActiveQueryTarget(i.targetId)||(yield lf(t.localStore,i.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(i.targetId),Hy(t.remoteStore,i.targetId),mf(t,i.targetId)}).catch(Eu))):(mf(t,i.targetId),yield lf(t.localStore,i.targetId,!0))}),Dg.apply(this,arguments)}function Fw(){return Fw=(0,_e.Z)(function*(n,e,t){const i=Yw(n);try{const a=yield function(c,d){const _=Qe(c),D=bn.now(),b=d.reduce((z,ee)=>z.add(ee.key),Vt());let M,O;return _.persistence.runTransaction("Locally write mutations","readwrite",z=>{let ee=Bi(),De=Vt();return _.Zi.getEntries(z,b).next(Be=>{ee=Be,ee.forEach((je,wt)=>{wt.isValidDocument()||(De=De.add(je))})}).next(()=>_.localDocuments.getOverlayedDocuments(z,ee)).next(Be=>{M=Be;const je=[];for(const wt of d){const At=RA(wt,M.get(wt.key).overlayedDocument);null!=At&&je.push(new Su(wt.key,At,FE(At.value.mapValue),Bn.exists(!0)))}return _.mutationQueue.addMutationBatch(z,D,je,d)}).next(Be=>{O=Be;const je=Be.applyToLocalDocumentSet(M,De);return _.documentOverlayCache.saveOverlays(z,Be.batchId,je)})}).then(()=>({batchId:O.batchId,changes:zE(M)}))}(i.localStore,e);i.sharedClientState.addPendingMutation(a.batchId),function(c,d,_){let D=c.Tc[c.currentUser.toKey()];D||(D=new Tn(Rt)),D=D.insert(d,_),c.Tc[c.currentUser.toKey()]=D}(i,a.batchId,t),yield Gc(i,a.changes),yield fd(i.remoteStore)}catch(a){const c=hf(a,"Failed to persist write");t.reject(c)}}),Fw.apply(this,arguments)}function oC(n,e){return Lw.apply(this,arguments)}function Lw(){return Lw=(0,_e.Z)(function*(n,e){const t=Qe(n);try{const i=yield function jT(n,e){const t=Qe(n),i=e.snapshotVersion;let a=t.Ji;return t.persistence.runTransaction("Apply remote event","readwrite-primary",c=>{const d=t.Zi.newChangeBuffer({trackRemovals:!0});a=t.Ji;const _=[];e.targetChanges.forEach((M,O)=>{const z=a.get(O);if(!z)return;_.push(t.Bs.removeMatchingKeys(c,M.removedDocuments,O).next(()=>t.Bs.addMatchingKeys(c,M.addedDocuments,O)));let ee=z.withSequenceNumber(c.currentSequenceNumber);var De,Be,je;null!==e.targetMismatches.get(O)?ee=ee.withResumeToken(Vr.EMPTY_BYTE_STRING,ht.min()).withLastLimboFreeSnapshotVersion(ht.min()):M.resumeToken.approximateByteSize()>0&&(ee=ee.withResumeToken(M.resumeToken,i)),a=a.insert(O,ee),Be=ee,je=M,(0===(De=z).resumeToken.approximateByteSize()||Be.snapshotVersion.toMicroseconds()-De.snapshotVersion.toMicroseconds()>=3e8||je.addedDocuments.size+je.modifiedDocuments.size+je.removedDocuments.size>0)&&_.push(t.Bs.updateTargetData(c,ee))});let D=Bi(),b=Vt();if(e.documentUpdates.forEach(M=>{e.resolvedLimboDocuments.has(M)&&_.push(t.persistence.referenceDelegate.updateLimboDocument(c,M))}),_.push(FD(c,d,e.documentUpdates).next(M=>{D=M.nr,b=M.sr})),!i.isEqual(ht.min())){const M=t.Bs.getLastRemoteSnapshotVersion(c).next(O=>t.Bs.setTargetsMetadata(c,c.currentSequenceNumber,i));_.push(M)}return X.waitFor(_).next(()=>d.apply(c)).next(()=>t.localDocuments.getLocalViewOfDocuments(c,D,b)).next(()=>D)}).then(c=>(t.Ji=a,c))}(t.localStore,e);e.targetChanges.forEach((a,c)=>{const d=t.yc.get(c);d&&(ct(a.addedDocuments.size+a.modifiedDocuments.size+a.removedDocuments.size<=1),a.addedDocuments.size>0?d.fc=!0:a.modifiedDocuments.size>0?ct(d.fc):a.removedDocuments.size>0&&(ct(d.fc),d.fc=!1))}),yield Gc(t,i,e)}catch(i){yield Eu(i)}}),Lw.apply(this,arguments)}function Vw(n,e,t){const i=Qe(n);if(i.isPrimaryClient&&0===t||!i.isPrimaryClient&&1===t){const a=[];i.wc.forEach((c,d)=>{const _=d.view.Mu(e);_.snapshot&&a.push(_.snapshot)}),function(c,d){const _=Qe(c);_.onlineState=d;let D=!1;_.queries.forEach((b,M)=>{for(const O of M.listeners)O.Mu(d)&&(D=!0)}),D&&Zy(_)}(i.eventManager,e),a.length&&i.dc.nu(a),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}function Bw(n,e,t){return Qy.apply(this,arguments)}function Qy(){return Qy=(0,_e.Z)(function*(n,e,t){const i=Qe(n);i.sharedClientState.updateQueryState(e,"rejected",t);const a=i.yc.get(e),c=a&&a.key;if(c){let d=new Tn(Ke.comparator);d=d.insert(c,Vn.newNoDocument(c,ht.min()));const _=Vt().add(c),D=new ss(ht.min(),new Map,new Tn(Rt),d,_);yield oC(i,D),i.gc=i.gc.remove(c),i.yc.delete(e),$w(i)}else yield lf(i.localStore,e,!1).then(()=>mf(i,e,t)).catch(Eu)}),Qy.apply(this,arguments)}function aC(n,e){return Uw.apply(this,arguments)}function Uw(){return Uw=(0,_e.Z)(function*(n,e){const t=Qe(n),i=e.batch.batchId;try{const a=yield function UT(n,e){const t=Qe(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",i=>{const a=e.batch.keys(),c=t.Zi.newChangeBuffer({trackRemovals:!0});return function(d,_,D,b){const M=D.batch,O=M.keys();let z=X.resolve();return O.forEach(ee=>{z=z.next(()=>b.getEntry(_,ee)).next(De=>{const Be=D.docVersions.get(ee);ct(null!==Be),De.version.compareTo(Be)<0&&(M.applyToRemoteDocument(De,D),De.isValidDocument()&&(De.setReadTime(D.commitVersion),b.addEntry(De)))})}),z.next(()=>d.mutationQueue.removeMutationBatch(_,M))}(t,i,e,c).next(()=>c.apply(i)).next(()=>t.mutationQueue.performConsistencyCheck(i)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(i,a,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,function(d){let _=Vt();for(let D=0;D<d.mutationResults.length;++D)d.mutationResults[D].transformResults.length>0&&(_=_.add(d.batch.mutations[D].key));return _}(e))).next(()=>t.localDocuments.getDocuments(i,a))})}(t.localStore,e);Xy(t,i,null),Hw(t,i),t.sharedClientState.updateMutationState(i,"acknowledged"),yield Gc(t,a)}catch(a){yield Eu(a)}}),Uw.apply(this,arguments)}function uC(n,e,t){return jw.apply(this,arguments)}function jw(){return jw=(0,_e.Z)(function*(n,e,t){const i=Qe(n);try{const a=yield function(c,d){const _=Qe(c);return _.persistence.runTransaction("Reject batch","readwrite-primary",D=>{let b;return _.mutationQueue.lookupMutationBatch(D,d).next(M=>(ct(null!==M),b=M.keys(),_.mutationQueue.removeMutationBatch(D,M))).next(()=>_.mutationQueue.performConsistencyCheck(D)).next(()=>_.documentOverlayCache.removeOverlaysForBatchId(D,b,d)).next(()=>_.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(D,b)).next(()=>_.localDocuments.getDocuments(D,b))})}(i.localStore,e);Xy(i,e,t),Hw(i,e),i.sharedClientState.updateMutationState(e,"rejected",t),yield Gc(i,a)}catch(a){yield Eu(a)}}),jw.apply(this,arguments)}function Jy(){return Jy=(0,_e.Z)(function*(n,e){const t=Qe(n);jc(t.remoteStore)||Pe("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const i=yield function(c){const d=Qe(c);return d.persistence.runTransaction("Get highest unacknowledged batch id","readonly",_=>d.mutationQueue.getHighestUnacknowledgedBatchId(_))}(t.localStore);if(-1===i)return void e.resolve();const a=t.Ec.get(i)||[];a.push(e),t.Ec.set(i,a)}catch(i){const a=hf(i,"Initialization of waitForPendingWrites() operation failed");e.reject(a)}}),Jy.apply(this,arguments)}function Hw(n,e){(n.Ec.get(e)||[]).forEach(t=>{t.resolve()}),n.Ec.delete(e)}function Xy(n,e,t){const i=Qe(n);let a=i.Tc[i.currentUser.toKey()];if(a){const c=a.get(e);c&&(t?c.reject(t):c.resolve(),a=a.remove(e)),i.Tc[i.currentUser.toKey()]=a}}function mf(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const i of n._c.get(e))n.wc.delete(i),t&&n.dc.Pc(i,t);n._c.delete(e),n.isPrimaryClient&&n.Ic.Is(e).forEach(i=>{n.Ic.containsKey(i)||Mi(n,i)})}function Mi(n,e){n.mc.delete(e.path.canonicalString());const t=n.gc.get(e);null!==t&&(Hy(n.remoteStore,t),n.gc=n.gc.remove(e),n.yc.delete(t),$w(n))}function $c(n,e,t){for(const i of t)i instanceof Ky?(n.Ic.addReference(i.key,e),aS(n,i)):i instanceof Rw?(Pe("SyncEngine","Document no longer in limbo: "+i.key),n.Ic.removeReference(i.key,e),n.Ic.containsKey(i.key)||Mi(n,i.key)):rt()}function aS(n,e){const t=e.key,i=t.path.canonicalString();n.gc.get(t)||n.mc.has(i)||(Pe("SyncEngine","New document in limbo: "+t),n.mc.add(i),$w(n))}function $w(n){for(;n.mc.size>0&&n.gc.size<n.maxConcurrentLimboResolutions;){const e=n.mc.values().next().value;n.mc.delete(e);const t=new Ke(Jt.fromString(e)),i=n.Ac.next();n.yc.set(i,new sC(t)),n.gc=n.gc.insert(t,i),jy(n.remoteStore,new Au(gi(ed(t.path)),i,"TargetPurposeLimboResolution",ts.ct))}}function Gc(n,e,t){return lC.apply(this,arguments)}function lC(){return lC=(0,_e.Z)(function*(n,e,t){const i=Qe(n),a=[],c=[],d=[];var _;i.wc.isEmpty()||(i.wc.forEach((_,D)=>{d.push(i.Rc(D,e,t).then(b=>{if((b||t)&&i.isPrimaryClient&&i.sharedClientState.updateQueryState(D.targetId,b?.fromCache?"not-current":"current"),b){a.push(b);const M=sw.Li(D.targetId,b);c.push(M)}}))}),yield Promise.all(d),i.dc.nu(a),yield(_=(0,_e.Z)(function*(D,b){const M=Qe(D);try{yield M.persistence.runTransaction("notifyLocalViewChanges","readwrite",O=>X.forEach(b,z=>X.forEach(z.Fi,ee=>M.persistence.referenceDelegate.addReference(O,z.targetId,ee)).next(()=>X.forEach(z.Bi,ee=>M.persistence.referenceDelegate.removeReference(O,z.targetId,ee)))))}catch(O){if(!Du(O))throw O;Pe("LocalStore","Failed to update sequence numbers: "+O)}for(const O of b){const z=O.targetId;if(!O.fromCache){const ee=M.Ji.get(z),Be=ee.withLastLimboFreeSnapshotVersion(ee.snapshotVersion);M.Ji=M.Ji.insert(z,Be)}}}),function(D,b){return _.apply(this,arguments)})(i.localStore,c))}),lC.apply(this,arguments)}function dC(n,e){return e_.apply(this,arguments)}function e_(){return e_=(0,_e.Z)(function*(n,e){const t=Qe(n);if(!t.currentUser.isEqual(e)){Pe("SyncEngine","User change. New user:",e.toKey());const i=yield RD(t.localStore,e);t.currentUser=e,(a=t).Ec.forEach(d=>{d.forEach(_=>{_.reject(new Se(se.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),a.Ec.clear(),t.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),yield Gc(t,i.er)}var a}),e_.apply(this,arguments)}function VA(n,e){const t=Qe(n),i=t.yc.get(e);if(i&&i.fc)return Vt().add(i.key);{let a=Vt();const c=t._c.get(e);if(!c)return a;for(const d of c){const _=t.wc.get(d);a=a.unionWith(_.view.nc)}return a}}function BA(n,e){return hC.apply(this,arguments)}function hC(){return hC=(0,_e.Z)(function*(n,e){const t=Qe(n),i=yield hg(t.localStore,e.query,!0),a=e.view.hc(i);return t.isPrimaryClient&&$c(t,e.targetId,a.cc),a}),hC.apply(this,arguments)}function Cg(n,e){return Gw.apply(this,arguments)}function Gw(){return Gw=(0,_e.Z)(function*(n,e){const t=Qe(n);return LD(t.localStore,e).then(i=>Gc(t,i))}),Gw.apply(this,arguments)}function zw(n,e,t,i){return qw.apply(this,arguments)}function qw(){return qw=(0,_e.Z)(function*(n,e,t,i){const a=Qe(n),c=yield function(d,_){const D=Qe(d),b=Qe(D.mutationQueue);return D.persistence.runTransaction("Lookup mutation documents","readonly",M=>b.Sn(M,_).next(O=>O?D.localDocuments.getDocuments(M,O):X.resolve(null)))}(a.localStore,e);var _;null!==c?("pending"===t?yield fd(a.remoteStore):"acknowledged"===t||"rejected"===t?(Xy(a,e,i||null),Hw(a,e),_=e,Qe(Qe(a.localStore).mutationQueue).Cn(_)):rt(),yield Gc(a,c)):Pe("SyncEngine","Cannot apply mutation batch with id: "+e)}),qw.apply(this,arguments)}function Ww(){return Ww=(0,_e.Z)(function*(n,e){const t=Qe(n);if(n_(t),Yw(t),!0===e&&!0!==t.vc){const i=t.sharedClientState.getAllActiveQueryTargets(),a=yield pC(t,i.toArray());t.vc=!0,yield XD(t.remoteStore,!0);for(const c of a)jy(t.remoteStore,c)}else if(!1===e&&!1!==t.vc){const i=[];let a=Promise.resolve();t._c.forEach((c,d)=>{t.sharedClientState.isLocalQueryTarget(d)?i.push(d):a=a.then(()=>(mf(t,d),lf(t.localStore,d,!0))),Hy(t.remoteStore,d)}),yield a,yield pC(t,i),function(c){const d=Qe(c);d.yc.forEach((_,D)=>{Hy(d.remoteStore,D)}),d.Ic.Ts(),d.yc=new Map,d.gc=new Tn(Ke.comparator)}(t),t.vc=!1,yield XD(t.remoteStore,!1)}}),Ww.apply(this,arguments)}function pC(n,e,t){return Zw.apply(this,arguments)}function Zw(){return Zw=(0,_e.Z)(function*(n,e,t){const i=Qe(n),a=[],c=[];for(const d of e){let _;const D=i._c.get(d);if(D&&0!==D.length){_=yield cf(i.localStore,gi(D[0]));for(const b of D){const M=i.wc.get(b),O=yield BA(i,M);O.snapshot&&c.push(O.snapshot)}}else{const b=yield aw(i.localStore,d);_=yield cf(i.localStore,b),yield Eg(i,t_(b),d,!1,_.resumeToken)}a.push(_)}return i.dc.nu(c),a}),Zw.apply(this,arguments)}function t_(n){return l0(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function gC(n){const e=Qe(n);return Qe(Qe(e.localStore).persistence).$i()}function uS(n,e,t,i){return yf.apply(this,arguments)}function yf(){return yf=(0,_e.Z)(function*(n,e,t,i){const a=Qe(n);if(a.vc)return void Pe("SyncEngine","Ignoring unexpected query state notification.");const c=a._c.get(e);if(c&&c.length>0)switch(t){case"current":case"not-current":{const d=yield LD(a.localStore,$E(c[0])),_=ss.createSynthesizedRemoteEventForCurrentChange(e,"current"===t,Vr.EMPTY_BYTE_STRING);yield Gc(a,d,_);break}case"rejected":yield lf(a.localStore,e,!0),mf(a,e,i);break;default:rt()}}),yf.apply(this,arguments)}function Kw(n,e,t){return mC.apply(this,arguments)}function mC(){return mC=(0,_e.Z)(function*(n,e,t){const i=n_(n);if(i.vc){for(const a of e){if(i._c.has(a)){Pe("SyncEngine","Adding an already active target "+a);continue}const c=yield aw(i.localStore,a),d=yield cf(i.localStore,c);yield Eg(i,t_(c),d.targetId,!1,d.resumeToken),jy(i.remoteStore,d)}for(const a of t)i._c.has(a)&&(yield lf(i.localStore,a,!1).then(()=>{Hy(i.remoteStore,a),mf(i,a)}).catch(Eu))}}),mC.apply(this,arguments)}function n_(n){const e=Qe(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=oC.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=VA.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Bw.bind(null,e),e.dc.nu=tS.bind(null,e.eventManager),e.dc.Pc=nS.bind(null,e.eventManager),e}function Yw(n){const e=Qe(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=aC.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=uC.bind(null,e),e}class Ia{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,_e.Z)(function*(){t.serializer=mg(e.databaseInfo.databaseId),t.sharedClientState=t.createSharedClientState(e),t.persistence=t.createPersistence(e),yield t.persistence.start(),t.localStore=t.createLocalStore(e),t.gcScheduler=t.createGarbageCollectionScheduler(e,t.localStore),t.indexBackfillerScheduler=t.createIndexBackfillerScheduler(e,t.localStore)})()}createGarbageCollectionScheduler(e,t){return null}createIndexBackfillerScheduler(e,t){return null}createLocalStore(e){return ky(this.persistence,new PD,e.initialUser,this.serializer)}createPersistence(e){return new nw(Py.zs,this.serializer)}createSharedClientState(e){return new hw}terminate(){var e=this;return(0,_e.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class r_ extends Ia{constructor(e,t,i){super(),this.Vc=e,this.cacheSizeBytes=t,this.forceOwnership=i,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,i=this;return(0,_e.Z)(function*(){yield t().call(i,e),yield i.Vc.initialize(i,e),yield Yw(i.Vc.syncEngine),yield fd(i.Vc.remoteStore),yield i.persistence.Ii(()=>(i.gcScheduler&&!i.gcScheduler.started&&i.gcScheduler.start(),i.indexBackfillerScheduler&&!i.indexBackfillerScheduler.started&&i.indexBackfillerScheduler.start(),Promise.resolve()))})()}createLocalStore(e){return ky(this.persistence,new PD,e.initialUser,this.serializer)}createGarbageCollectionScheduler(e,t){return new bD(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,t)}createIndexBackfillerScheduler(e,t){const i=new Zb(t,this.persistence);return new Zv(e.asyncQueue,i)}createPersistence(e){const t=Ry(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),i=void 0!==this.cacheSizeBytes?Si.withCacheSize(this.cacheSizeBytes):Si.DEFAULT;return new cg(this.synchronizeTabs,t,e.clientId,i,e.asyncQueue,GD(),Uy(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(e){return new hw}}class i_ extends r_{constructor(e,t){super(e,t,!1),this.Vc=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,i=this;return(0,_e.Z)(function*(){yield t().call(i,e);const a=i.Vc.syncEngine;i.sharedClientState instanceof dw&&(i.sharedClientState.syncEngine={jr:zw.bind(null,a),zr:uS.bind(null,a),Wr:Kw.bind(null,a),$i:gC.bind(null,a),Qr:Cg.bind(null,a)},yield i.sharedClientState.start()),yield i.persistence.Ii(function(){var c=(0,_e.Z)(function*(d){yield function fC(n,e){return Ww.apply(this,arguments)}(i.Vc.syncEngine,d),i.gcScheduler&&(d&&!i.gcScheduler.started?i.gcScheduler.start():d||i.gcScheduler.stop()),i.indexBackfillerScheduler&&(d&&!i.indexBackfillerScheduler.started?i.indexBackfillerScheduler.start():d||i.indexBackfillerScheduler.stop())});return function(d){return c.apply(this,arguments)}}())})()}createSharedClientState(e){const t=GD();if(!dw.D(t))throw new Se(se.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const i=Ry(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new dw(t,e.asyncQueue,i,e.clientId,e.initialUser)}}class bg{initialize(e,t){var i=this;return(0,_e.Z)(function*(){i.localStore||(i.localStore=e.localStore,i.sharedClientState=e.sharedClientState,i.datastore=i.createDatastore(t),i.remoteStore=i.createRemoteStore(t),i.eventManager=i.createEventManager(t),i.syncEngine=i.createSyncEngine(t,!e.synchronizeTabs),i.sharedClientState.onlineStateHandler=a=>Vw(i.syncEngine,a,1),i.remoteStore.remoteSyncer.handleCredentialChange=dC.bind(null,i.syncEngine),yield XD(i.remoteStore,i.syncEngine.isPrimaryClient))})()}createEventManager(e){return new eC}createDatastore(e){const t=mg(e.databaseInfo.databaseId),i=new $D(e.databaseInfo);return new WD(e.authCredentials,e.appCheckCredentials,i,t)}createRemoteStore(e){return t=this.localStore,i=this.datastore,a=e.asyncQueue,c=_=>Vw(this.syncEngine,_,0),d=jD.D()?new jD:new dd,new qT(t,i,a,c,d);var t,i,a,c,d}createSyncEngine(e,t){return function(i,a,c,d,_,D,b){const M=new iS(i,a,c,d,_,D);return b&&(M.vc=!0),M}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,_e.Z)(function*(t){const i=Qe(t);Pe("RemoteStore","RemoteStore shutting down."),i.vu.add(5),yield hd(i),i.Pu.shutdown(),i.bu.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function _C(n,e=10240){let t=0;return{read:()=>(0,_e.Z)(function*(){if(t<n.byteLength){const i={value:n.slice(t,t+e),done:!1};return t+=e,i}return{done:!0}})(),cancel:()=>(0,_e.Z)(function*(){})(),releaseLock(){},closed:Promise.resolve()}}class Qw{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Sc(this.observer.next,e)}error(e){this.observer.error?this.Sc(this.observer.error,e):qn("Uncaught Error in snapshot listener:",e.toString())}Dc(){this.muted=!0}Sc(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class lS{constructor(e,t){this.Cc=e,this.serializer=t,this.metadata=new Lr,this.buffer=new Uint8Array,this.xc=new TextDecoder("utf-8"),this.Nc().then(i=>{i&&i.Qu()?this.metadata.resolve(i.Gu.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(i?.Gu)}`))},i=>this.metadata.reject(i))}close(){return this.Cc.cancel()}getMetadata(){var e=this;return(0,_e.Z)(function*(){return e.metadata.promise})()}bc(){var e=this;return(0,_e.Z)(function*(){return yield e.getMetadata(),e.Nc()})()}Nc(){var e=this;return(0,_e.Z)(function*(){const t=yield e.kc();if(null===t)return null;const i=e.xc.decode(t),a=Number(i);isNaN(a)&&e.Mc(`length string (${i}) is not valid number`);const c=yield e.$c(a);return new rS(JSON.parse(c),t.length+a)})()}Oc(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}kc(){var e=this;return(0,_e.Z)(function*(){for(;e.Oc()<0&&!(yield e.Fc()););if(0===e.buffer.length)return null;const t=e.Oc();t<0&&e.Mc("Reached the end of bundle when a length string is expected.");const i=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),i})()}$c(e){var t=this;return(0,_e.Z)(function*(){for(;t.buffer.length<e;)(yield t.Fc())&&t.Mc("Reached the end of bundle when more is expected.");const i=t.xc.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),i})()}Mc(e){throw this.Cc.cancel(),new Error(`Invalid bundle format: ${e}`)}Fc(){var e=this;return(0,_e.Z)(function*(){const t=yield e.Cc.read();if(!t.done){const i=new Uint8Array(e.buffer.length+t.value.length);i.set(e.buffer),i.set(t.value,e.buffer.length),e.buffer=i}return t.done})()}}class dS{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,_e.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new Se(se.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const i=yield(a=(0,_e.Z)(function*(c,d){const _=Qe(c),D=Zh(_.serializer)+"/documents",b={documents:d.map(ee=>Wh(_.serializer,ee))},M=yield _.vo("BatchGetDocuments",D,b,d.length),O=new Map;M.forEach(ee=>{const De=function oD(n,e){return"found"in e?function(t,i){ct(!!i.found);const a=Po(t,i.found.name),c=Un(i.found.updateTime),d=i.found.createTime?Un(i.found.createTime):ht.min(),_=new Ur({mapValue:{fields:i.found.fields}});return Vn.newFoundDocument(a,c,d,_)}(n,e):"missing"in e?function(t,i){ct(!!i.missing),ct(!!i.readTime);const a=Po(t,i.missing),c=Un(i.readTime);return Vn.newNoDocument(a,c)}(n,e):rt()}(_.serializer,ee);O.set(De.key.toString(),De)});const z=[];return d.forEach(ee=>{const De=O.get(ee.toString());ct(!!De),z.push(De)}),z}),function(c,d){return a.apply(this,arguments)})(t.datastore,e);var a;return i.forEach(a=>t.recordVersion(a)),i})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(i){this.lastWriteError=i}this.writtenDocs.add(e.toString())}delete(e){this.write(new sd(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,_e.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var i;e.mutations.forEach(i=>{t.delete(i.key.toString())}),t.forEach((i,a)=>{const c=Ke.fromPath(a);e.mutations.push(new b0(c,e.precondition(c)))}),yield(i=(0,_e.Z)(function*(a,c){const d=Qe(a),_=Zh(d.serializer)+"/documents",D={writes:c.map(b=>Kh(d.serializer,b))};yield d.Io("Commit",_,D)}),function(a,c){return i.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw rt();t=ht.min()}const i=this.readVersions.get(e.key.toString());if(i){if(!t.isEqual(i))throw new Se(se.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(ht.min())?Bn.exists(!1):Bn.updateTime(t):Bn.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(ht.min()))throw new Se(se.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Bn.updateTime(t)}return Bn.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class hS{constructor(e,t,i,a,c){this.asyncQueue=e,this.datastore=t,this.options=i,this.updateFunction=a,this.deferred=c,this.Bc=i.maxAttempts,this.qo=new yg(this.asyncQueue,"transaction_retry")}run(){this.Bc-=1,this.Lc()}Lc(){var e=this;this.qo.No((0,_e.Z)(function*(){const t=new dS(e.datastore),i=e.qc(t);i&&i.then(a=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(a)}).catch(c=>{e.Uc(c)}))}).catch(a=>{e.Uc(a)})}))}qc(e){try{const t=this.updateFunction(e);return!Rp(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Uc(e){this.Bc>0&&this.Kc(e)?(this.Bc-=1,this.asyncQueue.enqueueAndForget(()=>(this.Lc(),Promise.resolve()))):this.deferred.reject(e)}Kc(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!JE(t)}return!1}}class vC{constructor(e,t,i,a){var c=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=i,this.databaseInfo=a,this.user=Fr.UNAUTHENTICATED,this.clientId=es.A(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(i,function(){var d=(0,_e.Z)(function*(_){Pe("FirestoreClient","Received user=",_.uid),yield c.authCredentialListener(_),c.user=_});return function(_){return d.apply(this,arguments)}}()),this.appCheckCredentials.start(i,d=>(Pe("FirestoreClient","Received new app check token=",d),this.appCheckCredentialListener(d,this.user)))}getConfiguration(){var e=this;return(0,_e.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Se(se.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new Lr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,_e.Z)(function*(){try{e._onlineComponents&&(yield e._onlineComponents.terminate()),e._offlineComponents&&(yield e._offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(i){const a=hf(i,"Failed to shutdown persistence");t.reject(a)}})),t.promise}}function Tg(n,e){return Jw.apply(this,arguments)}function Jw(){return Jw=(0,_e.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),Pe("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let i=t.initialUser;n.setCredentialChangeListener(function(){var a=(0,_e.Z)(function*(c){i.isEqual(c)||(yield RD(e.localStore,c),i=c)});return function(c){return a.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e}),Jw.apply(this,arguments)}function s_(n,e){return o_.apply(this,arguments)}function o_(){return o_=(0,_e.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield Xw(n);Pe("FirestoreClient","Initializing OnlineComponentProvider");const i=yield n.getConfiguration();yield e.initialize(t,i),n.setCredentialChangeListener(a=>qy(e.remoteStore,a)),n.setAppCheckTokenChangeListener((a,c)=>qy(e.remoteStore,c)),n._onlineComponents=e}),o_.apply(this,arguments)}function wC(n){return"FirebaseError"===n.name?n.code===se.FAILED_PRECONDITION||n.code===se.UNIMPLEMENTED:!(typeof DOMException<"u"&&n instanceof DOMException)||22===n.code||20===n.code||11===n.code}function Xw(n){return a_.apply(this,arguments)}function a_(){return a_=(0,_e.Z)(function*(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){Pe("FirestoreClient","Using user provided OfflineComponentProvider");try{yield Tg(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!wC(t))throw t;bi("Error using user provided cache. Falling back to memory cache: "+t),yield Tg(n,new Ia)}}else Pe("FirestoreClient","Using default OfflineComponentProvider"),yield Tg(n,new Ia);return n._offlineComponents}),a_.apply(this,arguments)}function u_(n){return c_.apply(this,arguments)}function c_(){return c_=(0,_e.Z)(function*(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(Pe("FirestoreClient","Using user provided OnlineComponentProvider"),yield s_(n,n._uninitializedComponentsProvider._online)):(Pe("FirestoreClient","Using default OnlineComponentProvider"),yield s_(n,new bg))),n._onlineComponents}),c_.apply(this,arguments)}function eI(n){return Xw(n).then(e=>e.persistence)}function Sg(n){return Xw(n).then(e=>e.localStore)}function tI(n){return u_(n).then(e=>e.remoteStore)}function nI(n){return u_(n).then(e=>e.syncEngine)}function Ag(n){return l_.apply(this,arguments)}function l_(){return l_=(0,_e.Z)(function*(n){const e=yield u_(n),t=e.eventManager;return t.onListen=sS.bind(null,e.syncEngine),t.onUnlisten=kw.bind(null,e.syncEngine),t}),l_.apply(this,arguments)}function fS(n,e,t={}){const i=new Lr;return n.asyncQueue.enqueueAndForget((0,_e.Z)(function*(){return function(a,c,d,_,D){const b=new Qw({next:O=>{c.enqueueAndForget(()=>Ow(a,M));const z=O.docs.has(d);!z&&O.fromCache?D.reject(new Se(se.UNAVAILABLE,"Failed to get document because the client is offline.")):z&&O.fromCache&&_&&"server"===_.source?D.reject(new Se(se.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):D.resolve(O)},error:O=>D.reject(O)}),M=new gf(ed(d.path),b,{includeMetadataChanges:!0,Ku:!0});return pf(a,M)}(yield Ag(n),n.asyncQueue,e,t,i)})),i.promise}function pS(n,e,t={}){const i=new Lr;return n.asyncQueue.enqueueAndForget((0,_e.Z)(function*(){return function(a,c,d,_,D){const b=new Qw({next:O=>{c.enqueueAndForget(()=>Ow(a,M)),O.fromCache&&"server"===_.source?D.reject(new Se(se.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):D.resolve(O)},error:O=>D.reject(O)}),M=new gf(d,b,{includeMetadataChanges:!0,Ku:!0});return pf(a,M)}(yield Ag(n),n.asyncQueue,e,t,i)})),i.promise}function d_(n){const e={};return void 0!==n.timeoutSeconds&&(e.timeoutSeconds=n.timeoutSeconds),e}const EC=new Map;function rI(n,e,t){if(!t)throw new Se(se.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function Mg(n,e,t,i){if(!0===e&&!0===i)throw new Se(se.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function DC(n){if(!Ke.isDocumentKey(n))throw new Se(se.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function mS(n){if(Ke.isDocumentKey(n))throw new Se(se.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function iI(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(t=n).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof n?"a function":rt()}function Zt(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Se(se.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=iI(n);throw new Se(se.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function CC(n,e){if(e<=0)throw new Se(se.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}class bC{constructor(e){var t,i;if(void 0===e.host){if(void 0!==e.ssl)throw new Se(se.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.cache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Se(se.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}Mg("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!(this.experimentalForceLongPolling||void 0!==e.experimentalAutoDetectLongPolling&&!e.experimentalAutoDetectLongPolling),this.experimentalLongPollingOptions=d_(null!==(i=e.experimentalLongPollingOptions)&&void 0!==i?i:{}),function(a){if(void 0!==a.timeoutSeconds){if(isNaN(a.timeoutSeconds))throw new Se(se.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (must not be NaN)`);if(a.timeoutSeconds<5)throw new Se(se.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (minimum allowed value is 5)`);if(a.timeoutSeconds>30)throw new Se(se.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.experimentalLongPollingOptions.timeoutSeconds===e.experimentalLongPollingOptions.timeoutSeconds&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class h_{constructor(e,t,i,a){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=i,this._app=a,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new bC({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new Se(se.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Se(se.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new bC(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new vE;switch(t.type){case"firstParty":return new Hb(t.sessionIndex||"0",t.iamToken||null,t.authTokenFactory||null);case"provider":return t.client;default:throw new Se(se.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=EC.get(e);t&&(Pe("ComponentProvider","Removing Datastore"),EC.delete(e),t.terminate())}(this),Promise.resolve()}}class jn{constructor(e,t,i){this.converter=t,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new as(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new jn(this.firestore,e,this._key)}}class mi{constructor(e,t,i){this.converter=t,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new mi(this.firestore,e,this._query)}}class as extends mi{constructor(e,t,i){super(e,t,ed(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new jn(this.firestore,null,new Ke(e))}withConverter(e){return new as(this.firestore,e,this._path)}}function xg(n,e,...t){if(n=(0,en.m9)(n),rI("collection","path",e),n instanceof h_){const i=Jt.fromString(e,...t);return mS(i),new as(n,null,i)}{if(!(n instanceof jn||n instanceof as))throw new Se(se.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(Jt.fromString(e,...t));return mS(i),new as(n.firestore,null,i)}}function f_(n,e,...t){if(n=(0,en.m9)(n),1===arguments.length&&(e=es.A()),rI("doc","path",e),n instanceof h_){const i=Jt.fromString(e,...t);return DC(i),new jn(n,null,new Ke(i))}{if(!(n instanceof jn||n instanceof as))throw new Se(se.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(Jt.fromString(e,...t));return DC(i),new jn(n.firestore,n instanceof as?n.converter:null,new Ke(i))}}function SC(n,e){return n=(0,en.m9)(n),e=(0,en.m9)(e),(n instanceof jn||n instanceof as)&&(e instanceof jn||e instanceof as)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function sI(n,e){return n=(0,en.m9)(n),e=(0,en.m9)(e),n instanceof mi&&e instanceof mi&&n.firestore===e.firestore&&Pc(n._query,e._query)&&n.converter===e.converter}class _S{constructor(){this.Gc=Promise.resolve(),this.Qc=[],this.jc=!1,this.zc=[],this.Wc=null,this.Hc=!1,this.Jc=!1,this.Yc=[],this.qo=new yg(this,"async_queue_retry"),this.Xc=()=>{const t=Uy();t&&Pe("AsyncQueue","Visibility state changed to "+t.visibilityState),this.qo.Mo()};const e=Uy();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Xc)}get isShuttingDown(){return this.jc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Zc(),this.ta(e)}enterRestrictedMode(e){if(!this.jc){this.jc=!0,this.Jc=e||!1;const t=Uy();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Xc)}}enqueue(e){if(this.Zc(),this.jc)return new Promise(()=>{});const t=new Lr;return this.ta(()=>this.jc&&this.Jc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Qc.push(e),this.ea()))}ea(){var e=this;return(0,_e.Z)(function*(){if(0!==e.Qc.length){try{yield e.Qc[0](),e.Qc.shift(),e.qo.reset()}catch(t){if(!Du(t))throw t;Pe("AsyncQueue","Operation failed with retryable error: "+t)}e.Qc.length>0&&e.qo.No(()=>e.ea())}})()}ta(e){const t=this.Gc.then(()=>(this.Hc=!0,e().catch(i=>{throw this.Wc=i,this.Hc=!1,qn("INTERNAL UNHANDLED ERROR: ",function(c){let d=c.message||"";return c.stack&&(d=c.stack.includes(c.message)?c.stack:c.message+"\n"+c.stack),d}(i)),i}).then(i=>(this.Hc=!1,i))));return this.Gc=t,t}enqueueAfterDelay(e,t,i){this.Zc(),this.Yc.indexOf(e)>-1&&(t=0);const a=xw.createAndSchedule(this,e,t,i,c=>this.na(c));return this.zc.push(a),a}Zc(){this.Wc&&rt()}verifyOperationInProgress(){}sa(){var e=this;return(0,_e.Z)(function*(){let t;do{t=e.Gc,yield t}while(t!==e.Gc)})()}ia(e){for(const t of this.zc)if(t.timerId===e)return!0;return!1}ra(e){return this.sa().then(()=>{this.zc.sort((t,i)=>t.targetTimeMs-i.targetTimeMs);for(const t of this.zc)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.sa()})}oa(e){this.Yc.push(e)}na(e){const t=this.zc.indexOf(e);this.zc.splice(t,1)}}function oI(n){return function(e,t){if("object"!=typeof e||null===e)return!1;const i=e;for(const a of["next","error","complete"])if(a in i&&"function"==typeof i[a])return!0;return!1}(n)}class aI{constructor(){this._progressObserver={},this._taskCompletionResolver=new Lr,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,i){this._progressObserver={next:e,error:t,complete:i}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class On extends h_{constructor(e,t,i,a){super(e,t,i,a),this.type="firestore",this._queue=new _S,this._persistenceKey=a?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||AC(this),this._firestoreClient.terminate()}}function wr(n){return n._firestoreClient||AC(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function AC(n){var e,t,i;const a=n._freezeSettings(),c=(_=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new Vp(n._databaseId,_,n._persistenceKey,(b=a).host,b.ssl,b.experimentalForceLongPolling,b.experimentalAutoDetectLongPolling,d_(b.experimentalLongPollingOptions),b.useFetchStreams));var _,b;n._firestoreClient=new vC(n._authCredentials,n._appCheckCredentials,n._queue,c),null!==(t=a.cache)&&void 0!==t&&t._offlineComponentProvider&&null!==(i=a.cache)&&void 0!==i&&i._onlineComponentProvider&&(n._firestoreClient._uninitializedComponentsProvider={_offlineKind:a.cache.kind,_offline:a.cache._offlineComponentProvider,_online:a.cache._onlineComponentProvider})}function MC(n,e,t){const i=new Lr;return n.asyncQueue.enqueue((0,_e.Z)(function*(){try{yield Tg(n,t),yield s_(n,e),i.resolve()}catch(a){const c=a;if(!wC(c))throw c;bi("Error enabling indexeddb cache. Falling back to memory cache: "+c),i.reject(c)}})).then(()=>i.promise)}function ji(n){if(n._initialized||n._terminated)throw new Se(se.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class Ea{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Ea(Vr.fromBase64String(e))}catch(t){throw new Se(se.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Ea(Vr.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class Da{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new Se(se.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Wn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Nu{constructor(e){this._methodName=e}}class ko{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Se(se.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Se(se.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Rt(this._lat,e._lat)||Rt(this._long,e._long)}}const PC=/^__.*__$/;class cI{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return null!==this.fieldMask?new Su(e,this.data,this.fieldMask,t,this.fieldTransforms):new zh(e,this.data,t,this.fieldTransforms)}}class lI{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return new Su(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function RC(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw rt()}}class dI{constructor(e,t,i,a,c,d){this.settings=e,this.databaseId=t,this.serializer=i,this.ignoreUndefinedProperties=a,void 0===c&&this.ua(),this.fieldTransforms=c||[],this.fieldMask=d||[]}get path(){return this.settings.path}get ca(){return this.settings.ca}aa(e){return new dI(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ha(e){var t;const i=null===(t=this.path)||void 0===t?void 0:t.child(e),a=this.aa({path:i,la:!1});return a.fa(e),a}da(e){var t;const i=null===(t=this.path)||void 0===t?void 0:t.child(e),a=this.aa({path:i,la:!1});return a.ua(),a}wa(e){return this.aa({path:void 0,la:!0})}_a(e){return Pg(e,this.settings.methodName,this.settings.ma||!1,this.path,this.settings.ga)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}ua(){if(this.path)for(let e=0;e<this.path.length;e++)this.fa(this.path.get(e))}fa(e){if(0===e.length)throw this._a("Document fields must not be empty");if(RC(this.ca)&&PC.test(e))throw this._a('Document fields cannot begin and end with "__"')}}class kC{constructor(e,t,i){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=i||mg(e)}ya(e,t,i,a=!1){return new dI({ca:e,methodName:t,ga:i,path:Wn.emptyPath(),la:!1,ma:a},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function gd(n){const e=n._freezeSettings(),t=mg(n._databaseId);return new kC(n._databaseId,!!e.ignoreUndefinedProperties,t)}function hI(n,e,t,i,a,c={}){const d=n.ya(c.merge||c.mergeFields?2:0,e,t,a);y_("Data must be an object, but it was:",d,i);const _=fI(i,d);let D,b;if(c.merge)D=new ns(d.fieldMask),b=d.fieldTransforms;else if(c.mergeFields){const M=[];for(const O of c.mergeFields){const z=vf(e,O,t);if(!d.contains(z))throw new Se(se.INVALID_ARGUMENT,`Field '${z}' is specified in your field mask but missing from your input data.`);pI(M,z)||M.push(z)}D=new ns(M),b=d.fieldTransforms.filter(O=>D.covers(O.field))}else D=null,b=d.fieldTransforms;return new cI(new Ur(_),D,b)}class Ng extends Nu{_toFieldTransform(e){if(2!==e.ca)throw e._a(1===e.ca?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Ng}}function FC(n,e,t){return new dI({ca:3,ga:e.settings.ga,methodName:n._methodName,la:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class p_ extends Nu{_toFieldTransform(e){return new Fc(e.path,new nd)}isEqual(e){return e instanceof p_}}class QA extends Nu{constructor(e,t){super(e),this.pa=t}_toFieldTransform(e){const t=FC(this,e,!0),i=this.pa.map(c=>zc(c,t)),a=new Rc(i);return new Fc(e.path,a)}isEqual(e){return this===e}}class LC extends Nu{constructor(e,t){super(e),this.pa=t}_toFieldTransform(e){const t=FC(this,e,!0),i=this.pa.map(c=>zc(c,t)),a=new kc(i);return new Fc(e.path,a)}isEqual(e){return this===e}}class bS extends Nu{constructor(e,t){super(e),this.Ia=t}_toFieldTransform(e){const t=new rd(e.serializer,ZE(e.serializer,this.Ia));return new Fc(e.path,t)}isEqual(e){return this===e}}function g_(n,e,t,i){const a=n.ya(1,e,t);y_("Data must be an object, but it was:",a,i);const c=[],d=Ur.empty();xc(i,(D,b)=>{const M=md(e,D,t);b=(0,en.m9)(b);const O=a.da(M);if(b instanceof Ng)c.push(M);else{const z=zc(b,O);null!=z&&(c.push(M),d.set(M,z))}});const _=new ns(c);return new lI(d,_,a.fieldTransforms)}function VC(n,e,t,i,a,c){const d=n.ya(1,e,t),_=[vf(e,i,t)],D=[a];if(c.length%2!=0)throw new Se(se.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let z=0;z<c.length;z+=2)_.push(vf(e,c[z])),D.push(c[z+1]);const b=[],M=Ur.empty();for(let z=_.length-1;z>=0;--z)if(!pI(b,_[z])){const ee=_[z];let De=D[z];De=(0,en.m9)(De);const Be=d.da(ee);if(De instanceof Ng)b.push(ee);else{const je=zc(De,Be);null!=je&&(b.push(ee),M.set(ee,je))}}const O=new ns(b);return new lI(M,O,d.fieldTransforms)}function m_(n,e,t,i=!1){return zc(t,n.ya(i?4:3,e))}function zc(n,e){if(BC(n=(0,en.m9)(n)))return y_("Unsupported field value:",e,n),fI(n,e);if(n instanceof Nu)return function(t,i){if(!RC(i.ca))throw i._a(`${t._methodName}() can only be used with update() and set()`);if(!i.path)throw i._a(`${t._methodName}() is not currently supported inside arrays`);const a=t._toFieldTransform(i);a&&i.fieldTransforms.push(a)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.la&&4!==e.ca)throw e._a("Nested arrays are not supported");return function(t,i){const a=[];let c=0;for(const d of t){let _=zc(d,i.wa(c));null==_&&(_={nullValue:"NULL_VALUE"}),a.push(_),c++}return{arrayValue:{values:a}}}(n,e)}return function(t,i){if(null===(t=(0,en.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return ZE(i.serializer,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const a=bn.fromDate(t);return{timestampValue:qh(i.serializer,a)}}if(t instanceof bn){const a=new bn(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:qh(i.serializer,a)}}if(t instanceof ko)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof Ea)return{bytesValue:k0(i.serializer,t._byteString)};if(t instanceof jn){const a=i.databaseId,c=t.firestore._databaseId;if(!c.isEqual(a))throw i._a(`Document reference is for database ${c.projectId}/${c.database} but should be for database ${a.projectId}/${a.database}`);return{referenceValue:F0(t.firestore._databaseId||i.databaseId,t._key.path)}}throw i._a(`Unsupported field value: ${iI(t)}`)}(n,e)}function fI(n,e){const t={};return OE(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):xc(n,(i,a)=>{const c=zc(a,e.ha(i));null!=c&&(t[i]=c)}),{mapValue:{fields:t}}}function BC(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof bn||n instanceof ko||n instanceof Ea||n instanceof jn||n instanceof Nu)}function y_(n,e,t){if(!BC(t)||"object"!=typeof(i=t)||null===i||Object.getPrototypeOf(i)!==Object.prototype&&null!==Object.getPrototypeOf(i)){const i=iI(t);throw e._a("an object"===i?n+" a custom object":n+" "+i)}var i}function vf(n,e,t){if((e=(0,en.m9)(e))instanceof Da)return e._internalPath;if("string"==typeof e)return md(n,e);throw Pg("Field path arguments must be of type string or ",n,!1,void 0,t)}const Og=new RegExp("[~\\*/\\[\\]]");function md(n,e,t){if(e.search(Og)>=0)throw Pg(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Da(...e.split("."))._internalPath}catch{throw Pg(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Pg(n,e,t,i,a){const c=i&&!i.isEmpty(),d=void 0!==a;let _=`Function ${e}() called with invalid data`;t&&(_+=" (via `toFirestore()`)"),_+=". ";let D="";return(c||d)&&(D+=" (found",c&&(D+=` in field ${i}`),d&&(D+=` in document ${a}`),D+=")"),new Se(se.INVALID_ARGUMENT,_+n+D)}function pI(n,e){return n.some(t=>t.isEqual(e))}class Rg{constructor(e,t,i,a,c){this._firestore=e,this._userDataWriter=t,this._key=i,this._document=a,this._converter=c}get id(){return this._key.path.lastSegment()}get ref(){return new jn(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new TS(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(gI("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class TS extends Rg{data(){return super.data()}}function gI(n,e){return"string"==typeof e?md(n,e):e instanceof Da?e._internalPath:e._delegate._internalPath}function mI(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new Se(se.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class yI{}class kg extends yI{}function yd(n,e,...t){let i=[];e instanceof yI&&i.push(e),i=i.concat(t),function(a){const c=a.filter(_=>_ instanceof _d).length,d=a.filter(_=>_ instanceof __).length;if(c>1||c>0&&d>0)throw new Se(se.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(i);for(const a of i)n=a._apply(n);return n}class __ extends kg{constructor(e,t,i){super(),this._field=e,this._op=t,this._value=i,this.type="where"}static _create(e,t,i){return new __(e,t,i)}_apply(e){const t=this._parse(e);return E_(e._query,t),new mi(e.firestore,e.converter,Gp(e._query,t))}_parse(e){const t=gd(e.firestore);return function(a,c,d,_,D,b,M){let O;if(D.isKeyField()){if("array-contains"===b||"array-contains-any"===b)throw new Se(se.INVALID_ARGUMENT,`Invalid Query. You can't perform '${b}' queries on documentId().`);if("in"===b||"not-in"===b){I_(M,b);const z=[];for(const ee of M)z.push(II(_,a,ee));O={arrayValue:{values:z}}}else O=II(_,a,M)}else"in"!==b&&"not-in"!==b&&"array-contains-any"!==b||I_(M,b),O=m_(d,"where",M,"in"===b||"not-in"===b);return Wt.create(D,b,O)}(e._query,0,t,e.firestore._databaseId,this._field,this._op,this._value)}}class _d extends yI{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new _d(e,t)}_parse(e){const t=this._queryConstraints.map(i=>i._parse(e)).filter(i=>i.getFilters().length>0);return 1===t.length?t[0]:ln.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(i,a){let c=i;const d=a.getFlattenedFilters();for(const _ of d)E_(c,_),c=Gp(c,_)}(e._query,t),new mi(e.firestore,e.converter,Gp(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class _I extends kg{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new _I(e,t)}_apply(e){const t=function(i,a,c){if(null!==i.startAt)throw new Se(se.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==i.endAt)throw new Se(se.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const d=new Up(a,c);return function(_,D){if(null===h0(_)){const b=_y(_);null!==b&&jC(0,b,D.field)}}(i,d),d}(e._query,this._field,this._direction);return new mi(e.firestore,e.converter,function(i,a){const c=i.explicitOrderBy.concat([a]);return new Tu(i.path,i.collectionGroup,c,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,t))}}class vI extends kg{constructor(e,t,i){super(),this.type=e,this._limit=t,this._limitType=i}static _create(e,t,i){return new vI(e,t,i)}_apply(e){return new mi(e.firestore,e.converter,vy(e._query,this._limit,this._limitType))}}class wI extends kg{constructor(e,t,i){super(),this.type=e,this._docOrFields=t,this._inclusive=i}static _create(e,t,i){return new wI(e,t,i)}_apply(e){const t=qc(e,this.type,this._docOrFields,this._inclusive);return new mi(e.firestore,e.converter,(a=t,new Tu((i=e._query).path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,a,i.endAt)));var i,a}}class w_ extends kg{constructor(e,t,i){super(),this.type=e,this._docOrFields=t,this._inclusive=i}static _create(e,t,i){return new w_(e,t,i)}_apply(e){const t=qc(e,this.type,this._docOrFields,this._inclusive);return new mi(e.firestore,e.converter,(a=t,new Tu((i=e._query).path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,i.startAt,a)));var i,a}}function qc(n,e,t,i){if(t[0]=(0,en.m9)(t[0]),t[0]instanceof Rg)return function(a,c,d,_,D){if(!_)throw new Se(se.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${d}().`);const b=[];for(const M of td(a))if(M.field.isKeyField())b.push(zs(c,_.key));else{const O=_.data.field(M.field);if(Fh(O))throw new Se(se.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+M.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===O){const z=M.field.canonicalString();throw new Se(se.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${z}' (used as the orderBy) does not exist.`)}b.push(O)}return new Ql(b,D)}(n._query,n.firestore._databaseId,e,t[0]._document,i);{const a=gd(n.firestore);return function(c,d,_,D,b,M){const O=c.explicitOrderBy;if(b.length>O.length)throw new Se(se.INVALID_ARGUMENT,`Too many arguments provided to ${D}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const z=[];for(let ee=0;ee<b.length;ee++){const De=b[ee];if(O[ee].field.isKeyField()){if("string"!=typeof De)throw new Se(se.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${D}(), but got a ${typeof De}`);if(!f0(c)&&-1!==De.indexOf("/"))throw new Se(se.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${D}() must be a plain document ID, but '${De}' contains a slash.`);const Be=c.path.child(Jt.fromString(De));if(!Ke.isDocumentKey(Be))throw new Se(se.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${D}() must result in a valid document path, but '${Be}' is not because it contains an odd number of segments.`);const je=new Ke(Be);z.push(zs(d,je))}else{const Be=m_(_,D,De);z.push(Be)}}return new Ql(z,M)}(n._query,n.firestore._databaseId,a,e,t,i)}}function II(n,e,t){if("string"==typeof(t=(0,en.m9)(t))){if(""===t)throw new Se(se.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!f0(e)&&-1!==t.indexOf("/"))throw new Se(se.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const i=e.path.child(Jt.fromString(t));if(!Ke.isDocumentKey(i))throw new Se(se.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return zs(n,new Ke(i))}if(t instanceof jn)return zs(n,t._key);throw new Se(se.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${iI(t)}.`)}function I_(n,e){if(!Array.isArray(n)||0===n.length)throw new Se(se.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function E_(n,e){if(e.isInequality()){const i=_y(n),a=e.field;if(null!==i&&!i.isEqual(a))throw new Se(se.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${i.toString()}' and '${a.toString()}'`);const c=h0(n);null!==c&&jC(0,a,c)}const t=function(i,a){for(const c of i)for(const d of c.getFlattenedFilters())if(a.indexOf(d.op)>=0)return d.op;return null}(n.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==t)throw new Se(se.INVALID_ARGUMENT,t===e.op?`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`:`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}function jC(n,e,t){if(!t.isEqual(e))throw new Se(se.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}class Fg{convertValue(e,t="none"){switch(Br(e)){case 0:return null;case 1:return e.booleanValue;case 2:return ir(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Cu(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw rt()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const i={};return xc(e,(a,c)=>{i[a]=this.convertValue(c,t)}),i}convertGeoPoint(e){return new ko(ir(e.latitude),ir(e.longitude))}convertArray(e,t){return(e.values||[]).map(i=>this.convertValue(i,t))}convertServerTimestamp(e,t){switch(t){case"previous":const i=fy(e);return null==i?null:this.convertValue(i,t);case"estimate":return this.convertTimestamp(rs(e));default:return null}}convertTimestamp(e){const t=Ao(e);return new bn(t.seconds,t.nanos)}convertDocumentKey(e,t){const i=Jt.fromString(e);ct(hD(i));const a=new Zn(i.get(1),i.get(3)),c=new Ke(i.popFirst(5));return a.isEqual(t)||qn(`Document ${c} contains a document reference within a different database (${a.projectId}/${a.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),c}}function vd(n,e,t){let i;return i=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,i}class iM extends Fg{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ea(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new jn(this.firestore,null,t)}}class wd{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Ou extends Rg{constructor(e,t,i,a,c,d){super(e,t,i,a,d),this._firestore=e,this._firestoreImpl=e,this.metadata=c}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new wf(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const i=this._document.data.field(gI("DocumentSnapshot.get",e));if(null!==i)return this._userDataWriter.convertValue(i,t.serverTimestamps)}}}class wf extends Ou{data(e={}){return super.data(e)}}class Pu{constructor(e,t,i,a){this._firestore=e,this._userDataWriter=t,this._snapshot=a,this.metadata=new wd(a.hasPendingWrites,a.fromCache),this.query=i}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(i=>{e.call(t,new wf(this._firestore,this._userDataWriter,i.key,i,new wd(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Se(se.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(i,a){if(i._snapshot.oldDocs.isEmpty()){let c=0;return i._snapshot.docChanges.map(d=>({type:"added",doc:new wf(i._firestore,i._userDataWriter,d.doc.key,d.doc,new wd(i._snapshot.mutatedKeys.has(d.doc.key),i._snapshot.fromCache),i.query.converter),oldIndex:-1,newIndex:c++}))}{let c=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(d=>a||3!==d.type).map(d=>{const _=new wf(i._firestore,i._userDataWriter,d.doc.key,d.doc,new wd(i._snapshot.mutatedKeys.has(d.doc.key),i._snapshot.fromCache),i.query.converter);let D=-1,b=-1;return 0!==d.type&&(D=c.indexOf(d.doc.key),c=c.delete(d.doc.key)),1!==d.type&&(c=c.add(d.doc),b=c.indexOf(d.doc.key)),{type:$C(d.type),doc:_,oldIndex:D,newIndex:b}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function $C(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return rt()}}function GC(n,e){return n instanceof Ou&&e instanceof Ou?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof Pu&&e instanceof Pu&&n._firestore===e._firestore&&sI(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}class Ru extends Fg{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ea(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new jn(this.firestore,null,t)}}function qC(n,e,t){n=Zt(n,jn);const i=Zt(n.firestore,On),a=vd(n.converter,e,t);return If(i,[hI(gd(i),"setDoc",n._key,a,null!==n.converter,t).toMutation(n._key,Bn.none())])}function NS(n,e,t,...i){n=Zt(n,jn);const a=Zt(n.firestore,On),c=gd(a);let d;return d="string"==typeof(e=(0,en.m9)(e))||e instanceof Da?VC(c,"updateDoc",n._key,e,t,i):g_(c,"updateDoc",n._key,e),If(a,[d.toMutation(n._key,Bn.exists(!0))])}function WC(n,...e){var t,i,a;n=(0,en.m9)(n);let c={includeMetadataChanges:!1},d=0;"object"!=typeof e[d]||oI(e[d])||(c=e[d],d++);const _={includeMetadataChanges:c.includeMetadataChanges};if(oI(e[d])){const O=e[d];e[d]=null===(t=O.next)||void 0===t?void 0:t.bind(O),e[d+1]=null===(i=O.error)||void 0===i?void 0:i.bind(O),e[d+2]=null===(a=O.complete)||void 0===a?void 0:a.bind(O)}let D,b,M;if(n instanceof jn)b=Zt(n.firestore,On),M=ed(n._key.path),D={next:O=>{e[d]&&e[d](C_(b,n,O))},error:e[d+1],complete:e[d+2]};else{const O=Zt(n,mi);b=Zt(O.firestore,On),M=O._query;const z=new Ru(b);D={next:ee=>{e[d]&&e[d](new Pu(b,z,O,ee))},error:e[d+1],complete:e[d+2]},mI(n._query)}return function(O,z,ee,De){const Be=new Qw(De),je=new gf(z,Be,ee);return O.asyncQueue.enqueueAndForget((0,_e.Z)(function*(){return pf(yield Ag(O),je)})),()=>{Be.Dc(),O.asyncQueue.enqueueAndForget((0,_e.Z)(function*(){return Ow(yield Ag(O),je)}))}}(wr(b),M,_,D)}function If(n,e){return function(t,i){const a=new Lr;return t.asyncQueue.enqueueAndForget((0,_e.Z)(function*(){return function oS(n,e,t){return Fw.apply(this,arguments)}(yield nI(t),i,a)})),a.promise}(wr(n),e)}function C_(n,e,t){const i=t.docs.get(e._key),a=new Ru(n);return new Ou(n,a,e._key,i,new wd(t.hasPendingWrites,t.fromCache),e.converter)}const QC={maxAttempts:5};class HS{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=gd(e)}set(e,t,i){this._verifyNotCommitted();const a=Wc(e,this._firestore),c=vd(a.converter,t,i),d=hI(this._dataReader,"WriteBatch.set",a._key,c,null!==a.converter,i);return this._mutations.push(d.toMutation(a._key,Bn.none())),this}update(e,t,i,...a){this._verifyNotCommitted();const c=Wc(e,this._firestore);let d;return d="string"==typeof(t=(0,en.m9)(t))||t instanceof Da?VC(this._dataReader,"WriteBatch.update",c._key,t,i,a):g_(this._dataReader,"WriteBatch.update",c._key,t),this._mutations.push(d.toMutation(c._key,Bn.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=Wc(e,this._firestore);return this._mutations=this._mutations.concat(new sd(t._key,Bn.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Se(se.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Wc(n,e){if((n=(0,en.m9)(n)).firestore!==e)throw new Se(se.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class dM extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=gd(e)}get(e){const t=Wc(e,this._firestore),i=new iM(this._firestore);return this._transaction.lookup([t._key]).then(a=>{if(!a||1!==a.length)return rt();const c=a[0];if(c.isFoundDocument())return new Rg(this._firestore,i,c.key,c,t.converter);if(c.isNoDocument())return new Rg(this._firestore,i,t._key,null,t.converter);throw rt()})}set(e,t,i){const a=Wc(e,this._firestore),c=vd(a.converter,t,i),d=hI(this._dataReader,"Transaction.set",a._key,c,null!==a.converter,i);return this._transaction.set(a._key,d),this}update(e,t,i,...a){const c=Wc(e,this._firestore);let d;return d="string"==typeof(t=(0,en.m9)(t))||t instanceof Da?VC(this._dataReader,"Transaction.update",c._key,t,i,a):g_(this._dataReader,"Transaction.update",c._key,t),this._transaction.update(c._key,d),this}delete(e){const t=Wc(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=Wc(e,this._firestore),i=new Ru(this._firestore);return super.get(e).then(a=>new Ou(this._firestore,i,t._key,a._document,new wd(!1,!1),t.converter))}}function JC(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new Se("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function ZS(){if(typeof Uint8Array>"u")throw new Se("unimplemented","Uint8Arrays are not available in this environment.")}function KS(){if(!function PE(){return typeof atob<"u"}())throw new Se("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(n,e=!0){To=da.SDK_VERSION,(0,da._registerComponent)(new gm.wA("firestore",(t,{instanceIdentifier:i,options:a})=>{const c=t.getProvider("app").getImmediate(),d=new On(new Ub(t.getProvider("auth-internal")),new wE(t.getProvider("app-check-internal")),function(_,D){if(!Object.prototype.hasOwnProperty.apply(_.options,["projectId"]))throw new Se(se.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Zn(_.options.projectId,D)}(c,i),c);return a=Object.assign({useFetchStreams:e},a),d._setSettings(a),d},"PUBLIC").setMultipleInstances(!0)),(0,da.registerVersion)(Uv,"3.13.0",n),(0,da.registerVersion)(Uv,"3.13.0","esm2017")}();class T_{constructor(e){this._delegate=e}static fromBase64String(e){return KS(),new T_(Ea.fromBase64String(e))}static fromUint8Array(e){return ZS(),new T_(Ea.fromUint8Array(e))}toBase64(){return KS(),this._delegate.toBase64()}toUint8Array(){return ZS(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function XC(n){return function mM(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const i of e)if(i in t&&"function"==typeof t[i])return!0;return!1}(n,["next","error","complete"])}class yM{enableIndexedDbPersistence(e,t){return function wS(n,e){ji(n=Zt(n,On));const t=wr(n);if(t._uninitializedComponentsProvider)throw new Se(se.FAILED_PRECONDITION,"SDK cache is already specified.");bi("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const i=n._freezeSettings(),a=new bg;return MC(t,a,new r_(a,i.cacheSizeBytes,e?.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function IS(n){ji(n=Zt(n,On));const e=wr(n);if(e._uninitializedComponentsProvider)throw new Se(se.FAILED_PRECONDITION,"SDK cache is already specified.");bi("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const t=n._freezeSettings(),i=new bg;return MC(e,i,new i_(i,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function xC(n){if(n._initialized&&!n._terminated)throw new Se(se.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Lr;return n._queue.enqueueAndForgetEvenWhileRestricted((0,_e.Z)(function*(){try{yield(t=(0,_e.Z)(function*(i){if(!$s.D())return Promise.resolve();const a=i+"main";yield $s.delete(a)}),function(i){return t.apply(this,arguments)})(Ry(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class r{constructor(e,t,i){this._delegate=t,this._persistenceProvider=i,this.INTERNAL={delete:()=>this.terminate()},e instanceof Zn||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&bi("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,i={}){!function TC(n,e,t,i={}){var a;const c=(n=Zt(n,h_))._getSettings(),d=`${e}:${t}`;if("firestore.googleapis.com"!==c.host&&c.host!==d&&bi("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),n._setSettings(Object.assign(Object.assign({},c),{host:d,ssl:!1})),i.mockUserToken){let _,D;if("string"==typeof i.mockUserToken)_=i.mockUserToken,D=Fr.MOCK_USER;else{_=(0,en.Sg)(i.mockUserToken,null===(a=n._app)||void 0===a?void 0:a.options.projectId);const b=i.mockUserToken.sub||i.mockUserToken.user_id;if(!b)throw new Se(se.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");D=new Fr(b)}n._authCredentials=new Bb(new _E(_,D))}}(this._delegate,e,t,i)}enableNetwork(){return function ES(n){return function UA(n){return n.asyncQueue.enqueue((0,_e.Z)(function*(){const e=yield eI(n),t=yield tI(n);return e.setNetworkEnabled(!0),function(i){const a=Qe(i);return a.vu.delete(0),df(a)}(t)}))}(wr(n=Zt(n,On)))}(this._delegate)}disableNetwork(){return function DS(n){return function jA(n){return n.asyncQueue.enqueue((0,_e.Z)(function*(){const e=yield eI(n),t=yield tI(n);return e.setNetworkEnabled(!1),(i=(0,_e.Z)(function*(a){const c=Qe(a);c.vu.add(0),yield hd(c),c.bu.set("Offline")}),function(a){return i.apply(this,arguments)})(t);var i}))}(wr(n=Zt(n,On)))}(this._delegate)}enablePersistence(e){let t=!1,i=!1;return e&&(t=!!e.synchronizeTabs,i=!!e.experimentalForceOwningTab,Mg("synchronizeTabs",t,"experimentalForceOwningTab",i)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,i)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function uI(n){return function(e){const t=new Lr;return e.asyncQueue.enqueueAndForget((0,_e.Z)(function*(){return function cC(n,e){return Jy.apply(this,arguments)}(yield nI(e),t)})),t.promise}(wr(n=Zt(n,On)))}(this._delegate)}onSnapshotsInSync(e){return function PS(n,e){return function GA(n,e){const t=new Qw(e);return n.asyncQueue.enqueueAndForget((0,_e.Z)(function*(){return i=yield Ag(n),a=t,Qe(i).ku.add(a),void a.next();var i,a})),()=>{t.Dc(),n.asyncQueue.enqueueAndForget((0,_e.Z)(function*(){return i=yield Ag(n),a=t,void Qe(i).ku.delete(a);var i,a}))}}(wr(n=Zt(n,On)),oI(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new Se("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new Re(this,xg(this._delegate,e))}catch(t){throw w(t,"collection()","Firestore.collection()")}}doc(e){try{return new m(this,f_(this._delegate,e))}catch(t){throw w(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new j(this,function yS(n,e){if(n=Zt(n,h_),rI("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Se(se.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new mi(n,null,(t=e,new Tu(Jt.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw w(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function $S(n,e,t){n=Zt(n,On);const i=Object.assign(Object.assign({},QC),t);return function(a){if(a.maxAttempts<1)throw new Se(se.INVALID_ARGUMENT,"Max attempts must be at least 1")}(i),function(a,c,d){const _=new Lr;return a.asyncQueue.enqueueAndForget((0,_e.Z)(function*(){const D=yield function IC(n){return u_(n).then(e=>e.datastore)}(a);new hS(a.asyncQueue,D,d,c,_).run()})),_.promise}(wr(n),a=>e(new dM(n,a)),i)}(this._delegate,t=>e(new u(this,t)))}batch(){return wr(this._delegate),new l(new HS(this._delegate,e=>If(this._delegate,e)))}loadBundle(e){return function NC(n,e){const t=wr(n=Zt(n,On)),i=new aI;return function zA(n,e,t,i){const a=function(c,d){let _;return _="string"==typeof c?yT().encode(c):c,D=function(D,b){if(D instanceof Uint8Array)return _C(D,b);if(D instanceof ArrayBuffer)return _C(new Uint8Array(D),b);if(D instanceof ReadableStream)return D.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(_),new lS(D,d);var D}(t,mg(e));n.asyncQueue.enqueueAndForget((0,_e.Z)(function*(){!function yC(n,e,t){const i=Qe(n);var a;(a=(0,_e.Z)(function*(c,d,_){try{const D=yield d.getMetadata();if(yield function(z,ee){const De=Qe(z),Be=Un(ee.createTime);return De.persistence.runTransaction("hasNewerBundle","readonly",je=>De.qs.getBundleMetadata(je,ee.id)).then(je=>!!je&&je.createTime.compareTo(Be)>=0)}(c.localStore,D))return yield d.close(),_._completeWith({taskState:"Success",documentsLoaded:(z=D).totalDocuments,bytesLoaded:z.totalBytes,totalDocuments:z.totalDocuments,totalBytes:z.totalBytes}),Promise.resolve(new Set);_._updateProgress(Pw(D));const b=new nC(D,c.localStore,d.serializer);let M=yield d.bc();for(;M;){const z=yield b.zu(M);z&&_._updateProgress(z),M=yield d.bc()}const O=yield b.complete();return yield Gc(c,O.Ju,void 0),yield function(z,ee){const De=Qe(z);return De.persistence.runTransaction("Save bundle","readwrite",Be=>De.qs.saveBundleMetadata(Be,ee))}(c.localStore,D),_._completeWith(O.progress),Promise.resolve(O.Hu)}catch(D){return bi("SyncEngine",`Loading bundle failed with ${D}`),_._failWith(D),Promise.resolve(new Set)}var z}),function(c,d,_){return a.apply(this,arguments)})(i,e,t).then(a=>{i.sharedClientState.notifyBundleLoaded(a)})}(yield nI(n),a,i)}))}(t,n._databaseId,e,i),i}(this._delegate,e)}namedQuery(e){return function KA(n,e){return function qA(n,e){return n.asyncQueue.enqueue((0,_e.Z)(function*(){return function(t,i){const a=Qe(t);return a.persistence.runTransaction("Get named query","readonly",c=>a.qs.getNamedQuery(c,i))}(yield Sg(n),e)}))}(wr(n=Zt(n,On)),e).then(t=>t?new mi(n,null,t.query):null)}(this._delegate,e).then(t=>t?new j(this,t):null)}}class s extends Fg{constructor(e){super(),this.firestore=e}convertBytes(e){return new T_(new Ea(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return m.forKey(t,this.firestore,null)}}class u{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new s(e)}get(e){const t=ze(e);return this._delegate.get(t).then(i=>new x(this._firestore,new Ou(this._firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,t.converter)))}set(e,t,i){const a=ze(e);return i?(JC("Transaction.set",i),this._delegate.set(a,t,i)):this._delegate.set(a,t),this}update(e,t,i,...a){const c=ze(e);return 2===arguments.length?this._delegate.update(c,t):this._delegate.update(c,t,i,...a),this}delete(e){const t=ze(e);return this._delegate.delete(t),this}}class l{constructor(e){this._delegate=e}set(e,t,i){const a=ze(e);return i?(JC("WriteBatch.set",i),this._delegate.set(a,t,i)):this._delegate.set(a,t),this}update(e,t,i,...a){const c=ze(e);return 2===arguments.length?this._delegate.update(c,t):this._delegate.update(c,t,i,...a),this}delete(e){const t=ze(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class f{constructor(e,t,i){this._firestore=e,this._userDataWriter=t,this._delegate=i}fromFirestore(e,t){const i=new wf(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new F(this._firestore,i),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const i=f.INSTANCES;let a=i.get(e);a||(a=new WeakMap,i.set(e,a));let c=a.get(t);return c||(c=new f(e,new s(e),t),a.set(t,c)),c}}f.INSTANCES=new WeakMap;class m{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new s(e)}static forPath(e,t,i){if(e.length%2!=0)throw new Se("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new m(t,new jn(t._delegate,i,new Ke(e)))}static forKey(e,t,i){return new m(t,new jn(t._delegate,i,e))}get id(){return this._delegate.id}get parent(){return new Re(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new Re(this.firestore,xg(this._delegate,e))}catch(t){throw w(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,en.m9)(e))instanceof jn&&SC(this._delegate,e)}set(e,t){t=JC("DocumentReference.set",t);try{return t?qC(this._delegate,e,t):qC(this._delegate,e)}catch(i){throw w(i,"setDoc()","DocumentReference.set()")}}update(e,t,...i){try{return 1===arguments.length?NS(this._delegate,e):NS(this._delegate,e,t,...i)}catch(a){throw w(a,"updateDoc()","DocumentReference.update()")}}delete(){return function uM(n){return If(Zt(n.firestore,On),[new sd(n._key,Bn.none())])}(this._delegate)}onSnapshot(...e){const t=E(e),i=S(e,a=>new x(this.firestore,new Ou(this.firestore._delegate,this._userDataWriter,a._key,a._document,a.metadata,this._delegate.converter)));return WC(this._delegate,t,i)}get(e){let t;return t="cache"===e?.source?function EI(n){n=Zt(n,jn);const e=Zt(n.firestore,On),t=wr(e),i=new Ru(e);return function HA(n,e){const t=new Lr;return n.asyncQueue.enqueueAndForget((0,_e.Z)(function*(){return(i=(0,_e.Z)(function*(a,c,d){try{const _=yield function(D,b){const M=Qe(D);return M.persistence.runTransaction("read document","readonly",O=>M.localDocuments.getDocument(O,b))}(a,c);_.isFoundDocument()?d.resolve(_):_.isNoDocument()?d.resolve(null):d.reject(new Se(se.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(_){const D=hf(_,`Failed to get document '${c} from cache`);d.reject(D)}}),function(a,c,d){return i.apply(this,arguments)})(yield Sg(n),e,t);var i})),t.promise}(t,n._key).then(a=>new Ou(e,i,n._key,a,new wd(null!==a&&a.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===e?.source?function aM(n){n=Zt(n,jn);const e=Zt(n.firestore,On);return fS(wr(e),n._key,{source:"server"}).then(t=>C_(e,n,t))}(this._delegate):function MS(n){n=Zt(n,jn);const e=Zt(n.firestore,On);return fS(wr(e),n._key).then(t=>C_(e,n,t))}(this._delegate),t.then(i=>new x(this.firestore,new Ou(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)))}withConverter(e){return new m(this.firestore,this._delegate.withConverter(e?f.getInstance(this.firestore,e):null))}}function w(n,e,t){return n.message=n.message.replace(e,t),n}function E(n){for(const e of n)if("object"==typeof e&&!XC(e))return e;return{}}function S(n,e){var t,i;let a;return a=XC(n[0])?n[0]:XC(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:c=>{a.next&&a.next(e(c))},error:null===(t=a.error)||void 0===t?void 0:t.bind(a),complete:null===(i=a.complete)||void 0===i?void 0:i.bind(a)}}class x{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new m(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return GC(this._delegate,e._delegate)}}class F extends x{data(e){const t=this._delegate.data(e);return function Hv(n,e){n||rt()}(void 0!==t),t}}class j{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new s(e)}where(e,t,i){try{return new j(this.firestore,yd(this._delegate,function JA(n,e,t){const i=e,a=gI("where",n);return __._create(a,i,t)}(e,t,i)))}catch(a){throw w(a,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new j(this.firestore,yd(this._delegate,function tM(n,e="asc"){const t=e,i=gI("orderBy",n);return _I._create(i,t)}(e,t)))}catch(i){throw w(i,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new j(this.firestore,yd(this._delegate,function nM(n){return CC("limit",n),vI._create("limit",n,"F")}(e)))}catch(t){throw w(t,"limit()","Query.limit()")}}limitToLast(e){try{return new j(this.firestore,yd(this._delegate,function rM(n){return CC("limitToLast",n),vI._create("limitToLast",n,"L")}(e)))}catch(t){throw w(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new j(this.firestore,yd(this._delegate,function SS(...n){return wI._create("startAt",n,!0)}(...e)))}catch(t){throw w(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new j(this.firestore,yd(this._delegate,function v_(...n){return wI._create("startAfter",n,!1)}(...e)))}catch(t){throw w(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new j(this.firestore,yd(this._delegate,function AS(...n){return w_._create("endBefore",n,!1)}(...e)))}catch(t){throw w(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new j(this.firestore,yd(this._delegate,function UC(...n){return w_._create("endAt",n,!0)}(...e)))}catch(t){throw w(t,"endAt()","Query.endAt()")}}isEqual(e){return sI(this._delegate,e._delegate)}get(e){let t;return t="cache"===e?.source?function DI(n){n=Zt(n,mi);const e=Zt(n.firestore,On),t=wr(e),i=new Ru(e);return function $A(n,e){const t=new Lr;return n.asyncQueue.enqueueAndForget((0,_e.Z)(function*(){return(i=(0,_e.Z)(function*(a,c,d){try{const _=yield hg(a,c,!0),D=new rC(c,_.ir),b=D.sc(_.documents),M=D.applyChanges(b,!1);d.resolve(M.snapshot)}catch(_){const D=hf(_,`Failed to execute query '${c} against cache`);d.reject(D)}}),function(a,c,d){return i.apply(this,arguments)})(yield Sg(n),e,t);var i})),t.promise}(t,n._query).then(a=>new Pu(e,i,n,a))}(this._delegate):"server"===e?.source?function xS(n){n=Zt(n,mi);const e=Zt(n.firestore,On),t=wr(e),i=new Ru(e);return pS(t,n._query,{source:"server"}).then(a=>new Pu(e,i,n,a))}(this._delegate):function zC(n){n=Zt(n,mi);const e=Zt(n.firestore,On),t=wr(e),i=new Ru(e);return mI(n._query),pS(t,n._query).then(a=>new Pu(e,i,n,a))}(this._delegate),t.then(i=>new de(this.firestore,new Pu(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)))}onSnapshot(...e){const t=E(e),i=S(e,a=>new de(this.firestore,new Pu(this.firestore._delegate,this._userDataWriter,this._delegate,a._snapshot)));return WC(this._delegate,t,i)}withConverter(e){return new j(this.firestore,this._delegate.withConverter(e?f.getInstance(this.firestore,e):null))}}class W{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new F(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class de{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new j(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new F(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new W(this._firestore,t))}forEach(e,t){this._delegate.forEach(i=>{e.call(t,new F(this._firestore,i))})}isEqual(e){return GC(this._delegate,e._delegate)}}class Re extends j{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new m(this.firestore,e):null}doc(e){try{return new m(this.firestore,void 0===e?f_(this._delegate):f_(this._delegate,e))}catch(t){throw w(t,"doc()","CollectionReference.doc()")}}add(e){return function OS(n,e){const t=Zt(n.firestore,On),i=f_(n),a=vd(n.converter,e);return If(t,[hI(gd(n.firestore),"addDoc",i._key,a,null!==n.converter,{}).toMutation(i._key,Bn.exists(!1))]).then(()=>i)}(this._delegate,e).then(t=>new m(this.firestore,t))}isEqual(e){return SC(this._delegate,e._delegate)}withConverter(e){return new Re(this.firestore,this._delegate.withConverter(e?f.getInstance(this.firestore,e):null))}}function ze(n){return Zt(n,jn)}class dt{constructor(...e){this._delegate=new Da(...e)}static documentId(){return new dt(Wn.keyField().canonicalString())}isEqual(e){return(e=(0,en.m9)(e))instanceof Da&&this._delegate._internalPath.isEqual(e._internalPath)}}class Ee{constructor(e){this._delegate=e}static serverTimestamp(){const e=function fM(){return new p_("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new Ee(e)}static delete(){const e=function hM(){return new Ng("deleteField")}();return e._methodName="FieldValue.delete",new Ee(e)}static arrayUnion(...e){const t=function GS(...n){return new QA("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new Ee(t)}static arrayRemove(...e){const t=function zS(...n){return new LC("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new Ee(t)}static increment(e){const t=function pM(n){return new bS("increment",n)}(e);return t._methodName="FieldValue.increment",new Ee(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const Ot={Firestore:r,GeoPoint:ko,Timestamp:bn,Blob:T_,Transaction:u,WriteBatch:l,DocumentReference:m,DocumentSnapshot:x,Query:j,QueryDocumentSnapshot:F,QuerySnapshot:de,CollectionReference:Re,FieldPath:dt,FieldValue:Ee,setLogLevel:function o(n){!function sy(n){Ac.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};!function dn(n){(function $t(n,e){n.INTERNAL.registerComponent(new gm.wA("firestore-compat",t=>{const i=t.getProvider("app-compat").getImmediate(),a=t.getProvider("firestore").getImmediate();return e(i,a)},"PUBLIC").setServiceProps(Object.assign({},Ot)))})(n,(e,t)=>new r(e,t,new yM)),n.registerVersion("@firebase/firestore-compat","0.3.12")}(db.Z);var Hi=k(8645),ku=k(3019),Fu=k(3093),Ca=k(4664),YS=k(4552);class QS extends Hi.x{constructor(e=1/0,t=1/0,i=YS.l){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=i,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:i,_infiniteTimeWindow:a,_timestampProvider:c,_windowTime:d}=this;t||(i.push(e),!a&&i.push(c.now()+d)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:i,_buffer:a}=this,c=a.slice();for(let d=0;d<c.length&&!e.closed;d+=i?1:2)e.next(c[d]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:i,_infiniteTimeWindow:a}=this,c=(a?1:2)*e;if(e<1/0&&c<i.length&&i.splice(0,i.length-c),!a){const d=t.now();let _=0;for(let D=1;D<i.length&&i[D]<=d;D+=2)_=D;_&&i.splice(0,_+1)}}}var hx=k(3020);function _M(n,e,t){let i,a=!1;return n&&"object"==typeof n?({bufferSize:i=1/0,windowTime:e=1/0,refCount:a=!1,scheduler:t}=n):i=n??1/0,(0,hx.B)({connector:()=>new QS(i,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:a})}const vM=(0,k(2306).d)(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});var px=k(6232);function yx(n=_x){return(0,lu.e)((e,t)=>{let i=!1;e.subscribe((0,Yt.x)(t,a=>{i=!0,t.next(a)},()=>i?t.complete():t.error(n())))})}function _x(){return new vM}var vx=k(2737);var Ix=k(4674);function wM(n,e){return(0,Ix.m)(e)?(0,Ca.w)(()=>n,e):(0,Ca.w)(()=>n)}var JS=k(5137);k(3182);const eA=new Map,EM={activated:!1,tokenObservers:[]},Tx={initialized:!1,enabled:!1};function Sr(n){return eA.get(n)||Object.assign({},EM)}function tb(){return Tx}const tA="https://content-firebaseappcheck.googleapis.com/v1",xx="exchangeDebugToken",DM={OFFSET_DURATION:3e5,RETRIAL_MIN_WAIT:3e4,RETRIAL_MAX_WAIT:96e4};class Ox{constructor(e,t,i,a,c){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=i,this.lowerBound=a,this.upperBound=c,this.pending=null,this.nextErrorWaitInterval=a,a>c)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return(0,_e.Z)(function*(){t.stop();try{t.pending=new en.BH,yield function Px(n){return new Promise(e=>{setTimeout(e,n)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new en.BH,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(i){t.retryPolicy(i)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const $i=new en.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function nA(n){if(!Sr(n).activated)throw $i.create("use-before-activation",{appName:n.name})}function ib(n,e){return iA.apply(this,arguments)}function iA(){return iA=(0,_e.Z)(function*({url:n,body:e},t){const i={"Content-Type":"application/json"},a=t.getImmediate({optional:!0});if(a){const O=yield a.getHeartbeatsHeader();O&&(i["X-Firebase-Client"]=O)}const c={method:"POST",body:JSON.stringify(e),headers:i};let d,_;try{d=yield fetch(n,c)}catch(O){throw $i.create("fetch-network-error",{originalErrorMessage:O?.message})}if(200!==d.status)throw $i.create("fetch-status-error",{httpStatus:d.status});try{_=yield d.json()}catch(O){throw $i.create("fetch-parse-error",{originalErrorMessage:O?.message})}const D=_.ttl.match(/^([\d.]+)(s)$/);if(!D||!D[2]||isNaN(Number(D[1])))throw $i.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${_.ttl}`});const b=1e3*Number(D[1]),M=Date.now();return{token:_.token,expireTimeMillis:M+b,issuedAtTimeMillis:M}}),iA.apply(this,arguments)}function CM(n,e){const{projectId:t,appId:i,apiKey:a}=n.options;return{url:`${tA}/projects/${t}/apps/${i}:${xx}?key=${a}`,body:{debug_token:e}}}const Lx="firebase-app-check-database",Vx=1,CI="firebase-app-check-store";let sb=null;function sA(){return sA=(0,_e.Z)(function*(n,e){const i=(yield function TM(){return sb||(sb=new Promise((n,e)=>{try{const t=indexedDB.open(Lx,Vx);t.onsuccess=i=>{n(i.target.result)},t.onerror=i=>{var a;e($i.create("storage-open",{originalErrorMessage:null===(a=i.target.error)||void 0===a?void 0:a.message}))},t.onupgradeneeded=i=>{0===i.oldVersion&&i.target.result.createObjectStore(CI,{keyPath:"compositeKey"})}}catch(t){e($i.create("storage-open",{originalErrorMessage:t?.message}))}}),sb)}()).transaction(CI,"readwrite"),c=i.objectStore(CI).put({compositeKey:n,value:e});return new Promise((d,_)=>{c.onsuccess=D=>{d()},i.onerror=D=>{var b;_($i.create("storage-set",{originalErrorMessage:null===(b=D.target.error)||void 0===b?void 0:b.message}))}})}),sA.apply(this,arguments)}const bI=new du.Yd("@firebase/app-check");function uA(n,e){return(0,en.hl)()?function Ux(n,e){return function SM(n,e){return sA.apply(this,arguments)}(function MM(n){return`${n.options.appId}-${n.name}`}(n),e)}(n,e).catch(t=>{bI.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function lA(){return tb().enabled}function dA(){return hA.apply(this,arguments)}function hA(){return hA=(0,_e.Z)(function*(){const n=tb();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")}),hA.apply(this,arguments)}const qx={error:"UNKNOWN_ERROR"};function Wx(n){return en.US.encodeString(JSON.stringify(n),!1)}function ob(n){return fA.apply(this,arguments)}function fA(){return fA=(0,_e.Z)(function*(n,e=!1){const t=n.app;nA(t);const i=Sr(t);let c,a=i.token;if(a&&!S_(a)&&(i.token=void 0,a=void 0),!a){const D=yield i.cachedTokenPromise;D&&(S_(D)?a=D:yield uA(t,void 0))}if(!e&&a&&S_(a))return{token:a.token};let _,d=!1;if(lA()){i.exchangeTokenPromise||(i.exchangeTokenPromise=ib(CM(t,yield dA()),n.heartbeatServiceProvider).finally(()=>{i.exchangeTokenPromise=void 0}),d=!0);const D=yield i.exchangeTokenPromise;return yield uA(t,D),i.token=D,{token:D.token}}try{i.exchangeTokenPromise||(i.exchangeTokenPromise=i.provider.getToken().finally(()=>{i.exchangeTokenPromise=void 0}),d=!0),a=yield Sr(t).exchangeTokenPromise}catch(D){"appCheck/throttled"===D.code?bI.warn(D.message):bI.error(D),c=D}return a?c?_=S_(a)?{token:a.token,internalError:c}:PM(c):(_={token:a.token},i.token=a,yield uA(t,a)):_=PM(c),d&&function OM(n,e){const t=Sr(n).tokenObservers;for(const i of t)try{"EXTERNAL"===i.type&&null!=e.error?i.error(e.error):i.next(e)}catch{}}(t,_),_}),fA.apply(this,arguments)}function pA(){return pA=(0,_e.Z)(function*(n){const e=n.app;nA(e);const{provider:t}=Sr(e);if(lA()){const i=yield dA(),{token:a}=yield ib(CM(e,i),n.heartbeatServiceProvider);return{token:a}}{const{token:i}=yield t.getToken();return{token:i}}}),pA.apply(this,arguments)}function mA(n,e){const t=Sr(n),i=t.tokenObservers.filter(a=>a.next!==e);0===i.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),t.tokenObservers=i}function NM(n){const{app:e}=n,t=Sr(e);let i=t.tokenRefresher;i||(i=function Zx(n){const{app:e}=n;return new Ox((0,_e.Z)(function*(){let i;if(i=Sr(e).token?yield ob(n,!0):yield ob(n),i.error)throw i.error;if(i.internalError)throw i.internalError}),()=>!0,()=>{const t=Sr(e);if(t.token){let i=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return i=Math.min(i,t.token.expireTimeMillis-3e5),Math.max(0,i-Date.now())}return 0},DM.RETRIAL_MIN_WAIT,DM.RETRIAL_MAX_WAIT)}(n),t.tokenRefresher=i),!i.isRunning()&&t.isTokenAutoRefreshEnabled&&i.start()}function S_(n){return n.expireTimeMillis-Date.now()>0}function PM(n){return{token:Wx(qx),error:n}}class Kx{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){const{tokenObservers:e}=Sr(this.app);for(const t of e)mA(this.app,t.next);return Promise.resolve()}}const jM="app-check-internal";!function cN(){(0,da._registerComponent)(new gm.wA("app-check",n=>function Yx(n,e){return new Kx(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(jM).initialize()})),(0,da._registerComponent)(new gm.wA(jM,n=>function Qx(n){return{getToken:e=>ob(n,e),getLimitedUseToken:()=>function xM(n){return pA.apply(this,arguments)}(n),addTokenListener:e=>function gA(n,e,t,i){const{app:a}=n,c=Sr(a);if(c.tokenObservers=[...c.tokenObservers,{next:t,error:i,type:e}],c.token&&S_(c.token)){const _=c.token;Promise.resolve().then(()=>{t({token:_.token}),NM(n)}).catch(()=>{})}c.cachedTokenPromise.then(()=>NM(n))}(n,"INTERNAL",e),removeTokenListener:e=>mA(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,da.registerVersion)("@firebase/app-check","0.8.0")}();class wA{constructor(){return(0,Rr.vb)("app-check")}}typeof window<"u"&&window;var pN=k(7142);const $M=new g.OlP("angularfire2.auth.use-emulator"),GM=new g.OlP("angularfire2.auth.settings"),zM=new g.OlP("angularfire2.auth.tenant-id"),qM=new g.OlP("angularfire2.auth.langugage-code"),WM=new g.OlP("angularfire2.auth.use-device-language"),ZM=new g.OlP("angularfire.auth.persistence"),KM=(n,e,t,i,a,c,d,_)=>(0,Bs.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const D=e.runOutsideAngular(()=>n.auth());if(t&&D.useEmulator(...t),i&&(D.tenantId=i),D.languageCode=a,c&&D.useDeviceLanguage(),d)for(const[b,M]of Object.entries(d))D.settings[b]=M;return _&&D.setPersistence(_),D},[t,i,a,c,d,_]);let YM=(()=>{class n{constructor(t,i,a,c,d,_,D,b,M,O,z,ee){const De=new Hi.x,Be=(0,cu.of)(void 0).pipe((0,Fu.Q)(d.outsideAngular),(0,Ca.w)(()=>c.runOutsideAngular(()=>Promise.resolve().then(k.bind(k,5967)))),(0,wn.U)(()=>(0,Bs.on)(t,c,i)),(0,wn.U)(je=>KM(je,c,_,b,M,O,D,z)),_M({bufferSize:1,refCount:!1}));if(ps(a))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=(0,cu.of)(null);else{Be.pipe(function wx(n,e){const t=arguments.length>=2;return i=>i.pipe(n?la((a,c)=>n(a,c,i)):vx.y,function gx(n){return n<=0?()=>px.E:(0,lu.e)((e,t)=>{let i=0;e.subscribe((0,Yt.x)(t,a=>{++i<=n&&(t.next(a),n<=i&&t.complete())}))})}(1),t?function mx(n){return(0,lu.e)((e,t)=>{let i=!1;e.subscribe((0,Yt.x)(t,a=>{i=!0,t.next(a)},()=>{i||t.next(n),t.complete()}))})}(e):yx(()=>new vM))}()).subscribe();const wt=Be.pipe((0,Ca.w)(Nt=>Nt.getRedirectResult().then(Ut=>Ut,()=>null)),Rr.iC,_M({bufferSize:1,refCount:!1})),At=Be.pipe((0,Ca.w)(Nt=>new Ga.y(Ut=>({unsubscribe:c.runOutsideAngular(()=>Nt.onAuthStateChanged(tn=>Ut.next(tn),tn=>Ut.error(tn),()=>Ut.complete()))})))),It=Be.pipe((0,Ca.w)(Nt=>new Ga.y(Ut=>({unsubscribe:c.runOutsideAngular(()=>Nt.onIdTokenChanged(tn=>Ut.next(tn),tn=>Ut.error(tn),()=>Ut.complete()))}))));this.authState=wt.pipe(wM(At),(0,JS.R)(d.outsideAngular),(0,Fu.Q)(d.insideAngular)),this.user=wt.pipe(wM(It),(0,JS.R)(d.outsideAngular),(0,Fu.Q)(d.insideAngular)),this.idToken=this.user.pipe((0,Ca.w)(Nt=>Nt?(0,Yr.D)(Nt.getIdToken()):(0,cu.of)(null))),this.idTokenResult=this.user.pipe((0,Ca.w)(Nt=>Nt?(0,Yr.D)(Nt.getIdTokenResult()):(0,cu.of)(null))),this.credential=(0,ku.T)(wt,De,this.authState.pipe(la(Nt=>!Nt))).pipe((0,wn.U)(Nt=>Nt?.user?Nt:null),(0,JS.R)(d.outsideAngular),(0,Fu.Q)(d.insideAngular))}return(0,Bs.pX)(this,Be,c,{spy:{apply:(je,wt,At)=>{(je.startsWith("signIn")||je.startsWith("createUser"))&&At.then(It=>De.next(It))}}})}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(Bs.Dh),g.LFG(Bs.xv,8),g.LFG(g.Lbi),g.LFG(g.R0b),g.LFG(Rr.HU),g.LFG($M,8),g.LFG(GM,8),g.LFG(zM,8),g.LFG(qM,8),g.LFG(WM,8),g.LFG(ZM,8),g.LFG(wA,8))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})();function QM(n,e){return function mN(n,e=sp.z){return new Ga.y(t=>{let i;return null!=e?e.schedule(()=>{i=n.onSnapshot({includeMetadataChanges:!0},t)}):i=n.onSnapshot({includeMetadataChanges:!0},t),()=>{i?.()}})}(n,e)}function EA(n,e){return QM(n,e).pipe((0,wn.U)(t=>({payload:t,type:"query"})))}function ub(n,e){return EA(n,e).pipe(up(void 0),Z_(),(0,wn.U)(([t,i])=>{const a=i.payload.docChanges(),c=a.map(d=>({type:d.type,payload:d}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(i.payload.metadata)&&i.payload.docs.forEach((d,_)=>{const D=a.find(M=>M.doc.ref.isEqual(d.ref)),b=t?.payload.docs.find(M=>M.ref.isEqual(d.ref));D&&JSON.stringify(D.doc.metadata)===JSON.stringify(d.metadata)||!D&&b&&JSON.stringify(b.metadata)===JSON.stringify(d.metadata)||c.push({type:"modified",payload:{oldIndex:_,newIndex:_,type:"modified",doc:d}})}),c}))}function JM(n,e,t){return ub(n,t).pipe(cp((i,a)=>function _N(n,e,t){return e.forEach(i=>{t.indexOf(i.type)>-1&&(n=function vN(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return DA(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return DA(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return DA(n,e.oldIndex,1)}return n}(n,i))}),n}(i,a.map(c=>c.payload),e),[]),(0,OI.x)(),(0,wn.U)(i=>i.map(a=>({type:a.type,payload:a}))))}function DA(n,e,t,...i){const a=n.slice();return a.splice(e,t,...i),a}function XM(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}class ex{constructor(e,t,i){this.ref=e,this.query=t,this.afs=i}stateChanges(e){let t=ub(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,wn.U)(i=>i.filter(a=>e.indexOf(a.type)>-1)))),t.pipe(up(void 0),Z_(),la(([i,a])=>a.length>0||!i),(0,wn.U)(([i,a])=>a),Rr.iC)}auditTrail(e){return this.stateChanges(e).pipe(cp((t,i)=>[...t,...i],[]))}snapshotChanges(e){const t=XM(e);return JM(this.query,t,this.afs.schedulers.outsideAngular).pipe(Rr.iC)}valueChanges(e={}){return EA(this.query,this.afs.schedulers.outsideAngular).pipe((0,wn.U)(t=>t.payload.docs.map(i=>e.idField?Object.assign(Object.assign({},i.data()),{[e.idField]:i.id}):i.data())),Rr.iC)}get(e){return(0,Yr.D)(this.query.get(e)).pipe(Rr.iC)}add(e){return this.ref.add(e)}doc(e){return new tx(this.ref.doc(e),this.afs)}}class tx{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const i=this.ref.collection(e),{ref:a,query:c}=ix(i,t);return new ex(a,c,this.afs)}snapshotChanges(){return function yN(n,e){return QM(n,e).pipe(up(void 0),Z_(),(0,wn.U)(([t,i])=>i.exists?t?.exists?{payload:i,type:"modified"}:{payload:i,type:"added"}:{payload:i,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(Rr.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,wn.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,Yr.D)(this.ref.get(e)).pipe(Rr.iC)}}class wN{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?ub(this.query,this.afs.schedulers.outsideAngular).pipe((0,wn.U)(t=>t.filter(i=>e.indexOf(i.type)>-1)),la(t=>t.length>0),Rr.iC):ub(this.query,this.afs.schedulers.outsideAngular).pipe(Rr.iC)}auditTrail(e){return this.stateChanges(e).pipe(cp((t,i)=>[...t,...i],[]))}snapshotChanges(e){const t=XM(e);return JM(this.query,t,this.afs.schedulers.outsideAngular).pipe(Rr.iC)}valueChanges(e={}){return EA(this.query,this.afs.schedulers.outsideAngular).pipe((0,wn.U)(i=>i.payload.docs.map(a=>e.idField?Object.assign({[e.idField]:a.id},a.data()):a.data())),Rr.iC)}get(e){return(0,Yr.D)(this.query.get(e)).pipe(Rr.iC)}}const nx=new g.OlP("angularfire2.enableFirestorePersistence"),rx=new g.OlP("angularfire2.firestore.persistenceSettings"),IN=new g.OlP("angularfire2.firestore.settings"),EN=new g.OlP("angularfire2.firestore.use-emulator");function ix(n,e=(t=>t)){return{query:e(n),ref:n}}let sx=(()=>{class n{constructor(t,i,a,c,d,_,D,b,M,O,z,ee,De,Be,je,wt,At){this.schedulers=D;const It=(0,Bs.on)(t,_,i),Nt=M;O&&KM(It,_,z,De,Be,je,ee,wt),[this.firestore,this.persistenceEnabled$]=(0,Bs.cc)(`${It.name}.firestore`,"AngularFirestore",It.name,()=>{const Ut=_.runOutsideAngular(()=>It.firestore());if(c&&Ut.settings(c),Nt&&Ut.useEmulator(...Nt),a&&!ps(d)){const tn=()=>{try{return(0,Yr.D)(Ut.enablePersistence(b||void 0).then(()=>!0,()=>!1))}catch(us){return typeof console<"u"&&console.warn(us),(0,cu.of)(!1)}};return[Ut,_.runOutsideAngular(tn)]}return[Ut,(0,cu.of)(!1)]},[c,Nt,a])}collection(t,i){let a;a="string"==typeof t?this.firestore.collection(t):t;const{ref:c,query:d}=ix(a,i),_=this.schedulers.ngZone.run(()=>c);return new ex(_,d,this)}collectionGroup(t,i){const a=i||(d=>d),c=this.firestore.collectionGroup(t);return new wN(a(c),this)}doc(t){let i;i="string"==typeof t?this.firestore.doc(t):t;const a=this.schedulers.ngZone.run(()=>i);return new tx(a,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(Bs.Dh),g.LFG(Bs.xv,8),g.LFG(nx,8),g.LFG(IN,8),g.LFG(g.Lbi),g.LFG(g.R0b),g.LFG(Rr.HU),g.LFG(rx,8),g.LFG(EN,8),g.LFG(YM,8),g.LFG($M,8),g.LFG(GM,8),g.LFG(zM,8),g.LFG(qM,8),g.LFG(WM,8),g.LFG(ZM,8),g.LFG(wA,8))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),DN=(()=>{class n{constructor(){pN.Z.registerVersion("angularfire",Rr.q4.full,"fst-compat")}static enablePersistence(t){return{ngModule:n,providers:[{provide:nx,useValue:!0},{provide:rx,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=g.oAB({type:n}),n.\u0275inj=g.cJS({providers:[sx]}),n})(),ox=(()=>{class n{constructor(t){this.afs=t,this.todosCollection=t.collection("todos"),this.todos=this.todosCollection.valueChanges({idField:"id"})}getTodos(){return this.todos}addTodo(t){this.todosCollection.add(t)}updateTodo(t,i){this.todosCollection.doc(t).update(i)}deleteTodo(t){this.todosCollection.doc(t).delete()}static#e=this.\u0275fac=function(i){return new(i||n)(g.LFG(sx))};static#t=this.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function CN(n,e){if(1&n){const t=g.EpF();g.TgZ(0,"div",1)(1,"div",2)(2,"div",3)(3,"h2",4),g._uU(4),g.qZA()(),g.TgZ(5,"div",5)(6,"input",6),g.NdJ("ngModelChange",function(a){g.CHM(t);const c=g.oxw();return g.KtG(c.itemLabel=a)}),g.qZA()(),g.TgZ(7,"div",7)(8,"button",8),g.NdJ("click",function(){g.CHM(t);const a=g.oxw();return g.KtG(a.save())}),g._uU(9,"Save"),g.qZA(),g.TgZ(10,"button",9),g.NdJ("click",function(){g.CHM(t);const a=g.oxw();return g.KtG(a.close())}),g._uU(11,"Cancel"),g.qZA()()()()}if(2&n){const t=g.oxw();g.xp6(4),g.hij("",t.modalOperation?"Create":"Update"," Item "),g.xp6(2),g.Q6J("ngModel",t.itemLabel)}}let bN=(()=>{class n{constructor(t){this._TodoService=t,this.displayModal=!1,this.modalOperation=!0,this.itemLabel="",this.itemId=""}openModal(t){this.modalOperation=t.operation,this.itemLabel=t.operation?"":t.item,this.itemId=t.operation?"":t.id,this.displayModal=!this.displayModal}close(){this.displayModal=!this.displayModal}save(){var t=this;return(0,_e.Z)(function*(){t.itemLabel.trim()?(t.modalOperation?yield t._TodoService.addTodo({title:t.itemLabel,status:!1}):yield t._TodoService.updateTodo(t.itemId,{title:t.itemLabel}),t.close()):t.itemLabel=""})()}static#e=this.\u0275fac=function(i){return new(i||n)(g.Y36(ox))};static#t=this.\u0275cmp=g.Xpm({type:n,selectors:[["app-create-update-modal"]],decls:1,vars:1,consts:[["class","modal-overlay",4,"ngIf"],[1,"modal-overlay"],[1,"modal"],[1,"modal-header"],[1,"modal-title"],[1,"modal-body"],["type","text","placeholder","Enter Item Label (Required!)",3,"ngModel","ngModelChange"],[1,"modal-footer"],[1,"btn-save",3,"click"],[1,"btn-cancel",3,"click"]],template:function(i,a){1&i&&g.YNc(0,CN,12,2,"div",0),2&i&&g.Q6J("ngIf",a.displayModal)},dependencies:[Qs,Rs,Sl,Fl],styles:["*[_ngcontent-%COMP%]{margin:0;padding:0;box-sizing:border-box;font-family:Changa,sans-serif}body[_ngcontent-%COMP%]{background-color:#f0efea}.modal-overlay[_ngcontent-%COMP%]{position:fixed;z-index:1;left:0;top:0;width:100%;height:100%;background-color:#00000080;overflow:auto}.modal[_ngcontent-%COMP%]{background-color:#fefefe;margin:10% auto;padding:20px;border:1px solid #888;width:80%;max-width:600px;box-shadow:0 4px 8px #0003}.modal-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;background-color:#004e75;padding:0 20px}.modal-title[_ngcontent-%COMP%]{margin:0;color:#fff}.modal-body[_ngcontent-%COMP%]{padding:20px;display:flex;justify-content:center}.modal-body[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:50%;border:2px solid #004e75;padding:10px;border-radius:3px}.modal-footer[_ngcontent-%COMP%]{text-align:right}button[_ngcontent-%COMP%]{padding:5px 20px;margin:0 5px;border:none;cursor:pointer}.btn-save[_ngcontent-%COMP%]{background-color:#03b0ac;color:#fff}.btn-cancel[_ngcontent-%COMP%]{background-color:#004e75;color:#fff}@media (max-width: 575.98px){.modal-body[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%}}"]})}return n})();const TN=["createAndUpdateModal"];function SN(n,e){1&n&&(g.TgZ(0,"h3",15),g._uU(1,"There No Any Task !"),g.qZA())}const AN=function(n){return{"muted-text":n}};function MN(n,e){if(1&n){const t=g.EpF();g.TgZ(0,"div",16)(1,"label",17),g.NdJ("dblclick",function(){const c=g.CHM(t).$implicit,d=g.oxw();return g.KtG(d.updateItemLabel(c.title,c.id))}),g._uU(2),g.qZA(),g.TgZ(3,"div",18)(4,"input",19),g.NdJ("click",function(){const c=g.CHM(t).$implicit,d=g.oxw();return g.KtG(d.changeStatus(c.id,c.status))}),g.qZA(),g.TgZ(5,"span",20),g.NdJ("click",function(){const c=g.CHM(t).$implicit,d=g.oxw();return g.KtG(d.deleteItem(c.id))}),g.O4$(),g.TgZ(6,"svg",21)(7,"style"),g._uU(8," svg { fill: #004e75 } "),g.qZA(),g._UZ(9,"path",22),g.qZA()()()()}if(2&n){const t=e.$implicit;g.s9C("id",t.id),g.xp6(1),g.Q6J("ngClass",g.VKq(4,AN,t.status)),g.xp6(1),g.hij(" ",t.title," "),g.xp6(2),g.Q6J("checked",t.status)}}let xN=(()=>{class n{constructor(t){this._TodoService=t,this.todoList=[],this.filterString=""}ngOnInit(){this.displayItems()}displayItems(){console.log(1),this.todoItemsSubscription&&this.todoItemsSubscription.unsubscribe(),this.todoItemsSubscription=this._TodoService.getTodos().pipe((0,wn.U)(t=>t.filter(i=>i.title.toLowerCase().includes(this.filterString)||""==this.filterString.trim()))).subscribe(t=>{console.log(t),this.todoList=t})}createNew(){this.openCreateOrUpdateModal({operation:!0})}updateItemLabel(t,i){this.openCreateOrUpdateModal({operation:!1,item:t,id:i})}openCreateOrUpdateModal(t){this.createUpdateModalComponent.openModal(t)}changeStatus(t,i){this._TodoService.updateTodo(t,{status:!i})}deleteItem(t){this._TodoService.deleteTodo(t)}static#e=this.\u0275fac=function(i){return new(i||n)(g.Y36(ox))};static#t=this.\u0275cmp=g.Xpm({type:n,selectors:[["app-todo-list"]],viewQuery:function(i,a){if(1&i&&g.Gf(TN,5),2&i){let c;g.iGM(c=g.CRH())&&(a.createUpdateModalComponent=c.first)}},decls:26,vars:3,consts:[[1,"todo-list-card"],[1,"date-day-container"],[1,"date"],[2,"margin-right","5px"],[1,"day"],[1,"search-input-container"],["type","text","placeholder","Search On ToDo List",3,"ngModel","input","ngModelChange"],[1,"todo-list-container"],["style","text-align: center;padding: 5px;",4,"ngIf"],["class","todo-list-item",3,"id",4,"ngFor","ngForOf"],[1,"create-btn-container"],[3,"click"],["xmlns","http://www.w3.org/2000/svg","height","1em","viewBox","0 0 448 512"],["d","M256 80c0-17.7-14.3-32-32-32s-32 14.3-32 32V224H48c-17.7 0-32 14.3-32 32s14.3 32 32 32H192V432c0 17.7 14.3 32 32 32s32-14.3 32-32V288H400c17.7 0 32-14.3 32-32s-14.3-32-32-32H256V80z"],["createAndUpdateModal",""],[2,"text-align","center","padding","5px"],[1,"todo-list-item",3,"id"],["title","Double Click To Edit",1,"list-item-label",3,"ngClass","dblclick"],[1,"list-item-options"],["type","radio",3,"checked","click"],[1,"delete-icon",3,"click"],["xmlns","http://www.w3.org/2000/svg","height","15px","viewBox","0 0 448 512"],["d","M135.2 17.7L128 32H32C14.3 32 0 46.3 0 64S14.3 96 32 96H416c17.7 0 32-14.3 32-32s-14.3-32-32-32H320l-7.2-14.3C307.4 6.8 296.3 0 284.2 0H163.8c-12.1 0-23.2 6.8-28.6 17.7zM416 128H32L53.2 467c1.6 25.3 22.6 45 47.9 45H346.9c25.3 0 46.3-19.7 47.9-45L416 128z"]],template:function(i,a){1&i&&(g.TgZ(0,"main")(1,"section")(2,"div",0)(3,"div",1)(4,"div",2)(5,"h2",3),g._uU(6," 12 "),g.qZA(),g.TgZ(7,"div")(8,"h6"),g._uU(9," JAN "),g.qZA(),g.TgZ(10,"h6"),g._uU(11," 2016 "),g.qZA()()(),g.TgZ(12,"div",4)(13,"h6"),g._uU(14," TUESDAY "),g.qZA()()(),g.TgZ(15,"div",5)(16,"input",6),g.NdJ("input",function(){return a.displayItems()})("ngModelChange",function(d){return a.filterString=d}),g.qZA()(),g.TgZ(17,"div",7),g.YNc(18,SN,2,0,"h3",8),g.YNc(19,MN,10,6,"div",9),g.qZA(),g.TgZ(20,"div",10)(21,"button",11),g.NdJ("click",function(){return a.createNew()}),g.O4$(),g.TgZ(22,"svg",12),g._UZ(23,"path",13),g.qZA()()()()()(),g.kcU(),g._UZ(24,"app-create-update-modal",null,14)),2&i&&(g.xp6(16),g.Q6J("ngModel",a.filterString),g.xp6(2),g.Q6J("ngIf",0===a.todoList.length),g.xp6(1),g.Q6J("ngForOf",a.todoList))},dependencies:[Vo,Aa,Qs,Rs,Sl,Fl,bN],styles:["*[_ngcontent-%COMP%]{margin:0;padding:0;box-sizing:border-box;font-family:Changa,sans-serif}body[_ngcontent-%COMP%]{background-color:#f0efea}main[_ngcontent-%COMP%]   section[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;margin-top:30px;position:relative}main[_ngcontent-%COMP%]   section[_ngcontent-%COMP%]   .todo-list-card[_ngcontent-%COMP%]{padding:20px 30px;background-color:#fff;width:30%;box-shadow:0 2px 4px #0000001a,0 4px 8px #0000001a;border-radius:3px}main[_ngcontent-%COMP%]   section[_ngcontent-%COMP%]   .todo-list-card[_ngcontent-%COMP%]   .date-day-container[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}main[_ngcontent-%COMP%]   section[_ngcontent-%COMP%]   .todo-list-card[_ngcontent-%COMP%]   .date-day-container[_ngcontent-%COMP%]   .date[_ngcontent-%COMP%]{display:flex;align-items:center;text-align:center}main[_ngcontent-%COMP%]   section[_ngcontent-%COMP%]   .todo-list-card[_ngcontent-%COMP%]   .date-day-container[_ngcontent-%COMP%]   .date[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:40px}main[_ngcontent-%COMP%]   section[_ngcontent-%COMP%]   .todo-list-card[_ngcontent-%COMP%]   .date-day-container[_ngcontent-%COMP%]   .day[_ngcontent-%COMP%]   h6[_ngcontent-%COMP%]{font-size:20px}main[_ngcontent-%COMP%]   section[_ngcontent-%COMP%]   .todo-list-card[_ngcontent-%COMP%]   .search-input-container[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;border:2px solid #004e75;padding:5px;border-radius:3px}main[_ngcontent-%COMP%]   section[_ngcontent-%COMP%]   .todo-list-card[_ngcontent-%COMP%]   .todo-list-container[_ngcontent-%COMP%]{height:200px;overflow:scroll;scrollbar-width:thin;scrollbar-color:transparent transparent;-ms-overflow-style:none}main[_ngcontent-%COMP%]   section[_ngcontent-%COMP%]   .todo-list-card[_ngcontent-%COMP%]   .todo-list-container[_ngcontent-%COMP%]::-webkit-scrollbar{width:6px}main[_ngcontent-%COMP%]   section[_ngcontent-%COMP%]   .todo-list-card[_ngcontent-%COMP%]   .todo-list-container[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background-color:transparent}main[_ngcontent-%COMP%]   section[_ngcontent-%COMP%]   .todo-list-card[_ngcontent-%COMP%]   .todo-list-container[_ngcontent-%COMP%]::-webkit-scrollbar-track{background-color:transparent}main[_ngcontent-%COMP%]   section[_ngcontent-%COMP%]   .todo-list-card[_ngcontent-%COMP%]   .todo-list-container[_ngcontent-%COMP%]   .todo-list-item[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;margin-top:20px}main[_ngcontent-%COMP%]   section[_ngcontent-%COMP%]   .todo-list-card[_ngcontent-%COMP%]   .todo-list-container[_ngcontent-%COMP%]   .todo-list-item[_ngcontent-%COMP%]   .list-item-label[_ngcontent-%COMP%]{font-size:20px;margin:0 5px;cursor:pointer}main[_ngcontent-%COMP%]   section[_ngcontent-%COMP%]   .todo-list-card[_ngcontent-%COMP%]   .todo-list-container[_ngcontent-%COMP%]   .todo-list-item[_ngcontent-%COMP%]   .list-item-label.muted-text[_ngcontent-%COMP%]{color:#868b8f!important}main[_ngcontent-%COMP%]   section[_ngcontent-%COMP%]   .todo-list-card[_ngcontent-%COMP%]   .todo-list-container[_ngcontent-%COMP%]   .todo-list-item[_ngcontent-%COMP%]   .list-item-options[_ngcontent-%COMP%]{display:flex;align-items:center}main[_ngcontent-%COMP%]   section[_ngcontent-%COMP%]   .todo-list-card[_ngcontent-%COMP%]   .todo-list-container[_ngcontent-%COMP%]   .todo-list-item[_ngcontent-%COMP%]   .list-item-options[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:20px;height:20px;margin:0 10px;cursor:pointer;accent-color:#004e75}main[_ngcontent-%COMP%]   section[_ngcontent-%COMP%]   .todo-list-card[_ngcontent-%COMP%]   .todo-list-container[_ngcontent-%COMP%]   .todo-list-item[_ngcontent-%COMP%]   .list-item-options[_ngcontent-%COMP%]   .delete-icon[_ngcontent-%COMP%]{cursor:pointer;display:flex;padding:5px;border:1.5px solid #004e75;border-radius:3px}main[_ngcontent-%COMP%]   section[_ngcontent-%COMP%]   .todo-list-card[_ngcontent-%COMP%]   .create-btn-container[_ngcontent-%COMP%]{position:absolute;bottom:-25px;left:0;width:100%;display:flex;align-items:center;justify-content:center}main[_ngcontent-%COMP%]   section[_ngcontent-%COMP%]   .todo-list-card[_ngcontent-%COMP%]   .create-btn-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{height:50px;width:50px;border-radius:50%;display:flex;align-items:center;justify-content:center;background-color:#03b0ac;border:#03b0ac;cursor:pointer}@media (max-width: 575.98px){main[_ngcontent-%COMP%]   section[_ngcontent-%COMP%]   .todo-list-card[_ngcontent-%COMP%]{width:90%}}@media (min-width: 576px) and (max-width: 767.98px){main[_ngcontent-%COMP%]   section[_ngcontent-%COMP%]   .todo-list-card[_ngcontent-%COMP%]{width:60%}}@media (min-width: 768px) and (max-width: 991.98px){main[_ngcontent-%COMP%]   section[_ngcontent-%COMP%]   .todo-list-card[_ngcontent-%COMP%]{width:40%}}"]})}return n})(),NN=(()=>{class n{constructor(){this.title="Thiqah-Angular-Task"}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275cmp=g.Xpm({type:n,selectors:[["app-root"]],decls:2,vars:0,template:function(i,a){1&i&&g._UZ(0,"app-header")(1,"app-todo-list")},dependencies:[fm,xN]})}return n})();const ON_firebaseConfig={apiKey:"AIzaSyCZOd6FMl72sZ_CaZIz2wuHJ_ltvHVkT90",authDomain:"thiqah-task.firebaseapp.com",projectId:"thiqah-task",storageBucket:"thiqah-task.appspot.com",messagingSenderId:"909570734987",appId:"1:909570734987:web:4497b3f7dff9620c7a8d8e"};let PN=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=g.oAB({type:n});static#n=this.\u0275inj=g.cJS({imports:[an]})}return n})(),RN=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=g.oAB({type:n});static#n=this.\u0275inj=g.cJS({imports:[an,uu]})}return n})(),kN=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=g.oAB({type:n,bootstrap:[NN]});static#n=this.\u0275inj=g.cJS({imports:[_l,uu,PN,RN,Bs.hO.initializeApp(ON_firebaseConfig),DN]})}return n})();nr().bootstrapModule(kN).catch(n=>console.error(n))},3018:(ft,Me,k)=>{k.d(Me,{y:()=>V});var g=k(1887),J=k(7394),R=k(4850),oe=k(2737);var fe=k(2653),Fe=k(4674),we=k(1441);let V=(()=>{class Oe{constructor(pe){pe&&(this._subscribe=pe)}lift(pe){const Ue=new Oe;return Ue.source=this,Ue.operator=pe,Ue}subscribe(pe,Ue,Le){const at=function qe(Oe){return Oe&&Oe instanceof g.Lv||function ie(Oe){return Oe&&(0,Fe.m)(Oe.next)&&(0,Fe.m)(Oe.error)&&(0,Fe.m)(Oe.complete)}(Oe)&&(0,J.Nn)(Oe)}(pe)?pe:new g.Hp(pe,Ue,Le);return(0,we.x)(()=>{const{operator:it,source:K}=this;at.add(it?it.call(at,K):K?this._subscribe(at):this._trySubscribe(at))}),at}_trySubscribe(pe){try{return this._subscribe(pe)}catch(Ue){pe.error(Ue)}}forEach(pe,Ue){return new(Ue=H(Ue))((Le,at)=>{const it=new g.Hp({next:K=>{try{pe(K)}catch(he){at(he),it.unsubscribe()}},error:at,complete:Le});this.subscribe(it)})}_subscribe(pe){var Ue;return null===(Ue=this.source)||void 0===Ue?void 0:Ue.subscribe(pe)}[R.L](){return this}pipe(...pe){return function ve(Oe){return 0===Oe.length?oe.y:1===Oe.length?Oe[0]:function(pe){return Oe.reduce((Ue,Le)=>Le(Ue),pe)}}(pe)(this)}toPromise(pe){return new(pe=H(pe))((Ue,Le)=>{let at;this.subscribe(it=>at=it,it=>Le(it),()=>Ue(at))})}}return Oe.create=lt=>new Oe(lt),Oe})();function H(Oe){var lt;return null!==(lt=Oe??fe.config.Promise)&&void 0!==lt?lt:Promise}},8645:(ft,Me,k)=>{k.d(Me,{x:()=>fe});var g=k(3018),J=k(7394);const oe=(0,k(2306).d)(we=>function(){we(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var ne=k(9039),ve=k(1441);let fe=(()=>{class we extends g.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(H){const ie=new Fe(this,this);return ie.operator=H,ie}_throwIfClosed(){if(this.closed)throw new oe}next(H){(0,ve.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const ie of this.currentObservers)ie.next(H)}})}error(H){(0,ve.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=H;const{observers:ie}=this;for(;ie.length;)ie.shift().error(H)}})}complete(){(0,ve.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:H}=this;for(;H.length;)H.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var H;return(null===(H=this.observers)||void 0===H?void 0:H.length)>0}_trySubscribe(H){return this._throwIfClosed(),super._trySubscribe(H)}_subscribe(H){return this._throwIfClosed(),this._checkFinalizedStatuses(H),this._innerSubscribe(H)}_innerSubscribe(H){const{hasError:ie,isStopped:qe,observers:Oe}=this;return ie||qe?J.Lc:(this.currentObservers=null,Oe.push(H),new J.w0(()=>{this.currentObservers=null,(0,ne.P)(Oe,H)}))}_checkFinalizedStatuses(H){const{hasError:ie,thrownError:qe,isStopped:Oe}=this;ie?H.error(qe):Oe&&H.complete()}asObservable(){const H=new g.y;return H.source=this,H}}return we.create=(V,H)=>new Fe(V,H),we})();class Fe extends fe{constructor(V,H){super(),this.destination=V,this.source=H}next(V){var H,ie;null===(ie=null===(H=this.destination)||void 0===H?void 0:H.next)||void 0===ie||ie.call(H,V)}error(V){var H,ie;null===(ie=null===(H=this.destination)||void 0===H?void 0:H.error)||void 0===ie||ie.call(H,V)}complete(){var V,H;null===(H=null===(V=this.destination)||void 0===V?void 0:V.complete)||void 0===H||H.call(V)}_subscribe(V){var H,ie;return null!==(ie=null===(H=this.source)||void 0===H?void 0:H.subscribe(V))&&void 0!==ie?ie:J.Lc}}},1887:(ft,Me,k)=>{k.d(Me,{Hp:()=>pe,Lv:()=>ie});var g=k(4674),J=k(7394),R=k(2653),oe=k(3894);function ne(){}const ve=we("C",void 0,void 0);function we(K,he,Y){return{kind:K,value:he,error:Y}}var V=k(7599),H=k(1441);class ie extends J.w0{constructor(he){super(),this.isStopped=!1,he?(this.destination=he,(0,J.Nn)(he)&&he.add(this)):this.destination=it}static create(he,Y,Ce){return new pe(he,Y,Ce)}next(he){this.isStopped?at(function Fe(K){return we("N",K,void 0)}(he),this):this._next(he)}error(he){this.isStopped?at(function fe(K){return we("E",void 0,K)}(he),this):(this.isStopped=!0,this._error(he))}complete(){this.isStopped?at(ve,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(he){this.destination.next(he)}_error(he){try{this.destination.error(he)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const qe=Function.prototype.bind;function Oe(K,he){return qe.call(K,he)}class lt{constructor(he){this.partialObserver=he}next(he){const{partialObserver:Y}=this;if(Y.next)try{Y.next(he)}catch(Ce){Ue(Ce)}}error(he){const{partialObserver:Y}=this;if(Y.error)try{Y.error(he)}catch(Ce){Ue(Ce)}else Ue(he)}complete(){const{partialObserver:he}=this;if(he.complete)try{he.complete()}catch(Y){Ue(Y)}}}class pe extends ie{constructor(he,Y,Ce){let ke;if(super(),(0,g.m)(he)||!he)ke={next:he??void 0,error:Y??void 0,complete:Ce??void 0};else{let Ze;this&&R.config.useDeprecatedNextContext?(Ze=Object.create(he),Ze.unsubscribe=()=>this.unsubscribe(),ke={next:he.next&&Oe(he.next,Ze),error:he.error&&Oe(he.error,Ze),complete:he.complete&&Oe(he.complete,Ze)}):ke=he}this.destination=new lt(ke)}}function Ue(K){R.config.useDeprecatedSynchronousErrorHandling?(0,H.O)(K):(0,oe.h)(K)}function at(K,he){const{onStoppedNotification:Y}=R.config;Y&&V.z.setTimeout(()=>Y(K,he))}const it={closed:!0,next:ne,error:function Le(K){throw K},complete:ne}},7394:(ft,Me,k)=>{k.d(Me,{Lc:()=>ve,w0:()=>ne,Nn:()=>fe});var g=k(4674);const R=(0,k(2306).d)(we=>function(H){we(this),this.message=H?`${H.length} errors occurred during unsubscription:\n${H.map((ie,qe)=>`${qe+1}) ${ie.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=H});var oe=k(9039);class ne{constructor(V){this.initialTeardown=V,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let V;if(!this.closed){this.closed=!0;const{_parentage:H}=this;if(H)if(this._parentage=null,Array.isArray(H))for(const Oe of H)Oe.remove(this);else H.remove(this);const{initialTeardown:ie}=this;if((0,g.m)(ie))try{ie()}catch(Oe){V=Oe instanceof R?Oe.errors:[Oe]}const{_finalizers:qe}=this;if(qe){this._finalizers=null;for(const Oe of qe)try{Fe(Oe)}catch(lt){V=V??[],lt instanceof R?V=[...V,...lt.errors]:V.push(lt)}}if(V)throw new R(V)}}add(V){var H;if(V&&V!==this)if(this.closed)Fe(V);else{if(V instanceof ne){if(V.closed||V._hasParent(this))return;V._addParent(this)}(this._finalizers=null!==(H=this._finalizers)&&void 0!==H?H:[]).push(V)}}_hasParent(V){const{_parentage:H}=this;return H===V||Array.isArray(H)&&H.includes(V)}_addParent(V){const{_parentage:H}=this;this._parentage=Array.isArray(H)?(H.push(V),H):H?[H,V]:V}_removeParent(V){const{_parentage:H}=this;H===V?this._parentage=null:Array.isArray(H)&&(0,oe.P)(H,V)}remove(V){const{_finalizers:H}=this;H&&(0,oe.P)(H,V),V instanceof ne&&V._removeParent(this)}}ne.EMPTY=(()=>{const we=new ne;return we.closed=!0,we})();const ve=ne.EMPTY;function fe(we){return we instanceof ne||we&&"closed"in we&&(0,g.m)(we.remove)&&(0,g.m)(we.add)&&(0,g.m)(we.unsubscribe)}function Fe(we){(0,g.m)(we)?we():we.unsubscribe()}},2653:(ft,Me,k)=>{k.d(Me,{config:()=>g});const g={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},6232:(ft,Me,k)=>{k.d(Me,{E:()=>J});const J=new(k(3018).y)(ne=>ne.complete())},2459:(ft,Me,k)=>{k.d(Me,{D:()=>he});var g=k(4829),J=k(3093),R=k(5137),ve=k(3018),Fe=k(4971),we=k(4674),V=k(7103);function ie(Y,Ce){if(!Y)throw new Error("Iterable cannot be null");return new ve.y(ke=>{(0,V.f)(ke,Ce,()=>{const Ze=Y[Symbol.asyncIterator]();(0,V.f)(ke,Ce,()=>{Ze.next().then(re=>{re.done?ke.complete():ke.next(re.value)})},0,!0)})})}var qe=k(8382),Oe=k(4026),lt=k(4266),pe=k(3664),Ue=k(5726),Le=k(9853),at=k(541);function he(Y,Ce){return Ce?function K(Y,Ce){if(null!=Y){if((0,qe.c)(Y))return function oe(Y,Ce){return(0,g.Xf)(Y).pipe((0,R.R)(Ce),(0,J.Q)(Ce))}(Y,Ce);if((0,lt.z)(Y))return function fe(Y,Ce){return new ve.y(ke=>{let Ze=0;return Ce.schedule(function(){Ze===Y.length?ke.complete():(ke.next(Y[Ze++]),ke.closed||this.schedule())})})}(Y,Ce);if((0,Oe.t)(Y))return function ne(Y,Ce){return(0,g.Xf)(Y).pipe((0,R.R)(Ce),(0,J.Q)(Ce))}(Y,Ce);if((0,Ue.D)(Y))return ie(Y,Ce);if((0,pe.T)(Y))return function H(Y,Ce){return new ve.y(ke=>{let Ze;return(0,V.f)(ke,Ce,()=>{Ze=Y[Fe.h](),(0,V.f)(ke,Ce,()=>{let re,ut;try{({value:re,done:ut}=Ze.next())}catch(kt){return void ke.error(kt)}ut?ke.complete():ke.next(re)},0,!0)}),()=>(0,we.m)(Ze?.return)&&Ze.return()})}(Y,Ce);if((0,at.L)(Y))return function it(Y,Ce){return ie((0,at.Q)(Y),Ce)}(Y,Ce)}throw(0,Le.z)(Y)}(Y,Ce):(0,g.Xf)(Y)}},4829:(ft,Me,k)=>{k.d(Me,{Xf:()=>qe});var g=k(7582),J=k(4266),R=k(4026),oe=k(3018),ne=k(8382),ve=k(5726),fe=k(9853),Fe=k(3664),we=k(541),V=k(4674),H=k(3894),ie=k(4850);function qe(K){if(K instanceof oe.y)return K;if(null!=K){if((0,ne.c)(K))return function Oe(K){return new oe.y(he=>{const Y=K[ie.L]();if((0,V.m)(Y.subscribe))return Y.subscribe(he);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(K);if((0,J.z)(K))return function lt(K){return new oe.y(he=>{for(let Y=0;Y<K.length&&!he.closed;Y++)he.next(K[Y]);he.complete()})}(K);if((0,R.t)(K))return function pe(K){return new oe.y(he=>{K.then(Y=>{he.closed||(he.next(Y),he.complete())},Y=>he.error(Y)).then(null,H.h)})}(K);if((0,ve.D)(K))return Le(K);if((0,Fe.T)(K))return function Ue(K){return new oe.y(he=>{for(const Y of K)if(he.next(Y),he.closed)return;he.complete()})}(K);if((0,we.L)(K))return function at(K){return Le((0,we.Q)(K))}(K)}throw(0,fe.z)(K)}function Le(K){return new oe.y(he=>{(function it(K,he){var Y,Ce,ke,Ze;return(0,g.mG)(this,void 0,void 0,function*(){try{for(Y=(0,g.KL)(K);!(Ce=yield Y.next()).done;)if(he.next(Ce.value),he.closed)return}catch(re){ke={error:re}}finally{try{Ce&&!Ce.done&&(Ze=Y.return)&&(yield Ze.call(Y))}finally{if(ke)throw ke.error}}he.complete()})})(K,he).catch(Y=>he.error(Y))})}},3019:(ft,Me,k)=>{k.d(Me,{T:()=>ve});var g=k(2372),J=k(4829),R=k(6232),oe=k(4564),ne=k(2459);function ve(...fe){const Fe=(0,oe.yG)(fe),we=(0,oe._6)(fe,1/0),V=fe;return V.length?1===V.length?(0,J.Xf)(V[0]):(0,g.J)(we)((0,ne.D)(V,Fe)):R.E}},2096:(ft,Me,k)=>{k.d(Me,{of:()=>R});var g=k(4564),J=k(2459);function R(...oe){const ne=(0,g.yG)(oe);return(0,J.D)(oe,ne)}},8251:(ft,Me,k)=>{k.d(Me,{x:()=>J});var g=k(1887);function J(oe,ne,ve,fe,Fe){return new R(oe,ne,ve,fe,Fe)}class R extends g.Lv{constructor(ne,ve,fe,Fe,we,V){super(ne),this.onFinalize=we,this.shouldUnsubscribe=V,this._next=ve?function(H){try{ve(H)}catch(ie){ne.error(ie)}}:super._next,this._error=Fe?function(H){try{Fe(H)}catch(ie){ne.error(ie)}finally{this.unsubscribe()}}:super._error,this._complete=fe?function(){try{fe()}catch(H){ne.error(H)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var ne;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:ve}=this;super.unsubscribe(),!ve&&(null===(ne=this.onFinalize)||void 0===ne||ne.call(this))}}}},3997:(ft,Me,k)=>{k.d(Me,{x:()=>oe});var g=k(2737),J=k(9360),R=k(8251);function oe(ve,fe=g.y){return ve=ve??ne,(0,J.e)((Fe,we)=>{let V,H=!0;Fe.subscribe((0,R.x)(we,ie=>{const qe=fe(ie);(H||!ve(V,qe))&&(H=!1,V=qe,we.next(ie))}))})}function ne(ve,fe){return ve===fe}},7398:(ft,Me,k)=>{k.d(Me,{U:()=>R});var g=k(9360),J=k(8251);function R(oe,ne){return(0,g.e)((ve,fe)=>{let Fe=0;ve.subscribe((0,J.x)(fe,we=>{fe.next(oe.call(ne,we,Fe++))}))})}},2372:(ft,Me,k)=>{k.d(Me,{J:()=>V});var g=k(7398),J=k(4829),R=k(9360),oe=k(7103),ne=k(8251),fe=k(4674);function Fe(H,ie,qe=1/0){return(0,fe.m)(ie)?Fe((Oe,lt)=>(0,g.U)((pe,Ue)=>ie(Oe,pe,lt,Ue))((0,J.Xf)(H(Oe,lt))),qe):("number"==typeof ie&&(qe=ie),(0,R.e)((Oe,lt)=>function ve(H,ie,qe,Oe,lt,pe,Ue,Le){const at=[];let it=0,K=0,he=!1;const Y=()=>{he&&!at.length&&!it&&ie.complete()},Ce=Ze=>it<Oe?ke(Ze):at.push(Ze),ke=Ze=>{pe&&ie.next(Ze),it++;let re=!1;(0,J.Xf)(qe(Ze,K++)).subscribe((0,ne.x)(ie,ut=>{lt?.(ut),pe?Ce(ut):ie.next(ut)},()=>{re=!0},void 0,()=>{if(re)try{for(it--;at.length&&it<Oe;){const ut=at.shift();Ue?(0,oe.f)(ie,Ue,()=>ke(ut)):ke(ut)}Y()}catch(ut){ie.error(ut)}}))};return H.subscribe((0,ne.x)(ie,Ce,()=>{he=!0,Y()})),()=>{Le?.()}}(Oe,lt,H,qe)))}var we=k(2737);function V(H=1/0){return Fe(we.y,H)}},3093:(ft,Me,k)=>{k.d(Me,{Q:()=>oe});var g=k(7103),J=k(9360),R=k(8251);function oe(ne,ve=0){return(0,J.e)((fe,Fe)=>{fe.subscribe((0,R.x)(Fe,we=>(0,g.f)(Fe,ne,()=>Fe.next(we),ve),()=>(0,g.f)(Fe,ne,()=>Fe.complete(),ve),we=>(0,g.f)(Fe,ne,()=>Fe.error(we),ve)))})}},3020:(ft,Me,k)=>{k.d(Me,{B:()=>ne});var g=k(4829),J=k(8645),R=k(1887),oe=k(9360);function ne(fe={}){const{connector:Fe=(()=>new J.x),resetOnError:we=!0,resetOnComplete:V=!0,resetOnRefCountZero:H=!0}=fe;return ie=>{let qe,Oe,lt,pe=0,Ue=!1,Le=!1;const at=()=>{Oe?.unsubscribe(),Oe=void 0},it=()=>{at(),qe=lt=void 0,Ue=Le=!1},K=()=>{const he=qe;it(),he?.unsubscribe()};return(0,oe.e)((he,Y)=>{pe++,!Le&&!Ue&&at();const Ce=lt=lt??Fe();Y.add(()=>{pe--,0===pe&&!Le&&!Ue&&(Oe=ve(K,H))}),Ce.subscribe(Y),!qe&&pe>0&&(qe=new R.Hp({next:ke=>Ce.next(ke),error:ke=>{Le=!0,at(),Oe=ve(it,we,ke),Ce.error(ke)},complete:()=>{Ue=!0,at(),Oe=ve(it,V),Ce.complete()}}),(0,g.Xf)(he).subscribe(qe))})(ie)}}function ve(fe,Fe,...we){if(!0===Fe)return void fe();if(!1===Fe)return;const V=new R.Hp({next:()=>{V.unsubscribe(),fe()}});return(0,g.Xf)(Fe(...we)).subscribe(V)}},5137:(ft,Me,k)=>{k.d(Me,{R:()=>J});var g=k(9360);function J(R,oe=0){return(0,g.e)((ne,ve)=>{ve.add(R.schedule(()=>ne.subscribe(ve),oe))})}},4664:(ft,Me,k)=>{k.d(Me,{w:()=>oe});var g=k(4829),J=k(9360),R=k(8251);function oe(ne,ve){return(0,J.e)((fe,Fe)=>{let we=null,V=0,H=!1;const ie=()=>H&&!we&&Fe.complete();fe.subscribe((0,R.x)(Fe,qe=>{we?.unsubscribe();let Oe=0;const lt=V++;(0,g.Xf)(ne(qe,lt)).subscribe(we=(0,R.x)(Fe,pe=>Fe.next(ve?ve(qe,pe,lt,Oe++):pe),()=>{we=null,ie()}))},()=>{H=!0,ie()}))})}},1954:(ft,Me,k)=>{k.d(Me,{o:()=>ne});var g=k(7394);class J extends g.w0{constructor(fe,Fe){super()}schedule(fe,Fe=0){return this}}const R={setInterval(ve,fe,...Fe){const{delegate:we}=R;return we?.setInterval?we.setInterval(ve,fe,...Fe):setInterval(ve,fe,...Fe)},clearInterval(ve){const{delegate:fe}=R;return(fe?.clearInterval||clearInterval)(ve)},delegate:void 0};var oe=k(9039);class ne extends J{constructor(fe,Fe){super(fe,Fe),this.scheduler=fe,this.work=Fe,this.pending=!1}schedule(fe,Fe=0){var we;if(this.closed)return this;this.state=fe;const V=this.id,H=this.scheduler;return null!=V&&(this.id=this.recycleAsyncId(H,V,Fe)),this.pending=!0,this.delay=Fe,this.id=null!==(we=this.id)&&void 0!==we?we:this.requestAsyncId(H,this.id,Fe),this}requestAsyncId(fe,Fe,we=0){return R.setInterval(fe.flush.bind(fe,this),we)}recycleAsyncId(fe,Fe,we=0){if(null!=we&&this.delay===we&&!1===this.pending)return Fe;null!=Fe&&R.clearInterval(Fe)}execute(fe,Fe){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const we=this._execute(fe,Fe);if(we)return we;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(fe,Fe){let V,we=!1;try{this.work(fe)}catch(H){we=!0,V=H||new Error("Scheduled action threw falsy error")}if(we)return this.unsubscribe(),V}unsubscribe(){if(!this.closed){const{id:fe,scheduler:Fe}=this,{actions:we}=Fe;this.work=this.state=this.scheduler=null,this.pending=!1,(0,oe.P)(we,this),null!=fe&&(this.id=this.recycleAsyncId(Fe,fe,null)),this.delay=null,super.unsubscribe()}}}},2631:(ft,Me,k)=>{k.d(Me,{v:()=>R});var g=k(4552);class J{constructor(ne,ve=J.now){this.schedulerActionCtor=ne,this.now=ve}schedule(ne,ve=0,fe){return new this.schedulerActionCtor(this,ne).schedule(fe,ve)}}J.now=g.l.now;class R extends J{constructor(ne,ve=J.now){super(ne,ve),this.actions=[],this._active=!1}flush(ne){const{actions:ve}=this;if(this._active)return void ve.push(ne);let fe;this._active=!0;do{if(fe=ne.execute(ne.state,ne.delay))break}while(ne=ve.shift());if(this._active=!1,fe){for(;ne=ve.shift();)ne.unsubscribe();throw fe}}}},6321:(ft,Me,k)=>{k.d(Me,{z:()=>R});var g=k(1954);const R=new(k(2631).v)(g.o)},4552:(ft,Me,k)=>{k.d(Me,{l:()=>g});const g={now:()=>(g.delegate||Date).now(),delegate:void 0}},7599:(ft,Me,k)=>{k.d(Me,{z:()=>g});const g={setTimeout(J,R,...oe){const{delegate:ne}=g;return ne?.setTimeout?ne.setTimeout(J,R,...oe):setTimeout(J,R,...oe)},clearTimeout(J){const{delegate:R}=g;return(R?.clearTimeout||clearTimeout)(J)},delegate:void 0}},4971:(ft,Me,k)=>{k.d(Me,{h:()=>J});const J=function g(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},4850:(ft,Me,k)=>{k.d(Me,{L:()=>g});const g="function"==typeof Symbol&&Symbol.observable||"@@observable"},4564:(ft,Me,k)=>{k.d(Me,{_6:()=>ve,jO:()=>oe,yG:()=>ne});var g=k(4674);function R(fe){return fe[fe.length-1]}function oe(fe){return(0,g.m)(R(fe))?fe.pop():void 0}function ne(fe){return function J(fe){return fe&&(0,g.m)(fe.schedule)}(R(fe))?fe.pop():void 0}function ve(fe,Fe){return"number"==typeof R(fe)?fe.pop():Fe}},9039:(ft,Me,k)=>{function g(J,R){if(J){const oe=J.indexOf(R);0<=oe&&J.splice(oe,1)}}k.d(Me,{P:()=>g})},2306:(ft,Me,k)=>{function g(J){const oe=J(ne=>{Error.call(ne),ne.stack=(new Error).stack});return oe.prototype=Object.create(Error.prototype),oe.prototype.constructor=oe,oe}k.d(Me,{d:()=>g})},1441:(ft,Me,k)=>{k.d(Me,{O:()=>oe,x:()=>R});var g=k(2653);let J=null;function R(ne){if(g.config.useDeprecatedSynchronousErrorHandling){const ve=!J;if(ve&&(J={errorThrown:!1,error:null}),ne(),ve){const{errorThrown:fe,error:Fe}=J;if(J=null,fe)throw Fe}}else ne()}function oe(ne){g.config.useDeprecatedSynchronousErrorHandling&&J&&(J.errorThrown=!0,J.error=ne)}},7103:(ft,Me,k)=>{function g(J,R,oe,ne=0,ve=!1){const fe=R.schedule(function(){oe(),ve?J.add(this.schedule(null,ne)):this.unsubscribe()},ne);if(J.add(fe),!ve)return fe}k.d(Me,{f:()=>g})},2737:(ft,Me,k)=>{function g(J){return J}k.d(Me,{y:()=>g})},4266:(ft,Me,k)=>{k.d(Me,{z:()=>g});const g=J=>J&&"number"==typeof J.length&&"function"!=typeof J},5726:(ft,Me,k)=>{k.d(Me,{D:()=>J});var g=k(4674);function J(R){return Symbol.asyncIterator&&(0,g.m)(R?.[Symbol.asyncIterator])}},4674:(ft,Me,k)=>{function g(J){return"function"==typeof J}k.d(Me,{m:()=>g})},8382:(ft,Me,k)=>{k.d(Me,{c:()=>R});var g=k(4850),J=k(4674);function R(oe){return(0,J.m)(oe[g.L])}},3664:(ft,Me,k)=>{k.d(Me,{T:()=>R});var g=k(4971),J=k(4674);function R(oe){return(0,J.m)(oe?.[g.h])}},4026:(ft,Me,k)=>{k.d(Me,{t:()=>J});var g=k(4674);function J(R){return(0,g.m)(R?.then)}},541:(ft,Me,k)=>{k.d(Me,{L:()=>oe,Q:()=>R});var g=k(7582),J=k(4674);function R(ne){return(0,g.FC)(this,arguments,function*(){const fe=ne.getReader();try{for(;;){const{value:Fe,done:we}=yield(0,g.qq)(fe.read());if(we)return yield(0,g.qq)(void 0);yield yield(0,g.qq)(Fe)}}finally{fe.releaseLock()}})}function oe(ne){return(0,J.m)(ne?.getReader)}},9360:(ft,Me,k)=>{k.d(Me,{e:()=>R});var g=k(4674);function R(oe){return ne=>{if(function J(oe){return(0,g.m)(oe?.lift)}(ne))return ne.lift(function(ve){try{return oe(ve,this)}catch(fe){this.error(fe)}});throw new TypeError("Unable to lift unknown Observable type")}}},3894:(ft,Me,k)=>{k.d(Me,{h:()=>R});var g=k(2653),J=k(7599);function R(oe){J.z.setTimeout(()=>{const{onUnhandledError:ne}=g.config;if(!ne)throw oe;ne(oe)})}},9853:(ft,Me,k)=>{function g(J){return new TypeError(`You provided ${null!==J&&"object"==typeof J?"an invalid object":`'${J}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}k.d(Me,{z:()=>g})},7989:(ft,Me,k)=>{k.d(Me,{AFp:()=>Dp,hGG:()=>WC,Ojb:()=>Cp,sBO:()=>XA,EJc:()=>DC,SBq:()=>Sp,qLn:()=>ga,vpe:()=>Xi,OlP:()=>sn,zs3:()=>js,ZZ4:()=>EI,aQg:()=>DI,soG:()=>Mg,h0i:()=>dd,R0b:()=>br,FiY:()=>qf,Lbi:()=>km,g9A:()=>yv,Qsj:()=>Gm,FYo:()=>Th,JOm:()=>vc,Rgc:()=>qs,dDg:()=>Ea,eoX:()=>Da,q4F:()=>Ah,GfV:()=>Sh,s_b:()=>gf,ifc:()=>Ae,VuI:()=>zS,Lck:()=>By,eFA:()=>LC,Gpc:()=>lt,f3M:()=>bt,X6Q:()=>kg,_c5:()=>OS,rg0:()=>fl,zSh:()=>Nm,wAp:()=>Ds,vHH:()=>K,lri:()=>_f,rWj:()=>OC,cg1:()=>Z0,kL8:()=>mD,dqk:()=>Qt,QGY:()=>wy,F4k:()=>$h,RDi:()=>pb,AaK:()=>ie,qOj:()=>Qv,TTD:()=>Wu,_Bn:()=>hw,xp6:()=>Uv,uIk:()=>Gs,ekj:()=>Ty,Xpm:()=>Lu,lG2:()=>Uo,Yz7:()=>Mt,cJS:()=>_n,oAB:()=>xa,Yjl:()=>Xc,Y36:()=>To,_UZ:()=>qp,qZA:()=>zp,TgZ:()=>Pc,EpF:()=>No,n5z:()=>dc,LFG:()=>yt,$8M:()=>Ls,NdJ:()=>m0,CRH:()=>uC,kcU:()=>ui,O4$:()=>wn,oxw:()=>_0,Q6J:()=>gi,s9C:()=>v0,VKq:()=>$y,iGM:()=>Qy,KtG:()=>Ju,CHM:()=>Oi,YNc:()=>l0,_uU:()=>Wh,hij:()=>Qp,Gf:()=>aC});var g=k(8645),J=k(7394),R=k(3018),oe=k(3019);class ne extends g.x{constructor(s){super(),this._value=s}get value(){return this.getValue()}_subscribe(s){const o=super._subscribe(s);return!o.closed&&s.next(this._value),o}getValue(){const{hasError:s,thrownError:o,_value:u}=this;if(s)throw o;return this._throwIfClosed(),u}next(s){super.next(this._value=s)}}var ve=k(2096),fe=k(3020),Fe=k(4664),we=k(3997);function V(r){for(let s in r)if(r[s]===V)return s;throw Error("Could not find renamed property on target object.")}function H(r,s){for(const o in s)s.hasOwnProperty(o)&&!r.hasOwnProperty(o)&&(r[o]=s[o])}function ie(r){if("string"==typeof r)return r;if(Array.isArray(r))return"["+r.map(ie).join(", ")+"]";if(null==r)return""+r;if(r.overriddenName)return`${r.overriddenName}`;if(r.name)return`${r.name}`;const s=r.toString();if(null==s)return""+s;const o=s.indexOf("\n");return-1===o?s:s.substring(0,o)}function qe(r,s){return null==r||""===r?null===s?"":s:null==s||""===s?r:r+" "+s}const Oe=V({__forward_ref__:V});function lt(r){return r.__forward_ref__=lt,r.toString=function(){return ie(this())},r}function pe(r){return Ue(r)?r():r}function Ue(r){return"function"==typeof r&&r.hasOwnProperty(Oe)&&r.__forward_ref__===lt}function Le(r){return r&&!!r.\u0275providers}class K extends Error{constructor(s,o){super(function he(r,s){return`NG0${Math.abs(r)}${s?": "+s:""}`}(s,o)),this.code=s}}function Y(r){return"string"==typeof r?r:null==r?"":String(r)}function ut(r,s){throw new K(-201,!1)}function et(r,s){null==r&&function $e(r,s,o,u){throw new Error(`ASSERTION ERROR: ${r}`+(null==u?"":` [Expected=> ${o} ${u} ${s} <=Actual]`))}(s,r,null,"!=")}function Mt(r){return{token:r.token,providedIn:r.providedIn||null,factory:r.factory,value:void 0}}function _n(r){return{providers:r.providers||[],imports:r.imports||[]}}function or(r){return Ar(r,ii)||Ar(r,Cs)}function Ar(r,s){return r.hasOwnProperty(s)?r[s]:null}function Ws(r){return r&&(r.hasOwnProperty(si)||r.hasOwnProperty(ba))?r[si]:null}const ii=V({\u0275prov:V}),si=V({\u0275inj:V}),Cs=V({ngInjectableDef:V}),ba=V({ngInjectorDef:V});var gt=function(r){return r[r.Default=0]="Default",r[r.Host=1]="Host",r[r.Self=2]="Self",r[r.SkipSelf=4]="SkipSelf",r[r.Optional=8]="Optional",r}(gt||{});let Ft;function rn(r){const s=Ft;return Ft=r,s}function vn(r,s,o){const u=or(r);return u&&"root"==u.providedIn?void 0===u.value?u.value=u.factory():u.value:o&gt.Optional?null:void 0!==s?s:void ut(ie(r))}const Qt=globalThis,Gr={},Rn="__NG_DI_FLAG__",_i="ngTempTokenPath",B=/\n/gm,G="__source";let ye;function Ye(r){const s=ye;return ye=r,s}function Et(r,s=gt.Default){if(void 0===ye)throw new K(-203,!1);return null===ye?vn(r,void 0,s):ye.get(r,s&gt.Optional?null:void 0,s)}function yt(r,s=gt.Default){return(function Ct(){return Ft}()||Et)(pe(r),s)}function bt(r,s=gt.Default){return yt(r,Dn(s))}function Dn(r){return typeof r>"u"||"number"==typeof r?r:0|(r.optional&&8)|(r.host&&1)|(r.self&&2)|(r.skipSelf&&4)}function jt(r){const s=[];for(let o=0;o<r.length;o++){const u=pe(r[o]);if(Array.isArray(u)){if(0===u.length)throw new K(900,!1);let l,f=gt.Default;for(let m=0;m<u.length;m++){const w=u[m],E=Gi(w);"number"==typeof E?-1===E?l=w.token:f|=E:l=w}s.push(yt(l,f))}else s.push(yt(u))}return s}function Hn(r,s){return r[Rn]=s,r.prototype[Rn]=s,r}function Gi(r){return r[Rn]}function ce(r){return{toString:r}.toString()}var Q=function(r){return r[r.OnPush=0]="OnPush",r[r.Default=1]="Default",r}(Q||{}),Ae=function(r){return r[r.Emulated=0]="Emulated",r[r.None=2]="None",r[r.ShadowDom=3]="ShadowDom",r}(Ae||{});const nt={},Ge=[],xt=V({\u0275cmp:V}),zt=V({\u0275dir:V}),kn=V({\u0275pipe:V}),Fn=V({\u0275mod:V}),ur=V({\u0275fac:V}),zi=V({__NG_ELEMENT_ID__:V}),Lo=V({__NG_ENV_ID__:V});function Zc(r,s,o){let u=r.length;for(;;){const l=r.indexOf(s,o);if(-1===l)return l;if(0===l||r.charCodeAt(l-1)<=32){const f=s.length;if(l+f===u||r.charCodeAt(l+f)<=32)return l}o=l+1}}function Vo(r,s,o){let u=0;for(;u<o.length;){const l=o[u];if("number"==typeof l){if(0!==l)break;u++;const f=o[u++],m=o[u++],w=o[u++];r.setAttribute(s,m,w,f)}else{const f=l,m=o[++u];wi(f)?r.setProperty(s,f,m):r.setAttribute(s,f,m),u++}}return u}function Kc(r){return 3===r||4===r||6===r}function wi(r){return 64===r.charCodeAt(0)}function Ys(r,s){if(null!==s&&0!==s.length)if(null===r||0===r.length)r=s.slice();else{let o=-1;for(let u=0;u<s.length;u++){const l=s[u];"number"==typeof l?o=l:0===o||Aa(r,o,l,null,-1===o||2===o?s[++u]:null)}}return r}function Aa(r,s,o,u,l){let f=0,m=r.length;if(-1===s)m=-1;else for(;f<r.length;){const w=r[f++];if("number"==typeof w){if(w===s){m=-1;break}if(w>s){m=f-1;break}}}for(;f<r.length;){const w=r[f];if("number"==typeof w)break;if(w===o){if(null===u)return void(null!==l&&(r[f+1]=l));if(u===r[f+1])return void(r[f+2]=l)}f++,null!==u&&f++,null!==l&&f++}-1!==m&&(r.splice(m,0,s),f=m+1),r.splice(f++,0,o),null!==u&&r.splice(f++,0,u),null!==l&&r.splice(f++,0,l)}const Yc="ng-template";function Ln(r,s,o){let u=0,l=!0;for(;u<r.length;){let f=r[u++];if("string"==typeof f&&l){const m=r[u++];if(o&&"class"===f&&-1!==Zc(m.toLowerCase(),s,0))return!0}else{if(1===f){for(;u<r.length&&"string"==typeof(f=r[u++]);)if(f.toLowerCase()===s)return!0;return!1}"number"==typeof f&&(l=!1)}}return!1}function Qs(r){return 4===r.type&&r.value!==Yc}function Vg(r,s,o){return s===(4!==r.type||o?r.value:Yc)}function Ef(r,s,o){let u=4;const l=r.attrs||[],f=function Bg(r){for(let s=0;s<r.length;s++)if(Kc(r[s]))return s;return r.length}(l);let m=!1;for(let w=0;w<s.length;w++){const E=s[w];if("number"!=typeof E){if(!m)if(4&u){if(u=2|1&u,""!==E&&!Vg(r,E,o)||""===E&&1===s.length){if(zr(u))return!1;m=!0}}else{const S=8&u?E:s[++w];if(8&u&&null!==r.attrs){if(!Ln(r.attrs,S,o)){if(zr(u))return!1;m=!0}continue}const F=Bo(8&u?"class":E,l,Qs(r),o);if(-1===F){if(zr(u))return!1;m=!0;continue}if(""!==S){let j;j=F>f?"":l[F+1].toLowerCase();const W=8&u?j:null;if(W&&-1!==Zc(W,S,0)||2&u&&S!==j){if(zr(u))return!1;m=!0}}}}else{if(!m&&!zr(u)&&!zr(E))return!1;if(m&&zr(E))continue;m=!1,u=E|1&u}}return zr(u)||m}function zr(r){return 0==(1&r)}function Bo(r,s,o,u){if(null===s)return-1;let l=0;if(u||!o){let f=!1;for(;l<s.length;){const m=s[l];if(m===r)return l;if(3===m||6===m)f=!0;else{if(1===m||2===m){let w=s[++l];for(;"string"==typeof w;)w=s[++l];continue}if(4===m)break;if(0===m){l+=4;continue}}l+=f?1:2}return-1}return function Js(r,s){let o=r.indexOf(4);if(o>-1)for(o++;o<r.length;){const u=r[o];if("number"==typeof u)return-1;if(u===s)return o;o++}return-1}(s,r)}function Qc(r,s,o=!1){for(let u=0;u<s.length;u++)if(Ef(r,s[u],o))return!0;return!1}function Ma(r,s){return r?":not("+s.trim()+")":s}function Ed(r){let s=r[0],o=1,u=2,l="",f=!1;for(;o<r.length;){let m=r[o];if("string"==typeof m)if(2&u){const w=r[++o];l+="["+m+(w.length>0?'="'+w+'"':"")+"]"}else 8&u?l+="."+m:4&u&&(l+=" "+m);else""!==l&&!zr(m)&&(s+=Ma(f,l),l=""),u=m,f=f||!zr(u);o++}return""!==l&&(s+=Ma(f,l)),s}function Lu(r){return ce(()=>{const s=el(r),o={...s,decls:r.decls,vars:r.vars,template:r.template,consts:r.consts||null,ngContentSelectors:r.ngContentSelectors,onPush:r.changeDetection===Q.OnPush,directiveDefs:null,pipeDefs:null,dependencies:s.standalone&&r.dependencies||null,getStandaloneInjector:null,signals:r.signals??!1,data:r.data||{},encapsulation:r.encapsulation||Ae.Emulated,styles:r.styles||Ge,_:null,schemas:r.schemas||null,tView:null,id:""};Cf(o);const u=r.dependencies;return o.directiveDefs=Na(u,!1),o.pipeDefs=Na(u,!0),o.id=function Ei(r){let s=0;const o=[r.selectors,r.ngContentSelectors,r.hostVars,r.hostAttrs,r.consts,r.vars,r.decls,r.encapsulation,r.standalone,r.signals,r.exportAs,JSON.stringify(r.inputs),JSON.stringify(r.outputs),Object.getOwnPropertyNames(r.type.prototype),!!r.contentQueries,!!r.viewQuery].join("|");for(const l of o)s=Math.imul(31,s)+l.charCodeAt(0)<<0;return s+=2147483648,"c"+s}(o),o})}function Jc(r){return Ht(r)||An(r)}function Vu(r){return null!==r}function xa(r){return ce(()=>({type:r.type,bootstrap:r.bootstrap||Ge,declarations:r.declarations||Ge,imports:r.imports||Ge,exports:r.exports||Ge,transitiveCompileScopes:null,schemas:r.schemas||null,id:r.id||null}))}function Bu(r,s){if(null==r)return nt;const o={};for(const u in r)if(r.hasOwnProperty(u)){let l=r[u],f=l;Array.isArray(l)&&(f=l[1],l=l[0]),o[l]=u,s&&(s[l]=f)}return o}function Uo(r){return ce(()=>{const s=el(r);return Cf(s),s})}function Xc(r){return{type:r.type,name:r.name,factory:null,pure:!1!==r.pure,standalone:!0===r.standalone,onDestroy:r.type.prototype.ngOnDestroy||null}}function Ht(r){return r[xt]||null}function An(r){return r[zt]||null}function Mr(r){return r[kn]||null}function el(r){const s={};return{type:r.type,providersResolver:null,factory:null,hostBindings:r.hostBindings||null,hostVars:r.hostVars||0,hostAttrs:r.hostAttrs||null,contentQueries:r.contentQueries||null,declaredInputs:s,inputTransforms:null,inputConfig:r.inputs||nt,exportAs:r.exportAs||null,standalone:!0===r.standalone,signals:!0===r.signals,selectors:r.selectors||Ge,viewQuery:r.viewQuery||null,features:r.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:Bu(r.inputs,s),outputs:Bu(r.outputs)}}function Cf(r){r.features?.forEach(s=>s(r))}function Na(r,s){if(!r)return null;const o=s?Mr:Jc;return()=>("function"==typeof r?r():r).map(u=>o(u)).filter(Vu)}const fn=0,Je=1,mt=2,pn=3,Nr=4,eo=5,cr=6,Oa=7,an=8,fs=9,jo=10,_t=11,lr=12,bf=13,ps=14,gn=15,tl=16,to=17,dr=18,Ts=19,gs=20,Ss=21,Di=22,Pa=23,As=24,Pt=25,Ho=1,ju=2,Jn=7,Xn=9,hr=11;function er(r){return Array.isArray(r)&&"object"==typeof r[Ho]}function Er(r){return Array.isArray(r)&&!0===r[Ho]}function Hu(r){return 0!=(4&r.flags)}function ro(r){return r.componentOffset>-1}function oi(r){return 1==(1&r.flags)}function qr(r){return!!r.template}function $o(r){return 0!=(512&r[mt])}function io(r,s){return r.hasOwnProperty(ur)?r[ur]:null}let $n=null,so=!1;function Wr(r){const s=$n;return $n=r,s}const oo={version:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{}};function Fa(r){if(!ao(r)||r.dirty){if(!r.producerMustRecompute(r)&&!ul(r))return void(r.dirty=!1);r.producerRecomputeValue(r),r.dirty=!1}}function La(r){r.dirty=!0,function Md(r){if(void 0===r.liveConsumerNode)return;const s=so;so=!0;try{for(const o of r.liveConsumerNode)o.dirty||La(o)}finally{so=s}}(r),r.consumerMarkedDirty?.(r)}function xd(r){return r&&(r.nextProducerIndex=0),Wr(r)}function tr(r,s){if(Wr(s),r&&void 0!==r.producerNode&&void 0!==r.producerIndexOfThis&&void 0!==r.producerLastReadVersion){if(ao(r))for(let o=r.nextProducerIndex;o<r.producerNode.length;o++)Va(r.producerNode[o],r.producerIndexOfThis[o]);for(;r.producerNode.length>r.nextProducerIndex;)r.producerNode.pop(),r.producerLastReadVersion.pop(),r.producerIndexOfThis.pop()}}function ul(r){xs(r);for(let s=0;s<r.producerNode.length;s++){const o=r.producerNode[s],u=r.producerLastReadVersion[s];if(u!==o.version||(Fa(o),u!==o.version))return!0}return!1}function cl(r){if(xs(r),ao(r))for(let s=0;s<r.producerNode.length;s++)Va(r.producerNode[s],r.producerIndexOfThis[s]);r.producerNode.length=r.producerLastReadVersion.length=r.producerIndexOfThis.length=0,r.liveConsumerNode&&(r.liveConsumerNode.length=r.liveConsumerIndexOfThis.length=0)}function Va(r,s){if(function Ba(r){r.liveConsumerNode??=[],r.liveConsumerIndexOfThis??=[]}(r),xs(r),1===r.liveConsumerNode.length)for(let u=0;u<r.producerNode.length;u++)Va(r.producerNode[u],r.producerIndexOfThis[u]);const o=r.liveConsumerNode.length-1;if(r.liveConsumerNode[s]=r.liveConsumerNode[o],r.liveConsumerIndexOfThis[s]=r.liveConsumerIndexOfThis[o],r.liveConsumerNode.length--,r.liveConsumerIndexOfThis.length--,s<r.liveConsumerNode.length){const u=r.liveConsumerIndexOfThis[s],l=r.liveConsumerNode[s];xs(l),l.producerIndexOfThis[u]=s}}function ao(r){return r.consumerIsAlwaysLive||(r?.liveConsumerNode?.length??0)>0}function xs(r){r.producerNode??=[],r.producerIndexOfThis??=[],r.producerLastReadVersion??=[]}let Pd=null;function fl(r){const s=Wr(null);try{return r()}finally{Wr(s)}}const pl=()=>{},Nf=(()=>({...oo,consumerIsAlwaysLive:!0,consumerAllowSignalWrites:!1,consumerMarkedDirty:r=>{r.schedule(r.ref)},hasRun:!1,cleanupFn:pl}))();class Of{constructor(s,o,u){this.previousValue=s,this.currentValue=o,this.firstChange=u}isFirstChange(){return this.firstChange}}function Wu(){return Ha}function Ha(r){return r.type.prototype.ngOnChanges&&(r.setInput=uo),Pf}function Pf(){const r=co(this),s=r?.current;if(s){const o=r.previous;if(o===nt)r.previous=s;else for(let u in s)o[u]=s[u];r.current=null,this.ngOnChanges(s)}}function uo(r,s,o,u){const l=this.declaredInputs[o],f=co(r)||function kd(r,s){return r[Wi]=s}(r,{previous:nt,current:null}),m=f.current||(f.current={}),w=f.previous,E=w[l];m[l]=new Of(E&&E.currentValue,s,w===nt),r[u]=s}Wu.ngInherit=!0;const Wi="__ngSimpleChanges__";function co(r){return r[Wi]||null}const Ni=function(r,s,o){},Fd="svg";function Kt(r){for(;Array.isArray(r);)r=r[fn];return r}function ho(r,s){return Kt(s[r])}function fr(r,s){return Kt(s[r.index])}function ml(r,s){return r.data[s]}function pr(r,s){const o=s[r];return er(o)?o:o[fn]}function Zr(r,s){return null==s?null:r[s]}function Vf(r){r[to]=0}function yl(r){1024&r[mt]||(r[mt]|=1024,Zg(r,1))}function Zu(r){1024&r[mt]&&(r[mt]&=-1025,Zg(r,-1))}function Zg(r,s){let o=r[pn];if(null===o)return;o[eo]+=s;let u=o;for(o=o[pn];null!==o&&(1===s&&1===u[eo]||-1===s&&0===u[eo]);)o[eo]+=s,u=o,o=o[pn]}const vt={lFrame:Qo(null),bindingsEnabled:!0,skipHydrationRootTNode:null};function gr(){return vt.bindingsEnabled}function Te(){return vt.lFrame.lView}function Bt(){return vt.lFrame.tView}function Oi(r){return vt.lFrame.contextLView=r,r[an]}function Ju(r){return vt.lFrame.contextLView=null,r}function rr(){let r=Xu();for(;null!==r&&64===r.type;)r=r.parent;return r}function Xu(){return vt.lFrame.currentTNode}function Ns(r,s){const o=vt.lFrame;o.currentTNode=r,o.isParent=s}function po(){return vt.lFrame.isParent}function go(){return vt.lFrame.bindingIndex++}function ec(r,s){const o=vt.lFrame;o.bindingIndex=o.bindingRootIndex=r,tc(s)}function tc(r){vt.lFrame.currentDirectiveIndex=r}function nc(){return vt.lFrame.currentQueryIndex}function qd(r){vt.lFrame.currentQueryIndex=r}function Wd(r){const s=r[Je];return 2===s.type?s.declTNode:1===s.type?r[cr]:null}function Uf(r,s,o){if(o&gt.SkipSelf){let l=s,f=r;for(;!(l=l.parent,null!==l||o&gt.Host||(l=Wd(f),null===l||(f=f[ps],10&l.type))););if(null===l)return!1;s=l,r=f}const u=vt.lFrame=Ga();return u.currentTNode=s,u.lView=r,!0}function Yr(r){const s=Ga(),o=r[Je];vt.lFrame=s,s.currentTNode=o.firstChild,s.lView=r,s.tView=o,s.contextLView=r,s.bindingIndex=o.bindingStartIndex,s.inI18n=!1}function Ga(){const r=vt.lFrame,s=null===r?null:r.child;return null===s?Qo(r):s}function Qo(r){const s={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:r,child:null,inI18n:!1};return null!==r&&(r.child=s),s}function Zd(){const r=vt.lFrame;return vt.lFrame=r.parent,r.currentTNode=null,r.lView=null,r}const Jo=Zd;function za(){const r=Zd();r.isParent=!0,r.tView=null,r.selectedIndex=-1,r.contextLView=null,r.elementDepthCount=0,r.currentDirectiveIndex=-1,r.currentNamespace=null,r.bindingRootIndex=-1,r.bindingIndex=-1,r.currentQueryIndex=0}function mr(){return vt.lFrame.selectedIndex}function Pi(r){vt.lFrame.selectedIndex=r}function Yt(){const r=vt.lFrame;return ml(r.tView,r.selectedIndex)}function wn(){vt.lFrame.currentNamespace=Fd}function ui(){!function Kd(){vt.lFrame.currentNamespace=null}()}let Wa=!0;function Ps(){return Wa}function Dr(r){Wa=r}function Xo(r,s){for(let o=s.directiveStart,u=s.directiveEnd;o<u;o++){const f=r.data[o].type.prototype,{ngAfterContentInit:m,ngAfterContentChecked:w,ngAfterViewInit:E,ngAfterViewChecked:S,ngOnDestroy:x}=f;m&&(r.contentHooks??=[]).push(-o,m),w&&((r.contentHooks??=[]).push(o,w),(r.contentCheckHooks??=[]).push(o,w)),E&&(r.viewHooks??=[]).push(-o,E),S&&((r.viewHooks??=[]).push(o,S),(r.viewCheckHooks??=[]).push(o,S)),null!=x&&(r.destroyHooks??=[]).push(o,x)}}function ea(r,s,o){jf(r,s,3,o)}function ic(r,s,o,u){(3&r[mt])===o&&jf(r,s,o,u)}function Za(r,s){let o=r[mt];(3&o)===s&&(o&=8191,o+=1,r[mt]=o)}function jf(r,s,o,u){const f=u??-1,m=s.length-1;let w=0;for(let E=void 0!==u?65535&r[to]:0;E<m;E++)if("number"==typeof s[E+1]){if(w=s[E],null!=u&&w>=u)break}else s[E]<0&&(r[to]+=65536),(w<f||-1==f)&&(Ki(r,o,s,E),r[to]=(4294901760&r[to])+E+2),E++}function Rs(r,s){Ni(4,r,s);const o=Wr(null);try{s.call(r)}finally{Wr(o),Ni(5,r,s)}}function Ki(r,s,o,u){const l=o[u]<0,f=o[u+1],w=r[l?-o[u]:o[u]];l?r[mt]>>13<r[to]>>16&&(3&r[mt])===s&&(r[mt]+=8192,Rs(w,f)):Rs(w,f)}const ys=-1;class In{constructor(s,o,u){this.factory=s,this.resolving=!1,this.canSeeViewProviders=o,this.injectImpl=u}}function ta(r){return r!==ys}function _o(r){return 32767&r}function Yi(r,s){let o=function Jd(r){return r>>16}(r),u=s;for(;o>0;)u=u[ps],o--;return u}let sc=!0;function Ka(r){const s=sc;return sc=r,s}const Tl=255,Gf=5;let oc=0;const Ri={};function ks(r,s){const o=ac(r,s);if(-1!==o)return o;const u=s[Je];u.firstCreatePass&&(r.injectorIndex=s.length,vo(u.data,r),vo(s,null),vo(u.blueprint,null));const l=wo(r,s),f=r.injectorIndex;if(ta(l)){const m=_o(l),w=Yi(l,s),E=w[Je].data;for(let S=0;S<8;S++)s[f+S]=w[m+S]|E[m+S]}return s[f+8]=l,f}function vo(r,s){r.push(0,0,0,0,0,0,0,0,s)}function ac(r,s){return-1===r.injectorIndex||r.parent&&r.parent.injectorIndex===r.injectorIndex||null===s[r.injectorIndex+8]?-1:r.injectorIndex}function wo(r,s){if(r.parent&&-1!==r.parent.injectorIndex)return r.parent.injectorIndex;let o=0,u=null,l=s;for(;null!==l;){if(u=zf(l),null===u)return ys;if(o++,l=l[ps],-1!==u.injectorIndex)return u.injectorIndex|o<<16}return ys}function uc(r,s,o){!function Ya(r,s,o){let u;"string"==typeof o?u=o.charCodeAt(0)||0:o.hasOwnProperty(zi)&&(u=o[zi]),null==u&&(u=o[zi]=oc++);const l=u&Tl;s.data[r+(l>>Gf)]|=1<<l}(r,s,o)}function Fs(r,s,o){if(o&gt.Optional||void 0!==r)return r;ut()}function na(r,s,o,u){if(o&gt.Optional&&void 0===u&&(u=null),!(o&(gt.Self|gt.Host))){const l=r[fs],f=rn(void 0);try{return l?l.get(s,u,o&gt.Optional):vn(s,u,o&gt.Optional)}finally{rn(f)}}return Fs(u,0,o)}function Qa(r,s,o,u=gt.Default,l){if(null!==r){if(2048&s[mt]&&!(u&gt.Self)){const m=function ia(r,s,o,u,l){let f=r,m=s;for(;null!==f&&null!==m&&2048&m[mt]&&!(512&m[mt]);){const w=ra(f,m,o,u|gt.Self,Ri);if(w!==Ri)return w;let E=f.parent;if(!E){const S=m[gs];if(S){const x=S.get(o,Ri,u);if(x!==Ri)return x}E=zf(m),m=m[ps]}f=E}return l}(r,s,o,u,Ri);if(m!==Ri)return m}const f=ra(r,s,o,u,Ri);if(f!==Ri)return f}return na(s,o,u,l)}function ra(r,s,o,u,l){const f=function N_(r){if("string"==typeof r)return r.charCodeAt(0)||0;const s=r.hasOwnProperty(zi)?r[zi]:void 0;return"number"==typeof s?s>=0?s&Tl:Xa:s}(o);if("function"==typeof f){if(!Uf(s,r,u))return u&gt.Host?Fs(l,0,u):na(s,o,u,l);try{let m;if(m=f(u),null!=m||u&gt.Optional)return m;ut()}finally{Jo()}}else if("number"==typeof f){let m=null,w=ac(r,s),E=ys,S=u&gt.Host?s[gn][cr]:null;for((-1===w||u&gt.SkipSelf)&&(E=-1===w?wo(r,s):s[w+8],E!==ys&&Sl(u,!1)?(m=s[Je],w=_o(E),s=Yi(E,s)):w=-1);-1!==w;){const x=s[Je];if(Xd(f,w,x.data)){const F=zn(w,s,o,m,u,S);if(F!==Ri)return F}E=s[w+8],E!==ys&&Sl(u,s[Je].data[w+8]===S)&&Xd(f,w,s)?(m=x,w=_o(E),s=Yi(E,s)):w=-1}}return l}function zn(r,s,o,u,l,f){const m=s[Je],w=m.data[r+8],x=ci(w,m,o,null==u?ro(w)&&sc:u!=m&&0!=(3&w.type),l&gt.Host&&f===w);return null!==x?Qi(s,m,x,w):Ri}function ci(r,s,o,u,l){const f=r.providerIndexes,m=s.data,w=1048575&f,E=r.directiveStart,x=f>>20,j=l?w+x:r.directiveEnd;for(let W=u?w:w+x;W<j;W++){const de=m[W];if(W<E&&o===de||W>=E&&de.type===o)return W}if(l){const W=m[E];if(W&&qr(W)&&W.type===o)return E}return null}function Qi(r,s,o,u){let l=r[o];const f=s.data;if(function yo(r){return r instanceof In}(l)){const m=l;m.resolving&&function ke(r,s){const o=s?`. Dependency path: ${s.join(" > ")} > ${r}`:"";throw new K(-200,`Circular dependency in DI detected for ${r}${o}`)}(function Ce(r){return"function"==typeof r?r.name||r.toString():"object"==typeof r&&null!=r&&"function"==typeof r.type?r.type.name||r.type.toString():Y(r)}(f[o]));const w=Ka(m.canSeeViewProviders);m.resolving=!0;const S=m.injectImpl?rn(m.injectImpl):null;Uf(r,u,gt.Default);try{l=r[o]=m.factory(void 0,f,r,u),s.firstCreatePass&&o>=u.directiveStart&&function Gn(r,s,o){const{ngOnChanges:u,ngOnInit:l,ngDoCheck:f}=s.type.prototype;if(u){const m=Ha(s);(o.preOrderHooks??=[]).push(r,m),(o.preOrderCheckHooks??=[]).push(r,m)}l&&(o.preOrderHooks??=[]).push(0-r,l),f&&((o.preOrderHooks??=[]).push(r,f),(o.preOrderCheckHooks??=[]).push(r,f))}(o,f[o],s)}finally{null!==S&&rn(S),Ka(w),m.resolving=!1,Jo()}}return l}function Xd(r,s,o){return!!(o[s+(r>>Gf)]&1<<r)}function Sl(r,s){return!(r&gt.Self||r&gt.Host&&s)}class En{constructor(s,o){this._tNode=s,this._lView=o}get(s,o,u){return Qa(this._tNode,this._lView,s,Dn(u),o)}}function Xa(){return new En(rr(),Te())}function dc(r){return ce(()=>{const s=r.prototype.constructor,o=s[ur]||Al(s),u=Object.prototype;let l=Object.getPrototypeOf(r.prototype).constructor;for(;l&&l!==u;){const f=l[ur]||Al(l);if(f&&f!==o)return f;l=Object.getPrototypeOf(l)}return f=>new f})}function Al(r){return Ue(r)?()=>{const s=Al(pe(r));return s&&s()}:io(r)}function zf(r){const s=r[Je],o=s.type;return 2===o?s.declTNode:1===o?r[cr]:null}function Ls(r){return function cc(r,s){if("class"===s)return r.classes;if("style"===s)return r.styles;const o=r.attrs;if(o){const u=o.length;let l=0;for(;l<u;){const f=o[l];if(Kc(f))break;if(0===f)l+=2;else if("number"==typeof f)for(l++;l<u&&"string"==typeof o[l];)l++;else{if(f===s)return o[l+1];l+=2}}}return null}(rr(),r)}const fc="__parameters__";function oa(r,s,o){return ce(()=>{const u=function xl(r){return function(...o){if(r){const u=r(...o);for(const l in u)this[l]=u[l]}}}(s);function l(...f){if(this instanceof l)return u.apply(this,f),this;const m=new l(...f);return w.annotation=m,w;function w(E,S,x){const F=E.hasOwnProperty(fc)?E[fc]:Object.defineProperty(E,fc,{value:[]})[fc];for(;F.length<=x;)F.push(null);return(F[x]=F[x]||[]).push(m),E}}return o&&(l.prototype=Object.create(o.prototype)),l.prototype.ngMetadataName=r,l.annotationCls=l,l})}function ki(r,s){r.forEach(o=>Array.isArray(o)?ki(o,s):s(o))}function Fi(r,s,o){s>=r.length?r.push(o):r.splice(s,0,o)}function Ji(r,s){return s>=r.length-1?r.pop():r.splice(s,1)[0]}function Qr(r,s,o){let u=mc(r,s);return u>=0?r[1|u]=o:(u=~u,function Nl(r,s,o,u){let l=r.length;if(l==s)r.push(o,u);else if(1===l)r.push(u,r[0]),r[0]=o;else{for(l--,r.push(r[l-1],r[l]);l>s;)r[l]=r[l-2],l--;r[s]=o,r[s+1]=u}}(r,u,s,o)),u}function gc(r,s){const o=mc(r,s);if(o>=0)return r[1|o]}function mc(r,s){return function Pl(r,s,o){let u=0,l=r.length>>o;for(;l!==u;){const f=u+(l-u>>1),m=r[f<<o];if(s===m)return f<<o;m>s?l=f:u=f+1}return~(l<<o)}(r,s,1)}const qf=Hn(oa("Optional"),8),nu=Hn(oa("SkipSelf"),4);function su(r){return 128==(128&r.flags)}var vc=function(r){return r[r.Important=1]="Important",r[r.DashCase=2]="DashCase",r}(vc||{});const ah=new Map;let z_=0;const dh="__ngContext__";function Pr(r,s){er(s)?(r[dh]=s[Ts],function Xr(r){ah.set(r[Ts],r)}(s)):r[dh]=s}let U;function Z(r,s){return U(r,s)}function Ve(r){const s=r[pn];return Er(s)?s[pn]:s}function Mn(r){return fh(r[lr])}function _s(r){return fh(r[Nr])}function fh(r){for(;null!==r&&!Er(r);)r=r[Nr];return r}function wc(r,s,o,u,l){if(null!=u){let f,m=!1;Er(u)?f=u:er(u)&&(m=!0,u=u[fn]);const w=Kt(u);0===r&&null!==o?null==l?Bs(s,o,w):la(s,o,w,l||null,!0):1===r&&null!==o?la(s,o,w,l||null,!0):2===r?function mm(r,s,o){const u=da(r,s);u&&function db(r,s,o,u){r.removeChild(s,o,u)}(r,u,s,o)}(s,w,m):3===r&&s.destroyNode(w),null!=f&&function _m(r,s,o,u,l){const f=o[Jn];f!==Kt(o)&&wc(s,r,u,f,l);for(let w=hr;w<o.length;w++){const E=o[w];dp(E[Je],E,r,s,u,f)}}(s,r,f,o,l)}}function uu(r,s,o){return r.createElement(s,o)}function pm(r,s){const o=r[Xn],u=o.indexOf(s);Zu(s),o.splice(u,1)}function ap(r,s){if(r.length<=hr)return;const o=hr+s,u=r[o];if(u){const l=u[tl];null!==l&&l!==r&&pm(l,u),s>0&&(r[o-1][Nr]=u[Nr]);const f=Ji(r,hr+s);!function W_(r,s){dp(r,s,s[_t],2,null,null),s[fn]=null,s[cr]=null}(u[Je],u);const m=f[dr];null!==m&&m.detachView(f[Je]),u[pn]=null,u[Nr]=null,u[mt]&=-129}return u}function lu(r,s){if(!(256&s[mt])){const o=s[_t];s[Pa]&&cl(s[Pa]),s[As]&&cl(s[As]),o.destroyNode&&dp(r,s,o,3,null,null),function cu(r){let s=r[lr];if(!s)return up(r[Je],r);for(;s;){let o=null;if(er(s))o=s[lr];else{const u=s[hr];u&&(o=u)}if(!o){for(;s&&!s[Nr]&&s!==r;)er(s)&&up(s[Je],s),s=s[pn];null===s&&(s=r),er(s)&&up(s[Je],s),o=s&&s[Nr]}s=o}}(s)}}function up(r,s){if(!(256&s[mt])){s[mt]&=-129,s[mt]|=256,function cb(r,s){let o;if(null!=r&&null!=(o=r.destroyHooks))for(let u=0;u<o.length;u+=2){const l=s[o[u]];if(!(l instanceof In)){const f=o[u+1];if(Array.isArray(f))for(let m=0;m<f.length;m+=2){const w=l[f[m]],E=f[m+1];Ni(4,w,E);try{E.call(w)}finally{Ni(5,w,E)}}else{Ni(4,l,f);try{f.call(l)}finally{Ni(5,l,f)}}}}}(r,s),function Z_(r,s){const o=r.cleanup,u=s[Oa];if(null!==o)for(let f=0;f<o.length-1;f+=2)if("string"==typeof o[f]){const m=o[f+3];m>=0?u[m]():u[-m].unsubscribe(),f+=2}else o[f].call(u[o[f+1]]);null!==u&&(s[Oa]=null);const l=s[Ss];if(null!==l){s[Ss]=null;for(let f=0;f<l.length;f++)(0,l[f])()}}(r,s),1===s[Je].type&&s[_t].destroy();const o=s[tl];if(null!==o&&Er(s[pn])){o!==s[pn]&&pm(o,s);const u=s[dr];null!==u&&u.detachView(r)}!function ch(r){ah.delete(r[Ts])}(s)}}function cp(r,s,o){return function OI(r,s,o){let u=s;for(;null!==u&&40&u.type;)u=(s=u).parent;if(null===u)return o[fn];{const{componentOffset:l}=u;if(l>-1){const{encapsulation:f}=r.data[u.directiveStart+l];if(f===Ae.None||f===Ae.Emulated)return null}return fr(u,o)}}(r,s.parent,o)}function la(r,s,o,u,l){r.insertBefore(s,o,u,l)}function Bs(r,s,o){r.appendChild(s,o)}function lb(r,s,o,u,l){null!==u?la(r,s,o,u,l):Bs(r,s,o)}function da(r,s){return r.parentNode(s)}let vs,fp,PI=function en(r,s,o){return 40&r.type?fr(r,o):null};function ph(r,s,o,u){const l=cp(r,u,s),f=s[_t],w=function du(r,s,o){return PI(r,s,o)}(u.parent||s[cr],u,s);if(null!=l)if(Array.isArray(o))for(let E=0;E<o.length;E++)lb(f,l,o[E],w,!1);else lb(f,l,o,w,!1);void 0!==vs&&vs(f,u,s,o,l)}function Tt(r,s){if(null!==s){const o=s.type;if(3&o)return fr(s,r);if(4&o)return Vl(-1,r[s.index]);if(8&o){const u=s.child;if(null!==u)return Tt(r,u);{const l=r[s.index];return Er(l)?Vl(-1,l):Kt(l)}}if(32&o)return Z(s,r)()||Kt(r[s.index]);{const u=lp(r,s);return null!==u?Array.isArray(u)?u[0]:Tt(Ve(r[gn]),u):Tt(r,s.next)}}return null}function lp(r,s){return null!==s?r[gn][cr].projection[s.projection]:null}function Vl(r,s){const o=hr+r+1;if(o<s.length){const u=s[o],l=u[Je].firstChild;if(null!==l)return Tt(u,l)}return s[Jn]}function K_(r,s,o,u,l,f,m){for(;null!=o;){const w=u[o.index],E=o.type;if(m&&0===s&&(w&&Pr(Kt(w),u),o.flags|=2),32!=(32&o.flags))if(8&E)K_(r,s,o.child,u,l,f,!1),wc(s,r,l,w,f);else if(32&E){const S=Z(o,u);let x;for(;x=S();)wc(s,r,l,x,f);wc(s,r,l,w,f)}else 16&E?li(r,s,u,o,l,f):wc(s,r,l,w,f);o=m?o.projectionNext:o.next}}function dp(r,s,o,u,l,f){K_(o,u,r.firstChild,s,l,f,!1)}function li(r,s,o,u,l,f){const m=o[gn],E=m[cr].projection[u.projection];if(Array.isArray(E))for(let S=0;S<E.length;S++)wc(s,r,l,E[S],f);else{let S=E;const x=m[pn];su(u)&&(S.flags|=128),K_(r,s,S,x,l,f,!0)}}function RI(r,s,o){""===o?r.removeAttribute(s,"class"):r.setAttribute(s,"class",o)}function Y_(r,s,o){const{mergedAttrs:u,classes:l,styles:f}=o;null!==u&&Vo(r,s,u),null!==l&&RI(r,s,l),null!==f&&function Ic(r,s,o){r.setAttribute(s,"style",o)}(r,s,f)}function pb(r){fp=r}class X_{constructor(s){this.changingThisBreaksApplicationSecurity=s}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}class sn{constructor(s,o){this._desc=s,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof o?this.__NG_ELEMENT_ID__=o:void 0!==o&&(this.\u0275prov=Mt({token:this,providedIn:o.providedIn||"root",factory:o.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}const Ec=new sn("ENVIRONMENT_INITIALIZER"),dv=new sn("INJECTOR",-1),hv=new sn("INJECTOR_DEF_TYPES");class Mm{get(s,o=Gr){if(o===Gr){const u=new Error(`NullInjectorError: No provider for ${ie(s)}!`);throw u.name="NullInjectorError",u}return o}}function Cb(...r){return{\u0275providers:$I(0,r),\u0275fromNgModule:!0}}function $I(r,...s){const o=[],u=new Set;let l;const f=m=>{o.push(m)};return ki(s,m=>{const w=m;xm(w,f,[],u)&&(l||=[],l.push(w))}),void 0!==l&&jl(l,f),o}function jl(r,s){for(let o=0;o<r.length;o++){const{ngModule:u,providers:l}=r[o];pu(l,f=>{s(f,u)})}}function xm(r,s,o,u){if(!(r=pe(r)))return!1;let l=null,f=Ws(r);const m=!f&&Ht(r);if(f||m){if(m&&!m.standalone)return!1;l=r}else{const E=r.ngModule;if(f=Ws(E),!f)return!1;l=E}const w=u.has(l);if(m){if(w)return!1;if(u.add(l),m.dependencies){const E="function"==typeof m.dependencies?m.dependencies():m.dependencies;for(const S of E)xm(S,s,o,u)}}else{if(!f)return!1;{if(null!=f.imports&&!w){let S;u.add(l);try{ki(f.imports,x=>{xm(x,s,o,u)&&(S||=[],S.push(x))})}finally{}void 0!==S&&jl(S,s)}if(!w){const S=io(l)||(()=>new l);s({provide:l,useFactory:S,deps:Ge},l),s({provide:hv,useValue:l,multi:!0},l),s({provide:Ec,useValue:()=>yt(l),multi:!0},l)}const E=f.providers;if(null!=E&&!w){const S=r;pu(E,x=>{s(x,S)})}}}return l!==r&&void 0!==r.providers}function pu(r,s){for(let o of r)Le(o)&&(o=o.\u0275providers),Array.isArray(o)?pu(o,s):s(o)}const GI=V({provide:String,useValue:V});function Ih(r){return null!==r&&"object"==typeof r&&GI in r}function Dc(r){return"function"==typeof r}const Nm=new sn("Set Injector scope."),Cc={},Om={};let Pm;function Dh(){return void 0===Pm&&(Pm=new Mm),Pm}class fa{}class wp extends fa{get destroyed(){return this._destroyed}constructor(s,o,u,l){super(),this.parent=o,this.source=u,this.scopes=l,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,Ep(s,m=>this.processProvider(m)),this.records.set(dv,gu(void 0,this)),l.has("environment")&&this.records.set(fa,gu(void 0,this));const f=this.records.get(Nm);null!=f&&"string"==typeof f.value&&this.scopes.add(f.value),this.injectorDefTypes=new Set(this.get(hv.multi,Ge,gt.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const o of this._ngOnDestroyHooks)o.ngOnDestroy();const s=this._onDestroyHooks;this._onDestroyHooks=[];for(const o of s)o()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear()}}onDestroy(s){return this.assertNotDestroyed(),this._onDestroyHooks.push(s),()=>this.removeOnDestroy(s)}runInContext(s){this.assertNotDestroyed();const o=Ye(this),u=rn(void 0);try{return s()}finally{Ye(o),rn(u)}}get(s,o=Gr,u=gt.Default){if(this.assertNotDestroyed(),s.hasOwnProperty(Lo))return s[Lo](this);u=Dn(u);const f=Ye(this),m=rn(void 0);try{if(!(u&gt.SkipSelf)){let E=this.records.get(s);if(void 0===E){const S=function bb(r){return"function"==typeof r||"object"==typeof r&&r instanceof sn}(s)&&or(s);E=S&&this.injectableDefInScope(S)?gu(Hl(s),Cc):null,this.records.set(s,E)}if(null!=E)return this.hydrate(s,E)}return(u&gt.Self?Dh():this.parent).get(s,o=u&gt.Optional&&o===Gr?null:o)}catch(w){if("NullInjectorError"===w.name){if((w[_i]=w[_i]||[]).unshift(ie(s)),f)throw w;return function hs(r,s,o,u){const l=r[_i];throw s[G]&&l.unshift(s[G]),r.message=function Sa(r,s,o,u=null){r=r&&"\n"===r.charAt(0)&&"\u0275"==r.charAt(1)?r.slice(2):r;let l=ie(s);if(Array.isArray(s))l=s.map(ie).join(" -> ");else if("object"==typeof s){let f=[];for(let m in s)if(s.hasOwnProperty(m)){let w=s[m];f.push(m+":"+("string"==typeof w?JSON.stringify(w):ie(w)))}l=`{${f.join(", ")}}`}return`${o}${u?"("+u+")":""}[${l}]: ${r.replace(B,"\n  ")}`}("\n"+r.message,l,o,u),r.ngTokenPath=l,r[_i]=null,r}(w,s,"R3InjectorError",this.source)}throw w}finally{rn(m),Ye(f)}}resolveInjectorInitializers(){const s=Ye(this),o=rn(void 0);try{const l=this.get(Ec.multi,Ge,gt.Self);for(const f of l)f()}finally{Ye(s),rn(o)}}toString(){const s=[],o=this.records;for(const u of o.keys())s.push(ie(u));return`R3Injector[${s.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new K(205,!1)}processProvider(s){let o=Dc(s=pe(s))?s:pe(s&&s.provide);const u=function gv(r){return Ih(r)?gu(void 0,r.useValue):gu(Rm(r),Cc)}(s);if(Dc(s)||!0!==s.multi)this.records.get(o);else{let l=this.records.get(o);l||(l=gu(void 0,Cc,!0),l.factory=()=>jt(l.multi),this.records.set(o,l)),o=s,l.multi.push(s)}this.records.set(o,u)}hydrate(s,o){return o.value===Cc&&(o.value=Om,o.value=o.factory()),"object"==typeof o.value&&o.value&&function zI(r){return null!==r&&"object"==typeof r&&"function"==typeof r.ngOnDestroy}(o.value)&&this._ngOnDestroyHooks.add(o.value),o.value}injectableDefInScope(s){if(!s.providedIn)return!1;const o=pe(s.providedIn);return"string"==typeof o?"any"===o||this.scopes.has(o):this.injectorDefTypes.has(o)}removeOnDestroy(s){const o=this._onDestroyHooks.indexOf(s);-1!==o&&this._onDestroyHooks.splice(o,1)}}function Hl(r){const s=or(r),o=null!==s?s.factory:io(r);if(null!==o)return o;if(r instanceof sn)throw new K(204,!1);if(r instanceof Function)return function pv(r){const s=r.length;if(s>0)throw function Io(r,s){const o=[];for(let u=0;u<r;u++)o.push(s);return o}(s,"?"),new K(204,!1);const o=function ri(r){return r&&(r[ii]||r[Cs])||null}(r);return null!==o?()=>o.factory(r):()=>new r}(r);throw new K(204,!1)}function Rm(r,s,o){let u;if(Dc(r)){const l=pe(r);return io(l)||Hl(l)}if(Ih(r))u=()=>pe(r.useValue);else if(function Eh(r){return!(!r||!r.useFactory)}(r))u=()=>r.useFactory(...jt(r.deps||[]));else if(function fv(r){return!(!r||!r.useExisting)}(r))u=()=>yt(pe(r.useExisting));else{const l=pe(r&&(r.useClass||r.provide));if(!function Ip(r){return!!r.deps}(r))return io(l)||Hl(l);u=()=>new l(...jt(r.deps))}return u}function gu(r,s,o=!1){return{factory:r,value:s,multi:o?[]:void 0}}function Ep(r,s){for(const o of r)Array.isArray(o)?Ep(o,s):o&&Le(o)?Ep(o.\u0275providers,s):s(o)}const Dp=new sn("AppId",{providedIn:"root",factory:()=>mv}),mv="ng",yv=new sn("Platform Initializer"),km=new sn("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),Cp=new sn("CSP nonce",{providedIn:"root",factory:()=>function mh(){if(void 0!==fp)return fp;if(typeof document<"u")return document;throw new K(210,!1)}().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});let Cv=(r,s,o)=>null;function bv(r,s,o=!1){return Cv(r,s,o)}class YI{}class Tv{}class QI{resolveComponentFactory(s){throw function Sv(r){const s=Error(`No component factory found for ${ie(r)}.`);return s.ngComponent=r,s}(s)}}let Hm=(()=>{class r{static#e=this.NULL=new QI}return r})();function Pb(){return bh(rr(),Te())}function bh(r,s){return new Sp(fr(r,s))}let Sp=(()=>{class r{constructor(o){this.nativeElement=o}static#e=this.__NG_ELEMENT_ID__=Pb}return r})();function $m(r){return r instanceof Sp?r.nativeElement:r}class Th{}let Gm=(()=>{class r{constructor(){this.destroyNode=null}static#e=this.__NG_ELEMENT_ID__=()=>function Av(){const r=Te(),o=pr(rr().index,r);return(er(o)?o:r)[_t]}()}return r})(),JI=(()=>{class r{static#e=this.\u0275prov=Mt({token:r,providedIn:"root",factory:()=>null})}return r})();class Sh{constructor(s){this.full=s,this.major=s.split(".")[0],this.minor=s.split(".")[1],this.patch=s.split(".").slice(2).join(".")}}const Ah=new Sh("16.2.9"),Mv={};function Ov(r,s=null,o=null,u){const l=nE(r,s,o,u);return l.resolveInjectorInitializers(),l}function nE(r,s=null,o=null,u,l=new Set){const f=[o||Ge,Cb(r)];return u=u||("object"==typeof r?void 0:ie(r)),new wp(f,s||Dh(),u||null,l)}let js=(()=>{class r{static#e=this.THROW_IF_NOT_FOUND=Gr;static#t=this.NULL=new Mm;static create(o,u){if(Array.isArray(o))return Ov({name:""},u,o,"");{const l=o.name??"";return Ov({name:l},o.parent,o.providers,l)}}static#n=this.\u0275prov=Mt({token:r,providedIn:"any",factory:()=>yt(dv)});static#r=this.__NG_ELEMENT_ID__=-1}return r})();function Km(r){return r.ngOriginalError}class ga{constructor(){this._console=console}handleError(s){const o=this._findOriginalError(s);this._console.error("ERROR",s),o&&this._console.error("ORIGINAL ERROR",o)}_findOriginalError(s){let o=s&&Km(s);for(;o&&Km(o);)o=Km(o);return o||null}}function Ym(r){return s=>{setTimeout(r,void 0,s)}}const Xi=class Fb extends g.x{constructor(s=!1){super(),this.__isAsync=s}emit(s){super.next(s)}subscribe(s,o,u){let l=s,f=o||(()=>null),m=u;if(s&&"object"==typeof s){const E=s;l=E.next?.bind(E),f=E.error?.bind(E),m=E.complete?.bind(E)}this.__isAsync&&(f=Ym(f),l&&(l=Ym(l)),m&&(m=Ym(m)));const w=super.subscribe({next:l,error:f,complete:m});return s instanceof J.w0&&s.add(w),w}};function Rv(...r){}class br{constructor({enableLongStackTrace:s=!1,shouldCoalesceEventChangeDetection:o=!1,shouldCoalesceRunChangeDetection:u=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Xi(!1),this.onMicrotaskEmpty=new Xi(!1),this.onStable=new Xi(!1),this.onError=new Xi(!1),typeof Zone>"u")throw new K(908,!1);Zone.assertZonePatched();const l=this;l._nesting=0,l._outer=l._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(l._inner=l._inner.fork(new Zone.TaskTrackingZoneSpec)),s&&Zone.longStackTraceZoneSpec&&(l._inner=l._inner.fork(Zone.longStackTraceZoneSpec)),l.shouldCoalesceEventChangeDetection=!u&&o,l.shouldCoalesceRunChangeDetection=u,l.lastRequestAnimationFrameId=-1,l.nativeRequestAnimationFrame=function iE(){const r="function"==typeof Qt.requestAnimationFrame;let s=Qt[r?"requestAnimationFrame":"setTimeout"],o=Qt[r?"cancelAnimationFrame":"clearTimeout"];if(typeof Zone<"u"&&s&&o){const u=s[Zone.__symbol__("OriginalDelegate")];u&&(s=u);const l=o[Zone.__symbol__("OriginalDelegate")];l&&(o=l)}return{nativeRequestAnimationFrame:s,nativeCancelAnimationFrame:o}}().nativeRequestAnimationFrame,function uE(r){const s=()=>{!function aE(r){r.isCheckStableRunning||-1!==r.lastRequestAnimationFrameId||(r.lastRequestAnimationFrameId=r.nativeRequestAnimationFrame.call(Qt,()=>{r.fakeTopEventTask||(r.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{r.lastRequestAnimationFrameId=-1,vu(r),r.isCheckStableRunning=!0,xh(r),r.isCheckStableRunning=!1},void 0,()=>{},()=>{})),r.fakeTopEventTask.invoke()}),vu(r))}(r)};r._inner=r._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(o,u,l,f,m,w)=>{if(function ws(r){return!(!Array.isArray(r)||1!==r.length)&&!0===r[0].data?.__ignore_ng_zone__}(w))return o.invokeTask(l,f,m,w);try{return kv(r),o.invokeTask(l,f,m,w)}finally{(r.shouldCoalesceEventChangeDetection&&"eventTask"===f.type||r.shouldCoalesceRunChangeDetection)&&s(),Fv(r)}},onInvoke:(o,u,l,f,m,w,E)=>{try{return kv(r),o.invoke(l,f,m,w,E)}finally{r.shouldCoalesceRunChangeDetection&&s(),Fv(r)}},onHasTask:(o,u,l,f)=>{o.hasTask(l,f),u===l&&("microTask"==f.change?(r._hasPendingMicrotasks=f.microTask,vu(r),xh(r)):"macroTask"==f.change&&(r.hasPendingMacrotasks=f.macroTask))},onHandleError:(o,u,l,f)=>(o.handleError(l,f),r.runOutsideAngular(()=>r.onError.emit(f)),!1)})}(l)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!br.isInAngularZone())throw new K(909,!1)}static assertNotInAngularZone(){if(br.isInAngularZone())throw new K(909,!1)}run(s,o,u){return this._inner.run(s,o,u)}runTask(s,o,u,l){const f=this._inner,m=f.scheduleEventTask("NgZoneEvent: "+l,s,oE,Rv,Rv);try{return f.runTask(m,o,u)}finally{f.cancelTask(m)}}runGuarded(s,o,u){return this._inner.runGuarded(s,o,u)}runOutsideAngular(s){return this._outer.run(s)}}const oE={};function xh(r){if(0==r._nesting&&!r.hasPendingMicrotasks&&!r.isStable)try{r._nesting++,r.onMicrotaskEmpty.emit(null)}finally{if(r._nesting--,!r.hasPendingMicrotasks)try{r.runOutsideAngular(()=>r.onStable.emit(null))}finally{r.isStable=!0}}}function vu(r){r.hasPendingMicrotasks=!!(r._hasPendingMicrotasks||(r.shouldCoalesceEventChangeDetection||r.shouldCoalesceRunChangeDetection)&&-1!==r.lastRequestAnimationFrameId)}function kv(r){r._nesting++,r.isStable&&(r.isStable=!1,r.onUnstable.emit(null))}function Fv(r){r._nesting--,xh(r)}class cE{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Xi,this.onMicrotaskEmpty=new Xi,this.onStable=new Xi,this.onError=new Xi}run(s,o,u){return s.apply(o,u)}runGuarded(s,o,u){return s.apply(o,u)}runOutsideAngular(s){return s()}runTask(s,o,u,l){return s.apply(o,u)}}const Lv=new sn("",{providedIn:"root",factory:Ap});function Ap(){const r=bt(br);let s=!0;const o=new R.y(l=>{s=r.isStable&&!r.hasPendingMacrotasks&&!r.hasPendingMicrotasks,r.runOutsideAngular(()=>{l.next(s),l.complete()})}),u=new R.y(l=>{let f;r.runOutsideAngular(()=>{f=r.onStable.subscribe(()=>{br.assertNotInAngularZone(),queueMicrotask(()=>{!s&&!r.hasPendingMacrotasks&&!r.hasPendingMicrotasks&&(s=!0,l.next(!0))})})});const m=r.onUnstable.subscribe(()=>{br.assertInAngularZone(),s&&(s=!1,r.runOutsideAngular(()=>{l.next(!1)}))});return()=>{f.unsubscribe(),m.unsubscribe()}});return(0,oe.T)(o,u.pipe((0,fe.B)()))}let Jm=(()=>{class r{constructor(){this.renderDepth=0,this.handler=null}begin(){this.handler?.validateBegin(),this.renderDepth++}end(){this.renderDepth--,0===this.renderDepth&&this.handler?.execute()}ngOnDestroy(){this.handler?.destroy(),this.handler=null}static#e=this.\u0275prov=Mt({token:r,providedIn:"root",factory:()=>new r})}return r})();function ql(r){for(;r;){r[mt]|=64;const s=Ve(r);if($o(r)&&!s)return r;r=s}return null}const Vv=new sn("",{providedIn:"root",factory:()=>!1});let ry=null;function Bv(r,s){return r[s]??yE()}function gE(r,s){const o=yE();o.producerNode?.length&&(r[s]=ry,o.lView=r,ry=mE())}const iy={...oo,consumerIsAlwaysLive:!0,consumerMarkedDirty:r=>{ql(r.lView)},lView:null};function mE(){return Object.create(iy)}function yE(){return ry??=mE(),ry}const St={};function Uv(r){Fr(Bt(),Te(),mr()+r,!1)}function Fr(r,s,o,u){if(!u)if(3==(3&s[mt])){const f=r.preOrderCheckHooks;null!==f&&ea(s,f,o)}else{const f=r.preOrderHooks;null!==f&&ic(s,f,0,o)}Pi(o)}function To(r,s=gt.Default){const o=Te();return null===o?yt(r,s):Qa(rr(),o,pe(r),s)}function sy(r,s,o,u,l,f,m,w,E,S,x){const F=s.blueprint.slice();return F[fn]=l,F[mt]=140|u,(null!==S||r&&2048&r[mt])&&(F[mt]|=2048),Vf(F),F[pn]=F[ps]=r,F[an]=o,F[jo]=m||r&&r[jo],F[_t]=w||r&&r[_t],F[fs]=E||r&&r[fs]||null,F[cr]=f,F[Ts]=function q_(){return z_++}(),F[Di]=x,F[gs]=S,F[gn]=2==s.type?r[gn]:F,F}function Pe(r,s,o,u,l){let f=r.data[s];if(null===f)f=function qn(r,s,o,u,l){const f=Xu(),m=po(),E=r.data[s]=function Hb(r,s,o,u,l,f){let m=s?s.injectorIndex:-1,w=0;return function Zi(){return null!==vt.skipHydrationRootTNode}()&&(w|=128),{type:o,index:u,insertBeforeIndex:null,injectorIndex:m,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:w,providerIndexes:0,value:l,attrs:f,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:s,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,m?f:f&&f.parent,o,s,u,l);return null===r.firstChild&&(r.firstChild=E),null!==f&&(m?null==f.child&&null!==E.parent&&(f.child=E):null===f.next&&(f.next=E,E.prev=f)),E}(r,s,o,u,l),function $d(){return vt.lFrame.inI18n}()&&(f.flags|=32);else if(64&f.type){f.type=o,f.value=u,f.attrs=l;const m=function Yo(){const r=vt.lFrame,s=r.currentTNode;return r.isParent?s:s.parent}();f.injectorIndex=null===m?-1:m.injectorIndex}return Ns(f,!0),f}function bi(r,s,o,u){if(0===o)return-1;const l=s.length;for(let f=0;f<o;f++)s.push(u),r.blueprint.push(u),r.data.push(null);return l}function oy(r,s,o,u,l){const f=Bv(s,Pa),m=mr(),w=2&u;try{Pi(-1),w&&s.length>Pt&&Fr(r,s,Pt,!1),Ni(w?2:0,l);const S=w?f:null,x=xd(S);try{null!==S&&(S.dirty=!1),o(u,l)}finally{tr(S,x)}}finally{w&&null===s[Pa]&&gE(s,Pa),Pi(m),Ni(w?3:1,l)}}function rt(r,s,o){if(Hu(s)){const u=Wr(null);try{const f=s.directiveEnd;for(let m=s.directiveStart;m<f;m++){const w=r.data[m];w.contentQueries&&w.contentQueries(1,o[m],m)}}finally{Wr(u)}}}function ct(r,s,o){gr()&&(function zb(r,s,o,u){const l=o.directiveStart,f=o.directiveEnd;ro(o)&&function Pp(r,s,o){const u=fr(s,r),l=Qe(o);let m=16;o.signals?m=4096:o.onPush&&(m=64);const w=Ph(r,sy(r,l,null,m,u,s,null,r[jo].rendererFactory.createRenderer(u,o),null,null,null));r[s.index]=w}(s,o,r.data[l+o.componentOffset]),r.firstCreatePass||ks(o,s),Pr(u,s);const m=o.initialInputs;for(let w=l;w<f;w++){const E=r.data[w],S=Qi(s,r,w,o);Pr(S,s),null!==m&&Is(0,w-l,S,E,0,m),qr(E)&&(pr(o.index,s)[an]=Qi(s,r,w,o))}}(r,s,o,fr(o,s)),64==(64&o.flags)&&Wn(r,s,o))}function Hv(r,s,o=fr){const u=s.localNames;if(null!==u){let l=s.index+1;for(let f=0;f<u.length;f+=2){const m=u[f+1],w=-1===m?o(s,r):r[m];r[l++]=w}}}function Qe(r){const s=r.tView;return null===s||s.incompleteFirstPass?r.tView=se(1,null,r.template,r.decls,r.vars,r.directiveDefs,r.pipeDefs,r.viewQuery,r.schemas,r.consts,r.id):s}function se(r,s,o,u,l,f,m,w,E,S,x){const F=Pt+u,j=F+l,W=function Se(r,s){const o=[];for(let u=0;u<s;u++)o.push(u<r?null:St);return o}(F,j),de="function"==typeof S?S():S;return W[Je]={type:r,blueprint:W,template:o,queries:null,viewQuery:w,declTNode:s,data:W.slice().fill(null,F),bindingStartIndex:F,expandoStartIndex:j,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof f?f():f,pipeRegistry:"function"==typeof m?m():m,firstChild:null,schemas:E,consts:de,incompleteFirstPass:!1,ssrId:x}}let vE=r=>null;function $v(r,s,o,u){for(let l in r)if(r.hasOwnProperty(l)){o=null===o?{}:o;const f=r[l];null===u?wE(o,s,l,f):u.hasOwnProperty(l)&&wE(o,s,u[l],f)}return o}function wE(r,s,o,u){r.hasOwnProperty(o)?r[o].push(s,u):r[o]=[s,u]}function es(r,s,o,u,l,f,m,w){const E=fr(s,o);let x,S=s.inputs;!w&&null!=S&&(x=S[u])?(qv(r,o,x,u,l),ro(s)&&function Rt(r,s){const o=pr(s,r);16&o[mt]||(o[mt]|=64)}(o,s.index)):3&s.type&&(u=function $b(r){return"class"===r?"className":"for"===r?"htmlFor":"formaction"===r?"formAction":"innerHtml"===r?"innerHTML":"readonly"===r?"readOnly":"tabindex"===r?"tabIndex":r}(u),l=null!=m?m(l,s.value||"",u):l,f.setProperty(E,u,l))}function bn(r,s,o,u){if(gr()){const l=null===u?null:{"":-1},f=function ay(r,s){const o=r.directiveRegistry;let u=null,l=null;if(o)for(let f=0;f<o.length;f++){const m=o[f];if(Qc(s,m.selectors,!1))if(u||(u=[]),qr(m))if(null!==m.findHostDirectiveDefs){const w=[];l=l||new Map,m.findHostDirectiveDefs(m,w,l),u.unshift(...w,m),Op(r,s,w.length)}else u.unshift(m),Op(r,s,0);else l=l||new Map,m.findHostDirectiveDefs?.(m,u,l),u.push(m)}return null===u?null:[u,l]}(r,o);let m,w;null===f?m=w=null:[m,w]=f,null!==m&&ht(r,s,o,m,l,w),l&&function Wl(r,s,o){if(s){const u=r.localNames=[];for(let l=0;l<s.length;l+=2){const f=o[s[l+1]];if(null==f)throw new K(-301,!1);u.push(s[l],f)}}}(o,u,l)}o.mergedAttrs=Ys(o.mergedAttrs,o.attrs)}function ht(r,s,o,u,l,f){for(let S=0;S<u.length;S++)uc(ks(o,s),r,u[S].type);!function uy(r,s,o){r.flags|=1,r.directiveStart=s,r.directiveEnd=s+o,r.providerIndexes=s}(o,r.data.length,u.length);for(let S=0;S<u.length;S++){const x=u[S];x.providersResolver&&x.providersResolver(x)}let m=!1,w=!1,E=bi(r,s,u.length,null);for(let S=0;S<u.length;S++){const x=u[S];o.mergedAttrs=Ys(o.mergedAttrs,x.hostAttrs),Wb(r,o,s,E,x),qb(E,x,l),null!==x.contentQueries&&(o.flags|=4),(null!==x.hostBindings||null!==x.hostAttrs||0!==x.hostVars)&&(o.flags|=64);const F=x.type.prototype;!m&&(F.ngOnChanges||F.ngOnInit||F.ngDoCheck)&&((r.preOrderHooks??=[]).push(o.index),m=!0),!w&&(F.ngOnChanges||F.ngDoCheck)&&((r.preOrderCheckHooks??=[]).push(o.index),w=!0),E++}!function OA(r,s,o){const l=s.directiveEnd,f=r.data,m=s.attrs,w=[];let E=null,S=null;for(let x=s.directiveStart;x<l;x++){const F=f[x],j=o?o.get(F):null,de=j?j.outputs:null;E=$v(F.inputs,x,E,j?j.inputs:null),S=$v(F.outputs,x,S,de);const Re=null===E||null===m||Qs(s)?null:IE(E,x,m);w.push(Re)}null!==E&&(E.hasOwnProperty("class")&&(s.flags|=8),E.hasOwnProperty("style")&&(s.flags|=16)),s.initialInputs=w,s.inputs=E,s.outputs=S}(r,o,f)}function Wn(r,s,o){const u=o.directiveStart,l=o.directiveEnd,f=o.index,m=function Qg(){return vt.lFrame.currentDirectiveIndex}();try{Pi(f);for(let w=u;w<l;w++){const E=r.data[w],S=s[w];tc(w),(null!==E.hostBindings||0!==E.hostVars||null!==E.hostAttrs)&&Ke(E,S)}}finally{Pi(-1),tc(m)}}function Ke(r,s){null!==r.hostBindings&&r.hostBindings(1,s)}function Op(r,s,o){s.componentOffset=o,(r.components??=[]).push(s.index)}function qb(r,s,o){if(o){if(s.exportAs)for(let u=0;u<s.exportAs.length;u++)o[s.exportAs[u]]=r;qr(s)&&(o[""]=r)}}function Wb(r,s,o,u,l){r.data[u]=l;const f=l.factory||(l.factory=io(l.type)),m=new In(f,qr(l),To);r.blueprint[u]=m,o[u]=m,function Np(r,s,o,u,l){const f=l.hostBindings;if(f){let m=r.hostBindingOpCodes;null===m&&(m=r.hostBindingOpCodes=[]);const w=~s.index;(function Jt(r){let s=r.length;for(;s>0;){const o=r[--s];if("number"==typeof o&&o<0)return o}return 0})(m)!=w&&m.push(w),m.push(o,u,f)}}(r,s,u,bi(r,o,l.hostVars,St),l)}function So(r,s,o,u,l,f){const m=fr(r,s);!function cy(r,s,o,u,l,f,m){if(null==f)r.removeAttribute(s,l,o);else{const w=null==m?Y(f):m(f,u||"",l);r.setAttribute(s,l,w,o)}}(s[_t],m,f,r.value,o,u,l)}function Is(r,s,o,u,l,f){const m=f[s];if(null!==m)for(let w=0;w<m.length;)ly(u,o,m[w++],m[w++],m[w++])}function ly(r,s,o,u,l){const f=Wr(null);try{const m=r.inputTransforms;null!==m&&m.hasOwnProperty(u)&&(l=m[u].call(s,l)),null!==r.setInput?r.setInput(s,l,o,u):s[u]=l}finally{Wr(f)}}function IE(r,s,o){let u=null,l=0;for(;l<o.length;){const f=o[l];if(0!==f)if(5!==f){if("number"==typeof f)break;if(r.hasOwnProperty(f)){null===u&&(u=[]);const m=r[f];for(let w=0;w<m.length;w+=2)if(m[w]===s){u.push(f,m[w+1],o[l+1]);break}}l+=2}else l+=2;else l+=4}return u}function Gv(r,s,o,u){return[r,!0,!1,s,null,0,u,o,null,null,null]}function Eu(r,s){const o=r.contentQueries;if(null!==o)for(let u=0;u<o.length;u+=2){const f=o[u+1];if(-1!==f){const m=r.data[f];qd(o[u]),m.contentQueries(2,s[f],f)}}}function Ph(r,s){return r[lr]?r[bf][Nr]=s:r[lr]=s,r[bf]=s,s}function X(r,s,o){qd(0);const u=Wr(null);try{s(r,o)}finally{Wr(u)}}function $s(r){return r[Oa]||(r[Oa]=[])}function EE(r){return r.cleanup||(r.cleanup=[])}function Du(r,s){const o=r[fs],u=o?o.get(ga,null):null;u&&u.handleError(s)}function qv(r,s,o,u,l){for(let f=0;f<o.length;){const m=o[f++],w=o[f++];ly(r.data[m],s[m],u,w,l)}}function DE(r,s){const o=pr(s,r),u=o[Je];!function Wv(r,s){for(let o=s.length;o<r.blueprint.length;o++)s.push(r.blueprint[o])}(u,o);const l=o[fn];null!==l&&null===o[Di]&&(o[Di]=bv(l,o[fs])),Zv(u,o,o[an])}function Zv(r,s,o){Yr(s);try{const u=r.viewQuery;null!==u&&X(1,u,o);const l=r.template;null!==l&&oy(r,s,l,1,o),r.firstCreatePass&&(r.firstCreatePass=!1),r.staticContentQueries&&Eu(r,s),r.staticViewQueries&&X(2,r.viewQuery,o);const f=r.components;null!==f&&function Zb(r,s){for(let o=0;o<s.length;o++)DE(r,s[o])}(s,f)}catch(u){throw r.firstCreatePass&&(r.incompleteFirstPass=!0,r.firstCreatePass=!1),u}finally{s[mt]&=-5,za()}}let ts=(()=>{class r{constructor(){this.all=new Set,this.queue=new Map}create(o,u,l){const f=typeof Zone>"u"?null:Zone.current,m=function Wg(r,s,o){const u=Object.create(Nf);o&&(u.consumerAllowSignalWrites=!0),u.fn=r,u.schedule=s;const l=m=>{u.cleanupFn=m};return u.ref={notify:()=>La(u),run:()=>{if(u.dirty=!1,u.hasRun&&!ul(u))return;u.hasRun=!0;const m=xd(u);try{u.cleanupFn(),u.cleanupFn=pl,u.fn(l)}finally{tr(u,m)}},cleanup:()=>u.cleanupFn()},u.ref}(o,S=>{this.all.has(S)&&this.queue.set(S,f)},l);let w;this.all.add(m),m.notify();const E=()=>{m.cleanup(),w?.(),this.all.delete(m),this.queue.delete(m)};return w=u?.onDestroy(E),{destroy:E}}flush(){if(0!==this.queue.size)for(const[o,u]of this.queue)this.queue.delete(o),u?u.run(()=>o.run()):o.run()}get isQueueEmpty(){return 0===this.queue.size}static#e=this.\u0275prov=Mt({token:r,providedIn:"root",factory:()=>new r})}return r})();function Mc(r,s,o){let u=o?r.styles:null,l=o?r.classes:null,f=0;if(null!==s)for(let m=0;m<s.length;m++){const w=s[m];"number"==typeof w?f=w:1==f?l=qe(l,w):2==f&&(u=qe(u,w+": "+s[++m]+";"))}o?r.styles=u:r.stylesWithoutHost=u,o?r.classes=l:r.classesWithoutHost=l}function kh(r,s,o,u,l=!1){for(;null!==o;){const f=s[o.index];null!==f&&u.push(Kt(f)),Er(f)&&fi(f,u);const m=o.type;if(8&m)kh(r,s,o.child,u);else if(32&m){const w=Z(o,s);let E;for(;E=w();)u.push(E)}else if(16&m){const w=lp(s,o);if(Array.isArray(w))u.push(...w);else{const E=Ve(s[gn]);kh(E[Je],E,w,u,!0)}}o=l?o.projectionNext:o.next}return u}function fi(r,s){for(let o=hr;o<r.length;o++){const u=r[o],l=u[Je].firstChild;null!==l&&kh(u[Je],u,l,s)}r[Jn]!==r[fn]&&s.push(r[Jn])}function dy(r,s,o,u=!0){const l=s[jo],f=l.rendererFactory,m=l.afterRenderEventManager;f.begin?.(),m?.begin();try{Kv(r,s,r.template,o)}catch(E){throw u&&Du(s,E),E}finally{f.end?.(),l.effectManager?.flush(),m?.end()}}function Kv(r,s,o,u){const l=s[mt];if(256!=(256&l)){s[jo].effectManager?.flush(),Yr(s);try{Vf(s),function Hd(r){return vt.lFrame.bindingIndex=r}(r.bindingStartIndex),null!==o&&oy(r,s,o,2,u);const m=3==(3&l);if(m){const S=r.preOrderCheckHooks;null!==S&&ea(s,S,null)}else{const S=r.preOrderHooks;null!==S&&ic(s,S,0,null),Za(s,0)}if(function CE(r){for(let s=Mn(r);null!==s;s=_s(s)){if(!s[ju])continue;const o=s[Xn];for(let u=0;u<o.length;u++){yl(o[u])}}}(s),kp(s,2),null!==r.contentQueries&&Eu(r,s),m){const S=r.contentCheckHooks;null!==S&&ea(s,S)}else{const S=r.contentHooks;null!==S&&ic(s,S,1),Za(s,1)}!function jv(r,s){const o=r.hostBindingOpCodes;if(null===o)return;const u=Bv(s,As);try{for(let l=0;l<o.length;l++){const f=o[l];if(f<0)Pi(~f);else{const m=f,w=o[++l],E=o[++l];ec(w,m),u.dirty=!1;const S=xd(u);try{E(2,s[m])}finally{tr(u,S)}}}}finally{null===s[As]&&gE(s,As),Pi(-1)}}(r,s);const w=r.components;null!==w&&TE(s,w,0);const E=r.viewQuery;if(null!==E&&X(2,E,u),m){const S=r.viewCheckHooks;null!==S&&ea(s,S)}else{const S=r.viewHooks;null!==S&&ic(s,S,2),Za(s,2)}!0===r.firstUpdatePass&&(r.firstUpdatePass=!1),s[mt]&=-73,Zu(s)}finally{za()}}}function kp(r,s){for(let o=Mn(r);null!==o;o=_s(o))for(let u=hr;u<o.length;u++)bE(o[u],s)}function Yb(r,s,o){bE(pr(s,r),o)}function bE(r,s){if(!function Ko(r){return 128==(128&r[mt])}(r))return;const o=r[Je],u=r[mt];if(80&u&&0===s||1024&u||2===s)Kv(o,r,o.template,r[an]);else if(r[eo]>0){kp(r,1);const l=o.components;null!==l&&TE(r,l,1)}}function TE(r,s,o){for(let u=0;u<s.length;u++)Yb(r,s[u],o)}class Fp{get rootNodes(){const s=this._lView,o=s[Je];return kh(o,s,o.firstChild,[])}constructor(s,o){this._lView=s,this._cdRefInjectingView=o,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[an]}set context(s){this._lView[an]=s}get destroyed(){return 256==(256&this._lView[mt])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const s=this._lView[pn];if(Er(s)){const o=s[8],u=o?o.indexOf(this):-1;u>-1&&(ap(s,u),Ji(o,u))}this._attachedToViewContainer=!1}lu(this._lView[Je],this._lView)}onDestroy(s){!function un(r,s){if(256==(256&r[mt]))throw new K(911,!1);null===r[Ss]&&(r[Ss]=[]),r[Ss].push(s)}(this._lView,s)}markForCheck(){ql(this._cdRefInjectingView||this._lView)}detach(){this._lView[mt]&=-129}reattach(){this._lView[mt]|=128}detectChanges(){dy(this._lView[Je],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new K(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function sp(r,s){dp(r,s,s[_t],2,null,null)}(this._lView[Je],this._lView)}attachToAppRef(s){if(this._attachedToViewContainer)throw new K(902,!1);this._appRef=s}}class Qb extends Fp{constructor(s){super(s),this._view=s}detectChanges(){const s=this._view;dy(s[Je],s,s[an],!1)}checkNoChanges(){}get context(){return null}}class SE extends Hm{constructor(s){super(),this.ngModule=s}resolveComponentFactory(s){const o=Ht(s);return new Lp(o,this.ngModule)}}function AE(r){const s=[];for(let o in r)r.hasOwnProperty(o)&&s.push({propName:r[o],templateName:o});return s}class Xb{constructor(s,o){this.injector=s,this.parentInjector=o}get(s,o,u){u=Dn(u);const l=this.injector.get(s,Mv,u);return l!==Mv||o===Mv?l:this.parentInjector.get(s,o,u)}}class Lp extends Tv{get inputs(){const s=this.componentDef,o=s.inputTransforms,u=AE(s.inputs);if(null!==o)for(const l of u)o.hasOwnProperty(l.propName)&&(l.transform=o[l.propName]);return u}get outputs(){return AE(this.componentDef.outputs)}constructor(s,o){super(),this.componentDef=s,this.ngModule=o,this.componentType=s.type,this.selector=function Dd(r){return r.map(Ed).join(",")}(s.selectors),this.ngContentSelectors=s.ngContentSelectors?s.ngContentSelectors:[],this.isBoundToModule=!!o}create(s,o,u,l){let f=(l=l||this.ngModule)instanceof fa?l:l?.injector;f&&null!==this.componentDef.getStandaloneInjector&&(f=this.componentDef.getStandaloneInjector(f)||f);const m=f?new Xb(s,f):s,w=m.get(Th,null);if(null===w)throw new K(407,!1);const F={rendererFactory:w,sanitizer:m.get(JI,null),effectManager:m.get(ts,null),afterRenderEventManager:m.get(Jm,null)},j=w.createRenderer(null,this.componentDef),W=this.componentDef.selectors[0][0]||"div",de=u?function Lr(r,s,o,u){const f=u.get(Vv,!1)||o===Ae.ShadowDom,m=r.selectRootElement(s,f);return function _E(r){vE(r)}(m),m}(j,u,this.componentDef.encapsulation,m):uu(j,W,function Jb(r){const s=r.toLowerCase();return"svg"===s?Fd:"math"===s?"math":null}(W)),dt=this.componentDef.signals?4608:this.componentDef.onPush?576:528;let Ee=null;null!==de&&(Ee=bv(de,m,!0));const Ot=se(0,null,null,1,0,null,null,null,null,null,null),$t=sy(null,Ot,null,dt,null,null,F,j,m,null,Ee);let dn,Hi;Yr($t);try{const ku=this.componentDef;let Fu,Ca=null;ku.findHostDirectiveDefs?(Fu=[],Ca=new Map,ku.findHostDirectiveDefs(ku,Fu,Ca),Fu.push(ku)):Fu=[ku];const YS=function tT(r,s){const o=r[Je],u=Pt;return r[u]=s,Pe(o,u,2,"#host",null)}($t,de),QS=function nT(r,s,o,u,l,f,m){const w=l[Je];!function rT(r,s,o,u){for(const l of r)s.mergedAttrs=Ys(s.mergedAttrs,l.hostAttrs);null!==s.mergedAttrs&&(Mc(s,s.mergedAttrs,!0),null!==o&&Y_(u,o,s))}(u,r,s,m);let E=null;null!==s&&(E=bv(s,l[fs]));const S=f.rendererFactory.createRenderer(s,o);let x=16;o.signals?x=4096:o.onPush&&(x=64);const F=sy(l,Qe(o),null,x,l[r.index],r,f,S,null,null,E);return w.firstCreatePass&&Op(w,r,u.length-1),Ph(l,F),l[r.index]=F}(YS,de,ku,Fu,$t,F,j);Hi=ml(Ot,Pt),de&&function ME(r,s,o,u){if(u)Vo(r,o,["ng-version",Ah.full]);else{const{attrs:l,classes:f}=function Ii(r){const s=[],o=[];let u=1,l=2;for(;u<r.length;){let f=r[u];if("string"==typeof f)2===l?""!==f&&s.push(f,r[++u]):8===l&&o.push(f);else{if(!zr(l))break;l=f}u++}return{attrs:s,classes:o}}(s.selectors[0]);l&&Vo(r,o,l),f&&f.length>0&&RI(r,o,f.join(" "))}}(j,ku,de,u),void 0!==o&&function sT(r,s,o){const u=r.projection=[];for(let l=0;l<s.length;l++){const f=o[l];u.push(null!=f?Array.from(f):null)}}(Hi,this.ngContentSelectors,o),dn=function iT(r,s,o,u,l,f){const m=rr(),w=l[Je],E=fr(m,l);ht(w,l,m,o,null,u);for(let x=0;x<o.length;x++)Pr(Qi(l,w,m.directiveStart+x,m),l);Wn(w,l,m),E&&Pr(E,l);const S=Qi(l,w,m.directiveStart+m.componentOffset,m);if(r[an]=l[an]=S,null!==f)for(const x of f)x(S,s);return rt(w,m,r),S}(QS,ku,Fu,Ca,$t,[xE]),Zv(Ot,$t,null)}finally{za()}return new eT(this.componentType,dn,bh(Hi,$t),$t,Hi)}}class eT extends YI{constructor(s,o,u,l,f){super(),this.location=u,this._rootLView=l,this._tNode=f,this.previousInputValues=null,this.instance=o,this.hostView=this.changeDetectorRef=new Qb(l),this.componentType=s}setInput(s,o){const u=this._tNode.inputs;let l;if(null!==u&&(l=u[s])){if(this.previousInputValues??=new Map,this.previousInputValues.has(s)&&Object.is(this.previousInputValues.get(s),o))return;const f=this._rootLView;qv(f[Je],f,l,s,o),this.previousInputValues.set(s,o),ql(pr(this._tNode.index,f))}}get injector(){return new En(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(s){this.hostView.onDestroy(s)}}function xE(){const r=rr();Xo(Te()[Je],r)}function Qv(r){let s=function Yv(r){return Object.getPrototypeOf(r.prototype).constructor}(r.type),o=!0;const u=[r];for(;s;){let l;if(qr(r))l=s.\u0275cmp||s.\u0275dir;else{if(s.\u0275cmp)throw new K(903,!1);l=s.\u0275dir}if(l){if(o){u.push(l);const m=r;m.inputs=vr(r.inputs),m.inputTransforms=vr(r.inputTransforms),m.declaredInputs=vr(r.declaredInputs),m.outputs=vr(r.outputs);const w=l.hostBindings;w&&OE(r,w);const E=l.viewQuery,S=l.contentQueries;if(E&&NE(r,E),S&&xc(r,S),H(r.inputs,l.inputs),H(r.declaredInputs,l.declaredInputs),H(r.outputs,l.outputs),null!==l.inputTransforms&&(null===m.inputTransforms&&(m.inputTransforms={}),H(m.inputTransforms,l.inputTransforms)),qr(l)&&l.data.animation){const x=r.data;x.animation=(x.animation||[]).concat(l.data.animation)}}const f=l.features;if(f)for(let m=0;m<f.length;m++){const w=f[m];w&&w.ngInherit&&w(r),w===Qv&&(o=!1)}}s=Object.getPrototypeOf(s)}!function Jv(r){let s=0,o=null;for(let u=r.length-1;u>=0;u--){const l=r[u];l.hostVars=s+=l.hostVars,l.hostAttrs=Ys(l.hostAttrs,o=Ys(o,l.hostAttrs))}}(u)}function vr(r){return r===nt?{}:r===Ge?[]:r}function NE(r,s){const o=r.viewQuery;r.viewQuery=o?(u,l)=>{s(u,l),o(u,l)}:s}function xc(r,s){const o=r.contentQueries;r.contentQueries=o?(u,l,f)=>{s(u,l,f),o(u,l,f)}:s}function OE(r,s){const o=r.hostBindings;r.hostBindings=o?(u,l)=>{s(u,l),o(u,l)}:s}function Ao(r){return!!Fh(r)&&(Array.isArray(r)||!(r instanceof Map)&&Symbol.iterator in r)}function Fh(r){return null!==r&&("function"==typeof r||"object"==typeof r)}function Zn(r,s,o){return!Object.is(r[s],o)&&(r[s]=o,!0)}function Gs(r,s,o,u){const l=Te();return Zn(l,go(),s)&&(Bt(),So(Yt(),l,r,s,o,u)),Gs}function Es(r,s,o,u){return Zn(r,go(),o)?s+Y(o)+u:St}function l0(r,s,o,u,l,f,m,w){const E=Te(),S=Bt(),x=r+Pt,F=S.firstCreatePass?function Tu(r,s,o,u,l,f,m,w,E){const S=s.consts,x=Pe(s,r,4,m||null,Zr(S,w));bn(s,o,x,Zr(S,E)),Xo(s,x);const F=x.tView=se(2,x,u,l,f,s.directiveRegistry,s.pipeRegistry,null,s.schemas,S,null);return null!==s.queries&&(s.queries.template(s,x),F.queries=s.queries.embeddedTView(x)),x}(x,S,E,s,o,u,l,f,m):S.data[x];Ns(F,!1);const j=ed(S,E,F,r);Ps()&&ph(S,E,j,F),Pr(j,E),Ph(E,E[x]=Gv(j,E,j,F)),oi(F)&&ct(S,E,F),null!=m&&Hv(E,F,w)}let ed=function d0(r,s,o,u){return Dr(!0),s[_t].createComment("")};function gi(r,s,o){const u=Te();return Zn(u,go(),s)&&es(Bt(),Yt(),u,r,s,u[_t],o,!1),gi}function Gp(r,s,o,u,l){const m=l?"class":"style";qv(r,o,s.inputs[m],m,u)}function Pc(r,s,o,u){const l=Te(),f=Bt(),m=Pt+r,w=l[_t],E=f.firstCreatePass?function vy(r,s,o,u,l,f){const m=s.consts,E=Pe(s,r,2,u,Zr(m,l));return bn(s,o,E,Zr(m,f)),null!==E.attrs&&Mc(E,E.attrs,!1),null!==E.mergedAttrs&&Mc(E,E.mergedAttrs,!0),null!==s.queries&&s.queries.elementStart(s,E),E}(m,f,l,s,o,u):f.data[m],S=Hh(f,l,E,w,s,r);l[m]=S;const x=oi(E);return Ns(E,!0),Y_(w,S,E),32!=(32&E.flags)&&Ps()&&ph(f,l,S,E),0===function Ku(){return vt.lFrame.elementDepthCount}()&&Pr(S,l),function nr(){vt.lFrame.elementDepthCount++}(),x&&(ct(f,l,E),rt(f,E,l)),null!==u&&Hv(l,E),Pc}function zp(){let r=rr();po()?function vl(){vt.lFrame.isParent=!1}():(r=r.parent,Ns(r,!1));const s=r;(function _l(r){return vt.skipHydrationRootTNode===r})(s)&&function jd(){vt.skipHydrationRootTNode=null}(),function Ud(){vt.lFrame.elementDepthCount--}();const o=Bt();return o.firstCreatePass&&(Xo(o,r),Hu(r)&&o.queries.elementEnd(r)),null!=s.classesWithoutHost&&function Dl(r){return 0!=(8&r.flags)}(s)&&Gp(o,s,Te(),s.classesWithoutHost,!0),null!=s.stylesWithoutHost&&function Hf(r){return 0!=(16&r.flags)}(s)&&Gp(o,s,Te(),s.stylesWithoutHost,!1),zp}function qp(r,s,o,u){return Pc(r,s,o,u),zp(),qp}let Hh=(r,s,o,u,l,f)=>(Dr(!0),uu(u,l,function Il(){return vt.lFrame.currentNamespace}()));function No(){return Te()}function wy(r){return!!r&&"function"==typeof r.then}function $h(r){return!!r&&"function"==typeof r.subscribe}function m0(r,s,o,u){const l=Te(),f=Bt(),m=rr();return function WE(r,s,o,u,l,f,m){const w=oi(u),S=r.firstCreatePass&&EE(r),x=s[an],F=$s(s);let j=!0;if(3&u.type||m){const Re=fr(u,s),ze=m?m(Re):Re,dt=F.length,Ee=m?$t=>m(Kt($t[u.index])):u.index;let Ot=null;if(!m&&w&&(Ot=function Vt(r,s,o,u){const l=r.cleanup;if(null!=l)for(let f=0;f<l.length-1;f+=2){const m=l[f];if(m===o&&l[f+1]===u){const w=s[Oa],E=l[f+2];return w.length>E?w[E]:null}"string"==typeof m&&(f+=2)}return null}(r,s,l,u.index)),null!==Ot)(Ot.__ngLastListenerFn__||Ot).__ngNextListenerFn__=f,Ot.__ngLastListenerFn__=f,j=!1;else{f=y0(u,s,x,f,!1);const $t=o.listen(ze,l,f);F.push(f,$t),S&&S.push(l,Ee,dt,dt+1)}}else f=y0(u,s,x,f,!1);const W=u.outputs;let de;if(j&&null!==W&&(de=W[l])){const Re=de.length;if(Re)for(let ze=0;ze<Re;ze+=2){const dn=s[de[ze]][de[ze+1]].subscribe(f),Hi=F.length;F.push(f,dn),S&&S.push(l,u.index,Hi,-(Hi+1))}}}(f,l,l[_t],m,r,s,u),m0}function Iy(r,s,o,u){try{return Ni(6,s,o),!1!==o(u)}catch(l){return Du(r,l),!1}finally{Ni(7,s,o)}}function y0(r,s,o,u,l){return function f(m){if(m===Function)return u;ql(r.componentOffset>-1?pr(r.index,s):s);let E=Iy(s,o,u,m),S=f.__ngNextListenerFn__;for(;S;)E=Iy(s,o,S,m)&&E,S=S.__ngNextListenerFn__;return l&&!1===E&&m.preventDefault(),E}}function _0(r=1){return function rc(r){return(vt.lFrame.contextLView=function qa(r,s){for(;r>0;)s=s[ps],r--;return s}(r,vt.lFrame.contextLView))[an]}(r)}function v0(r,s,o){return Dy(r,"",s,"",o),v0}function Dy(r,s,o,u,l){const f=Te(),m=Es(f,s,o,u);return m!==St&&es(Bt(),Yt(),f,r,m,f[_t],l,!1),Dy}function Fc(r,s){return r<<17|s<<2}function Lc(r){return r>>17&32767}function Gh(r){return 2|r}function va(r){return(131068&r)>>2}function Cy(r,s){return-131069&r|s<<2}function id(r){return 1|r}function C0(r,s,o,u,l){const f=r[o+1],m=null===s;let w=u?Lc(f):va(f),E=!1;for(;0!==w&&(!1===E||m);){const x=r[w+1];KE(r[w],s)&&(E=!0,r[w+1]=u?id(x):Gh(x)),w=u?Lc(x):va(x)}E&&(r[o+1]=u?Gh(f):id(f))}function KE(r,s){return null===r||null==s||(Array.isArray(r)?r[1]:r)===s||!(!Array.isArray(r)||"string"!=typeof s)&&mc(r,s)>=0}function Ty(r,s){return function Ui(r,s,o,u){const l=Te(),f=Bt(),m=function Os(r){const s=vt.lFrame,o=s.bindingIndex;return s.bindingIndex=s.bindingIndex+r,o}(2);f.firstUpdatePass&&function O0(r,s,o,u){const l=r.data;if(null===l[o+1]){const f=l[mr()],m=function N0(r,s){return s>=r.expandoStartIndex}(r,o);(function L0(r,s){return 0!=(r.flags&(s?8:16))})(f,u)&&null===s&&!m&&(s=!1),s=function eD(r,s,o,u){const l=function zd(r){const s=vt.lFrame.currentDirectiveIndex;return-1===s?null:r[s]}(r);let f=u?s.residualClasses:s.residualStyles;if(null===l)0===(u?s.classBindings:s.styleBindings)&&(o=Yp(o=P0(null,r,s,o,u),s.attrs,u),f=null);else{const m=s.directiveStylingLast;if(-1===m||r[m]!==l)if(o=P0(l,r,s,o,u),null===f){let E=function _T(r,s,o){const u=o?s.classBindings:s.styleBindings;if(0!==va(u))return r[Lc(u)]}(r,s,u);void 0!==E&&Array.isArray(E)&&(E=P0(null,r,s,E[1],u),E=Yp(E,s.attrs,u),function tD(r,s,o,u){r[Lc(o?s.classBindings:s.styleBindings)]=u}(r,s,u,E))}else f=function nD(r,s,o){let u;const l=s.directiveEnd;for(let f=1+s.directiveStylingLast;f<l;f++)u=Yp(u,r[f].hostAttrs,o);return Yp(u,s.attrs,o)}(r,s,u)}return void 0!==f&&(u?s.residualClasses=f:s.residualStyles=f),o}(l,f,s,u),function zh(r,s,o,u,l,f){let m=f?s.classBindings:s.styleBindings,w=Lc(m),E=va(m);r[u]=o;let x,S=!1;if(Array.isArray(o)?(x=o[1],(null===x||mc(o,x)>0)&&(S=!0)):x=o,l)if(0!==E){const j=Lc(r[w+1]);r[u+1]=Fc(j,w),0!==j&&(r[j+1]=Cy(r[j+1],u)),r[w+1]=function Bn(r,s){return 131071&r|s<<17}(r[w+1],u)}else r[u+1]=Fc(w,0),0!==w&&(r[w+1]=Cy(r[w+1],u)),w=u;else r[u+1]=Fc(E,0),0===w?w=u:r[E+1]=Cy(r[E+1],u),E=u;S&&(r[u+1]=Gh(r[u+1])),C0(r,x,u,!0),C0(r,x,u,!1),function Su(r,s,o,u,l){const f=l?r.residualClasses:r.residualStyles;null!=f&&"string"==typeof s&&mc(f,s)>=0&&(o[u+1]=id(o[u+1]))}(s,x,r,u,f),m=Fc(w,E),f?s.classBindings=m:s.styleBindings=m}(l,f,s,o,m,u)}}(f,r,m,u),s!==St&&Zn(l,m,s)&&function k0(r,s,o,u,l,f,m,w){if(!(3&s.type))return;const E=r.data,S=E[w+1],x=function gT(r){return 1==(1&r)}(S)?iD(E,s,o,l,va(S),m):void 0;Un(x)||(Un(f)||function pT(r){return 2==(2&r)}(S)&&(f=iD(E,null,o,l,w,m)),function ei(r,s,o,u,l){if(s)l?r.addClass(o,u):r.removeClass(o,u);else{let f=-1===u.indexOf("-")?void 0:vc.DashCase;null==l?r.removeStyle(o,u,f):("string"==typeof l&&l.endsWith("!important")&&(l=l.slice(0,-10),f|=vc.Important),r.setStyle(o,u,l,f))}}(u,m,ho(mr(),o),l,f))}(f,f.data[mr()],l,l[_t],r,l[m+1]=function F0(r,s){return null==r||""===r||("string"==typeof s?r+=s:"object"==typeof r&&(r=ie(function fu(r){return r instanceof X_?r.changingThisBreaksApplicationSecurity:r}(r)))),r}(s,o),u,m)}(r,s,null,!0),Ty}function P0(r,s,o,u,l){let f=null;const m=o.directiveEnd;let w=o.directiveStylingLast;for(-1===w?w=o.directiveStart:w++;w<m&&(f=s[w],u=Yp(u,f.hostAttrs,l),f!==r);)w++;return null!==r&&(o.directiveStylingLast=w),u}function Yp(r,s,o){const u=o?1:2;let l=-1;if(null!==s)for(let f=0;f<s.length;f++){const m=s[f];"number"==typeof m?l=m:l===u&&(Array.isArray(r)||(r=void 0===r?[]:["",r]),Qr(r,m,!!o||s[++f]))}return void 0===r?null:r}function iD(r,s,o,u,l,f){const m=null===s;let w;for(;l>0;){const E=r[l],S=Array.isArray(E),x=S?E[1]:E,F=null===x;let j=o[l+1];j===St&&(j=F?Ge:void 0);let W=F?gc(j,u):x===u?j:void 0;if(S&&!Un(W)&&(W=gc(E,u)),Un(W)&&(w=W,m))return w;const de=r[l+1];l=m?Lc(de):va(de)}if(null!==s){let E=f?s.residualClasses:s.residualStyles;null!=E&&(w=gc(E,u))}return w}function Un(r){return void 0!==r}function Wh(r,s=""){const o=Te(),u=Bt(),l=r+Pt,f=u.firstCreatePass?Pe(u,l,1,s,null):u.data[l],m=Po(u,o,f,s,r);o[l]=m,Ps()&&ph(u,o,m,f),Ns(f,!1)}let Po=(r,s,o,u,l)=>(Dr(!0),function Ll(r,s){return r.createText(s)}(s[_t],u));function Qp(r,s,o){const u=Te(),l=Es(u,r,s,o);return l!==St&&function Vi(r,s,o){const u=ho(s,r);!function hm(r,s,o){r.setValue(s,o)}(r[_t],u,o)}(u,mr(),l),Qp}const wa=void 0;var ad=["en",[["a","p"],["AM","PM"],wa],[["AM","PM"],wa,wa],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],wa,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],wa,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",wa,"{1} 'at' {0}",wa],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function Jp(r){const o=Math.floor(Math.abs(r)),u=r.toString().replace(/^[^.]*\.?/,"").length;return 1===o&&0===u?1:5}];let Jh={};function Z0(r){const s=function yD(r){return r.toLowerCase().replace(/_/g,"-")}(r);let o=Xh(s);if(o)return o;const u=s.split("-")[0];if(o=Xh(u),o)return o;if("en"===u)return ad;throw new K(701,!1)}function mD(r){return Z0(r)[Ds.PluralCase]}function Xh(r){return r in Jh||(Jh[r]=Qt.ng&&Qt.ng.common&&Qt.ng.common.locales&&Qt.ng.common.locales[r]),Jh[r]}var Ds=function(r){return r[r.LocaleId=0]="LocaleId",r[r.DayPeriodsFormat=1]="DayPeriodsFormat",r[r.DayPeriodsStandalone=2]="DayPeriodsStandalone",r[r.DaysFormat=3]="DaysFormat",r[r.DaysStandalone=4]="DaysStandalone",r[r.MonthsFormat=5]="MonthsFormat",r[r.MonthsStandalone=6]="MonthsStandalone",r[r.Eras=7]="Eras",r[r.FirstDayOfWeek=8]="FirstDayOfWeek",r[r.WeekendRange=9]="WeekendRange",r[r.DateFormat=10]="DateFormat",r[r.TimeFormat=11]="TimeFormat",r[r.DateTimeFormat=12]="DateTimeFormat",r[r.NumberSymbols=13]="NumberSymbols",r[r.NumberFormats=14]="NumberFormats",r[r.CurrencyCode=15]="CurrencyCode",r[r.CurrencySymbol=16]="CurrencySymbol",r[r.CurrencyName=17]="CurrencyName",r[r.Currencies=18]="Currencies",r[r.Directionality=19]="Directionality",r[r.PluralCase=20]="PluralCase",r[r.ExtraData=21]="ExtraData",r}(Ds||{});const tf="en-US";let Y0=tf;function Ly(r,s,o,u,l){if(r=pe(r),Array.isArray(r))for(let f=0;f<r.length;f++)Ly(r[f],s,o,u,l);else{const f=Bt(),m=Te(),w=rr();let E=Dc(r)?r:pe(r.provide);const S=Rm(r),x=1048575&w.providerIndexes,F=w.directiveStart,j=w.providerIndexes>>20;if(Dc(r)||!r.multi){const W=new In(S,l,To),de=ld(E,s,l?x:x+j,F);-1===de?(uc(ks(w,m),f,E),fg(f,r,s.length),s.push(E),w.directiveStart++,w.directiveEnd++,l&&(w.providerIndexes+=1048576),o.push(W),m.push(W)):(o[de]=W,m[de]=W)}else{const W=ld(E,s,x+j,F),de=ld(E,s,x,x+j),ze=de>=0&&o[de];if(l&&!ze||!l&&!(W>=0&&o[W])){uc(ks(w,m),f,E);const dt=function dw(r,s,o,u,l){const f=new In(r,o,To);return f.multi=[],f.index=s,f.componentProviders=0,pg(f,l,u&&!o),f}(l?lw:Vy,o.length,l,u,S);!l&&ze&&(o[de].providerFactory=dt),fg(f,r,s.length,0),s.push(E),w.directiveStart++,w.directiveEnd++,l&&(w.providerIndexes+=1048576),o.push(dt),m.push(dt)}else fg(f,r,W>-1?W:de,pg(o[l?de:W],S,!l&&u));!l&&u&&ze&&o[de].componentProviders++}}}function fg(r,s,o,u){const l=Dc(s),f=function Li(r){return!!r.useClass}(s);if(l||f){const E=(f?pe(s.useClass):s).prototype.ngOnDestroy;if(E){const S=r.destroyHooks||(r.destroyHooks=[]);if(!l&&s.multi){const x=S.indexOf(o);-1===x?S.push(o,[u,E]):S[x+1].push(u,E)}else S.push(o,E)}}}function pg(r,s,o){return o&&r.componentProviders++,r.multi.push(s)-1}function ld(r,s,o,u){for(let l=o;l<u;l++)if(s[l]===r)return l;return-1}function Vy(r,s,o,u){return gg(this.multi,[])}function lw(r,s,o,u){const l=this.multi;let f;if(this.providerFactory){const m=this.providerFactory.componentProviders,w=Qi(o,o[Je],this.providerFactory.index,u);f=w.slice(0,m),gg(l,f);for(let E=m;E<w.length;E++)f.push(w[E])}else f=[],gg(l,f);return f}function gg(r,s){for(let o=0;o<r.length;o++)s.push((0,r[o])());return s}function hw(r,s=[]){return o=>{o.providersResolver=(u,l)=>function UD(r,s,o){const u=Bt();if(u.firstCreatePass){const l=qr(r);Ly(o,u.data,u.blueprint,l,!0),Ly(s,u.data,u.blueprint,l,!1)}}(u,l?l(r):r,s)}}class dd{}class jD{}function By(r,s){return new fw(r,s??null,[])}class fw extends dd{constructor(s,o,u){super(),this._parent=o,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new SE(this);const l=function xr(r,s){const o=r[Fn]||null;if(!o&&!0===s)throw new Error(`Type ${ie(r)} does not have '\u0275mod' property.`);return o}(s);this._bootstrapComponents=function kr(r){return r instanceof Function?r():r}(l.bootstrap),this._r3Injector=nE(s,o,[{provide:dd,useValue:this},{provide:Hm,useValue:this.componentFactoryResolver},...u],ie(s),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(s)}get injector(){return this._r3Injector}destroy(){const s=this._r3Injector;!s.destroyed&&s.destroy(),this.destroyCbs.forEach(o=>o()),this.destroyCbs=null}onDestroy(s){this.destroyCbs.push(s)}}class pw extends jD{constructor(s){super(),this.moduleType=s}create(s){return new fw(this.moduleType,s,[])}}function $y(r,s,o,u){return function Gy(r,s,o,u,l,f){const m=s+o;return Zn(r,m,l)?function rs(r,s,o){return r[s]=o}(r,m+1,f?u.call(f,l):u(l)):function Hc(r,s){const o=r[s];return o===St?void 0:o}(r,m+1)}(Te(),function Kr(){const r=vt.lFrame;let s=r.bindingRootIndex;return-1===s&&(s=r.bindingRootIndex=r.tView.bindingStartIndex),s}(),r,s,o,u)}function Sw(){return this._results[Symbol.iterator]()}class qy{static#e=Symbol.iterator;get changes(){return this._changes||(this._changes=new Xi)}constructor(s=!1){this._emitDistinctChangesOnly=s,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const o=qy.prototype;o[Symbol.iterator]||(o[Symbol.iterator]=Sw)}get(s){return this._results[s]}map(s){return this._results.map(s)}filter(s){return this._results.filter(s)}find(s){return this._results.find(s)}reduce(s,o){return this._results.reduce(s,o)}forEach(s){this._results.forEach(s)}some(s){return this._results.some(s)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(s,o){const u=this;u.dirty=!1;const l=function Cr(r){return r.flat(Number.POSITIVE_INFINITY)}(s);(this._changesDetected=!function aa(r,s,o){if(r.length!==s.length)return!1;for(let u=0;u<r.length;u++){let l=r[u],f=s[u];if(o&&(l=o(l),f=o(f)),f!==l)return!1}return!0}(u._results,l,o))&&(u._results=l,u.length=l.length,u.last=l[this.length-1],u.first=l[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}function Mw(r,s,o,u=!0){const l=s[Je];if(function Rr(r,s,o,u){const l=hr+u,f=o.length;u>0&&(o[l-1][Nr]=s),u<f-hr?(s[Nr]=o[l],Fi(o,hr+u,s)):(o.push(s),s[Nr]=null),s[pn]=o;const m=s[tl];null!==m&&o!==m&&function op(r,s){const o=r[Xn];s[gn]!==s[pn][pn][gn]&&(r[ju]=!0),null===o?r[Xn]=[s]:o.push(s)}(m,s);const w=s[dr];null!==w&&w.insertView(r),s[mt]|=128}(l,s,r,o),u){const f=Vl(o,r),m=s[_t],w=da(m,r[Jn]);null!==w&&function fm(r,s,o,u,l,f){u[fn]=l,u[cr]=s,dp(r,u,o,1,l,f)}(l,r[cr],m,s,w,f)}}let qs=(()=>{class r{static#e=this.__NG_ELEMENT_ID__=ff}return r})();const xw=qs,hf=class extends xw{constructor(s,o,u){super(),this._declarationLView=s,this._declarationTContainer=o,this.elementRef=u}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(s,o){return this.createEmbeddedViewImpl(s,o)}createEmbeddedViewImpl(s,o,u){const l=function Aw(r,s,o,u){const l=s.tView,w=sy(r,l,o,4096&r[mt]?4096:16,null,s,null,null,null,u?.injector??null,u?.hydrationInfo??null);w[tl]=r[s.index];const S=r[dr];return null!==S&&(w[dr]=S.createEmbeddedView(l)),Zv(l,w,o),w}(this._declarationLView,this._declarationTContainer,s,{injector:o,hydrationInfo:u});return new Fp(l)}};function ff(){return wg(rr(),Te())}function wg(r,s){return 4&r.type?new hf(s,r,bh(r,s)):null}let gf=(()=>{class r{static#e=this.__NG_ELEMENT_ID__=rS}return r})();function rS(){return Rw(rr(),Te())}const tC=gf,nC=class extends tC{constructor(s,o,u){super(),this._lContainer=s,this._hostTNode=o,this._hostLView=u}get element(){return bh(this._hostTNode,this._hostLView)}get injector(){return new En(this._hostTNode,this._hostLView)}get parentInjector(){const s=wo(this._hostTNode,this._hostLView);if(ta(s)){const o=Yi(s,this._hostLView),u=_o(s);return new En(o[Je].data[u+8],o)}return new En(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(s){const o=Pw(this._lContainer);return null!==o&&o[s]||null}get length(){return this._lContainer.length-hr}createEmbeddedView(s,o,u){let l,f;"number"==typeof u?l=u:null!=u&&(l=u.index,f=u.injector);const w=s.createEmbeddedViewImpl(o||{},f,null);return this.insertImpl(w,l,false),w}createComponent(s,o,u,l,f){const m=s&&!function Cn(r){return"function"==typeof r}(s);let w;if(m)w=o;else{const Re=o||{};w=Re.index,u=Re.injector,l=Re.projectableNodes,f=Re.environmentInjector||Re.ngModuleRef}const E=m?s:new Lp(Ht(s)),S=u||this.parentInjector;if(!f&&null==E.ngModule){const ze=(m?S:this.parentInjector).get(fa,null);ze&&(f=ze)}Ht(E.componentType??{});const W=E.create(S,l,null,f);return this.insertImpl(W.hostView,w,false),W}insert(s,o){return this.insertImpl(s,o,!1)}insertImpl(s,o,u){const l=s._lView;if(function Lf(r){return Er(r[pn])}(l)){const E=this.indexOf(s);if(-1!==E)this.detach(E);else{const S=l[pn],x=new nC(S,S[cr],S[pn]);x.detach(x.indexOf(s))}}const m=this._adjustIndex(o),w=this._lContainer;return Mw(w,l,m,!u),s.attachToViewContainerRef(),Fi(Ky(w),m,s),s}move(s,o){return this.insert(s,o)}indexOf(s){const o=Pw(this._lContainer);return null!==o?o.indexOf(s):-1}remove(s){const o=this._adjustIndex(s,-1),u=ap(this._lContainer,o);u&&(Ji(Ky(this._lContainer),o),lu(u[Je],u))}detach(s){const o=this._adjustIndex(s,-1),u=ap(this._lContainer,o);return u&&null!=Ji(Ky(this._lContainer),o)?new Fp(u):null}_adjustIndex(s,o=0){return s??this.length+o}};function Pw(r){return r[8]}function Ky(r){return r[8]||(r[8]=[])}function Rw(r,s){let o;const u=s[r.index];return Er(u)?o=u:(o=Gv(u,s,null,r),s[r.index]=o,Ph(s,o)),iC(o,s,r,u),new nC(o,r,s)}let iC=function sC(r,s,o,u){if(r[Jn])return;let l;l=8&o.type?Kt(u):function rC(r,s){const o=r[_t],u=o.createComment(""),l=fr(s,r);return la(o,da(o,l),u,function gm(r,s){return r.nextSibling(s)}(o,l),!1),u}(s,o),r[Jn]=l};class Ig{constructor(s){this.queryList=s,this.matches=null}clone(){return new Ig(this.queryList)}setDirty(){this.queryList.setDirty()}}class Eg{constructor(s=[]){this.queries=s}createEmbeddedView(s){const o=s.queries;if(null!==o){const u=null!==s.contentQueries?s.contentQueries[0]:o.length,l=[];for(let f=0;f<u;f++){const m=o.getByIndex(f);l.push(this.queries[m.indexInDeclarationView].clone())}return new Eg(l)}return null}insertView(s){this.dirtyQueriesWithMatches(s)}detachView(s){this.dirtyQueriesWithMatches(s)}dirtyQueriesWithMatches(s){for(let o=0;o<this.queries.length;o++)null!==Xy(s,o).matches&&this.queries[o].setDirty()}}class Yy{constructor(s,o,u=null){this.predicate=s,this.flags=o,this.read=u}}class kw{constructor(s=[]){this.queries=s}elementStart(s,o){for(let u=0;u<this.queries.length;u++)this.queries[u].elementStart(s,o)}elementEnd(s){for(let o=0;o<this.queries.length;o++)this.queries[o].elementEnd(s)}embeddedTView(s){let o=null;for(let u=0;u<this.length;u++){const l=null!==o?o.length:0,f=this.getByIndex(u).embeddedTView(s,l);f&&(f.indexInDeclarationView=u,null!==o?o.push(f):o=[f])}return null!==o?new kw(o):null}template(s,o){for(let u=0;u<this.queries.length;u++)this.queries[u].template(s,o)}getByIndex(s){return this.queries[s]}get length(){return this.queries.length}track(s){this.queries.push(s)}}class Dg{constructor(s,o=-1){this.metadata=s,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=o}elementStart(s,o){this.isApplyingToNode(o)&&this.matchTNode(s,o)}elementEnd(s){this._declarationNodeIndex===s.index&&(this._appliesToNextNode=!1)}template(s,o){this.elementStart(s,o)}embeddedTView(s,o){return this.isApplyingToNode(s)?(this.crossesNgTemplate=!0,this.addMatch(-s.index,o),new Dg(this.metadata)):null}isApplyingToNode(s){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const o=this._declarationNodeIndex;let u=s.parent;for(;null!==u&&8&u.type&&u.index!==o;)u=u.parent;return o===(null!==u?u.index:-1)}return this._appliesToNextNode}matchTNode(s,o){const u=this.metadata.predicate;if(Array.isArray(u))for(let l=0;l<u.length;l++){const f=u[l];this.matchTNodeWithReadOption(s,o,oS(o,f)),this.matchTNodeWithReadOption(s,o,ci(o,s,f,!1,!1))}else u===qs?4&o.type&&this.matchTNodeWithReadOption(s,o,-1):this.matchTNodeWithReadOption(s,o,ci(o,s,u,!1,!1))}matchTNodeWithReadOption(s,o,u){if(null!==u){const l=this.metadata.read;if(null!==l)if(l===Sp||l===gf||l===qs&&4&o.type)this.addMatch(o.index,-2);else{const f=ci(o,s,l,!1,!1);null!==f&&this.addMatch(o.index,f)}else this.addMatch(o.index,u)}}addMatch(s,o){null===this.matches?this.matches=[s,o]:this.matches.push(s,o)}}function oS(r,s){const o=r.localNames;if(null!==o)for(let u=0;u<o.length;u+=2)if(o[u]===s)return o[u+1];return null}function oC(r,s,o,u){return-1===o?function Fw(r,s){return 11&r.type?bh(r,s):4&r.type?wg(r,s):null}(s,r):-2===o?function Lw(r,s,o){return o===Sp?bh(s,r):o===qs?wg(s,r):o===gf?Rw(s,r):void 0}(r,s,u):Qi(r,r[Je],o,s)}function Vw(r,s,o,u){const l=s[dr].queries[u];if(null===l.matches){const f=r.data,m=o.matches,w=[];for(let E=0;E<m.length;E+=2){const S=m[E];w.push(S<0?null:oC(s,f[S],m[E+1],o.metadata.read))}l.matches=w}return l.matches}function Bw(r,s,o,u){const l=r.queries.getByIndex(o),f=l.matches;if(null!==f){const m=Vw(r,s,l,o);for(let w=0;w<f.length;w+=2){const E=f[w];if(E>0)u.push(m[w/2]);else{const S=f[w+1],x=s[-E];for(let F=hr;F<x.length;F++){const j=x[F];j[tl]===j[pn]&&Bw(j[Je],j,S,u)}if(null!==x[Xn]){const F=x[Xn];for(let j=0;j<F.length;j++){const W=F[j];Bw(W[Je],W,S,u)}}}}}return u}function Qy(r){const s=Te(),o=Bt(),u=nc();qd(u+1);const l=Xy(o,u);if(r.dirty&&function Ff(r){return 4==(4&r[mt])}(s)===(2==(2&l.metadata.flags))){if(null===l.matches)r.reset([]);else{const f=l.crossesNgTemplate?Bw(o,s,u,[]):Vw(o,s,l,u);r.reset(f,$m),r.notifyOnChanges()}return!0}return!1}function aC(r,s,o){const u=Bt();u.firstCreatePass&&(function Jy(r,s,o){null===r.queries&&(r.queries=new kw),r.queries.track(new Dg(s,o))}(u,new Yy(r,s,o),-1),2==(2&s)&&(u.staticViewQueries=!0)),function cC(r,s,o){const u=new qy(4==(4&o));(function jb(r,s,o,u){const l=$s(s);l.push(o),r.firstCreatePass&&EE(r).push(u,l.length-1)})(r,s,u,u.destroy),null===s[dr]&&(s[dr]=new Eg),s[dr].queries.push(new Ig(u))}(u,Te(),s)}function uC(){return function jw(r,s){return r[dr].queries[s].queryList}(Te(),nc())}function Xy(r,s){return r.queries.getByIndex(s)}const gS=new sn("Application Initializer");let d_=(()=>{class r{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((o,u)=>{this.resolve=o,this.reject=u}),this.appInits=bt(gS,{optional:!0})??[]}runInitializers(){if(this.initialized)return;const o=[];for(const l of this.appInits){const f=l();if(wy(f))o.push(f);else if($h(f)){const m=new Promise((w,E)=>{f.subscribe({complete:w,error:E})});o.push(m)}}const u=()=>{this.done=!0,this.resolve()};Promise.all(o).then(()=>{u()}).catch(l=>{this.reject(l)}),0===o.length&&u(),this.initialized=!0}static#e=this.\u0275fac=function(u){return new(u||r)};static#t=this.\u0275prov=Mt({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})();const Mg=new sn("LocaleId",{providedIn:"root",factory:()=>bt(Mg,gt.Optional|gt.SkipSelf)||function rI(){return typeof $localize<"u"&&$localize.locale||tf}()}),DC=new sn("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});let CC=(()=>{class r{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new ne(!1)}add(){this.hasPendingTasks.next(!0);const o=this.taskId++;return this.pendingTasks.add(o),o}remove(o){this.pendingTasks.delete(o),0===this.pendingTasks.size&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks.next(!1)}static#e=this.\u0275fac=function(u){return new(u||r)};static#t=this.\u0275prov=Mt({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})();const _f=new sn(""),OC=new sn("");let Nu,Ea=(()=>{class r{constructor(o,u,l){this._ngZone=o,this.registry=u,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,Nu||(function YA(r){Nu=r}(l),l.addToWindow(u)),this._watchAngularEvents(),o.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{br.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;0!==this._callbacks.length;){let o=this._callbacks.pop();clearTimeout(o.timeoutId),o.doneCb(this._didWork)}this._didWork=!1});else{let o=this.getPendingTasks();this._callbacks=this._callbacks.filter(u=>!u.updateCb||!u.updateCb(o)||(clearTimeout(u.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(o=>({source:o.source,creationLocation:o.creationLocation,data:o.data})):[]}addCallback(o,u,l){let f=-1;u&&u>0&&(f=setTimeout(()=>{this._callbacks=this._callbacks.filter(m=>m.timeoutId!==f),o(this._didWork,this.getPendingTasks())},u)),this._callbacks.push({doneCb:o,timeoutId:f,updateCb:l})}whenStable(o,u,l){if(l&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(o,u,l),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(o){this.registry.registerApplication(o,this)}unregisterApplication(o){this.registry.unregisterApplication(o)}findProviders(o,u,l){return[]}static#e=this.\u0275fac=function(u){return new(u||r)(yt(br),yt(Da),yt(OC))};static#t=this.\u0275prov=Mt({token:r,factory:r.\u0275fac})}return r})(),Da=(()=>{class r{constructor(){this._applications=new Map}registerApplication(o,u){this._applications.set(o,u)}unregisterApplication(o){this._applications.delete(o)}unregisterAllApplications(){this._applications.clear()}getTestability(o){return this._applications.get(o)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(o,u=!0){return Nu?.findTestabilityInTree(this,o,u)??null}static#e=this.\u0275fac=function(u){return new(u||r)};static#t=this.\u0275prov=Mt({token:r,factory:r.\u0275fac,providedIn:"platform"})}return r})(),ko=null;const PC=new sn("AllowMultipleToken"),cI=new sn("PlatformDestroyListeners"),lI=new sn("appBootstrapListener");function LC(r,s,o=[]){const u=`Platform: ${s}`,l=new sn(u);return(f=[])=>{let m=m_();if(!m||m.injector.get(PC,!1)){const w=[...o,...f,{provide:l,useValue:!0}];r?r(w):function Ng(r){if(ko&&!ko.get(PC,!1))throw new K(400,!1);(function kC(){!function Mf(r){Pd=r}(()=>{throw new K(600,!1)})})(),ko=r;const s=r.get(zc);(function p_(r){r.get(yv,null)?.forEach(o=>o())})(r)}(function g_(r=[],s){return js.create({name:s,providers:[{provide:Nm,useValue:"platform"},{provide:cI,useValue:new Set([()=>ko=null])},...r]})}(w,u))}return function bS(r){const s=m_();if(!s)throw new K(401,!1);return s}()}}function m_(){return ko?.get(zc)??null}let zc=(()=>{class r{constructor(o){this._injector=o,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(o,u){const l=function BC(r="zone.js",s){return"noop"===r?new cE:"zone.js"===r?new br(s):r}(u?.ngZone,function fI(r){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:r?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:r?.runCoalescing??!1}}({eventCoalescing:u?.ngZoneEventCoalescing,runCoalescing:u?.ngZoneRunCoalescing}));return l.run(()=>{const f=function Ai(r,s,o){return new fw(r,s,o)}(o.moduleType,this.injector,function mI(r){return[{provide:br,useFactory:r},{provide:Ec,multi:!0,useFactory:()=>{const s=bt(TS,{optional:!0});return()=>s.initialize()}},{provide:pI,useFactory:Rg},{provide:Lv,useFactory:Ap}]}(()=>l)),m=f.injector.get(ga,null);return l.runOutsideAngular(()=>{const w=l.onError.subscribe({next:E=>{m.handleError(E)}});f.onDestroy(()=>{md(this._modules,f),w.unsubscribe()})}),function y_(r,s,o){try{const u=o();return wy(u)?u.catch(l=>{throw s.runOutsideAngular(()=>r.handleError(l)),l}):u}catch(u){throw s.runOutsideAngular(()=>r.handleError(u)),u}}(m,l,()=>{const w=f.injector.get(d_);return w.runInitializers(),w.donePromise.then(()=>(function eg(r){et(r,"Expected localeId to be defined"),"string"==typeof r&&(Y0=r.toLowerCase().replace(/_/g,"-"))}(f.injector.get(Mg,tf)||tf),this._moduleDoBootstrap(f),f))})})}bootstrapModule(o,u=[]){const l=vf({},u);return function RC(r,s,o){const u=new pw(o);return Promise.resolve(u)}(0,0,o).then(f=>this.bootstrapModuleFactory(f,l))}_moduleDoBootstrap(o){const u=o.injector.get(Og);if(o._bootstrapComponents.length>0)o._bootstrapComponents.forEach(l=>u.bootstrap(l));else{if(!o.instance.ngDoBootstrap)throw new K(-403,!1);o.instance.ngDoBootstrap(u)}this._modules.push(o)}onDestroy(o){this._destroyListeners.push(o)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new K(404,!1);this._modules.slice().forEach(u=>u.destroy()),this._destroyListeners.forEach(u=>u());const o=this._injector.get(cI,null);o&&(o.forEach(u=>u()),o.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}static#e=this.\u0275fac=function(u){return new(u||r)(yt(js))};static#t=this.\u0275prov=Mt({token:r,factory:r.\u0275fac,providedIn:"platform"})}return r})();function vf(r,s){return Array.isArray(s)?s.reduce(vf,r):{...r,...s}}let Og=(()=>{class r{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=bt(pI),this.zoneIsStable=bt(Lv),this.componentTypes=[],this.components=[],this.isStable=bt(CC).hasPendingTasks.pipe((0,Fe.w)(o=>o?(0,ve.of)(!1):this.zoneIsStable),(0,we.x)(),(0,fe.B)()),this._injector=bt(fa)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(o,u){const l=o instanceof Tv;if(!this._injector.get(d_).done)throw!l&&function Xs(r){const s=Ht(r)||An(r)||Mr(r);return null!==s&&s.standalone}(o),new K(405,!1);let m;m=l?o:this._injector.get(Hm).resolveComponentFactory(o),this.componentTypes.push(m.componentType);const w=function gd(r){return r.isBoundToModule}(m)?void 0:this._injector.get(dd),S=m.create(js.NULL,[],u||m.selector,w),x=S.location.nativeElement,F=S.injector.get(_f,null);return F?.registerApplication(x),S.onDestroy(()=>{this.detachView(S.hostView),md(this.components,S),F?.unregisterApplication(x)}),this._loadComponent(S),S}tick(){if(this._runningTick)throw new K(101,!1);try{this._runningTick=!0;for(let o of this._views)o.detectChanges()}catch(o){this.internalErrorHandler(o)}finally{this._runningTick=!1}}attachView(o){const u=o;this._views.push(u),u.attachToAppRef(this)}detachView(o){const u=o;md(this._views,u),u.detachFromAppRef()}_loadComponent(o){this.attachView(o.hostView),this.tick(),this.components.push(o);const u=this._injector.get(lI,[]);u.push(...this._bootstrapListeners),u.forEach(l=>l(o))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(o=>o()),this._views.slice().forEach(o=>o.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(o){return this._destroyListeners.push(o),()=>md(this._destroyListeners,o)}destroy(){if(this._destroyed)throw new K(406,!1);const o=this._injector;o.destroy&&!o.destroyed&&o.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}static#e=this.\u0275fac=function(u){return new(u||r)};static#t=this.\u0275prov=Mt({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})();function md(r,s){const o=r.indexOf(s);o>-1&&r.splice(o,1)}const pI=new sn("",{providedIn:"root",factory:()=>bt(ga).handleError.bind(void 0)});function Rg(){const r=bt(br),s=bt(ga);return o=>r.runOutsideAngular(()=>s.handleError(o))}let TS=(()=>{class r{constructor(){this.zone=bt(br),this.applicationRef=bt(Og)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static#e=this.\u0275fac=function(u){return new(u||r)};static#t=this.\u0275prov=Mt({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})();function kg(){return!1}let XA=(()=>{class r{static#e=this.__NG_ELEMENT_ID__=eM}return r})();function eM(r){return function _I(r,s,o){if(ro(r)&&!o){const u=pr(r.index,s);return new Fp(u,u)}return 47&r.type?new Fp(s[gn],s):null}(rr(),Te(),16==(16&r))}class HC{constructor(){}supports(s){return Ao(s)}create(s){return new oM(s)}}const sM=(r,s)=>s;class oM{constructor(s){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=s||sM}forEachItem(s){let o;for(o=this._itHead;null!==o;o=o._next)s(o)}forEachOperation(s){let o=this._itHead,u=this._removalsHead,l=0,f=null;for(;o||u;){const m=!u||o&&o.currentIndex<Pu(u,l,f)?o:u,w=Pu(m,l,f),E=m.currentIndex;if(m===u)l--,u=u._nextRemoved;else if(o=o._next,null==m.previousIndex)l++;else{f||(f=[]);const S=w-l,x=E-l;if(S!=x){for(let j=0;j<S;j++){const W=j<f.length?f[j]:f[j]=0,de=W+j;x<=de&&de<S&&(f[j]=W+1)}f[m.previousIndex]=x-S}}w!==E&&s(m,w,E)}}forEachPreviousItem(s){let o;for(o=this._previousItHead;null!==o;o=o._nextPrevious)s(o)}forEachAddedItem(s){let o;for(o=this._additionsHead;null!==o;o=o._nextAdded)s(o)}forEachMovedItem(s){let o;for(o=this._movesHead;null!==o;o=o._nextMoved)s(o)}forEachRemovedItem(s){let o;for(o=this._removalsHead;null!==o;o=o._nextRemoved)s(o)}forEachIdentityChange(s){let o;for(o=this._identityChangesHead;null!==o;o=o._nextIdentityChange)s(o)}diff(s){if(null==s&&(s=[]),!Ao(s))throw new K(900,!1);return this.check(s)?this:null}onDestroy(){}check(s){this._reset();let l,f,m,o=this._itHead,u=!1;if(Array.isArray(s)){this.length=s.length;for(let w=0;w<this.length;w++)f=s[w],m=this._trackByFn(w,f),null!==o&&Object.is(o.trackById,m)?(u&&(o=this._verifyReinsertion(o,f,m,w)),Object.is(o.item,f)||this._addIdentityChange(o,f)):(o=this._mismatch(o,f,m,w),u=!0),o=o._next}else l=0,function Cu(r,s){if(Array.isArray(r))for(let o=0;o<r.length;o++)s(r[o]);else{const o=r[Symbol.iterator]();let u;for(;!(u=o.next()).done;)s(u.value)}}(s,w=>{m=this._trackByFn(l,w),null!==o&&Object.is(o.trackById,m)?(u&&(o=this._verifyReinsertion(o,w,m,l)),Object.is(o.item,w)||this._addIdentityChange(o,w)):(o=this._mismatch(o,w,m,l),u=!0),o=o._next,l++}),this.length=l;return this._truncate(o),this.collection=s,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let s;for(s=this._previousItHead=this._itHead;null!==s;s=s._next)s._nextPrevious=s._next;for(s=this._additionsHead;null!==s;s=s._nextAdded)s.previousIndex=s.currentIndex;for(this._additionsHead=this._additionsTail=null,s=this._movesHead;null!==s;s=s._nextMoved)s.previousIndex=s.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(s,o,u,l){let f;return null===s?f=this._itTail:(f=s._prev,this._remove(s)),null!==(s=null===this._unlinkedRecords?null:this._unlinkedRecords.get(u,null))?(Object.is(s.item,o)||this._addIdentityChange(s,o),this._reinsertAfter(s,f,l)):null!==(s=null===this._linkedRecords?null:this._linkedRecords.get(u,l))?(Object.is(s.item,o)||this._addIdentityChange(s,o),this._moveAfter(s,f,l)):s=this._addAfter(new wd(o,u),f,l),s}_verifyReinsertion(s,o,u,l){let f=null===this._unlinkedRecords?null:this._unlinkedRecords.get(u,null);return null!==f?s=this._reinsertAfter(f,s._prev,l):s.currentIndex!=l&&(s.currentIndex=l,this._addToMoves(s,l)),s}_truncate(s){for(;null!==s;){const o=s._next;this._addToRemovals(this._unlink(s)),s=o}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(s,o,u){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(s);const l=s._prevRemoved,f=s._nextRemoved;return null===l?this._removalsHead=f:l._nextRemoved=f,null===f?this._removalsTail=l:f._prevRemoved=l,this._insertAfter(s,o,u),this._addToMoves(s,u),s}_moveAfter(s,o,u){return this._unlink(s),this._insertAfter(s,o,u),this._addToMoves(s,u),s}_addAfter(s,o,u){return this._insertAfter(s,o,u),this._additionsTail=null===this._additionsTail?this._additionsHead=s:this._additionsTail._nextAdded=s,s}_insertAfter(s,o,u){const l=null===o?this._itHead:o._next;return s._next=l,s._prev=o,null===l?this._itTail=s:l._prev=s,null===o?this._itHead=s:o._next=s,null===this._linkedRecords&&(this._linkedRecords=new wf),this._linkedRecords.put(s),s.currentIndex=u,s}_remove(s){return this._addToRemovals(this._unlink(s))}_unlink(s){null!==this._linkedRecords&&this._linkedRecords.remove(s);const o=s._prev,u=s._next;return null===o?this._itHead=u:o._next=u,null===u?this._itTail=o:u._prev=o,s}_addToMoves(s,o){return s.previousIndex===o||(this._movesTail=null===this._movesTail?this._movesHead=s:this._movesTail._nextMoved=s),s}_addToRemovals(s){return null===this._unlinkedRecords&&(this._unlinkedRecords=new wf),this._unlinkedRecords.put(s),s.currentIndex=null,s._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=s,s._prevRemoved=null):(s._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=s),s}_addIdentityChange(s,o){return s.item=o,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=s:this._identityChangesTail._nextIdentityChange=s,s}}class wd{constructor(s,o){this.item=s,this.trackById=o,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class Ou{constructor(){this._head=null,this._tail=null}add(s){null===this._head?(this._head=this._tail=s,s._nextDup=null,s._prevDup=null):(this._tail._nextDup=s,s._prevDup=this._tail,s._nextDup=null,this._tail=s)}get(s,o){let u;for(u=this._head;null!==u;u=u._nextDup)if((null===o||o<=u.currentIndex)&&Object.is(u.trackById,s))return u;return null}remove(s){const o=s._prevDup,u=s._nextDup;return null===o?this._head=u:o._nextDup=u,null===u?this._tail=o:u._prevDup=o,null===this._head}}class wf{constructor(){this.map=new Map}put(s){const o=s.trackById;let u=this.map.get(o);u||(u=new Ou,this.map.set(o,u)),u.add(s)}get(s,o){const l=this.map.get(s);return l?l.get(s,o):null}remove(s){const o=s.trackById;return this.map.get(o).remove(s)&&this.map.delete(o),s}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function Pu(r,s,o){const u=r.previousIndex;if(null===u)return u;let l=0;return o&&u<o.length&&(l=o[u]),u+s+l}class $C{constructor(){}supports(s){return s instanceof Map||Fh(s)}create(){return new GC}}class GC{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(s){let o;for(o=this._mapHead;null!==o;o=o._next)s(o)}forEachPreviousItem(s){let o;for(o=this._previousMapHead;null!==o;o=o._nextPrevious)s(o)}forEachChangedItem(s){let o;for(o=this._changesHead;null!==o;o=o._nextChanged)s(o)}forEachAddedItem(s){let o;for(o=this._additionsHead;null!==o;o=o._nextAdded)s(o)}forEachRemovedItem(s){let o;for(o=this._removalsHead;null!==o;o=o._nextRemoved)s(o)}diff(s){if(s){if(!(s instanceof Map||Fh(s)))throw new K(900,!1)}else s=new Map;return this.check(s)?this:null}onDestroy(){}check(s){this._reset();let o=this._mapHead;if(this._appendAfter=null,this._forEach(s,(u,l)=>{if(o&&o.key===l)this._maybeAddToChanges(o,u),this._appendAfter=o,o=o._next;else{const f=this._getOrCreateRecordForKey(l,u);o=this._insertBeforeOrAppend(o,f)}}),o){o._prev&&(o._prev._next=null),this._removalsHead=o;for(let u=o;null!==u;u=u._nextRemoved)u===this._mapHead&&(this._mapHead=null),this._records.delete(u.key),u._nextRemoved=u._next,u.previousValue=u.currentValue,u.currentValue=null,u._prev=null,u._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(s,o){if(s){const u=s._prev;return o._next=s,o._prev=u,s._prev=o,u&&(u._next=o),s===this._mapHead&&(this._mapHead=o),this._appendAfter=s,s}return this._appendAfter?(this._appendAfter._next=o,o._prev=this._appendAfter):this._mapHead=o,this._appendAfter=o,null}_getOrCreateRecordForKey(s,o){if(this._records.has(s)){const l=this._records.get(s);this._maybeAddToChanges(l,o);const f=l._prev,m=l._next;return f&&(f._next=m),m&&(m._prev=f),l._next=null,l._prev=null,l}const u=new MS(s);return this._records.set(s,u),u.currentValue=o,this._addToAdditions(u),u}_reset(){if(this.isDirty){let s;for(this._previousMapHead=this._mapHead,s=this._previousMapHead;null!==s;s=s._next)s._nextPrevious=s._next;for(s=this._changesHead;null!==s;s=s._nextChanged)s.previousValue=s.currentValue;for(s=this._additionsHead;null!=s;s=s._nextAdded)s.previousValue=s.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(s,o){Object.is(o,s.currentValue)||(s.previousValue=s.currentValue,s.currentValue=o,this._addToChanges(s))}_addToAdditions(s){null===this._additionsHead?this._additionsHead=this._additionsTail=s:(this._additionsTail._nextAdded=s,this._additionsTail=s)}_addToChanges(s){null===this._changesHead?this._changesHead=this._changesTail=s:(this._changesTail._nextChanged=s,this._changesTail=s)}_forEach(s,o){s instanceof Map?s.forEach(o):Object.keys(s).forEach(u=>o(s[u],u))}}class MS{constructor(s){this.key=s,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function Ru(){return new EI([new HC])}let EI=(()=>{class r{static#e=this.\u0275prov=Mt({token:r,providedIn:"root",factory:Ru});constructor(o){this.factories=o}static create(o,u){if(null!=u){const l=u.factories.slice();o=o.concat(l)}return new r(o)}static extend(o){return{provide:r,useFactory:u=>r.create(o,u||Ru()),deps:[[r,new nu,new qf]]}}find(o){const u=this.factories.find(l=>l.supports(o));if(null!=u)return u;throw new K(901,!1)}}return r})();function zC(){return new DI([new $C])}let DI=(()=>{class r{static#e=this.\u0275prov=Mt({token:r,providedIn:"root",factory:zC});constructor(o){this.factories=o}static create(o,u){if(u){const l=u.factories.slice();o=o.concat(l)}return new r(o)}static extend(o){return{provide:r,useFactory:u=>r.create(o,u||zC()),deps:[[r,new nu,new qf]]}}find(o){const u=this.factories.find(l=>l.supports(o));if(u)return u;throw new K(901,!1)}}return r})();const OS=LC(null,"core",[]);let WC=(()=>{class r{constructor(o){}static#e=this.\u0275fac=function(u){return new(u||r)(yt(Og))};static#t=this.\u0275mod=xa({type:r});static#n=this.\u0275inj=_n({})}return r})();function zS(r){return"boolean"==typeof r?r:null!=r&&"false"!==r}},3106:(ft,Me,k)=>{k.d(Me,{Z:()=>lt});var g=k(9058),J=k(4537),R=k(534),oe=k(7879);class ne{constructor(Ue,Le){this._delegate=Ue,this.firebase=Le,(0,R._addComponent)(Ue,new J.wA("app-compat",()=>this,"PUBLIC")),this.container=Ue.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Ue){this._delegate.automaticDataCollectionEnabled=Ue}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(Ue=>{this._delegate.checkDestroyed(),Ue()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,R.deleteApp)(this._delegate)))}_getService(Ue,Le=R._DEFAULT_ENTRY_NAME){var at;this._delegate.checkDestroyed();const it=this._delegate.container.getProvider(Ue);return!it.isInitialized()&&"EXPLICIT"===(null===(at=it.getComponent())||void 0===at?void 0:at.instantiationMode)&&it.initialize(),it.getImmediate({identifier:Le})}_removeServiceInstance(Ue,Le=R._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(Ue).clearInstance(Le)}_addComponent(Ue){(0,R._addComponent)(this._delegate,Ue)}_addOrOverwriteComponent(Ue){(0,R._addOrOverwriteComponent)(this._delegate,Ue)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const fe=new g.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),V=function we(){const pe=function Fe(pe){const Ue={},Le={__esModule:!0,initializeApp:function K(ke,Ze={}){const re=R.initializeApp(ke,Ze);if((0,g.r3)(Ue,re.name))return Ue[re.name];const ut=new pe(re,Le);return Ue[re.name]=ut,ut},app:it,registerVersion:R.registerVersion,setLogLevel:R.setLogLevel,onLog:R.onLog,apps:null,SDK_VERSION:R.SDK_VERSION,INTERNAL:{registerComponent:function Y(ke){const Ze=ke.name,re=Ze.replace("-compat","");if(R._registerComponent(ke)&&"PUBLIC"===ke.type){const ut=(kt=it())=>{if("function"!=typeof kt[re])throw fe.create("invalid-app-argument",{appName:Ze});return kt[re]()};void 0!==ke.serviceProps&&(0,g.ZB)(ut,ke.serviceProps),Le[re]=ut,pe.prototype[re]=function(...kt){return this._getService.bind(this,Ze).apply(this,ke.multipleInstances?kt:[])}}return"PUBLIC"===ke.type?Le[re]:null},removeApp:function at(ke){delete Ue[ke]},useAsService:function Ce(ke,Ze){return"serverAuth"===Ze?null:Ze},modularAPIs:R}};function it(ke){if(!(0,g.r3)(Ue,ke=ke||R._DEFAULT_ENTRY_NAME))throw fe.create("no-app",{appName:ke});return Ue[ke]}return Le.default=Le,Object.defineProperty(Le,"apps",{get:function he(){return Object.keys(Ue).map(ke=>Ue[ke])}}),it.App=pe,Le}(ne);return pe.INTERNAL=Object.assign(Object.assign({},pe.INTERNAL),{createFirebaseNamespace:we,extendNamespace:function Ue(Le){(0,g.ZB)(pe,Le)},createSubscribe:g.ne,ErrorFactory:g.LL,deepExtend:g.ZB}),pe}(),H=new oe.Yd("@firebase/app-compat");if((0,g.jU)()&&void 0!==self.firebase){H.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const pe=self.firebase.SDK_VERSION;pe&&pe.indexOf("LITE")>=0&&H.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const lt=V;!function Oe(pe){(0,R.registerVersion)("@firebase/app-compat","0.2.13",pe)}()},534:(ft,Me,k)=>{k.r(Me),k.d(Me,{FirebaseError:()=>oe.ZR,SDK_VERSION:()=>Zs,_DEFAULT_ENTRY_NAME:()=>gt,_addComponent:()=>vn,_addOrOverwriteComponent:()=>Hr,_apps:()=>Ct,_clearComponents:()=>qt,_components:()=>rn,_getProvider:()=>ar,_registerComponent:()=>Qt,_removeServiceInstance:()=>Ta,deleteApp:()=>xi,getApp:()=>yi,getApps:()=>bs,initializeApp:()=>Ks,onLog:()=>Gr,registerVersion:()=>Yn,setLogLevel:()=>Rn});var g=k(5861),J=k(4537),R=k(7879),oe=k(9058);const ne=(ce,Q)=>Q.some(Ae=>ce instanceof Ae);let ve,fe;const V=new WeakMap,H=new WeakMap,ie=new WeakMap,qe=new WeakMap,Oe=new WeakMap;let Ue={get(ce,Q,Ae){if(ce instanceof IDBTransaction){if("done"===Q)return H.get(ce);if("objectStoreNames"===Q)return ce.objectStoreNames||ie.get(ce);if("store"===Q)return Ae.objectStoreNames[1]?void 0:Ae.objectStore(Ae.objectStoreNames[0])}return K(ce[Q])},set:(ce,Q,Ae)=>(ce[Q]=Ae,!0),has:(ce,Q)=>ce instanceof IDBTransaction&&("done"===Q||"store"===Q)||Q in ce};function it(ce){return"function"==typeof ce?function at(ce){return ce!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function we(){return fe||(fe=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(ce)?function(...Q){return ce.apply(he(this),Q),K(V.get(this))}:function(...Q){return K(ce.apply(he(this),Q))}:function(Q,...Ae){const nt=ce.call(he(this),Q,...Ae);return ie.set(nt,Q.sort?Q.sort():[Q]),K(nt)}}(ce):(ce instanceof IDBTransaction&&function pe(ce){if(H.has(ce))return;const Q=new Promise((Ae,nt)=>{const Ge=()=>{ce.removeEventListener("complete",xt),ce.removeEventListener("error",zt),ce.removeEventListener("abort",zt)},xt=()=>{Ae(),Ge()},zt=()=>{nt(ce.error||new DOMException("AbortError","AbortError")),Ge()};ce.addEventListener("complete",xt),ce.addEventListener("error",zt),ce.addEventListener("abort",zt)});H.set(ce,Q)}(ce),ne(ce,function Fe(){return ve||(ve=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(ce,Ue):ce)}function K(ce){if(ce instanceof IDBRequest)return function lt(ce){const Q=new Promise((Ae,nt)=>{const Ge=()=>{ce.removeEventListener("success",xt),ce.removeEventListener("error",zt)},xt=()=>{Ae(K(ce.result)),Ge()},zt=()=>{nt(ce.error),Ge()};ce.addEventListener("success",xt),ce.addEventListener("error",zt)});return Q.then(Ae=>{Ae instanceof IDBCursor&&V.set(Ae,ce)}).catch(()=>{}),Oe.set(Q,ce),Q}(ce);if(qe.has(ce))return qe.get(ce);const Q=it(ce);return Q!==ce&&(qe.set(ce,Q),Oe.set(Q,ce)),Q}const he=ce=>Oe.get(ce),ke=["get","getKey","getAll","getAllKeys","count"],Ze=["put","add","delete","clear"],re=new Map;function ut(ce,Q){if(!(ce instanceof IDBDatabase)||Q in ce||"string"!=typeof Q)return;if(re.get(Q))return re.get(Q);const Ae=Q.replace(/FromIndex$/,""),nt=Q!==Ae,Ge=Ze.includes(Ae);if(!(Ae in(nt?IDBIndex:IDBObjectStore).prototype)||!Ge&&!ke.includes(Ae))return;const xt=function(){var zt=(0,g.Z)(function*(kn,...Fn){const ur=this.transaction(kn,Ge?"readwrite":"readonly");let zi=ur.store;return nt&&(zi=zi.index(Fn.shift())),(yield Promise.all([zi[Ae](...Fn),Ge&&ur.done]))[0]});return function(Fn){return zt.apply(this,arguments)}}();return re.set(Q,xt),xt}!function Le(ce){Ue=ce(Ue)}(ce=>({...ce,get:(Q,Ae,nt)=>ut(Q,Ae)||ce.get(Q,Ae,nt),has:(Q,Ae)=>!!ut(Q,Ae)||ce.has(Q,Ae)}));class kt{constructor(Q){this.container=Q}getPlatformInfoString(){return this.container.getProviders().map(Ae=>{if(function sr(ce){const Q=ce.getComponent();return"VERSION"===Q?.type}(Ae)){const nt=Ae.getImmediate();return`${nt.library}/${nt.version}`}return null}).filter(Ae=>Ae).join(" ")}}const jr="@firebase/app",Pn=new R.Yd("@firebase/app"),gt="[DEFAULT]",Ft={[jr]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},Ct=new Map,rn=new Map;function vn(ce,Q){try{ce.container.addComponent(Q)}catch(Ae){Pn.debug(`Component ${Q.name} failed to register with FirebaseApp ${ce.name}`,Ae)}}function Hr(ce,Q){ce.container.addOrOverwriteComponent(Q)}function Qt(ce){const Q=ce.name;if(rn.has(Q))return Pn.debug(`There were multiple attempts to register component ${Q}.`),!1;rn.set(Q,ce);for(const Ae of Ct.values())vn(Ae,ce);return!0}function ar(ce,Q){const Ae=ce.container.getProvider("heartbeat").getImmediate({optional:!0});return Ae&&Ae.triggerHeartbeat(),ce.container.getProvider(Q)}function Ta(ce,Q,Ae=gt){ar(ce,Q).clearInstance(Ae)}function qt(){rn.clear()}const Lt=new oe.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class ds{constructor(Q,Ae,nt){this._isDeleted=!1,this._options=Object.assign({},Q),this._config=Object.assign({},Ae),this._name=Ae.name,this._automaticDataCollectionEnabled=Ae.automaticDataCollectionEnabled,this._container=nt,this.container.addComponent(new J.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Q){this.checkDestroyed(),this._automaticDataCollectionEnabled=Q}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(Q){this._isDeleted=Q}checkDestroyed(){if(this.isDeleted)throw Lt.create("app-deleted",{appName:this._name})}}const Zs="9.23.0";function Ks(ce,Q={}){let Ae=ce;"object"!=typeof Q&&(Q={name:Q});const nt=Object.assign({name:gt,automaticDataCollectionEnabled:!1},Q),Ge=nt.name;if("string"!=typeof Ge||!Ge)throw Lt.create("bad-app-name",{appName:String(Ge)});if(Ae||(Ae=(0,oe.aH)()),!Ae)throw Lt.create("no-options");const xt=Ct.get(Ge);if(xt){if((0,oe.vZ)(Ae,xt.options)&&(0,oe.vZ)(nt,xt.config))return xt;throw Lt.create("duplicate-app",{appName:Ge})}const zt=new J.H0(Ge);for(const Fn of rn.values())zt.addComponent(Fn);const kn=new ds(Ae,nt,zt);return Ct.set(Ge,kn),kn}function yi(ce=gt){const Q=Ct.get(ce);if(!Q&&ce===gt&&(0,oe.aH)())return Ks();if(!Q)throw Lt.create("no-app",{appName:ce});return Q}function bs(){return Array.from(Ct.values())}function xi(ce){return Kn.apply(this,arguments)}function Kn(){return(Kn=(0,g.Z)(function*(ce){const Q=ce.name;Ct.has(Q)&&(Ct.delete(Q),yield Promise.all(ce.container.getProviders().map(Ae=>Ae.delete())),ce.isDeleted=!0)})).apply(this,arguments)}function Yn(ce,Q,Ae){var nt;let Ge=null!==(nt=Ft[ce])&&void 0!==nt?nt:ce;Ae&&(Ge+=`-${Ae}`);const xt=Ge.match(/\s|\//),zt=Q.match(/\s|\//);if(xt||zt){const kn=[`Unable to register library "${Ge}" with version "${Q}":`];return xt&&kn.push(`library name "${Ge}" contains illegal characters (whitespace or "/")`),xt&&zt&&kn.push("and"),zt&&kn.push(`version name "${Q}" contains illegal characters (whitespace or "/")`),void Pn.warn(kn.join(" "))}Qt(new J.wA(`${Ge}-version`,()=>({library:Ge,version:Q}),"VERSION"))}function Gr(ce,Q){if(null!==ce&&"function"!=typeof ce)throw Lt.create("invalid-log-argument");(0,R.Am)(ce,Q)}function Rn(ce){(0,R.Ub)(ce)}const _i="firebase-heartbeat-database",vi=1,B="firebase-heartbeat-store";let L=null;function G(){return L||(L=function Y(ce,Q,{blocked:Ae,upgrade:nt,blocking:Ge,terminated:xt}={}){const zt=indexedDB.open(ce,Q),kn=K(zt);return nt&&zt.addEventListener("upgradeneeded",Fn=>{nt(K(zt.result),Fn.oldVersion,Fn.newVersion,K(zt.transaction),Fn)}),Ae&&zt.addEventListener("blocked",Fn=>Ae(Fn.oldVersion,Fn.newVersion,Fn)),kn.then(Fn=>{xt&&Fn.addEventListener("close",()=>xt()),Ge&&Fn.addEventListener("versionchange",ur=>Ge(ur.oldVersion,ur.newVersion,ur))}).catch(()=>{}),kn}(_i,vi,{upgrade:(ce,Q)=>{0===Q&&ce.createObjectStore(B)}}).catch(ce=>{throw Lt.create("idb-open",{originalErrorMessage:ce.message})})),L}function te(){return(te=(0,g.Z)(function*(ce){try{return yield(yield G()).transaction(B).objectStore(B).get(yt(ce))}catch(Q){if(Q instanceof oe.ZR)Pn.warn(Q.message);else{const Ae=Lt.create("idb-get",{originalErrorMessage:Q?.message});Pn.warn(Ae.message)}}})).apply(this,arguments)}function Ye(ce,Q){return Et.apply(this,arguments)}function Et(){return(Et=(0,g.Z)(function*(ce,Q){try{const nt=(yield G()).transaction(B,"readwrite");yield nt.objectStore(B).put(Q,yt(ce)),yield nt.done}catch(Ae){if(Ae instanceof oe.ZR)Pn.warn(Ae.message);else{const nt=Lt.create("idb-set",{originalErrorMessage:Ae?.message});Pn.warn(nt.message)}}})).apply(this,arguments)}function yt(ce){return`${ce.name}!${ce.options.appId}`}class Dn{constructor(Q){this.container=Q,this._heartbeatsCache=null;const Ae=this.container.getProvider("app").getImmediate();this._storage=new Gi(Ae),this._heartbeatsCachePromise=this._storage.read().then(nt=>(this._heartbeatsCache=nt,nt))}triggerHeartbeat(){var Q=this;return(0,g.Z)(function*(){const nt=Q.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),Ge=jt();if(null===Q._heartbeatsCache&&(Q._heartbeatsCache=yield Q._heartbeatsCachePromise),Q._heartbeatsCache.lastSentHeartbeatDate!==Ge&&!Q._heartbeatsCache.heartbeats.some(xt=>xt.date===Ge))return Q._heartbeatsCache.heartbeats.push({date:Ge,agent:nt}),Q._heartbeatsCache.heartbeats=Q._heartbeatsCache.heartbeats.filter(xt=>{const zt=new Date(xt.date).valueOf();return Date.now()-zt<=2592e6}),Q._storage.overwrite(Q._heartbeatsCache)})()}getHeartbeatsHeader(){var Q=this;return(0,g.Z)(function*(){if(null===Q._heartbeatsCache&&(yield Q._heartbeatsCachePromise),null===Q._heartbeatsCache||0===Q._heartbeatsCache.heartbeats.length)return"";const Ae=jt(),{heartbeatsToSend:nt,unsentEntries:Ge}=function Hn(ce,Q=1024){const Ae=[];let nt=ce.slice();for(const Ge of ce){const xt=Ae.find(zt=>zt.agent===Ge.agent);if(xt){if(xt.dates.push(Ge.date),hs(Ae)>Q){xt.dates.pop();break}}else if(Ae.push({agent:Ge.agent,dates:[Ge.date]}),hs(Ae)>Q){Ae.pop();break}nt=nt.slice(1)}return{heartbeatsToSend:Ae,unsentEntries:nt}}(Q._heartbeatsCache.heartbeats),xt=(0,oe.L)(JSON.stringify({version:2,heartbeats:nt}));return Q._heartbeatsCache.lastSentHeartbeatDate=Ae,Ge.length>0?(Q._heartbeatsCache.heartbeats=Ge,yield Q._storage.overwrite(Q._heartbeatsCache)):(Q._heartbeatsCache.heartbeats=[],Q._storage.overwrite(Q._heartbeatsCache)),xt})()}}function jt(){return(new Date).toISOString().substring(0,10)}class Gi{constructor(Q){this.app=Q,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,g.Z)(function*(){return!!(0,oe.hl)()&&(0,oe.eu)().then(()=>!0).catch(()=>!1)})()}read(){var Q=this;return(0,g.Z)(function*(){return(yield Q._canUseIndexedDBPromise)&&(yield function ye(ce){return te.apply(this,arguments)}(Q.app))||{heartbeats:[]}})()}overwrite(Q){var Ae=this;return(0,g.Z)(function*(){var nt;if(yield Ae._canUseIndexedDBPromise){const xt=yield Ae.read();return Ye(Ae.app,{lastSentHeartbeatDate:null!==(nt=Q.lastSentHeartbeatDate)&&void 0!==nt?nt:xt.lastSentHeartbeatDate,heartbeats:Q.heartbeats})}})()}add(Q){var Ae=this;return(0,g.Z)(function*(){var nt;if(yield Ae._canUseIndexedDBPromise){const xt=yield Ae.read();return Ye(Ae.app,{lastSentHeartbeatDate:null!==(nt=Q.lastSentHeartbeatDate)&&void 0!==nt?nt:xt.lastSentHeartbeatDate,heartbeats:[...xt.heartbeats,...Q.heartbeats]})}})()}}function hs(ce){return(0,oe.L)(JSON.stringify({version:2,heartbeats:ce})).length}!function Sa(ce){Qt(new J.wA("platform-logger",Q=>new kt(Q),"PRIVATE")),Qt(new J.wA("heartbeat",Q=>new Dn(Q),"PRIVATE")),Yn(jr,"0.9.13",ce),Yn(jr,"0.9.13","esm2017"),Yn("fire-js","")}("")},4537:(ft,Me,k)=>{k.d(Me,{H0:()=>Fe,wA:()=>R});var g=k(5861),J=k(9058);class R{constructor(V,H,ie){this.name=V,this.instanceFactory=H,this.type=ie,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(V){return this.instantiationMode=V,this}setMultipleInstances(V){return this.multipleInstances=V,this}setServiceProps(V){return this.serviceProps=V,this}setInstanceCreatedCallback(V){return this.onInstanceCreated=V,this}}const oe="[DEFAULT]";class ne{constructor(V,H){this.name=V,this.container=H,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(V){const H=this.normalizeInstanceIdentifier(V);if(!this.instancesDeferred.has(H)){const ie=new J.BH;if(this.instancesDeferred.set(H,ie),this.isInitialized(H)||this.shouldAutoInitialize())try{const qe=this.getOrInitializeService({instanceIdentifier:H});qe&&ie.resolve(qe)}catch{}}return this.instancesDeferred.get(H).promise}getImmediate(V){var H;const ie=this.normalizeInstanceIdentifier(V?.identifier),qe=null!==(H=V?.optional)&&void 0!==H&&H;if(!this.isInitialized(ie)&&!this.shouldAutoInitialize()){if(qe)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:ie})}catch(Oe){if(qe)return null;throw Oe}}getComponent(){return this.component}setComponent(V){if(V.name!==this.name)throw Error(`Mismatching Component ${V.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=V,this.shouldAutoInitialize()){if(function fe(we){return"EAGER"===we.instantiationMode}(V))try{this.getOrInitializeService({instanceIdentifier:oe})}catch{}for(const[H,ie]of this.instancesDeferred.entries()){const qe=this.normalizeInstanceIdentifier(H);try{const Oe=this.getOrInitializeService({instanceIdentifier:qe});ie.resolve(Oe)}catch{}}}}clearInstance(V=oe){this.instancesDeferred.delete(V),this.instancesOptions.delete(V),this.instances.delete(V)}delete(){var V=this;return(0,g.Z)(function*(){const H=Array.from(V.instances.values());yield Promise.all([...H.filter(ie=>"INTERNAL"in ie).map(ie=>ie.INTERNAL.delete()),...H.filter(ie=>"_delete"in ie).map(ie=>ie._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(V=oe){return this.instances.has(V)}getOptions(V=oe){return this.instancesOptions.get(V)||{}}initialize(V={}){const{options:H={}}=V,ie=this.normalizeInstanceIdentifier(V.instanceIdentifier);if(this.isInitialized(ie))throw Error(`${this.name}(${ie}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const qe=this.getOrInitializeService({instanceIdentifier:ie,options:H});for(const[Oe,lt]of this.instancesDeferred.entries())ie===this.normalizeInstanceIdentifier(Oe)&&lt.resolve(qe);return qe}onInit(V,H){var ie;const qe=this.normalizeInstanceIdentifier(H),Oe=null!==(ie=this.onInitCallbacks.get(qe))&&void 0!==ie?ie:new Set;Oe.add(V),this.onInitCallbacks.set(qe,Oe);const lt=this.instances.get(qe);return lt&&V(lt,qe),()=>{Oe.delete(V)}}invokeOnInitCallbacks(V,H){const ie=this.onInitCallbacks.get(H);if(ie)for(const qe of ie)try{qe(V,H)}catch{}}getOrInitializeService({instanceIdentifier:V,options:H={}}){let ie=this.instances.get(V);if(!ie&&this.component&&(ie=this.component.instanceFactory(this.container,{instanceIdentifier:(we=V,we===oe?void 0:we),options:H}),this.instances.set(V,ie),this.instancesOptions.set(V,H),this.invokeOnInitCallbacks(ie,V),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,V,ie)}catch{}var we;return ie||null}normalizeInstanceIdentifier(V=oe){return this.component?this.component.multipleInstances?V:oe:V}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class Fe{constructor(V){this.name=V,this.providers=new Map}addComponent(V){const H=this.getProvider(V.name);if(H.isComponentSet())throw new Error(`Component ${V.name} has already been registered with ${this.name}`);H.setComponent(V)}addOrOverwriteComponent(V){this.getProvider(V.name).isComponentSet()&&this.providers.delete(V.name),this.addComponent(V)}getProvider(V){if(this.providers.has(V))return this.providers.get(V);const H=new ne(V,this);return this.providers.set(V,H),H}getProviders(){return Array.from(this.providers.values())}}},7879:(ft,Me,k)=>{k.d(Me,{Am:()=>we,Ub:()=>Fe,Yd:()=>fe,in:()=>J});const g=[];var J=function(V){return V[V.DEBUG=0]="DEBUG",V[V.VERBOSE=1]="VERBOSE",V[V.INFO=2]="INFO",V[V.WARN=3]="WARN",V[V.ERROR=4]="ERROR",V[V.SILENT=5]="SILENT",V}(J||{});const R={debug:J.DEBUG,verbose:J.VERBOSE,info:J.INFO,warn:J.WARN,error:J.ERROR,silent:J.SILENT},oe=J.INFO,ne={[J.DEBUG]:"log",[J.VERBOSE]:"log",[J.INFO]:"info",[J.WARN]:"warn",[J.ERROR]:"error"},ve=(V,H,...ie)=>{if(H<V.logLevel)return;const qe=(new Date).toISOString(),Oe=ne[H];if(!Oe)throw new Error(`Attempted to log a message with an invalid logType (value: ${H})`);console[Oe](`[${qe}]  ${V.name}:`,...ie)};class fe{constructor(H){this.name=H,this._logLevel=oe,this._logHandler=ve,this._userLogHandler=null,g.push(this)}get logLevel(){return this._logLevel}set logLevel(H){if(!(H in J))throw new TypeError(`Invalid value "${H}" assigned to \`logLevel\``);this._logLevel=H}setLogLevel(H){this._logLevel="string"==typeof H?R[H]:H}get logHandler(){return this._logHandler}set logHandler(H){if("function"!=typeof H)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=H}get userLogHandler(){return this._userLogHandler}set userLogHandler(H){this._userLogHandler=H}debug(...H){this._userLogHandler&&this._userLogHandler(this,J.DEBUG,...H),this._logHandler(this,J.DEBUG,...H)}log(...H){this._userLogHandler&&this._userLogHandler(this,J.VERBOSE,...H),this._logHandler(this,J.VERBOSE,...H)}info(...H){this._userLogHandler&&this._userLogHandler(this,J.INFO,...H),this._logHandler(this,J.INFO,...H)}warn(...H){this._userLogHandler&&this._userLogHandler(this,J.WARN,...H),this._logHandler(this,J.WARN,...H)}error(...H){this._userLogHandler&&this._userLogHandler(this,J.ERROR,...H),this._logHandler(this,J.ERROR,...H)}}function Fe(V){g.forEach(H=>{H.setLogLevel(V)})}function we(V,H){for(const ie of g){let qe=null;H&&H.level&&(qe=R[H.level]),ie.userLogHandler=null===V?null:(Oe,lt,...pe)=>{const Ue=pe.map(Le=>{if(null==Le)return null;if("string"==typeof Le)return Le;if("number"==typeof Le||"boolean"==typeof Le)return Le.toString();if(Le instanceof Error)return Le.message;try{return JSON.stringify(Le)}catch{return null}}).filter(Le=>Le).join(" ");lt>=(qe??Oe.logLevel)&&V({level:J[lt].toLowerCase(),message:Ue,args:pe,type:Oe.name})}}}},3182:(ft,Me,k)=>{k.d(Me,{C6:()=>g.getApps,Mq:()=>g.getApp});var g=k(534);(0,g.registerVersion)("firebase","9.23.0","app")},7142:(ft,Me,k)=>{k.d(Me,{Z:()=>g.Z});var g=k(3106);g.Z.registerVersion("firebase","9.23.0","app-compat")},5967:(ft,Me,k)=>{k.r(Me);var g=k(5861),J=k(3106),R=k(9058),oe=k(534),ne=k(7582),ve=k(7879),fe=k(4537);const we={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"};const lt=function qe(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend."}},pe=function Oe(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},Ue=new R.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),at=new ve.Yd("@firebase/auth");function K(y,...h){at.logLevel<=ve.in.ERROR&&at.error(`Auth (${oe.SDK_VERSION}): ${y}`,...h)}function he(y,...h){throw Ze(y,...h)}function Y(y,...h){return Ze(y,...h)}function Ce(y,h,p){const v=Object.assign(Object.assign({},pe()),{[h]:p});return new R.LL("auth","Firebase",v).create(h,{appName:y.name})}function ke(y,h,p){if(!(h instanceof p))throw p.name!==h.constructor.name&&he(y,"argument-error"),Ce(y,"argument-error",`Type of ${h.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Ze(y,...h){if("string"!=typeof y){const p=h[0],v=[...h.slice(1)];return v[0]&&(v[0].appName=y.name),y._errorFactory.create(p,...v)}return Ue.create(y,...h)}function re(y,h,...p){if(!y)throw Ze(h,...p)}function ut(y){const h="INTERNAL ASSERTION FAILED: "+y;throw K(h),new Error(h)}function kt(y,h){y||ut(h)}function sr(){var y;return typeof self<"u"&&(null===(y=self.location)||void 0===y?void 0:y.href)||""}function jr(){return"http:"===cs()||"https:"===cs()}function cs(){var y;return typeof self<"u"&&(null===(y=self.location)||void 0===y?void 0:y.protocol)||null}class ls{constructor(h,p){this.shortDelay=h,this.longDelay=p,kt(p>h,"Short delay should be less than long delay!"),this.isMobile=(0,R.uI)()||(0,R.b$)()}get(){return function Pn(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(jr()||(0,R.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function ue(y,h){kt(y.emulator,"Emulator should always be set here");const{url:p}=y.emulator;return h?`${p}${h.startsWith("/")?h.slice(1):h}`:p}class le{static initialize(h,p,v){this.fetchImpl=h,p&&(this.headersImpl=p),v&&(this.responseImpl=v)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:void ut("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:void ut("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:void ut("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const ge={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},me=new ls(3e4,6e4);function Ie(y,h){return y.tenantId&&!h.tenantId?Object.assign(Object.assign({},h),{tenantId:y.tenantId}):h}function be(y,h,p,v){return et.apply(this,arguments)}function et(){return(et=(0,g.Z)(function*(y,h,p,v,T={}){return $e(y,T,(0,g.Z)(function*(){let N={},U={};v&&("GET"===h?U=v:N={body:JSON.stringify(v)});const Z=(0,R.xO)(Object.assign({key:y.config.apiKey},U)).slice(1),xe=yield y._getAdditionalHeaders();return xe["Content-Type"]="application/json",y.languageCode&&(xe["X-Firebase-Locale"]=y.languageCode),le.fetch()(Mt(y,y.config.apiHost,p,Z),Object.assign({method:h,headers:xe,referrerPolicy:"no-referrer"},N))}))})).apply(this,arguments)}function $e(y,h,p){return Sn.apply(this,arguments)}function Sn(){return(Sn=(0,g.Z)(function*(y,h,p){y._canInitEmulator=!1;const v=Object.assign(Object.assign({},ge),h);try{const T=new hn(y),N=yield Promise.race([p(),T.promise]);T.clearNetworkTimeout();const U=yield N.json();if("needConfirmation"in U)throw _n(y,"account-exists-with-different-credential",U);if(N.ok&&!("errorMessage"in U))return U;{const Z=N.ok?U.errorMessage:U.error.message,[xe,Ve]=Z.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===xe)throw _n(y,"credential-already-in-use",U);if("EMAIL_EXISTS"===xe)throw _n(y,"email-already-in-use",U);if("USER_DISABLED"===xe)throw _n(y,"user-disabled",U);const tt=v[xe]||xe.toLowerCase().replace(/[_\s]+/g,"-");if(Ve)throw Ce(y,tt,Ve);he(y,tt)}}catch(T){if(T instanceof R.ZR)throw T;he(y,"network-request-failed",{message:String(T)})}})).apply(this,arguments)}function pt(y,h,p,v){return Gt.apply(this,arguments)}function Gt(){return(Gt=(0,g.Z)(function*(y,h,p,v,T={}){const N=yield be(y,h,p,v,T);return"mfaPendingCredential"in N&&he(y,"multi-factor-auth-required",{_serverResponse:N}),N})).apply(this,arguments)}function Mt(y,h,p,v){const T=`${h}${p}?${v}`;return y.config.emulator?ue(y.config,T):`${y.config.apiScheme}://${T}`}class hn{constructor(h){this.auth=h,this.timer=null,this.promise=new Promise((p,v)=>{this.timer=setTimeout(()=>v(Y(this.auth,"network-request-failed")),me.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function _n(y,h,p){const v={appName:y.name};p.email&&(v.email=p.email),p.phoneNumber&&(v.phoneNumber=p.phoneNumber);const T=Y(y,h,v);return T.customData._tokenResponse=p,T}function nn(){return(nn=(0,g.Z)(function*(y,h){return be(y,"POST","/v1/accounts:delete",h)})).apply(this,arguments)}function ri(){return(ri=(0,g.Z)(function*(y,h){return be(y,"POST","/v1/accounts:update",h)})).apply(this,arguments)}function ii(){return(ii=(0,g.Z)(function*(y,h){return be(y,"POST","/v1/accounts:lookup",h)})).apply(this,arguments)}function si(y){if(y)try{const h=new Date(Number(y));if(!isNaN(h.getTime()))return h.toUTCString()}catch{}}function gt(){return(gt=(0,g.Z)(function*(y,h=!1){const p=(0,R.m9)(y),v=yield p.getIdToken(h),T=Ct(v);re(T&&T.exp&&T.auth_time&&T.iat,p.auth,"internal-error");const N="object"==typeof T.firebase?T.firebase:void 0,U=N?.sign_in_provider;return{claims:T,token:v,authTime:si(Ft(T.auth_time)),issuedAtTime:si(Ft(T.iat)),expirationTime:si(Ft(T.exp)),signInProvider:U||null,signInSecondFactor:N?.sign_in_second_factor||null}})).apply(this,arguments)}function Ft(y){return 1e3*Number(y)}function Ct(y){const[h,p,v]=y.split(".");if(void 0===h||void 0===p||void 0===v)return K("JWT malformed, contained fewer than 3 sections"),null;try{const T=(0,R.tV)(p);return T?JSON.parse(T):(K("Failed to decode base64 JWT payload"),null)}catch(T){return K("Caught error parsing JWT payload as JSON",T?.toString()),null}}function vn(y,h){return Hr.apply(this,arguments)}function Hr(){return(Hr=(0,g.Z)(function*(y,h,p=!1){if(p)return h;try{return yield h}catch(v){throw v instanceof R.ZR&&function Qt({code:y}){return"auth/user-disabled"===y||"auth/user-token-expired"===y}(v)&&y.auth.currentUser===y&&(yield y.auth.signOut()),v}})).apply(this,arguments)}class ar{constructor(h){this.user=h,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(h){var p;if(h){const v=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),v}{this.errorBackoff=3e4;const T=(null!==(p=this.user.stsTokenManager.expirationTime)&&void 0!==p?p:0)-Date.now()-3e5;return Math.max(0,T)}}schedule(h=!1){var p=this;if(!this.isRunning)return;const v=this.getInterval(h);this.timerId=setTimeout((0,g.Z)(function*(){yield p.iteration()}),v)}iteration(){var h=this;return(0,g.Z)(function*(){try{yield h.user.getIdToken(!0)}catch(p){return void("auth/network-request-failed"===p?.code&&h.schedule(!0))}h.schedule()})()}}class Ta{constructor(h,p){this.createdAt=h,this.lastLoginAt=p,this._initializeTime()}_initializeTime(){this.lastSignInTime=si(this.lastLoginAt),this.creationTime=si(this.createdAt)}_copy(h){this.createdAt=h.createdAt,this.lastLoginAt=h.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function qt(y){return $r.apply(this,arguments)}function $r(){return $r=(0,g.Z)(function*(y){var h;const p=y.auth,v=yield y.getIdToken(),T=yield vn(y,function Ws(y,h){return ii.apply(this,arguments)}(p,{idToken:v}));re(T?.users.length,p,"internal-error");const N=T.users[0];y._notifyReloadListener(N);const U=null!==(h=N.providerUserInfo)&&void 0!==h&&h.length?function Ks(y){return y.map(h=>{var{providerId:p}=h,v=(0,ne._T)(h,["providerId"]);return{providerId:p,uid:v.rawId||"",displayName:v.displayName||null,email:v.email||null,phoneNumber:v.phoneNumber||null,photoURL:v.photoUrl||null}})}(N.providerUserInfo):[],Z=function Zs(y,h){return[...y.filter(v=>!h.some(T=>T.providerId===v.providerId)),...h]}(y.providerData,U),tt=!!y.isAnonymous&&!(y.email&&N.passwordHash||Z?.length),ot={uid:N.localId,displayName:N.displayName||null,photoURL:N.photoUrl||null,email:N.email||null,emailVerified:N.emailVerified||!1,phoneNumber:N.phoneNumber||null,tenantId:N.tenantId||null,providerData:Z,metadata:new Ta(N.createdAt,N.lastLoginAt),isAnonymous:tt};Object.assign(y,ot)}),$r.apply(this,arguments)}function ds(){return(ds=(0,g.Z)(function*(y){const h=(0,R.m9)(y);yield qt(h),yield h.auth._persistUserIfCurrent(h),h.auth._notifyListenersIfCurrent(h)})).apply(this,arguments)}function bs(){return(bs=(0,g.Z)(function*(y,h){const p=yield $e(y,{},(0,g.Z)(function*(){const v=(0,R.xO)({grant_type:"refresh_token",refresh_token:h}).slice(1),{tokenApiHost:T,apiKey:N}=y.config,U=Mt(y,T,"/v1/token",`key=${N}`),Z=yield y._getAdditionalHeaders();return Z["Content-Type"]="application/x-www-form-urlencoded",le.fetch()(U,{method:"POST",headers:Z,body:v})}));return{accessToken:p.access_token,expiresIn:p.expires_in,refreshToken:p.refresh_token}})).apply(this,arguments)}class xi{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(h){re(h.idToken,"internal-error"),re(typeof h.idToken<"u","internal-error"),re(typeof h.refreshToken<"u","internal-error");const p="expiresIn"in h&&typeof h.expiresIn<"u"?Number(h.expiresIn):function rn(y){const h=Ct(y);return re(h,"internal-error"),re(typeof h.exp<"u","internal-error"),re(typeof h.iat<"u","internal-error"),Number(h.exp)-Number(h.iat)}(h.idToken);this.updateTokensAndExpiration(h.idToken,h.refreshToken,p)}getToken(h,p=!1){var v=this;return(0,g.Z)(function*(){return re(!v.accessToken||v.refreshToken,h,"user-token-expired"),p||!v.accessToken||v.isExpired?v.refreshToken?(yield v.refresh(h,v.refreshToken),v.accessToken):null:v.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(h,p){var v=this;return(0,g.Z)(function*(){const{accessToken:T,refreshToken:N,expiresIn:U}=yield function yi(y,h){return bs.apply(this,arguments)}(h,p);v.updateTokensAndExpiration(T,N,Number(U))})()}updateTokensAndExpiration(h,p,v){this.refreshToken=p||null,this.accessToken=h||null,this.expirationTime=Date.now()+1e3*v}static fromJSON(h,p){const{refreshToken:v,accessToken:T,expirationTime:N}=p,U=new xi;return v&&(re("string"==typeof v,"internal-error",{appName:h}),U.refreshToken=v),T&&(re("string"==typeof T,"internal-error",{appName:h}),U.accessToken=T),N&&(re("number"==typeof N,"internal-error",{appName:h}),U.expirationTime=N),U}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(h){this.accessToken=h.accessToken,this.refreshToken=h.refreshToken,this.expirationTime=h.expirationTime}_clone(){return Object.assign(new xi,this.toJSON())}_performRefresh(){return ut("not implemented")}}function Kn(y,h){re("string"==typeof y||typeof y>"u","internal-error",{appName:h})}class Yn{constructor(h){var{uid:p,auth:v,stsTokenManager:T}=h,N=(0,ne._T)(h,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new ar(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=p,this.auth=v,this.stsTokenManager=T,this.accessToken=T.accessToken,this.displayName=N.displayName||null,this.email=N.email||null,this.emailVerified=N.emailVerified||!1,this.phoneNumber=N.phoneNumber||null,this.photoURL=N.photoURL||null,this.isAnonymous=N.isAnonymous||!1,this.tenantId=N.tenantId||null,this.providerData=N.providerData?[...N.providerData]:[],this.metadata=new Ta(N.createdAt||void 0,N.lastLoginAt||void 0)}getIdToken(h){var p=this;return(0,g.Z)(function*(){const v=yield vn(p,p.stsTokenManager.getToken(p.auth,h));return re(v,p.auth,"internal-error"),p.accessToken!==v&&(p.accessToken=v,yield p.auth._persistUserIfCurrent(p),p.auth._notifyListenersIfCurrent(p)),v})()}getIdTokenResult(h){return function ba(y){return gt.apply(this,arguments)}(this,h)}reload(){return function Lt(y){return ds.apply(this,arguments)}(this)}_assign(h){this!==h&&(re(this.uid===h.uid,this.auth,"internal-error"),this.displayName=h.displayName,this.photoURL=h.photoURL,this.email=h.email,this.emailVerified=h.emailVerified,this.phoneNumber=h.phoneNumber,this.isAnonymous=h.isAnonymous,this.tenantId=h.tenantId,this.providerData=h.providerData.map(p=>Object.assign({},p)),this.metadata._copy(h.metadata),this.stsTokenManager._assign(h.stsTokenManager))}_clone(h){const p=new Yn(Object.assign(Object.assign({},this),{auth:h,stsTokenManager:this.stsTokenManager._clone()}));return p.metadata._copy(this.metadata),p}_onReload(h){re(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=h,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(h){this.reloadListener?this.reloadListener(h):this.reloadUserInfo=h}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(h,p=!1){var v=this;return(0,g.Z)(function*(){let T=!1;h.idToken&&h.idToken!==v.stsTokenManager.accessToken&&(v.stsTokenManager.updateFromServerResponse(h),T=!0),p&&(yield qt(v)),yield v.auth._persistUserIfCurrent(v),T&&v.auth._notifyListenersIfCurrent(v)})()}delete(){var h=this;return(0,g.Z)(function*(){const p=yield h.getIdToken();return yield vn(h,function or(y,h){return nn.apply(this,arguments)}(h.auth,{idToken:p})),h.stsTokenManager.clearRefreshToken(),h.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(h=>Object.assign({},h)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(h,p){var v,T,N,U,Z,xe,Ve,tt;const ot=null!==(v=p.displayName)&&void 0!==v?v:void 0,Mn=null!==(T=p.email)&&void 0!==T?T:void 0,_s=null!==(N=p.phoneNumber)&&void 0!==N?N:void 0,fh=null!==(U=p.photoURL)&&void 0!==U?U:void 0,wc=null!==(Z=p.tenantId)&&void 0!==Z?Z:void 0,Ll=null!==(xe=p._redirectEventId)&&void 0!==xe?xe:void 0,hm=null!==(Ve=p.createdAt)&&void 0!==Ve?Ve:void 0,ip=null!==(tt=p.lastLoginAt)&&void 0!==tt?tt:void 0,{uid:uu,emailVerified:W_,isAnonymous:fm,providerData:sp,stsTokenManager:cu}=p;re(uu&&cu,h,"internal-error");const Rr=xi.fromJSON(this.name,cu);re("string"==typeof uu,h,"internal-error"),Kn(ot,h.name),Kn(Mn,h.name),re("boolean"==typeof W_,h,"internal-error"),re("boolean"==typeof fm,h,"internal-error"),Kn(_s,h.name),Kn(fh,h.name),Kn(wc,h.name),Kn(Ll,h.name),Kn(hm,h.name),Kn(ip,h.name);const op=new Yn({uid:uu,auth:h,email:Mn,emailVerified:W_,displayName:ot,isAnonymous:fm,photoURL:fh,phoneNumber:_s,tenantId:wc,stsTokenManager:Rr,createdAt:hm,lastLoginAt:ip});return sp&&Array.isArray(sp)&&(op.providerData=sp.map(pm=>Object.assign({},pm))),Ll&&(op._redirectEventId=Ll),op}static _fromIdTokenResponse(h,p,v=!1){return(0,g.Z)(function*(){const T=new xi;T.updateFromServerResponse(p);const N=new Yn({uid:p.localId,auth:h,stsTokenManager:T,isAnonymous:v});return yield qt(N),N})()}}const Gr=new Map;function Rn(y){kt(y instanceof Function,"Expected a class definition");let h=Gr.get(y);return h?(kt(h instanceof y,"Instance stored in cache mismatched with class"),h):(h=new y,Gr.set(y,h),h)}const vi=(()=>{class y{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,g.Z)(function*(){return!0})()}_set(p,v){var T=this;return(0,g.Z)(function*(){T.storage[p]=v})()}_get(p){var v=this;return(0,g.Z)(function*(){const T=v.storage[p];return void 0===T?null:T})()}_remove(p){var v=this;return(0,g.Z)(function*(){delete v.storage[p]})()}_addListener(p,v){}_removeListener(p,v){}}return y.type="NONE",y})();function B(y,h,p){return`firebase:${y}:${h}:${p}`}class L{constructor(h,p,v){this.persistence=h,this.auth=p,this.userKey=v;const{config:T,name:N}=this.auth;this.fullUserKey=B(this.userKey,T.apiKey,N),this.fullPersistenceKey=B("persistence",T.apiKey,N),this.boundEventHandler=p._onStorageEvent.bind(p),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(h){return this.persistence._set(this.fullUserKey,h.toJSON())}getCurrentUser(){var h=this;return(0,g.Z)(function*(){const p=yield h.persistence._get(h.fullUserKey);return p?Yn._fromJSON(h.auth,p):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(h){var p=this;return(0,g.Z)(function*(){if(p.persistence===h)return;const v=yield p.getCurrentUser();return yield p.removeCurrentUser(),p.persistence=h,v?p.setCurrentUser(v):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(h,p,v="authUser"){return(0,g.Z)(function*(){if(!p.length)return new L(Rn(vi),h,v);const T=(yield Promise.all(p.map(function(){var Ve=(0,g.Z)(function*(tt){if(yield tt._isAvailable())return tt});return function(tt){return Ve.apply(this,arguments)}}()))).filter(Ve=>Ve);let N=T[0]||Rn(vi);const U=B(v,h.config.apiKey,h.name);let Z=null;for(const Ve of p)try{const tt=yield Ve._get(U);if(tt){const ot=Yn._fromJSON(h,tt);Ve!==N&&(Z=ot),N=Ve;break}}catch{}const xe=T.filter(Ve=>Ve._shouldAllowMigration);return N._shouldAllowMigration&&xe.length?(N=xe[0],Z&&(yield N._set(U,Z.toJSON())),yield Promise.all(p.map(function(){var Ve=(0,g.Z)(function*(tt){if(tt!==N)try{yield tt._remove(U)}catch{}});return function(tt){return Ve.apply(this,arguments)}}())),new L(N,h,v)):new L(N,h,v)})()}}function G(y){const h=y.toLowerCase();if(h.includes("opera/")||h.includes("opr/")||h.includes("opios/"))return"Opera";if(Et(h))return"IEMobile";if(h.includes("msie")||h.includes("trident/"))return"IE";if(h.includes("edge/"))return"Edge";if(ye(h))return"Firefox";if(h.includes("silk/"))return"Silk";if(Qn(h))return"Blackberry";if(bt(h))return"Webos";if(te(h))return"Safari";if((h.includes("chrome/")||Ye(h))&&!h.includes("edge/"))return"Chrome";if(yt(h))return"Android";{const v=y.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===v?.length)return v[1]}return"Other"}function ye(y=(0,R.z$)()){return/firefox\//i.test(y)}function te(y=(0,R.z$)()){const h=y.toLowerCase();return h.includes("safari/")&&!h.includes("chrome/")&&!h.includes("crios/")&&!h.includes("android")}function Ye(y=(0,R.z$)()){return/crios\//i.test(y)}function Et(y=(0,R.z$)()){return/iemobile/i.test(y)}function yt(y=(0,R.z$)()){return/android/i.test(y)}function Qn(y=(0,R.z$)()){return/blackberry/i.test(y)}function bt(y=(0,R.z$)()){return/webos/i.test(y)}function Dn(y=(0,R.z$)()){return/iphone|ipad|ipod/i.test(y)||/macintosh/i.test(y)&&/mobile/i.test(y)}function hs(y=(0,R.z$)()){return Dn(y)||yt(y)||bt(y)||Qn(y)||/windows phone/i.test(y)||Et(y)}function ce(y,h=[]){let p;switch(y){case"Browser":p=G((0,R.z$)());break;case"Worker":p=`${G((0,R.z$)())}-${y}`;break;default:p=y}const v=h.length?h.join(","):"FirebaseCore-web";return`${p}/JsCore/${oe.SDK_VERSION}/${v}`}function Ae(){return(Ae=(0,g.Z)(function*(y){return(yield be(y,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function nt(y,h){return Ge.apply(this,arguments)}function Ge(){return(Ge=(0,g.Z)(function*(y,h){return be(y,"GET","/v2/recaptchaConfig",Ie(y,h))})).apply(this,arguments)}function xt(y){return void 0!==y&&void 0!==y.getResponse}function zt(y){return void 0!==y&&void 0!==y.enterprise}class kn{constructor(h){if(this.siteKey="",this.emailPasswordEnabled=!1,void 0===h.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=h.recaptchaKey.split("/")[3],this.emailPasswordEnabled=h.recaptchaEnforcementState.some(p=>"EMAIL_PASSWORD_PROVIDER"===p.provider&&"OFF"!==p.enforcementState)}}function ur(y){return new Promise((h,p)=>{const v=document.createElement("script");v.setAttribute("src",y),v.onload=h,v.onerror=T=>{const N=Y("internal-error");N.customData=T,p(N)},v.type="text/javascript",v.charset="UTF-8",function Fn(){var y,h;return null!==(h=null===(y=document.getElementsByTagName("head"))||void 0===y?void 0:y[0])&&void 0!==h?h:document}().appendChild(v)})}function zi(y){return`__${y}${Math.floor(1e6*Math.random())}`}class Kc{constructor(h){this.type="recaptcha-enterprise",this.auth=Ln(h)}verify(h="verify",p=!1){var v=this;return(0,g.Z)(function*(){function N(){return N=(0,g.Z)(function*(Z){if(!p){if(null==Z.tenantId&&null!=Z._agentRecaptchaConfig)return Z._agentRecaptchaConfig.siteKey;if(null!=Z.tenantId&&void 0!==Z._tenantRecaptchaConfigs[Z.tenantId])return Z._tenantRecaptchaConfigs[Z.tenantId].siteKey}return new Promise(function(){var xe=(0,g.Z)(function*(Ve,tt){nt(Z,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(ot=>{if(void 0!==ot.recaptchaKey){const Mn=new kn(ot);return null==Z.tenantId?Z._agentRecaptchaConfig=Mn:Z._tenantRecaptchaConfigs[Z.tenantId]=Mn,Ve(Mn.siteKey)}tt(new Error("recaptcha Enterprise site key undefined"))}).catch(ot=>{tt(ot)})});return function(Ve,tt){return xe.apply(this,arguments)}}())}),N.apply(this,arguments)}function U(Z,xe,Ve){const tt=window.grecaptcha;zt(tt)?tt.enterprise.ready(()=>{tt.enterprise.execute(Z,{action:h}).then(ot=>{xe(ot)}).catch(()=>{xe("NO_RECAPTCHA")})}):Ve(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((Z,xe)=>{(function T(Z){return N.apply(this,arguments)})(v.auth).then(Ve=>{if(!p&&zt(window.grecaptcha))U(Ve,Z,xe);else{if(typeof window>"u")return void xe(new Error("RecaptchaVerifier is only supported in browser"));ur("https://www.google.com/recaptcha/enterprise.js?render="+Ve).then(()=>{U(Ve,Z,xe)}).catch(tt=>{xe(tt)})}}).catch(Ve=>{xe(Ve)})})})()}}function wi(y,h,p){return Ys.apply(this,arguments)}function Ys(){return(Ys=(0,g.Z)(function*(y,h,p,v=!1){const T=new Kc(y);let N;try{N=yield T.verify(p)}catch{N=yield T.verify(p,!0)}const U=Object.assign({},h);return Object.assign(U,v?{captchaResp:N}:{captchaResponse:N}),Object.assign(U,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(U,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),U})).apply(this,arguments)}class Aa{constructor(h){this.auth=h,this.queue=[]}pushCallback(h,p){const v=N=>new Promise((U,Z)=>{try{U(h(N))}catch(xe){Z(xe)}});v.onAbort=p,this.queue.push(v);const T=this.queue.length-1;return()=>{this.queue[T]=()=>Promise.resolve()}}runMiddleware(h){var p=this;return(0,g.Z)(function*(){if(p.auth.currentUser===h)return;const v=[];try{for(const T of p.queue)yield T(h),T.onAbort&&v.push(T.onAbort)}catch(T){v.reverse();for(const N of v)try{N()}catch{}throw p.auth._errorFactory.create("login-blocked",{originalMessage:T?.message})}})()}}class Yc{constructor(h,p,v,T){this.app=h,this.heartbeatServiceProvider=p,this.appCheckServiceProvider=v,this.config=T,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Qs(this),this.idTokenSubscription=new Qs(this),this.beforeStateQueue=new Aa(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Ue,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=h.name,this.clientVersion=T.sdkClientVersion}_initializeWithPersistence(h,p){var v=this;return p&&(this._popupRedirectResolver=Rn(p)),this._initializationPromise=this.queue((0,g.Z)(function*(){var T,N;if(!v._deleted&&(v.persistenceManager=yield L.create(v,h),!v._deleted)){if(null!==(T=v._popupRedirectResolver)&&void 0!==T&&T._shouldInitProactively)try{yield v._popupRedirectResolver._initialize(v)}catch{}yield v.initializeCurrentUser(p),v.lastNotifiedUid=(null===(N=v.currentUser)||void 0===N?void 0:N.uid)||null,!v._deleted&&(v._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var h=this;return(0,g.Z)(function*(){if(h._deleted)return;const p=yield h.assertedPersistence.getCurrentUser();if(h.currentUser||p){if(h.currentUser&&p&&h.currentUser.uid===p.uid)return h._currentUser._assign(p),void(yield h.currentUser.getIdToken());yield h._updateCurrentUser(p,!0)}})()}initializeCurrentUser(h){var p=this;return(0,g.Z)(function*(){var v;const T=yield p.assertedPersistence.getCurrentUser();let N=T,U=!1;if(h&&p.config.authDomain){yield p.getOrInitRedirectPersistenceManager();const Z=null===(v=p.redirectUser)||void 0===v?void 0:v._redirectEventId,xe=N?._redirectEventId,Ve=yield p.tryRedirectSignIn(h);(!Z||Z===xe)&&Ve?.user&&(N=Ve.user,U=!0)}if(!N)return p.directlySetCurrentUser(null);if(!N._redirectEventId){if(U)try{yield p.beforeStateQueue.runMiddleware(N)}catch(Z){N=T,p._popupRedirectResolver._overrideRedirectResult(p,()=>Promise.reject(Z))}return N?p.reloadAndSetCurrentUserOrClear(N):p.directlySetCurrentUser(null)}return re(p._popupRedirectResolver,p,"argument-error"),yield p.getOrInitRedirectPersistenceManager(),p.redirectUser&&p.redirectUser._redirectEventId===N._redirectEventId?p.directlySetCurrentUser(N):p.reloadAndSetCurrentUserOrClear(N)})()}tryRedirectSignIn(h){var p=this;return(0,g.Z)(function*(){let v=null;try{v=yield p._popupRedirectResolver._completeRedirectFn(p,h,!0)}catch{yield p._setRedirectUser(null)}return v})()}reloadAndSetCurrentUserOrClear(h){var p=this;return(0,g.Z)(function*(){try{yield qt(h)}catch(v){if("auth/network-request-failed"!==v?.code)return p.directlySetCurrentUser(null)}return p.directlySetCurrentUser(h)})()}useDeviceLanguage(){this.languageCode=function Fo(){if(typeof navigator>"u")return null;const y=navigator;return y.languages&&y.languages[0]||y.language||null}()}_delete(){var h=this;return(0,g.Z)(function*(){h._deleted=!0})()}updateCurrentUser(h){var p=this;return(0,g.Z)(function*(){const v=h?(0,R.m9)(h):null;return v&&re(v.auth.config.apiKey===p.config.apiKey,p,"invalid-user-token"),p._updateCurrentUser(v&&v._clone(p))})()}_updateCurrentUser(h,p=!1){var v=this;return(0,g.Z)(function*(){if(!v._deleted)return h&&re(v.tenantId===h.tenantId,v,"tenant-id-mismatch"),p||(yield v.beforeStateQueue.runMiddleware(h)),v.queue((0,g.Z)(function*(){yield v.directlySetCurrentUser(h),v.notifyAuthListeners()}))})()}signOut(){var h=this;return(0,g.Z)(function*(){return yield h.beforeStateQueue.runMiddleware(null),(h.redirectPersistenceManager||h._popupRedirectResolver)&&(yield h._setRedirectUser(null)),h._updateCurrentUser(null,!0)})()}setPersistence(h){var p=this;return this.queue((0,g.Z)(function*(){yield p.assertedPersistence.setPersistence(Rn(h))}))}initializeRecaptchaConfig(){var h=this;return(0,g.Z)(function*(){const p=yield nt(h,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),v=new kn(p);null==h.tenantId?h._agentRecaptchaConfig=v:h._tenantRecaptchaConfigs[h.tenantId]=v,v.emailPasswordEnabled&&new Kc(h).verify()})()}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(h){this._errorFactory=new R.LL("auth","Firebase",h())}onAuthStateChanged(h,p,v){return this.registerStateListener(this.authStateSubscription,h,p,v)}beforeAuthStateChanged(h,p){return this.beforeStateQueue.pushCallback(h,p)}onIdTokenChanged(h,p,v){return this.registerStateListener(this.idTokenSubscription,h,p,v)}toJSON(){var h;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(h=this._currentUser)||void 0===h?void 0:h.toJSON()}}_setRedirectUser(h,p){var v=this;return(0,g.Z)(function*(){const T=yield v.getOrInitRedirectPersistenceManager(p);return null===h?T.removeCurrentUser():T.setCurrentUser(h)})()}getOrInitRedirectPersistenceManager(h){var p=this;return(0,g.Z)(function*(){if(!p.redirectPersistenceManager){const v=h&&Rn(h)||p._popupRedirectResolver;re(v,p,"argument-error"),p.redirectPersistenceManager=yield L.create(p,[Rn(v._redirectPersistence)],"redirectUser"),p.redirectUser=yield p.redirectPersistenceManager.getCurrentUser()}return p.redirectPersistenceManager})()}_redirectUserForId(h){var p=this;return(0,g.Z)(function*(){var v,T;return p._isInitialized&&(yield p.queue((0,g.Z)(function*(){}))),(null===(v=p._currentUser)||void 0===v?void 0:v._redirectEventId)===h?p._currentUser:(null===(T=p.redirectUser)||void 0===T?void 0:T._redirectEventId)===h?p.redirectUser:null})()}_persistUserIfCurrent(h){var p=this;return(0,g.Z)(function*(){if(h===p.currentUser)return p.queue((0,g.Z)(function*(){return p.directlySetCurrentUser(h)}))})()}_notifyListenersIfCurrent(h){h===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var h,p;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const v=null!==(p=null===(h=this.currentUser)||void 0===h?void 0:h.uid)&&void 0!==p?p:null;this.lastNotifiedUid!==v&&(this.lastNotifiedUid=v,this.authStateSubscription.next(this.currentUser))}registerStateListener(h,p,v,T){if(this._deleted)return()=>{};const N="function"==typeof p?p:p.next.bind(p),U=this._isInitialized?Promise.resolve():this._initializationPromise;return re(U,this,"internal-error"),U.then(()=>N(this.currentUser)),"function"==typeof p?h.addObserver(p,v,T):h.addObserver(p)}directlySetCurrentUser(h){var p=this;return(0,g.Z)(function*(){p.currentUser&&p.currentUser!==h&&p._currentUser._stopProactiveRefresh(),h&&p.isProactiveRefreshEnabled&&h._startProactiveRefresh(),p.currentUser=h,h?yield p.assertedPersistence.setCurrentUser(h):yield p.assertedPersistence.removeCurrentUser()})()}queue(h){return this.operations=this.operations.then(h,h),this.operations}get assertedPersistence(){return re(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(h){!h||this.frameworks.includes(h)||(this.frameworks.push(h),this.frameworks.sort(),this.clientVersion=ce(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var h=this;return(0,g.Z)(function*(){var p;const v={"X-Client-Version":h.clientVersion};h.app.options.appId&&(v["X-Firebase-gmpid"]=h.app.options.appId);const T=yield null===(p=h.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===p?void 0:p.getHeartbeatsHeader();T&&(v["X-Firebase-Client"]=T);const N=yield h._getAppCheckToken();return N&&(v["X-Firebase-AppCheck"]=N),v})()}_getAppCheckToken(){var h=this;return(0,g.Z)(function*(){var p;const v=yield null===(p=h.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===p?void 0:p.getToken();return v?.error&&function it(y,...h){at.logLevel<=ve.in.WARN&&at.warn(`Auth (${oe.SDK_VERSION}): ${y}`,...h)}(`Error while retrieving App Check token: ${v.error}`),v?.token})()}}function Ln(y){return(0,R.m9)(y)}class Qs{constructor(h){this.auth=h,this.observer=null,this.addObserver=(0,R.ne)(p=>this.observer=p)}get next(){return re(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function Bo(y){const h=y.indexOf(":");return h<0?"":y.substr(0,h+1)}function Id(y){if(!y)return null;const h=Number(y);return isNaN(h)?null:h}class Js{constructor(h,p){this.providerId=h,this.signInMethod=p}toJSON(){return ut("not implemented")}_getIdTokenResponse(h){return ut("not implemented")}_linkToIdToken(h,p){return ut("not implemented")}_getReauthenticationResolver(h){return ut("not implemented")}}function Df(y,h){return Ma.apply(this,arguments)}function Ma(){return(Ma=(0,g.Z)(function*(y,h){return be(y,"POST","/v1/accounts:resetPassword",Ie(y,h))})).apply(this,arguments)}function Ed(y,h){return Dd.apply(this,arguments)}function Dd(){return(Dd=(0,g.Z)(function*(y,h){return be(y,"POST","/v1/accounts:update",h)})).apply(this,arguments)}function Lu(){return(Lu=(0,g.Z)(function*(y,h){return be(y,"POST","/v1/accounts:update",Ie(y,h))})).apply(this,arguments)}function Ir(y,h){return Jc.apply(this,arguments)}function Jc(){return(Jc=(0,g.Z)(function*(y,h){return pt(y,"POST","/v1/accounts:signInWithPassword",Ie(y,h))})).apply(this,arguments)}function Vu(y,h){return xa.apply(this,arguments)}function xa(){return(xa=(0,g.Z)(function*(y,h){return be(y,"POST","/v1/accounts:sendOobCode",Ie(y,h))})).apply(this,arguments)}function Bu(){return(Bu=(0,g.Z)(function*(y,h){return Vu(y,h)})).apply(this,arguments)}function Uo(y,h){return Xc.apply(this,arguments)}function Xc(){return(Xc=(0,g.Z)(function*(y,h){return Vu(y,h)})).apply(this,arguments)}function Ht(y,h){return An.apply(this,arguments)}function An(){return(An=(0,g.Z)(function*(y,h){return Vu(y,h)})).apply(this,arguments)}function Xs(){return(Xs=(0,g.Z)(function*(y,h){return Vu(y,h)})).apply(this,arguments)}function el(){return(el=(0,g.Z)(function*(y,h){return pt(y,"POST","/v1/accounts:signInWithEmailLink",Ie(y,h))})).apply(this,arguments)}function Na(){return(Na=(0,g.Z)(function*(y,h){return pt(y,"POST","/v1/accounts:signInWithEmailLink",Ie(y,h))})).apply(this,arguments)}class Uu extends Js{constructor(h,p,v,T=null){super("password",v),this._email=h,this._password=p,this._tenantId=T}static _fromEmailAndPassword(h,p){return new Uu(h,p,"password")}static _fromEmailAndCode(h,p,v=null){return new Uu(h,p,"emailLink",v)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(h){const p="string"==typeof h?JSON.parse(h):h;if(p?.email&&p?.password){if("password"===p.signInMethod)return this._fromEmailAndPassword(p.email,p.password);if("emailLink"===p.signInMethod)return this._fromEmailAndCode(p.email,p.password,p.tenantId)}return null}_getIdTokenResponse(h){var p=this;return(0,g.Z)(function*(){var v;switch(p.signInMethod){case"password":const T={returnSecureToken:!0,email:p._email,password:p._password,clientType:"CLIENT_TYPE_WEB"};if(null!==(v=h._getRecaptchaConfig())&&void 0!==v&&v.emailPasswordEnabled){const N=yield wi(h,T,"signInWithPassword");return Ir(h,N)}return Ir(h,T).catch(function(){var N=(0,g.Z)(function*(U){if("auth/missing-recaptcha-token"===U.code){console.log("Sign-in with email address and password is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow.");const Z=yield wi(h,T,"signInWithPassword");return Ir(h,Z)}return Promise.reject(U)});return function(U){return N.apply(this,arguments)}}());case"emailLink":return function xr(y,h){return el.apply(this,arguments)}(h,{email:p._email,oobCode:p._password});default:he(h,"internal-error")}})()}_linkToIdToken(h,p){var v=this;return(0,g.Z)(function*(){switch(v.signInMethod){case"password":return Ed(h,{idToken:p,returnSecureToken:!0,email:v._email,password:v._password});case"emailLink":return function Cf(y,h){return Na.apply(this,arguments)}(h,{idToken:p,email:v._email,oobCode:v._password});default:he(h,"internal-error")}})()}_getReauthenticationResolver(h){return this._getIdTokenResponse(h)}}function Ei(y,h){return fn.apply(this,arguments)}function fn(){return(fn=(0,g.Z)(function*(y,h){return pt(y,"POST","/v1/accounts:signInWithIdp",Ie(y,h))})).apply(this,arguments)}class mt extends Js{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(h){const p=new mt(h.providerId,h.signInMethod);return h.idToken||h.accessToken?(h.idToken&&(p.idToken=h.idToken),h.accessToken&&(p.accessToken=h.accessToken),h.nonce&&!h.pendingToken&&(p.nonce=h.nonce),h.pendingToken&&(p.pendingToken=h.pendingToken)):h.oauthToken&&h.oauthTokenSecret?(p.accessToken=h.oauthToken,p.secret=h.oauthTokenSecret):he("argument-error"),p}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(h){const p="string"==typeof h?JSON.parse(h):h,{providerId:v,signInMethod:T}=p,N=(0,ne._T)(p,["providerId","signInMethod"]);if(!v||!T)return null;const U=new mt(v,T);return U.idToken=N.idToken||void 0,U.accessToken=N.accessToken||void 0,U.secret=N.secret,U.nonce=N.nonce,U.pendingToken=N.pendingToken||null,U}_getIdTokenResponse(h){return Ei(h,this.buildRequest())}_linkToIdToken(h,p){const v=this.buildRequest();return v.idToken=p,Ei(h,v)}_getReauthenticationResolver(h){const p=this.buildRequest();return p.autoCreate=!1,Ei(h,p)}buildRequest(){const h={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)h.pendingToken=this.pendingToken;else{const p={};this.idToken&&(p.id_token=this.idToken),this.accessToken&&(p.access_token=this.accessToken),this.secret&&(p.oauth_token_secret=this.secret),p.providerId=this.providerId,this.nonce&&!this.pendingToken&&(p.nonce=this.nonce),h.postBody=(0,R.xO)(p)}return h}}function Nr(){return(Nr=(0,g.Z)(function*(y,h){return be(y,"POST","/v1/accounts:sendVerificationCode",Ie(y,h))})).apply(this,arguments)}function cr(){return(cr=(0,g.Z)(function*(y,h){return pt(y,"POST","/v1/accounts:signInWithPhoneNumber",Ie(y,h))})).apply(this,arguments)}function an(){return(an=(0,g.Z)(function*(y,h){const p=yield pt(y,"POST","/v1/accounts:signInWithPhoneNumber",Ie(y,h));if(p.temporaryProof)throw _n(y,"account-exists-with-different-credential",p);return p})).apply(this,arguments)}const fs={USER_NOT_FOUND:"user-not-found"};function _t(){return(_t=(0,g.Z)(function*(y,h){return pt(y,"POST","/v1/accounts:signInWithPhoneNumber",Ie(y,Object.assign(Object.assign({},h),{operation:"REAUTH"})),fs)})).apply(this,arguments)}class lr extends Js{constructor(h){super("phone","phone"),this.params=h}static _fromVerification(h,p){return new lr({verificationId:h,verificationCode:p})}static _fromTokenResponse(h,p){return new lr({phoneNumber:h,temporaryProof:p})}_getIdTokenResponse(h){return function eo(y,h){return cr.apply(this,arguments)}(h,this._makeVerificationRequest())}_linkToIdToken(h,p){return function Oa(y,h){return an.apply(this,arguments)}(h,Object.assign({idToken:p},this._makeVerificationRequest()))}_getReauthenticationResolver(h){return function jo(y,h){return _t.apply(this,arguments)}(h,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:h,phoneNumber:p,verificationId:v,verificationCode:T}=this.params;return h&&p?{temporaryProof:h,phoneNumber:p}:{sessionInfo:v,code:T}}toJSON(){const h={providerId:this.providerId};return this.params.phoneNumber&&(h.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(h.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(h.verificationCode=this.params.verificationCode),this.params.verificationId&&(h.verificationId=this.params.verificationId),h}static fromJSON(h){"string"==typeof h&&(h=JSON.parse(h));const{verificationId:p,verificationCode:v,phoneNumber:T,temporaryProof:N}=h;return v||p||T||N?new lr({verificationId:p,verificationCode:v,phoneNumber:T,temporaryProof:N}):null}}class gn{constructor(h){var p,v,T,N,U,Z;const xe=(0,R.zd)((0,R.pd)(h)),Ve=null!==(p=xe.apiKey)&&void 0!==p?p:null,tt=null!==(v=xe.oobCode)&&void 0!==v?v:null,ot=function bf(y){switch(y){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(T=xe.mode)&&void 0!==T?T:null);re(Ve&&tt&&ot,"argument-error"),this.apiKey=Ve,this.operation=ot,this.code=tt,this.continueUrl=null!==(N=xe.continueUrl)&&void 0!==N?N:null,this.languageCode=null!==(U=xe.languageCode)&&void 0!==U?U:null,this.tenantId=null!==(Z=xe.tenantId)&&void 0!==Z?Z:null}static parseLink(h){const p=function ps(y){const h=(0,R.zd)((0,R.pd)(y)).link,p=h?(0,R.zd)((0,R.pd)(h)).deep_link_id:null,v=(0,R.zd)((0,R.pd)(y)).deep_link_id;return(v?(0,R.zd)((0,R.pd)(v)).link:null)||v||p||h||y}(h);try{return new gn(p)}catch{return null}}}let to=(()=>{class y{constructor(){this.providerId=y.PROVIDER_ID}static credential(p,v){return Uu._fromEmailAndPassword(p,v)}static credentialWithLink(p,v){const T=gn.parseLink(v);return re(T,"argument-error"),Uu._fromEmailAndCode(p,T.code,T.tenantId)}}return y.PROVIDER_ID="password",y.EMAIL_PASSWORD_SIGN_IN_METHOD="password",y.EMAIL_LINK_SIGN_IN_METHOD="emailLink",y})();class dr{constructor(h){this.providerId=h,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(h){this.defaultLanguageCode=h}setCustomParameters(h){return this.customParameters=h,this}getCustomParameters(){return this.customParameters}}class Ts extends dr{constructor(){super(...arguments),this.scopes=[]}addScope(h){return this.scopes.includes(h)||this.scopes.push(h),this}getScopes(){return[...this.scopes]}}class gs extends Ts{static credentialFromJSON(h){const p="string"==typeof h?JSON.parse(h):h;return re("providerId"in p&&"signInMethod"in p,"argument-error"),mt._fromParams(p)}credential(h){return this._credential(Object.assign(Object.assign({},h),{nonce:h.rawNonce}))}_credential(h){return re(h.idToken||h.accessToken,"argument-error"),mt._fromParams(Object.assign(Object.assign({},h),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(h){return gs.oauthCredentialFromTaggedObject(h)}static credentialFromError(h){return gs.oauthCredentialFromTaggedObject(h.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:h}){if(!h)return null;const{oauthIdToken:p,oauthAccessToken:v,oauthTokenSecret:T,pendingToken:N,nonce:U,providerId:Z}=h;if(!v&&!T&&!p&&!N||!Z)return null;try{return new gs(Z)._credential({idToken:p,accessToken:v,nonce:U,pendingToken:N})}catch{return null}}}let Ss=(()=>{class y extends Ts{constructor(){super("facebook.com")}static credential(p){return mt._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.FACEBOOK_SIGN_IN_METHOD,accessToken:p})}static credentialFromResult(p){return y.credentialFromTaggedObject(p)}static credentialFromError(p){return y.credentialFromTaggedObject(p.customData||{})}static credentialFromTaggedObject({_tokenResponse:p}){if(!p||!("oauthAccessToken"in p)||!p.oauthAccessToken)return null;try{return y.credential(p.oauthAccessToken)}catch{return null}}}return y.FACEBOOK_SIGN_IN_METHOD="facebook.com",y.PROVIDER_ID="facebook.com",y})(),Di=(()=>{class y extends Ts{constructor(){super("google.com"),this.addScope("profile")}static credential(p,v){return mt._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.GOOGLE_SIGN_IN_METHOD,idToken:p,accessToken:v})}static credentialFromResult(p){return y.credentialFromTaggedObject(p)}static credentialFromError(p){return y.credentialFromTaggedObject(p.customData||{})}static credentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{oauthIdToken:v,oauthAccessToken:T}=p;if(!v&&!T)return null;try{return y.credential(v,T)}catch{return null}}}return y.GOOGLE_SIGN_IN_METHOD="google.com",y.PROVIDER_ID="google.com",y})(),Pa=(()=>{class y extends Ts{constructor(){super("github.com")}static credential(p){return mt._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.GITHUB_SIGN_IN_METHOD,accessToken:p})}static credentialFromResult(p){return y.credentialFromTaggedObject(p)}static credentialFromError(p){return y.credentialFromTaggedObject(p.customData||{})}static credentialFromTaggedObject({_tokenResponse:p}){if(!p||!("oauthAccessToken"in p)||!p.oauthAccessToken)return null;try{return y.credential(p.oauthAccessToken)}catch{return null}}}return y.GITHUB_SIGN_IN_METHOD="github.com",y.PROVIDER_ID="github.com",y})();class Pt extends Js{constructor(h,p){super(h,h),this.pendingToken=p}_getIdTokenResponse(h){return Ei(h,this.buildRequest())}_linkToIdToken(h,p){const v=this.buildRequest();return v.idToken=p,Ei(h,v)}_getReauthenticationResolver(h){const p=this.buildRequest();return p.autoCreate=!1,Ei(h,p)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(h){const p="string"==typeof h?JSON.parse(h):h,{providerId:v,signInMethod:T,pendingToken:N}=p;return v&&T&&N&&v===T?new Pt(v,N):null}static _create(h,p){return new Pt(h,p)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class Ho extends dr{constructor(h){re(h.startsWith("saml."),"argument-error"),super(h)}static credentialFromResult(h){return Ho.samlCredentialFromTaggedObject(h)}static credentialFromError(h){return Ho.samlCredentialFromTaggedObject(h.customData||{})}static credentialFromJSON(h){const p=Pt.fromJSON(h);return re(p,"argument-error"),p}static samlCredentialFromTaggedObject({_tokenResponse:h}){if(!h)return null;const{pendingToken:p,providerId:v}=h;if(!p||!v)return null;try{return Pt._create(v,p)}catch{return null}}}let ju=(()=>{class y extends Ts{constructor(){super("twitter.com")}static credential(p,v){return mt._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.TWITTER_SIGN_IN_METHOD,oauthToken:p,oauthTokenSecret:v})}static credentialFromResult(p){return y.credentialFromTaggedObject(p)}static credentialFromError(p){return y.credentialFromTaggedObject(p.customData||{})}static credentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{oauthAccessToken:v,oauthTokenSecret:T}=p;if(!v||!T)return null;try{return y.credential(v,T)}catch{return null}}}return y.TWITTER_SIGN_IN_METHOD="twitter.com",y.PROVIDER_ID="twitter.com",y})();function Jn(y,h){return no.apply(this,arguments)}function no(){return(no=(0,g.Z)(function*(y,h){return pt(y,"POST","/v1/accounts:signUp",Ie(y,h))})).apply(this,arguments)}class Xn{constructor(h){this.user=h.user,this.providerId=h.providerId,this._tokenResponse=h._tokenResponse,this.operationType=h.operationType}static _fromIdTokenResponse(h,p,v,T=!1){return(0,g.Z)(function*(){const N=yield Yn._fromIdTokenResponse(h,v,T),U=Ms(v);return new Xn({user:N,providerId:U,_tokenResponse:v,operationType:p})})()}static _forOperation(h,p,v){return(0,g.Z)(function*(){yield h._updateTokensIfNecessary(v,!0);const T=Ms(v);return new Xn({user:h,providerId:T,_tokenResponse:v,operationType:p})})()}}function Ms(y){return y.providerId?y.providerId:"phoneNumber"in y?"phone":null}function Tf(){return(Tf=(0,g.Z)(function*(y){var h;const p=Ln(y);if(yield p._initializationPromise,null!==(h=p.currentUser)&&void 0!==h&&h.isAnonymous)return new Xn({user:p.currentUser,providerId:null,operationType:"signIn"});const v=yield Jn(p,{returnSecureToken:!0}),T=yield Xn._fromIdTokenResponse(p,"signIn",v,!0);return yield p._updateCurrentUser(T.user),T})).apply(this,arguments)}class er extends R.ZR{constructor(h,p,v,T){var N;super(p.code,p.message),this.operationType=v,this.user=T,Object.setPrototypeOf(this,er.prototype),this.customData={appName:h.name,tenantId:null!==(N=h.tenantId)&&void 0!==N?N:void 0,_serverResponse:p.customData._serverResponse,operationType:v}}static _fromErrorAndOperation(h,p,v,T){return new er(h,p,v,T)}}function Er(y,h,p,v){return("reauthenticate"===h?p._getReauthenticationResolver(y):p._getIdTokenResponse(y)).catch(N=>{throw"auth/multi-factor-auth-required"===N.code?er._fromErrorAndOperation(y,N,h,v):N})}function Hu(y){return new Set(y.map(({providerId:h})=>h).filter(h=>!!h))}function oi(){return oi=(0,g.Z)(function*(y,h){const p=(0,R.m9)(y);yield Go(!0,p,h);const{providerUserInfo:v}=yield function Ar(y,h){return ri.apply(this,arguments)}(p.auth,{idToken:yield p.getIdToken(),deleteProvider:[h]}),T=Hu(v||[]);return p.providerData=p.providerData.filter(N=>T.has(N.providerId)),T.has("phone")||(p.phoneNumber=null),yield p.auth._persistUserIfCurrent(p),p}),oi.apply(this,arguments)}function qr(y,h){return $o.apply(this,arguments)}function $o(){return($o=(0,g.Z)(function*(y,h,p=!1){const v=yield vn(y,h._linkToIdToken(y.auth,yield y.getIdToken()),p);return Xn._forOperation(y,"link",v)})).apply(this,arguments)}function Go(y,h,p){return nl.apply(this,arguments)}function nl(){return(nl=(0,g.Z)(function*(y,h,p){yield qt(h);const T=!1===y?"provider-already-linked":"no-such-provider";re(Hu(h.providerData).has(p)===y,h.auth,T)})).apply(this,arguments)}function jg(y,h){return $u.apply(this,arguments)}function $u(){return($u=(0,g.Z)(function*(y,h,p=!1){const{auth:v}=y,T="reauthenticate";try{const N=yield vn(y,Er(v,T,h,y),p);re(N.idToken,v,"internal-error");const U=Ct(N.idToken);re(U,v,"internal-error");const{sub:Z}=U;return re(y.uid===Z,v,"user-mismatch"),Xn._forOperation(y,T,N)}catch(N){throw"auth/user-not-found"===N?.code&&he(v,"user-mismatch"),N}})).apply(this,arguments)}function rl(y,h){return bd.apply(this,arguments)}function bd(){return(bd=(0,g.Z)(function*(y,h,p=!1){const v="signIn",T=yield Er(y,v,h),N=yield Xn._fromIdTokenResponse(y,v,T);return p||(yield y._updateCurrentUser(N.user)),N})).apply(this,arguments)}function il(y,h){return Td.apply(this,arguments)}function Td(){return(Td=(0,g.Z)(function*(y,h){return rl(Ln(y),h)})).apply(this,arguments)}function Hg(y,h){return mn.apply(this,arguments)}function mn(){return(mn=(0,g.Z)(function*(y,h){const p=(0,R.m9)(y);return yield Go(!1,p,h.providerId),qr(p,h)})).apply(this,arguments)}function $g(y,h){return Sf.apply(this,arguments)}function Sf(){return(Sf=(0,g.Z)(function*(y,h){return jg((0,R.m9)(y),h)})).apply(this,arguments)}function Af(){return(Af=(0,g.Z)(function*(y,h){return pt(y,"POST","/v1/accounts:signInWithCustomToken",Ie(y,h))})).apply(this,arguments)}function ms(){return ms=(0,g.Z)(function*(y,h){const p=Ln(y),v=yield function A_(y,h){return Af.apply(this,arguments)}(p,{token:h,returnSecureToken:!0}),T=yield Xn._fromIdTokenResponse(p,"signIn",v);return yield p._updateCurrentUser(T.user),T}),ms.apply(this,arguments)}class sl{constructor(h,p){this.factorId=h,this.uid=p.mfaEnrollmentId,this.enrollmentTime=new Date(p.enrolledAt).toUTCString(),this.displayName=p.displayName}static _fromServerResponse(h,p){return"phoneInfo"in p?zo._fromServerResponse(h,p):"totpInfo"in p?ol._fromServerResponse(h,p):he(h,"internal-error")}}class zo extends sl{constructor(h){super("phone",h),this.phoneNumber=h.phoneInfo}static _fromServerResponse(h,p){return new zo(p)}}class ol extends sl{constructor(h){super("totp",h)}static _fromServerResponse(h,p){return new ol(p)}}function Ra(y,h,p){var v;re((null===(v=p.url)||void 0===v?void 0:v.length)>0,y,"invalid-continue-uri"),re(typeof p.dynamicLinkDomain>"u"||p.dynamicLinkDomain.length>0,y,"invalid-dynamic-link-domain"),h.continueUrl=p.url,h.dynamicLinkDomain=p.dynamicLinkDomain,h.canHandleCodeInApp=p.handleCodeInApp,p.iOS&&(re(p.iOS.bundleId.length>0,y,"missing-ios-bundle-id"),h.iOSBundleId=p.iOS.bundleId),p.android&&(re(p.android.packageName.length>0,y,"missing-android-pkg-name"),h.androidInstallApp=p.android.installApp,h.androidMinimumVersionCode=p.android.minimumVersion,h.androidPackageName=p.android.packageName)}function ka(){return ka=(0,g.Z)(function*(y,h,p){var v;const T=Ln(y),N={requestType:"PASSWORD_RESET",email:h,clientType:"CLIENT_TYPE_WEB"};if(null!==(v=T._getRecaptchaConfig())&&void 0!==v&&v.emailPasswordEnabled){const U=yield wi(T,N,"getOobCode",!0);p&&Ra(T,U,p),yield Uo(T,U)}else p&&Ra(T,N,p),yield Uo(T,N).catch(function(){var U=(0,g.Z)(function*(Z){if("auth/missing-recaptcha-token"!==Z.code)return Promise.reject(Z);{console.log("Password resets are protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the password reset flow.");const xe=yield wi(T,N,"getOobCode",!0);p&&Ra(T,xe,p),yield Uo(T,xe)}});return function(Z){return U.apply(this,arguments)}}())}),ka.apply(this,arguments)}function qi(){return(qi=(0,g.Z)(function*(y,h,p){yield Df((0,R.m9)(y),{oobCode:h,newPassword:p})})).apply(this,arguments)}function Ci(){return Ci=(0,g.Z)(function*(y,h){yield function Ii(y,h){return Lu.apply(this,arguments)}((0,R.m9)(y),{oobCode:h})}),Ci.apply(this,arguments)}function $n(y,h){return so.apply(this,arguments)}function so(){return(so=(0,g.Z)(function*(y,h){const p=(0,R.m9)(y),v=yield Df(p,{oobCode:h}),T=v.requestType;switch(re(T,p,"internal-error"),T){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":re(v.newEmail,p,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":re(v.mfaInfo,p,"internal-error");default:re(v.email,p,"internal-error")}let N=null;return v.mfaInfo&&(N=sl._fromServerResponse(Ln(p),v.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===v.requestType?v.newEmail:v.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===v.requestType?v.email:v.newEmail)||null,multiFactorInfo:N},operation:T}})).apply(this,arguments)}function oo(){return(oo=(0,g.Z)(function*(y,h){const{data:p}=yield $n((0,R.m9)(y),h);return p.email})).apply(this,arguments)}function Fa(){return Fa=(0,g.Z)(function*(y,h,p){var v;const T=Ln(y),N={returnSecureToken:!0,email:h,password:p,clientType:"CLIENT_TYPE_WEB"};let U;if(null!==(v=T._getRecaptchaConfig())&&void 0!==v&&v.emailPasswordEnabled){const Ve=yield wi(T,N,"signUpPassword");U=Jn(T,Ve)}else U=Jn(T,N).catch(function(){var Ve=(0,g.Z)(function*(tt){if("auth/missing-recaptcha-token"===tt.code){console.log("Sign-up is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-up flow.");const ot=yield wi(T,N,"signUpPassword");return Jn(T,ot)}return Promise.reject(tt)});return function(tt){return Ve.apply(this,arguments)}}());const Z=yield U.catch(Ve=>Promise.reject(Ve)),xe=yield Xn._fromIdTokenResponse(T,"signIn",Z);return yield T._updateCurrentUser(xe.user),xe}),Fa.apply(this,arguments)}function La(){return La=(0,g.Z)(function*(y,h,p){var v;const T=Ln(y),N={requestType:"EMAIL_SIGNIN",email:h,clientType:"CLIENT_TYPE_WEB"};function U(Z,xe){re(xe.handleCodeInApp,T,"argument-error"),xe&&Ra(T,Z,xe)}if(null!==(v=T._getRecaptchaConfig())&&void 0!==v&&v.emailPasswordEnabled){const Z=yield wi(T,N,"getOobCode",!0);U(Z,p),yield Ht(T,Z)}else U(N,p),yield Ht(T,N).catch(function(){var Z=(0,g.Z)(function*(xe){if("auth/missing-recaptcha-token"!==xe.code)return Promise.reject(xe);{console.log("Email link sign-in is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow.");const Ve=yield wi(T,N,"getOobCode",!0);U(Ve,p),yield Ht(T,Ve)}});return function(xe){return Z.apply(this,arguments)}}())}),La.apply(this,arguments)}function ul(){return(ul=(0,g.Z)(function*(y,h,p){const v=(0,R.m9)(y),T=to.credentialWithLink(h,p||sr());return re(T._tenantId===(v.tenantId||null),v,"tenant-id-mismatch"),il(v,T)})).apply(this,arguments)}function ll(){return(ll=(0,g.Z)(function*(y,h){return be(y,"POST","/v1/accounts:createAuthUri",Ie(y,h))})).apply(this,arguments)}function ao(){return ao=(0,g.Z)(function*(y,h){const v={identifier:h,continueUri:jr()?sr():"http://localhost"},{signinMethods:T}=yield function cl(y,h){return ll.apply(this,arguments)}((0,R.m9)(y),v);return T||[]}),ao.apply(this,arguments)}function Ba(){return Ba=(0,g.Z)(function*(y,h){const p=(0,R.m9)(y),T={requestType:"VERIFY_EMAIL",idToken:yield y.getIdToken()};h&&Ra(p.auth,T,h);const{email:N}=yield function Cd(y,h){return Bu.apply(this,arguments)}(p.auth,T);N!==y.email&&(yield y.reload())}),Ba.apply(this,arguments)}function Gu(){return Gu=(0,g.Z)(function*(y,h,p){const v=(0,R.m9)(y),N={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield y.getIdToken(),newEmail:h};p&&Ra(v.auth,N,p);const{email:U}=yield function Mr(y,h){return Xs.apply(this,arguments)}(v.auth,N);U!==y.email&&(yield y.reload())}),Gu.apply(this,arguments)}function Od(){return(Od=(0,g.Z)(function*(y,h){return be(y,"POST","/v1/accounts:update",h)})).apply(this,arguments)}function dl(){return dl=(0,g.Z)(function*(y,{displayName:h,photoURL:p}){if(void 0===h&&void 0===p)return;const v=(0,R.m9)(y),N={idToken:yield v.getIdToken(),displayName:h,photoUrl:p,returnSecureToken:!0},U=yield vn(v,function Gg(y,h){return Od.apply(this,arguments)}(v.auth,N));v.displayName=U.displayName||null,v.photoURL=U.photoUrl||null;const Z=v.providerData.find(({providerId:xe})=>"password"===xe);Z&&(Z.displayName=v.displayName,Z.photoURL=v.photoURL),yield v._updateTokensIfNecessary(U)}),dl.apply(this,arguments)}function Mf(y,h,p){return Wo.apply(this,arguments)}function Wo(){return(Wo=(0,g.Z)(function*(y,h,p){const{auth:v}=y,N={idToken:yield y.getIdToken(),returnSecureToken:!0};h&&(N.email=h),p&&(N.password=p);const U=yield vn(y,Ed(v,N));yield y._updateTokensIfNecessary(U,!0)})).apply(this,arguments)}class Zo{constructor(h,p,v={}){this.isNewUser=h,this.providerId=p,this.profile=v}}class Ua extends Zo{constructor(h,p,v,T){super(h,p,v),this.username=T}}class hl extends Zo{constructor(h,p){super(h,"facebook.com",p)}}class Rd extends Ua{constructor(h,p){super(h,"github.com",p,"string"==typeof p?.login?p?.login:null)}}class qu extends Zo{constructor(h,p){super(h,"google.com",p)}}class ja extends Ua{constructor(h,p,v){super(h,"twitter.com",p,v)}}function xf(y){const{user:h,_tokenResponse:p}=y;return h.isAnonymous&&!p?{providerId:null,isNewUser:!1,profile:null}:function qg(y){var h,p;if(!y)return null;const{providerId:v}=y,T=y.rawUserInfo?JSON.parse(y.rawUserInfo):{},N=y.isNewUser||"identitytoolkit#SignupNewUserResponse"===y.kind;if(!v&&y?.idToken){const U=null===(p=null===(h=Ct(y.idToken))||void 0===h?void 0:h.firebase)||void 0===p?void 0:p.sign_in_provider;if(U)return new Zo(N,"anonymous"!==U&&"custom"!==U?U:null)}if(!v)return null;switch(v){case"facebook.com":return new hl(N,T);case"github.com":return new Rd(N,T);case"google.com":return new qu(N,T);case"twitter.com":return new ja(N,T,y.screenName||null);case"custom":case"anonymous":return new Zo(N,null);default:return new Zo(N,v,T)}}(p)}class Wi{constructor(h,p,v){this.type=h,this.credential=p,this.auth=v}static _fromIdtoken(h,p){return new Wi("enroll",h,p)}static _fromMfaPendingCredential(h){return new Wi("signin",h)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(h){var p,v;if(h?.multiFactorSession){if(null!==(p=h.multiFactorSession)&&void 0!==p&&p.pendingCredential)return Wi._fromMfaPendingCredential(h.multiFactorSession.pendingCredential);if(null!==(v=h.multiFactorSession)&&void 0!==v&&v.idToken)return Wi._fromIdtoken(h.multiFactorSession.idToken)}return null}}class co{constructor(h,p,v){this.session=h,this.hints=p,this.signInResolver=v}static _fromError(h,p){const v=Ln(h),T=p.customData._serverResponse,N=(T.mfaInfo||[]).map(Z=>sl._fromServerResponse(v,Z));re(T.mfaPendingCredential,v,"internal-error");const U=Wi._fromMfaPendingCredential(T.mfaPendingCredential);return new co(U,N,function(){var Z=(0,g.Z)(function*(xe){const Ve=yield xe._process(v,U);delete T.mfaInfo,delete T.mfaPendingCredential;const tt=Object.assign(Object.assign({},T),{idToken:Ve.idToken,refreshToken:Ve.refreshToken});switch(p.operationType){case"signIn":const ot=yield Xn._fromIdTokenResponse(v,p.operationType,tt);return yield v._updateCurrentUser(ot.user),ot;case"reauthenticate":return re(p.user,v,"internal-error"),Xn._forOperation(p.user,p.operationType,tt);default:he(v,"internal-error")}});return function(xe){return Z.apply(this,arguments)}}())}resolveSignIn(h){var p=this;return(0,g.Z)(function*(){return p.signInResolver(h)})()}}class Kt{constructor(h){this.user=h,this.enrolledFactors=[],h._onReload(p=>{p.mfaInfo&&(this.enrolledFactors=p.mfaInfo.map(v=>sl._fromServerResponse(h.auth,v)))})}static _fromUser(h){return new Kt(h)}getSession(){var h=this;return(0,g.Z)(function*(){return Wi._fromIdtoken(yield h.user.getIdToken(),h.user.auth)})()}enroll(h,p){var v=this;return(0,g.Z)(function*(){const T=h,N=yield v.getSession(),U=yield vn(v.user,T._process(v.user.auth,N,p));return yield v.user._updateTokensIfNecessary(U),v.user.reload()})()}unenroll(h){var p=this;return(0,g.Z)(function*(){const v="string"==typeof h?h:h.uid,T=yield p.user.getIdToken();try{const N=yield vn(p.user,function Ld(y,h){return be(y,"POST","/v2/accounts/mfaEnrollment:withdraw",Ie(y,h))}(p.user.auth,{idToken:T,mfaEnrollmentId:v}));p.enrolledFactors=p.enrolledFactors.filter(({uid:U})=>U!==v),yield p.user._updateTokensIfNecessary(N),yield p.user.reload()}catch(N){throw N}})()}}const lo=new WeakMap,fr="__sak";class kf{constructor(h,p){this.storageRetriever=h,this.type=p}_isAvailable(){try{return this.storage?(this.storage.setItem(fr,"1"),this.storage.removeItem(fr),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(h,p){return this.storage.setItem(h,JSON.stringify(p)),Promise.resolve()}_get(h){const p=this.storage.getItem(h);return Promise.resolve(p?JSON.parse(p):null)}_remove(h){return this.storage.removeItem(h),Promise.resolve()}get storage(){return this.storageRetriever()}}const Ko=(()=>{class y extends kf{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(p,v)=>this.onStorageEvent(p,v),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function ml(){const y=(0,R.z$)();return te(y)||Dn(y)}()&&function Sa(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=hs(),this._shouldAllowMigration=!0}forAllChangedKeys(p){for(const v of Object.keys(this.listeners)){const T=this.storage.getItem(v),N=this.localCache[v];T!==N&&p(v,N,T)}}onStorageEvent(p,v=!1){if(!p.key)return void this.forAllChangedKeys((Z,xe,Ve)=>{this.notifyListeners(Z,Ve)});const T=p.key;if(v?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const Z=this.storage.getItem(T);if(p.newValue!==Z)null!==p.newValue?this.storage.setItem(T,p.newValue):this.storage.removeItem(T);else if(this.localCache[T]===p.newValue&&!v)return}const N=()=>{const Z=this.storage.getItem(T);!v&&this.localCache[T]===Z||this.notifyListeners(T,Z)},U=this.storage.getItem(T);!function Gi(){return(0,R.w1)()&&10===document.documentMode}()||U===p.newValue||p.newValue===p.oldValue?N():setTimeout(N,10)}notifyListeners(p,v){this.localCache[p]=v;const T=this.listeners[p];if(T)for(const N of Array.from(T))N(v&&JSON.parse(v))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((p,v,T)=>{this.onStorageEvent(new StorageEvent("storage",{key:p,oldValue:v,newValue:T}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(p,v){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[p]||(this.listeners[p]=new Set,this.localCache[p]=this.storage.getItem(p)),this.listeners[p].add(v)}_removeListener(p,v){this.listeners[p]&&(this.listeners[p].delete(v),0===this.listeners[p].size&&delete this.listeners[p]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(p,v){var T=()=>super._set,N=this;return(0,g.Z)(function*(){yield T().call(N,p,v),N.localCache[p]=JSON.stringify(v)})()}_get(p){var v=()=>super._get,T=this;return(0,g.Z)(function*(){const N=yield v().call(T,p);return T.localCache[p]=JSON.stringify(N),N})()}_remove(p){var v=()=>super._remove,T=this;return(0,g.Z)(function*(){yield v().call(T,p),delete T.localCache[p]})()}}return y.type="LOCAL",y})(),Zr=(()=>{class y extends kf{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(p,v){}_removeListener(p,v){}}return y.type="SESSION",y})();let yl=(()=>{class y{constructor(p){this.eventTarget=p,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(p){const v=this.receivers.find(N=>N.isListeningto(p));if(v)return v;const T=new y(p);return this.receivers.push(T),T}isListeningto(p){return this.eventTarget===p}handleEvent(p){var v=this;return(0,g.Z)(function*(){const T=p,{eventId:N,eventType:U,data:Z}=T.data,xe=v.handlersMap[U];if(!xe?.size)return;T.ports[0].postMessage({status:"ack",eventId:N,eventType:U});const Ve=Array.from(xe).map(function(){var ot=(0,g.Z)(function*(Mn){return Mn(T.origin,Z)});return function(Mn){return ot.apply(this,arguments)}}()),tt=yield function Vf(y){return Promise.all(y.map(function(){var h=(0,g.Z)(function*(p){try{return{fulfilled:!0,value:yield p}}catch(v){return{fulfilled:!1,reason:v}}});return function(p){return h.apply(this,arguments)}}()))}(Ve);T.ports[0].postMessage({status:"done",eventId:N,eventType:U,response:tt})})()}_subscribe(p,v){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[p]||(this.handlersMap[p]=new Set),this.handlersMap[p].add(v)}_unsubscribe(p,v){this.handlersMap[p]&&v&&this.handlersMap[p].delete(v),(!v||0===this.handlersMap[p].size)&&delete this.handlersMap[p],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return y.receivers=[],y})();function Zu(y="",h=10){let p="";for(let v=0;v<h;v++)p+=Math.floor(10*Math.random());return y+p}class Zg{constructor(h){this.target=h,this.handlers=new Set}removeMessageHandler(h){h.messageChannel&&(h.messageChannel.port1.removeEventListener("message",h.onMessage),h.messageChannel.port1.close()),this.handlers.delete(h)}_send(h,p,v=50){var T=this;return(0,g.Z)(function*(){const N=typeof MessageChannel<"u"?new MessageChannel:null;if(!N)throw new Error("connection_unavailable");let U,Z;return new Promise((xe,Ve)=>{const tt=Zu("",20);N.port1.start();const ot=setTimeout(()=>{Ve(new Error("unsupported_event"))},v);Z={messageChannel:N,onMessage(Mn){const _s=Mn;if(_s.data.eventId===tt)switch(_s.data.status){case"ack":clearTimeout(ot),U=setTimeout(()=>{Ve(new Error("timeout"))},3e3);break;case"done":clearTimeout(U),xe(_s.data.response);break;default:clearTimeout(ot),clearTimeout(U),Ve(new Error("invalid_response"))}}},T.handlers.add(Z),N.port1.addEventListener("message",Z.onMessage),T.target.postMessage({eventType:h,eventId:tt,data:p},[N.port2])}).finally(()=>{Z&&T.removeMessageHandler(Z)})})()}}function un(){return window}function vt(){return typeof un().WorkerGlobalScope<"u"&&"function"==typeof un().importScripts}function Bd(){return(Bd=(0,g.Z)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const Ud="firebaseLocalStorageDb",Zi="firebaseLocalStorage",_l="fbase_key";class Yu{constructor(h){this.request=h}toPromise(){return new Promise((h,p)=>{this.request.addEventListener("success",()=>{h(this.request.result)}),this.request.addEventListener("error",()=>{p(this.request.error)})})}}function Qu(y,h){return y.transaction([Zi],h?"readwrite":"readonly").objectStore(Zi)}function jd(){const y=indexedDB.open(Ud,1);return new Promise((h,p)=>{y.addEventListener("error",()=>{p(y.error)}),y.addEventListener("upgradeneeded",()=>{const v=y.result;try{v.createObjectStore(Zi,{keyPath:_l})}catch(T){p(T)}}),y.addEventListener("success",(0,g.Z)(function*(){const v=y.result;v.objectStoreNames.contains(Zi)?h(v):(v.close(),yield function Yg(){const y=indexedDB.deleteDatabase(Ud);return new Yu(y).toPromise()}(),h(yield jd()))}))})}function Te(y,h,p){return Bt.apply(this,arguments)}function Bt(){return(Bt=(0,g.Z)(function*(y,h,p){const v=Qu(y,!0).put({[_l]:h,value:p});return new Yu(v).toPromise()})).apply(this,arguments)}function Ju(){return(Ju=(0,g.Z)(function*(y,h){const p=Qu(y,!1).get(h),v=yield new Yu(p).toPromise();return void 0===v?null:v.value})).apply(this,arguments)}function rr(y,h){const p=Qu(y,!0).delete(h);return new Yu(p).toPromise()}const po=(()=>{class y{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var p=this;return(0,g.Z)(function*(){return p.db||(p.db=yield jd()),p.db})()}_withRetries(p){var v=this;return(0,g.Z)(function*(){let T=0;for(;;)try{const N=yield v._openDb();return yield p(N)}catch(N){if(T++>3)throw N;v.db&&(v.db.close(),v.db=void 0)}})()}initializeServiceWorkerMessaging(){var p=this;return(0,g.Z)(function*(){return vt()?p.initializeReceiver():p.initializeSender()})()}initializeReceiver(){var p=this;return(0,g.Z)(function*(){p.receiver=yl._getInstance(function nr(){return vt()?self:null}()),p.receiver._subscribe("keyChanged",function(){var v=(0,g.Z)(function*(T,N){return{keyProcessed:(yield p._poll()).includes(N.key)}});return function(T,N){return v.apply(this,arguments)}}()),p.receiver._subscribe("ping",function(){var v=(0,g.Z)(function*(T,N){return["keyChanged"]});return function(T,N){return v.apply(this,arguments)}}())})()}initializeSender(){var p=this;return(0,g.Z)(function*(){var v,T;if(p.activeServiceWorker=yield function Vd(){return Bd.apply(this,arguments)}(),!p.activeServiceWorker)return;p.sender=new Zg(p.activeServiceWorker);const N=yield p.sender._send("ping",{},800);N&&null!==(v=N[0])&&void 0!==v&&v.fulfilled&&null!==(T=N[0])&&void 0!==T&&T.value.includes("keyChanged")&&(p.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(p){var v=this;return(0,g.Z)(function*(){if(v.sender&&v.activeServiceWorker&&function Ku(){var y;return(null===(y=navigator?.serviceWorker)||void 0===y?void 0:y.controller)||null}()===v.activeServiceWorker)try{yield v.sender._send("keyChanged",{key:p},v.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,g.Z)(function*(){try{if(!indexedDB)return!1;const p=yield jd();return yield Te(p,fr,"1"),yield rr(p,fr),!0}catch{}return!1})()}_withPendingWrite(p){var v=this;return(0,g.Z)(function*(){v.pendingWrites++;try{yield p()}finally{v.pendingWrites--}})()}_set(p,v){var T=this;return(0,g.Z)(function*(){return T._withPendingWrite((0,g.Z)(function*(){return yield T._withRetries(N=>Te(N,p,v)),T.localCache[p]=v,T.notifyServiceWorker(p)}))})()}_get(p){var v=this;return(0,g.Z)(function*(){const T=yield v._withRetries(N=>function Oi(y,h){return Ju.apply(this,arguments)}(N,p));return v.localCache[p]=T,T})()}_remove(p){var v=this;return(0,g.Z)(function*(){return v._withPendingWrite((0,g.Z)(function*(){return yield v._withRetries(T=>rr(T,p)),delete v.localCache[p],v.notifyServiceWorker(p)}))})()}_poll(){var p=this;return(0,g.Z)(function*(){const v=yield p._withRetries(U=>{const Z=Qu(U,!1).getAll();return new Yu(Z).toPromise()});if(!v)return[];if(0!==p.pendingWrites)return[];const T=[],N=new Set;for(const{fbase_key:U,value:Z}of v)N.add(U),JSON.stringify(p.localCache[U])!==JSON.stringify(Z)&&(p.notifyListeners(U,Z),T.push(U));for(const U of Object.keys(p.localCache))p.localCache[U]&&!N.has(U)&&(p.notifyListeners(U,null),T.push(U));return T})()}notifyListeners(p,v){this.localCache[p]=v;const T=this.listeners[p];if(T)for(const N of Array.from(T))N(v)}startPolling(){var p=this;this.stopPolling(),this.pollTimer=setInterval((0,g.Z)(function*(){return p._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(p,v){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[p]||(this.listeners[p]=new Set,this._get(p)),this.listeners[p].add(v)}_removeListener(p,v){this.listeners[p]&&(this.listeners[p].delete(v),0===this.listeners[p].size&&delete this.listeners[p]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return y.type="LOCAL",y})(),ai=1e12;class Hd{constructor(h){this.auth=h,this.counter=ai,this._widgets=new Map}render(h,p){const v=this.counter;return this._widgets.set(v,new go(h,this.auth.name,p||{})),this.counter++,v}reset(h){var p;const v=h||ai;null===(p=this._widgets.get(v))||void 0===p||p.delete(),this._widgets.delete(v)}getResponse(h){var p;return(null===(p=this._widgets.get(h||ai))||void 0===p?void 0:p.getResponse())||""}execute(h){var p=this;return(0,g.Z)(function*(){var v;return null===(v=p._widgets.get(h||ai))||void 0===v||v.execute(),""})()}}class go{constructor(h,p,v){this.params=v,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const T="string"==typeof h?document.getElementById(h):h;re(T,"argument-error",{appName:p}),this.container=T,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function Os(y){const h=[],p="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let v=0;v<y;v++)h.push(p.charAt(Math.floor(62*Math.random())));return h.join("")}(50);const{callback:h,"expired-callback":p}=this.params;if(h)try{h(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,p)try{p()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const $d=zi("rcb"),Gd=new ls(3e4,6e4);class Qg{constructor(){var h;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(h=un().grecaptcha)||void 0===h||!h.render)}load(h,p=""){return re(function tc(y){return y.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(y)}(p),h,"argument-error"),this.shouldResolveImmediately(p)&&xt(un().grecaptcha)?Promise.resolve(un().grecaptcha):new Promise((v,T)=>{const N=un().setTimeout(()=>{T(Y(h,"network-request-failed"))},Gd.get());un()[$d]=()=>{un().clearTimeout(N),delete un()[$d];const Z=un().grecaptcha;if(!Z||!xt(Z))return void T(Y(h,"internal-error"));const xe=Z.render;Z.render=(Ve,tt)=>{const ot=xe(Ve,tt);return this.counter++,ot},this.hostLanguage=p,v(Z)},ur(`https://www.google.com/recaptcha/api.js??${(0,R.xO)({onload:$d,render:"explicit",hl:p})}`).catch(()=>{clearTimeout(N),T(Y(h,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(h){var p;return!(null===(p=un().grecaptcha)||void 0===p||!p.render)&&(h===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class zd{load(h){return(0,g.Z)(function*(){return new Hd(h)})()}clearedOneInstance(){}}const nc="recaptcha",qd={theme:"light",type:"image"};class Wd{constructor(h,p=Object.assign({},qd),v){this.parameters=p,this.type=nc,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Ln(v),this.isInvisible="invisible"===this.parameters.size,re(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const T="string"==typeof h?document.getElementById(h):h;re(T,this.auth,"argument-error"),this.container=T,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new zd:new Qg,this.validateStartingState()}verify(){var h=this;return(0,g.Z)(function*(){h.assertNotDestroyed();const p=yield h.render(),v=h.getAssertedRecaptcha();return v.getResponse(p)||new Promise(N=>{const U=Z=>{Z&&(h.tokenChangeListeners.delete(U),N(Z))};h.tokenChangeListeners.add(U),h.isInvisible&&v.execute(p)})})()}render(){try{this.assertNotDestroyed()}catch(h){return Promise.reject(h)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(h=>{throw this.renderPromise=null,h})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(h=>{this.container.removeChild(h)})}validateStartingState(){re(!this.parameters.sitekey,this.auth,"argument-error"),re(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),re(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(h){return p=>{if(this.tokenChangeListeners.forEach(v=>v(p)),"function"==typeof h)h(p);else if("string"==typeof h){const v=un()[h];"function"==typeof v&&v(p)}}}assertNotDestroyed(){re(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var h=this;return(0,g.Z)(function*(){if(yield h.init(),!h.widgetId){let p=h.container;if(!h.isInvisible){const v=document.createElement("div");p.appendChild(v),p=v}h.widgetId=h.getAssertedRecaptcha().render(p,h.parameters)}return h.widgetId})()}init(){var h=this;return(0,g.Z)(function*(){re(jr()&&!vt(),h.auth,"internal-error"),yield function Uf(){let y=null;return new Promise(h=>{"complete"!==document.readyState?(y=()=>h(),window.addEventListener("load",y)):h()}).catch(h=>{throw y&&window.removeEventListener("load",y),h})}(),h.recaptcha=yield h._recaptchaLoader.load(h.auth,h.auth.languageCode||void 0);const p=yield function Q(y){return Ae.apply(this,arguments)}(h.auth);re(p,h.auth,"internal-error"),h.parameters.sitekey=p})()}getAssertedRecaptcha(){return re(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class Yr{constructor(h,p){this.verificationId=h,this.onConfirmation=p}confirm(h){const p=lr._fromVerification(this.verificationId,h);return this.onConfirmation(p)}}function Qo(){return(Qo=(0,g.Z)(function*(y,h,p){const v=Ln(y),T=yield qa(v,h,(0,R.m9)(p));return new Yr(T,N=>il(v,N))})).apply(this,arguments)}function Jo(){return(Jo=(0,g.Z)(function*(y,h,p){const v=(0,R.m9)(y);yield Go(!1,v,"phone");const T=yield qa(v.auth,h,(0,R.m9)(p));return new Yr(T,N=>Hg(v,N))})).apply(this,arguments)}function rc(){return(rc=(0,g.Z)(function*(y,h,p){const v=(0,R.m9)(y),T=yield qa(v.auth,h,(0,R.m9)(p));return new Yr(T,N=>$g(v,N))})).apply(this,arguments)}function qa(y,h,p){return mr.apply(this,arguments)}function mr(){return mr=(0,g.Z)(function*(y,h,p){var v;const T=yield p.verify();try{let N;if(re("string"==typeof T,y,"argument-error"),re(p.type===nc,y,"argument-error"),N="string"==typeof h?{phoneNumber:h}:h,"session"in N){const U=N.session;if("phoneNumber"in N)return re("enroll"===U.type,y,"internal-error"),(yield function $a(y,h){return be(y,"POST","/v2/accounts/mfaEnrollment:start",Ie(y,h))}(y,{idToken:U.credential,phoneEnrollmentInfo:{phoneNumber:N.phoneNumber,recaptchaToken:T}})).phoneSessionInfo.sessionInfo;{re("signin"===U.type,y,"internal-error");const Z=(null===(v=N.multiFactorHint)||void 0===v?void 0:v.uid)||N.multiFactorUid;return re(Z,y,"missing-multi-factor-info"),(yield function vl(y,h){return be(y,"POST","/v2/accounts/mfaSignIn:start",Ie(y,h))}(y,{mfaPendingCredential:U.credential,mfaEnrollmentId:Z,phoneSignInInfo:{recaptchaToken:T}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:U}=yield function pn(y,h){return Nr.apply(this,arguments)}(y,{phoneNumber:N.phoneNumber,recaptchaToken:T});return U}}finally{p._reset()}}),mr.apply(this,arguments)}function Yt(){return(Yt=(0,g.Z)(function*(y,h){yield qr((0,R.m9)(y),h)})).apply(this,arguments)}let wn=(()=>{class y{constructor(p){this.providerId=y.PROVIDER_ID,this.auth=Ln(p)}verifyPhoneNumber(p,v){return qa(this.auth,p,(0,R.m9)(v))}static credential(p,v){return lr._fromVerification(p,v)}static credentialFromResult(p){return y.credentialFromTaggedObject(p)}static credentialFromError(p){return y.credentialFromTaggedObject(p.customData||{})}static credentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{phoneNumber:v,temporaryProof:T}=p;return v&&T?lr._fromTokenResponse(v,T):null}}return y.PROVIDER_ID="phone",y.PHONE_SIGN_IN_METHOD="phone",y})();function mo(y,h){return h?Rn(h):(re(y._popupRedirectResolver,y,"argument-error"),y._popupRedirectResolver)}class ui extends Js{constructor(h){super("custom","custom"),this.params=h}_getIdTokenResponse(h){return Ei(h,this._buildIdpRequest())}_linkToIdToken(h,p){return Ei(h,this._buildIdpRequest(p))}_getReauthenticationResolver(h){return Ei(h,this._buildIdpRequest())}_buildIdpRequest(h){const p={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return h&&(p.idToken=h),p}}function Kd(y){return rl(y.auth,new ui(y),y.bypassAuthState)}function Il(y){const{auth:h,user:p}=y;return re(p,h,"internal-error"),jg(p,new ui(y),y.bypassAuthState)}function Wa(y){return Ps.apply(this,arguments)}function Ps(){return(Ps=(0,g.Z)(function*(y){const{auth:h,user:p}=y;return re(p,h,"internal-error"),qr(p,new ui(y),y.bypassAuthState)})).apply(this,arguments)}class Dr{constructor(h,p,v,T,N=!1){this.auth=h,this.resolver=v,this.user=T,this.bypassAuthState=N,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(p)?p:[p]}execute(){var h=this;return new Promise(function(){var p=(0,g.Z)(function*(v,T){h.pendingPromise={resolve:v,reject:T};try{h.eventManager=yield h.resolver._initialize(h.auth),yield h.onExecution(),h.eventManager.registerConsumer(h)}catch(N){h.reject(N)}});return function(v,T){return p.apply(this,arguments)}}())}onAuthEvent(h){var p=this;return(0,g.Z)(function*(){const{urlResponse:v,sessionId:T,postBody:N,tenantId:U,error:Z,type:xe}=h;if(Z)return void p.reject(Z);const Ve={auth:p.auth,requestUri:v,sessionId:T,tenantId:U||void 0,postBody:N||void 0,user:p.user,bypassAuthState:p.bypassAuthState};try{p.resolve(yield p.getIdpTask(xe)(Ve))}catch(tt){p.reject(tt)}})()}onError(h){this.reject(h)}getIdpTask(h){switch(h){case"signInViaPopup":case"signInViaRedirect":return Kd;case"linkViaPopup":case"linkViaRedirect":return Wa;case"reauthViaPopup":case"reauthViaRedirect":return Il;default:he(this.auth,"internal-error")}}resolve(h){kt(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(h),this.unregisterAndCleanUp()}reject(h){kt(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(h),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Gn=new ls(2e3,1e4);function ea(){return(ea=(0,g.Z)(function*(y,h,p){const v=Ln(y);ke(y,h,dr);const T=mo(v,p);return new Ki(v,"signInViaPopup",h,T).executeNotNull()})).apply(this,arguments)}function Za(){return(Za=(0,g.Z)(function*(y,h,p){const v=(0,R.m9)(y);ke(v.auth,h,dr);const T=mo(v.auth,p);return new Ki(v.auth,"reauthViaPopup",h,T,v).executeNotNull()})).apply(this,arguments)}function Rs(){return(Rs=(0,g.Z)(function*(y,h,p){const v=(0,R.m9)(y);ke(v.auth,h,dr);const T=mo(v.auth,p);return new Ki(v.auth,"linkViaPopup",h,T,v).executeNotNull()})).apply(this,arguments)}let Ki=(()=>{class y extends Dr{constructor(p,v,T,N,U){super(p,v,N,U),this.provider=T,this.authWindow=null,this.pollId=null,y.currentPopupAction&&y.currentPopupAction.cancel(),y.currentPopupAction=this}executeNotNull(){var p=this;return(0,g.Z)(function*(){const v=yield p.execute();return re(v,p.auth,"internal-error"),v})()}onExecution(){var p=this;return(0,g.Z)(function*(){kt(1===p.filter.length,"Popup operations only handle one event");const v=Zu();p.authWindow=yield p.resolver._openPopup(p.auth,p.provider,p.filter[0],v),p.authWindow.associatedEvent=v,p.resolver._originValidation(p.auth).catch(T=>{p.reject(T)}),p.resolver._isIframeWebStorageSupported(p.auth,T=>{T||p.reject(Y(p.auth,"web-storage-unsupported"))}),p.pollUserCancellation()})()}get eventId(){var p;return(null===(p=this.authWindow)||void 0===p?void 0:p.associatedEvent)||null}cancel(){this.reject(Y(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,y.currentPopupAction=null}pollUserCancellation(){const p=()=>{var v,T;this.pollId=null!==(T=null===(v=this.authWindow)||void 0===v?void 0:v.window)&&void 0!==T&&T.closed?window.setTimeout(()=>{this.pollId=null,this.reject(Y(this.auth,"popup-closed-by-user"))},8e3):window.setTimeout(p,Gn.get())};p()}}return y.currentPopupAction=null,y})();const ys="pendingRedirect",In=new Map;class yo extends Dr{constructor(h,p,v=!1){super(h,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],p,void 0,v),this.eventId=null}execute(){var h=()=>super.execute,p=this;return(0,g.Z)(function*(){let v=In.get(p.auth._key());if(!v){try{const N=(yield function Yd(y,h){return El.apply(this,arguments)}(p.resolver,p.auth))?yield h().call(p):null;v=()=>Promise.resolve(N)}catch(T){v=()=>Promise.reject(T)}In.set(p.auth._key(),v)}return p.bypassAuthState||In.set(p.auth._key(),()=>Promise.resolve(null)),v()})()}onAuthEvent(h){var p=()=>super.onAuthEvent,v=this;return(0,g.Z)(function*(){if("signInViaRedirect"===h.type)return p().call(v,h);if("unknown"!==h.type){if(h.eventId){const T=yield v.auth._redirectUserForId(h.eventId);if(T)return v.user=T,p().call(v,h);v.resolve(null)}}else v.resolve(null)})()}onExecution(){return(0,g.Z)(function*(){})()}cleanUp(){}}function El(){return(El=(0,g.Z)(function*(y,h){const p=ta(h),v=$f(y);if(!(yield v._isAvailable()))return!1;const T="true"===(yield v._get(p));return yield v._remove(p),T})).apply(this,arguments)}function Qd(y,h){return Dl.apply(this,arguments)}function Dl(){return(Dl=(0,g.Z)(function*(y,h){return $f(y)._set(ta(h),"true")})).apply(this,arguments)}function Cl(y,h){In.set(y._key(),h)}function $f(y){return Rn(y._redirectPersistence)}function ta(y){return B(ys,y.config.apiKey,y.name)}function _o(y,h,p){return function Jd(y,h,p){return Yi.apply(this,arguments)}(y,h,p)}function Yi(){return(Yi=(0,g.Z)(function*(y,h,p){const v=Ln(y);ke(y,h,dr),yield v._initializationPromise;const T=mo(v,p);return yield Qd(T,v),T._openRedirect(v,h,"signInViaRedirect")})).apply(this,arguments)}function sc(y,h,p){return function Ka(y,h,p){return bl.apply(this,arguments)}(y,h,p)}function bl(){return(bl=(0,g.Z)(function*(y,h,p){const v=(0,R.m9)(y);ke(v.auth,h,dr),yield v.auth._initializationPromise;const T=mo(v.auth,p);yield Qd(T,v.auth);const N=yield ac(v);return T._openRedirect(v.auth,h,"reauthViaRedirect",N)})).apply(this,arguments)}function Tl(y,h,p){return function Gf(y,h,p){return oc.apply(this,arguments)}(y,h,p)}function oc(){return(oc=(0,g.Z)(function*(y,h,p){const v=(0,R.m9)(y);ke(v.auth,h,dr),yield v.auth._initializationPromise;const T=mo(v.auth,p);yield Go(!1,v,h.providerId),yield Qd(T,v.auth);const N=yield ac(v);return T._openRedirect(v.auth,h,"linkViaRedirect",N)})).apply(this,arguments)}function Ya(){return(Ya=(0,g.Z)(function*(y,h){return yield Ln(y)._initializationPromise,ks(y,h,!1)})).apply(this,arguments)}function ks(y,h){return vo.apply(this,arguments)}function vo(){return(vo=(0,g.Z)(function*(y,h,p=!1){const v=Ln(y),T=mo(v,h),U=yield new yo(v,T,p).execute();return U&&!p&&(delete U.user._redirectEventId,yield v._persistUserIfCurrent(U.user),yield v._setRedirectUser(null,h)),U})).apply(this,arguments)}function ac(y){return wo.apply(this,arguments)}function wo(){return(wo=(0,g.Z)(function*(y){const h=Zu(`${y.uid}:::`);return y._redirectEventId=h,yield y.auth._setRedirectUser(y),yield y.auth._persistUserIfCurrent(y),h})).apply(this,arguments)}class cc{constructor(h){this.auth=h,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(h){this.consumers.add(h),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,h)&&(this.sendToConsumer(this.queuedRedirectEvent,h),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(h){this.consumers.delete(h)}onEvent(h){if(this.hasEventBeenHandled(h))return!1;let p=!1;return this.consumers.forEach(v=>{this.isEventForConsumer(h,v)&&(p=!0,this.sendToConsumer(h,v),this.saveEventToCache(h))}),this.hasHandledPotentialRedirect||!function Qa(y){switch(y.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return na(y);default:return!1}}(h)||(this.hasHandledPotentialRedirect=!0,p||(this.queuedRedirectEvent=h,p=!0)),p}sendToConsumer(h,p){var v;if(h.error&&!na(h)){const T=(null===(v=h.error.code)||void 0===v?void 0:v.split("auth/")[1])||"internal-error";p.onError(Y(this.auth,T))}else p.onAuthEvent(h)}isEventForConsumer(h,p){const v=null===p.eventId||!!h.eventId&&h.eventId===p.eventId;return p.filter.includes(h.type)&&v}hasEventBeenHandled(h){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Fs(h))}saveEventToCache(h){this.cachedEventUids.add(Fs(h)),this.lastProcessedEventTime=Date.now()}}function Fs(y){return[y.type,y.eventId,y.sessionId,y.tenantId].filter(h=>h).join("-")}function na({type:y,error:h}){return"unknown"===y&&"auth/no-auth-event"===h?.code}function ra(y){return zn.apply(this,arguments)}function zn(){return(zn=(0,g.Z)(function*(y,h={}){return be(y,"GET","/v1/projects",h)})).apply(this,arguments)}const ci=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Qi=/^https?/;function Xd(){return(Xd=(0,g.Z)(function*(y){if(y.config.emulator)return;const{authorizedDomains:h}=yield ra(y);for(const p of h)try{if(Sl(p))return}catch{}he(y,"unauthorized-domain")})).apply(this,arguments)}function Sl(y){const h=sr(),{protocol:p,hostname:v}=new URL(h);if(y.startsWith("chrome-extension://")){const U=new URL(y);return""===U.hostname&&""===v?"chrome-extension:"===p&&y.replace("chrome-extension://","")===h.replace("chrome-extension://",""):"chrome-extension:"===p&&U.hostname===v}if(!Qi.test(p))return!1;if(ci.test(y))return v===y;const T=y.replace(/\./g,"\\.");return new RegExp("^(.+\\."+T+"|"+T+")$","i").test(v)}const Ja=new ls(3e4,6e4);function lc(){const y=un().___jsl;if(y?.H)for(const h of Object.keys(y.H))if(y.H[h].r=y.H[h].r||[],y.H[h].L=y.H[h].L||[],y.H[h].r=[...y.H[h].L],y.CP)for(let p=0;p<y.CP.length;p++)y.CP[p]=null}let Xa=null;const Al=new ls(5e3,15e3),ia="__/auth/iframe",zf="emulator/auth/iframe",Ls={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},hc=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function fc(y){const h=y.config;re(h.authDomain,y,"auth-domain-config-required");const p=h.emulator?ue(h,zf):`https://${y.config.authDomain}/${ia}`,v={apiKey:h.apiKey,appName:y.name,v:oe.SDK_VERSION},T=hc.get(y.config.apiHost);T&&(v.eid=T);const N=y._getFrameworks();return N.length&&(v.fw=N.join(",")),`${p}?${(0,R.xO)(v).slice(1)}`}function Ml(){return Ml=(0,g.Z)(function*(y){const h=yield function dc(y){return Xa=Xa||function En(y){return new Promise((h,p)=>{var v,T,N;function U(){lc(),gapi.load("gapi.iframes",{callback:()=>{h(gapi.iframes.getContext())},ontimeout:()=>{lc(),p(Y(y,"network-request-failed"))},timeout:Ja.get()})}if(null!==(T=null===(v=un().gapi)||void 0===v?void 0:v.iframes)&&void 0!==T&&T.Iframe)h(gapi.iframes.getContext());else{if(null===(N=un().gapi)||void 0===N||!N.load){const Z=zi("iframefcb");return un()[Z]=()=>{gapi.load?U():p(Y(y,"network-request-failed"))},ur(`https://apis.google.com/js/api.js?onload=${Z}`).catch(xe=>p(xe))}U()}}).catch(h=>{throw Xa=null,h})}(y),Xa}(y),p=un().gapi;return re(p,y,"internal-error"),h.open({where:document.body,url:fc(y),messageHandlersFilter:p.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Ls,dontclear:!0},v=>new Promise(function(){var T=(0,g.Z)(function*(N,U){yield v.restyle({setHideOnLeave:!1});const Z=Y(y,"network-request-failed"),xe=un().setTimeout(()=>{U(Z)},Al.get());function Ve(){un().clearTimeout(xe),N(v)}v.ping(Ve).then(Ve,()=>{U(Z)})});return function(N,U){return T.apply(this,arguments)}}()))}),Ml.apply(this,arguments)}const xl={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class P{constructor(h){this.window=h,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}const ae="__/auth/handler",He="emulator/auth/handler",Ne=encodeURIComponent("fac");function We(y,h,p,v,T,N){return Dt.apply(this,arguments)}function Dt(){return(Dt=(0,g.Z)(function*(y,h,p,v,T,N){re(y.config.authDomain,y,"auth-domain-config-required"),re(y.config.apiKey,y,"invalid-api-key");const U={apiKey:y.config.apiKey,appName:y.name,authType:p,redirectUrl:v,v:oe.SDK_VERSION,eventId:T};if(h instanceof dr){h.setDefaultLanguage(y.languageCode),U.providerId=h.providerId||"",(0,R.xb)(h.getCustomParameters())||(U.customParameters=JSON.stringify(h.getCustomParameters()));for(const[tt,ot]of Object.entries(N||{}))U[tt]=ot}if(h instanceof Ts){const tt=h.getScopes().filter(ot=>""!==ot);tt.length>0&&(U.scopes=tt.join(","))}y.tenantId&&(U.tid=y.tenantId);const Z=U;for(const tt of Object.keys(Z))void 0===Z[tt]&&delete Z[tt];const xe=yield y._getAppCheckToken(),Ve=xe?`#${Ne}=${encodeURIComponent(xe)}`:"";return`${function st({config:y}){return y.emulator?ue(y,He):`https://${y.authDomain}/${ae}`}(y)}?${(0,R.xO)(Z).slice(1)}${Ve}`})).apply(this,arguments)}const Or="webStorageSupport",aa=class Cn{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Zr,this._completeRedirectFn=ks,this._overrideRedirectResult=Cl}_openPopup(h,p,v,T){var N=this;return(0,g.Z)(function*(){var U;kt(null===(U=N.eventManagers[h._key()])||void 0===U?void 0:U.manager,"_initialize() not called before _openPopup()");const Z=yield We(h,p,v,sr(),T);return function $(y,h,p,v=500,T=600){const N=Math.max((window.screen.availHeight-T)/2,0).toString(),U=Math.max((window.screen.availWidth-v)/2,0).toString();let Z="";const xe=Object.assign(Object.assign({},xl),{width:v.toString(),height:T.toString(),top:N,left:U}),Ve=(0,R.z$)().toLowerCase();p&&(Z=Ye(Ve)?"_blank":p),ye(Ve)&&(h=h||"http://localhost",xe.scrollbars="yes");const tt=Object.entries(xe).reduce((Mn,[_s,fh])=>`${Mn}${_s}=${fh},`,"");if(function Hn(y=(0,R.z$)()){var h;return Dn(y)&&!(null===(h=window.navigator)||void 0===h||!h.standalone)}(Ve)&&"_self"!==Z)return function q(y,h){const p=document.createElement("a");p.href=y,p.target=h;const v=document.createEvent("MouseEvent");v.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),p.dispatchEvent(v)}(h||"",Z),new P(null);const ot=window.open(h||"",Z,tt);re(ot,y,"popup-blocked");try{ot.focus()}catch{}return new P(ot)}(h,Z,Zu())})()}_openRedirect(h,p,v,T){var N=this;return(0,g.Z)(function*(){return yield N._originValidation(h),function Kg(y){un().location.href=y}(yield We(h,p,v,sr(),T)),new Promise(()=>{})})()}_initialize(h){const p=h._key();if(this.eventManagers[p]){const{manager:T,promise:N}=this.eventManagers[p];return T?Promise.resolve(T):(kt(N,"If manager is not set, promise should be"),N)}const v=this.initAndGetManager(h);return this.eventManagers[p]={promise:v},v.catch(()=>{delete this.eventManagers[p]}),v}initAndGetManager(h){var p=this;return(0,g.Z)(function*(){const v=yield function sa(y){return Ml.apply(this,arguments)}(h),T=new cc(h);return v.register("authEvent",N=>(re(N?.authEvent,h,"invalid-auth-event"),{status:T.onEvent(N.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),p.eventManagers[h._key()]={manager:T},p.iframes[h._key()]=v,T})()}_isIframeWebStorageSupported(h,p){this.iframes[h._key()].send(Or,{type:Or},T=>{var N;const U=null===(N=T?.[0])||void 0===N?void 0:N[Or];void 0!==U&&p(!!U),he(h,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(h){const p=h._key();return this.originValidationPromises[p]||(this.originValidationPromises[p]=function N_(y){return Xd.apply(this,arguments)}(h)),this.originValidationPromises[p]}get _shouldInitProactively(){return hs()||te()||Dn()}};class Cr{constructor(h){this.factorId=h}_process(h,p,v){switch(p.type){case"enroll":return this._finalizeEnroll(h,p.credential,v);case"signin":return this._finalizeSignIn(h,p.credential);default:return ut("unexpected MultiFactorSessionType")}}}class ki extends Cr{constructor(h){super("phone"),this.credential=h}static _fromCredential(h){return new ki(h)}_finalizeEnroll(h,p,v){return function Rf(y,h){return be(y,"POST","/v2/accounts/mfaEnrollment:finalize",Ie(y,h))}(h,{idToken:p,displayName:v,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(h,p){return function Bf(y,h){return be(y,"POST","/v2/accounts/mfaSignIn:finalize",Ie(y,h))}(h,{mfaPendingCredential:p,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let Fi=(()=>{class y{constructor(){}static assertion(p){return ki._fromCredential(p)}}return y.FACTOR_ID="phone",y})();var Nl="@firebase/auth";class Qr{constructor(h){this.auth=h,this.internalListeners=new Map}getUid(){var h;return this.assertAuthConfigured(),(null===(h=this.auth.currentUser)||void 0===h?void 0:h.uid)||null}getToken(h){var p=this;return(0,g.Z)(function*(){return p.assertAuthConfigured(),yield p.auth._initializationPromise,p.auth.currentUser?{accessToken:yield p.auth.currentUser.getIdToken(h)}:null})()}addAuthTokenListener(h){if(this.assertAuthConfigured(),this.internalListeners.has(h))return;const p=this.auth.onIdTokenChanged(v=>{h(v?.stsTokenManager.accessToken||null)});this.internalListeners.set(h,p),this.updateProactiveRefresh()}removeAuthTokenListener(h){this.assertAuthConfigured();const p=this.internalListeners.get(h);p&&(this.internalListeners.delete(h),p(),this.updateProactiveRefresh())}assertAuthConfigured(){re(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function tu(){return window}(0,R.Pz)("authIdTokenMaxAge"),function mc(y){(0,oe._registerComponent)(new fe.wA("auth",(h,{options:p})=>{const v=h.getProvider("app").getImmediate(),T=h.getProvider("heartbeat"),N=h.getProvider("app-check-internal"),{apiKey:U,authDomain:Z}=v.options;re(U&&!U.includes(":"),"invalid-api-key",{appName:v.name});const xe={apiKey:U,authDomain:Z,clientPlatform:y,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:ce(y)},Ve=new Yc(v,T,N,xe);return function Ef(y,h){const p=h?.persistence||[],v=(Array.isArray(p)?p:[p]).map(Rn);h?.errorMap&&y._updateErrorMap(h.errorMap),y._initializeWithPersistence(v,h?.popupRedirectResolver)}(Ve,p),Ve},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((h,p,v)=>{h.getProvider("auth-internal").initialize()})),(0,oe._registerComponent)(new fe.wA("auth-internal",h=>{const p=Ln(h.getProvider("auth").getImmediate());return new Qr(p)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,oe.registerVersion)(Nl,"0.23.2",function gc(y){switch(y){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(y)),(0,oe.registerVersion)(Nl,"0.23.2","esm2017")}("Browser");function eh(){return eh=(0,g.Z)(function*(y,h,p){var v;const{BuildInfo:T}=tu();kt(h.sessionId,"AuthEvent did not contain a session ID");const N=yield function Wf(y){return ru.apply(this,arguments)}(h.sessionId),U={};return Dn()?U.ibi=T.packageName:yt()?U.apn=T.packageName:he(y,"operation-not-supported-in-this-environment"),T.displayName&&(U.appDisplayName=T.displayName),U.sessionId=N,We(y,p,h.type,void 0,null!==(v=h.eventId)&&void 0!==v?v:void 0,U)}),eh.apply(this,arguments)}function Rl(){return(Rl=(0,g.Z)(function*(y){const{BuildInfo:h}=tu(),p={};Dn()?p.iosBundleId=h.packageName:yt()?p.androidPackageName=h.packageName:he(y,"operation-not-supported-in-this-environment"),yield ra(y,p)})).apply(this,arguments)}function nu(){return(nu=(0,g.Z)(function*(y,h,p){const{cordova:v}=tu();let T=()=>{};try{yield new Promise((N,U)=>{let Z=null;function xe(){var ot;N();const Mn=null===(ot=v.plugins.browsertab)||void 0===ot?void 0:ot.close;"function"==typeof Mn&&Mn(),"function"==typeof p?.close&&p.close()}function Ve(){Z||(Z=window.setTimeout(()=>{U(Y(y,"redirect-cancelled-by-user"))},2e3))}function tt(){"visible"===document?.visibilityState&&Ve()}h.addPassiveListener(xe),document.addEventListener("resume",Ve,!1),yt()&&document.addEventListener("visibilitychange",tt,!1),T=()=>{h.removePassiveListener(xe),document.removeEventListener("resume",Ve,!1),document.removeEventListener("visibilitychange",tt,!1),Z&&window.clearTimeout(Z)}})}finally{T()}})).apply(this,arguments)}function ru(){return(ru=(0,g.Z)(function*(y){const h=function nh(y){if(kt(/[0-9a-zA-Z]+/.test(y),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(y);const h=new ArrayBuffer(y.length),p=new Uint8Array(h);for(let v=0;v<y.length;v++)p[v]=y.charCodeAt(v);return p}(y),p=yield crypto.subtle.digest("SHA-256",h);return Array.from(new Uint8Array(p)).map(T=>T.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}class L_ extends cc{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(h=>{this.resolveInialized=h})}addPassiveListener(h){this.passiveListeners.add(h)}removePassiveListener(h){this.passiveListeners.delete(h)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(h){return this.resolveInialized(),this.passiveListeners.forEach(p=>p(h)),super.onEvent(h)}initialized(){var h=this;return(0,g.Z)(function*(){yield h.initPromise})()}}function iu(y){return rh.apply(this,arguments)}function rh(){return(rh=(0,g.Z)(function*(y){const h=yield Zf()._get(Kf(y));return h&&(yield Zf()._remove(Kf(y))),h})).apply(this,arguments)}function B_(){const y=[];for(let p=0;p<20;p++){const v=Math.floor(62*Math.random());y.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(v))}return y.join("")}function Zf(){return Rn(Ko)}function Kf(y){return B("authEvent",y.config.apiKey,y.name)}function Yf(y){if(!y?.includes("?"))return{};const[h,...p]=y.split("?");return(0,R.zd)(p.join("?"))}const nm=class tm{constructor(){this._redirectPersistence=Zr,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=ks,this._overrideRedirectResult=Cl}_initialize(h){var p=this;return(0,g.Z)(function*(){const v=h._key();let T=p.eventManagers.get(v);return T||(T=new L_(h),p.eventManagers.set(v,T),p.attachCallbackListeners(h,T)),T})()}_openPopup(h){he(h,"operation-not-supported-in-this-environment")}_openRedirect(h,p,v,T){var N=this;return(0,g.Z)(function*(){!function k_(y){var h,p,v,T,N,U,Z,xe,Ve,tt;const ot=tu();re("function"==typeof(null===(h=ot?.universalLinks)||void 0===h?void 0:h.subscribe),y,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),re(typeof(null===(p=ot?.BuildInfo)||void 0===p?void 0:p.packageName)<"u",y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),re("function"==typeof(null===(N=null===(T=null===(v=ot?.cordova)||void 0===v?void 0:v.plugins)||void 0===T?void 0:T.browsertab)||void 0===N?void 0:N.openUrl),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),re("function"==typeof(null===(xe=null===(Z=null===(U=ot?.cordova)||void 0===U?void 0:U.plugins)||void 0===Z?void 0:Z.browsertab)||void 0===xe?void 0:xe.isAvailable),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),re("function"==typeof(null===(tt=null===(Ve=ot?.cordova)||void 0===Ve?void 0:Ve.InAppBrowser)||void 0===tt?void 0:tt.open),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(h);const U=yield N._initialize(h);yield U.initialized(),U.resetRedirect(),function Hf(){In.clear()}(),yield N._originValidation(h);const Z=function kl(y,h,p=null){return{type:h,eventId:p,urlResponse:null,sessionId:B_(),postBody:null,tenantId:y.tenantId,error:Y(y,"no-auth-event")}}(h,v,T);yield function ua(y,h){return Zf()._set(Kf(y),h)}(h,Z);const xe=yield function R_(y,h,p){return eh.apply(this,arguments)}(h,Z,p),Ve=yield function qf(y){const{cordova:h}=tu();return new Promise(p=>{h.plugins.browsertab.isAvailable(v=>{let T=null;v?h.plugins.browsertab.openUrl(y):T=h.InAppBrowser.open(y,function jt(y=(0,R.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(y)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(y)}()?"_blank":"_system","location=yes"),p(T)})})}(xe);return function TI(y,h,p){return nu.apply(this,arguments)}(h,U,Ve)})()}_isIframeWebStorageSupported(h,p){throw new Error("Method not implemented.")}_originValidation(h){const p=h._key();return this.originValidationPromises[p]||(this.originValidationPromises[p]=function th(y){return Rl.apply(this,arguments)}(h)),this.originValidationPromises[p]}attachCallbackListeners(h,p){const{universalLinks:v,handleOpenURL:T,BuildInfo:N}=tu(),U=setTimeout((0,g.Z)(function*(){yield iu(h),p.onEvent(Jf())}),500),Z=function(){var tt=(0,g.Z)(function*(ot){clearTimeout(U);const Mn=yield iu(h);let _s=null;Mn&&ot?.url&&(_s=function V_(y,h){var p,v;const T=function AI(y){const h=Yf(y),p=h.link?decodeURIComponent(h.link):void 0,v=Yf(p).link,T=h.deep_link_id?decodeURIComponent(h.deep_link_id):void 0;return Yf(T).link||T||v||p||y}(h);if(T.includes("/__/auth/callback")){const N=Yf(T),U=N.firebaseError?function SI(y){try{return JSON.parse(y)}catch{return null}}(decodeURIComponent(N.firebaseError)):null,Z=null===(v=null===(p=U?.code)||void 0===p?void 0:p.split("auth/"))||void 0===v?void 0:v[1],xe=Z?Y(Z):null;return xe?{type:y.type,eventId:y.eventId,tenantId:y.tenantId,error:xe,urlResponse:null,sessionId:null,postBody:null}:{type:y.type,eventId:y.eventId,tenantId:y.tenantId,sessionId:y.sessionId,urlResponse:T,postBody:null}}return null}(Mn,ot.url)),p.onEvent(_s||Jf())});return function(Mn){return tt.apply(this,arguments)}}();typeof v<"u"&&"function"==typeof v.subscribe&&v.subscribe(null,Z);const xe=T,Ve=`${N.packageName.toLowerCase()}://`;tu().handleOpenURL=function(){var tt=(0,g.Z)(function*(ot){if(ot.toLowerCase().startsWith(Ve)&&Z({url:ot}),"function"==typeof xe)try{xe(ot)}catch(Mn){console.error(Mn)}});return function(ot){return tt.apply(this,arguments)}}()}};function Jf(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:Y("no-auth-event")}}function yc(){var y;return(null===(y=self?.location)||void 0===y?void 0:y.protocol)||null}function xI(y=(0,R.z$)()){return!("file:"!==yc()&&"ionic:"!==yc()&&"capacitor:"!==yc()||!y.toLowerCase().match(/iphone|ipad|ipod|android/))}function rm(){try{const y=self.localStorage,h=Zu();if(y)return y.setItem(h,"1"),y.removeItem(h),!function NI(y=(0,R.z$)()){return function ep(){return(0,R.w1)()&&11===document?.documentMode}()||function $_(y=(0,R.z$)()){return/Edge\/\d+/.test(y)}(y)}()||(0,R.hl)()}catch{return tp()&&(0,R.hl)()}return!1}function tp(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function im(){return(function Xf(){return"http:"===yc()||"https:"===yc()}()||(0,R.ru)()||xI())&&!function H_(){return(0,R.b$)()||(0,R.UG)()}()&&rm()&&!tp()}function np(){return xI()&&typeof document<"u"}function ca(){return(ca=(0,g.Z)(function*(){return!!np()&&new Promise(y=>{const h=setTimeout(()=>{y(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(h),y(!0)})})})).apply(this,arguments)}const Jr={LOCAL:"local",NONE:"none",SESSION:"session"},_c=re,Eo="persistence";function sh(y){return su.apply(this,arguments)}function su(){return(su=(0,g.Z)(function*(y){yield y._initializationPromise;const h=vc(),p=B(Eo,y.config.apiKey,y.name);h&&h.setItem(p,y._getPersistence())})).apply(this,arguments)}function vc(){var y;try{return(null===(y=function sm(){return typeof window<"u"?window:null}())||void 0===y?void 0:y.sessionStorage)||null}catch{return null}}const G_=re;class Vs{constructor(){this.browserResolver=Rn(aa),this.cordovaResolver=Rn(nm),this.underlyingResolver=null,this._redirectPersistence=Zr,this._completeRedirectFn=ks,this._overrideRedirectResult=Cl}_initialize(h){var p=this;return(0,g.Z)(function*(){return yield p.selectUnderlyingResolver(),p.assertedUnderlyingResolver._initialize(h)})()}_openPopup(h,p,v,T){var N=this;return(0,g.Z)(function*(){return yield N.selectUnderlyingResolver(),N.assertedUnderlyingResolver._openPopup(h,p,v,T)})()}_openRedirect(h,p,v,T){var N=this;return(0,g.Z)(function*(){return yield N.selectUnderlyingResolver(),N.assertedUnderlyingResolver._openRedirect(h,p,v,T)})()}_isIframeWebStorageSupported(h,p){this.assertedUnderlyingResolver._isIframeWebStorageSupported(h,p)}_originValidation(h){return this.assertedUnderlyingResolver._originValidation(h)}get _shouldInitProactively(){return np()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return G_(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var h=this;return(0,g.Z)(function*(){if(h.underlyingResolver)return;const p=yield function ih(){return ca.apply(this,arguments)}();h.underlyingResolver=p?h.cordovaResolver:h.browserResolver})()}}function om(y){return y.unwrap()}function ah(y){return q_(y)}function q_(y){const{_tokenResponse:h}=y instanceof R.ZR?y.customData:y;if(!h)return null;if(!(y instanceof R.ZR)&&"temporaryProof"in h&&"phoneNumber"in h)return wn.credentialFromResult(y);const p=h.providerId;if(!p||p===we.PASSWORD)return null;let v;switch(p){case we.GOOGLE:v=Di;break;case we.FACEBOOK:v=Ss;break;case we.GITHUB:v=Pa;break;case we.TWITTER:v=ju;break;default:const{oauthIdToken:T,oauthAccessToken:N,oauthTokenSecret:U,pendingToken:Z,nonce:xe}=h;return N||U||T||Z?Z?p.startsWith("saml.")?Pt._create(p,Z):mt._fromParams({providerId:p,signInMethod:p,pendingToken:Z,idToken:T,accessToken:N}):new gs(p).credential({idToken:T,accessToken:N,rawNonce:xe}):null}return y instanceof R.ZR?v.credentialFromError(y):v.credentialFromResult(y)}function Xr(y,h){return h.catch(p=>{throw p instanceof R.ZR&&function z_(y,h){var p;const v=null===(p=h.customData)||void 0===p?void 0:p._tokenResponse;if("auth/multi-factor-auth-required"===h?.code)h.resolver=new um(y,function kd(y,h){var p;const v=(0,R.m9)(y),T=h;return re(h.customData.operationType,v,"argument-error"),re(null===(p=T.customData._serverResponse)||void 0===p?void 0:p.mfaPendingCredential,v,"argument-error"),co._fromError(v,T)}(y,h));else if(v){const T=q_(h),N=h;T&&(N.credential=T,N.tenantId=v.tenantId||void 0,N.email=v.email||void 0,N.phoneNumber=v.phoneNumber||void 0)}}(y,p),p}).then(p=>{const T=p.user;return{operationType:p.operationType,credential:ah(p),additionalUserInfo:xf(p),user:on.getOrCreate(T)}})}function uh(y,h){return ch.apply(this,arguments)}function ch(){return(ch=(0,g.Z)(function*(y,h){const p=yield h;return{verificationId:p.verificationId,confirm:v=>Xr(y,p.confirm(v))}})).apply(this,arguments)}class um{constructor(h,p){this.resolver=p,this.auth=function am(y){return y.wrapped()}(h)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(h){return Xr(om(this.auth),this.resolver.resolveSignIn(h))}}class on{constructor(h){this._delegate=h,this.multiFactor=function ho(y){const h=(0,R.m9)(y);return lo.has(h)||lo.set(h,Kt._fromUser(h)),lo.get(h)}(h)}static getOrCreate(h){return on.USER_MAP.has(h)||on.USER_MAP.set(h,new on(h)),on.USER_MAP.get(h)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(h){return this._delegate.getIdTokenResult(h)}getIdToken(h){return this._delegate.getIdToken(h)}linkAndRetrieveDataWithCredential(h){return this.linkWithCredential(h)}linkWithCredential(h){var p=this;return(0,g.Z)(function*(){return Xr(p.auth,Hg(p._delegate,h))})()}linkWithPhoneNumber(h,p){var v=this;return(0,g.Z)(function*(){return uh(v.auth,function Zd(y,h,p){return Jo.apply(this,arguments)}(v._delegate,h,p))})()}linkWithPopup(h){var p=this;return(0,g.Z)(function*(){return Xr(p.auth,function jf(y,h,p){return Rs.apply(this,arguments)}(p._delegate,h,Vs))})()}linkWithRedirect(h){var p=this;return(0,g.Z)(function*(){return yield sh(Ln(p.auth)),Tl(p._delegate,h,Vs)})()}reauthenticateAndRetrieveDataWithCredential(h){return this.reauthenticateWithCredential(h)}reauthenticateWithCredential(h){var p=this;return(0,g.Z)(function*(){return Xr(p.auth,$g(p._delegate,h))})()}reauthenticateWithPhoneNumber(h,p){return uh(this.auth,function za(y,h,p){return rc.apply(this,arguments)}(this._delegate,h,p))}reauthenticateWithPopup(h){return Xr(this.auth,function ic(y,h,p){return Za.apply(this,arguments)}(this._delegate,h,Vs))}reauthenticateWithRedirect(h){var p=this;return(0,g.Z)(function*(){return yield sh(Ln(p.auth)),sc(p._delegate,h,Vs)})()}sendEmailVerification(h){return function xs(y,h){return Ba.apply(this,arguments)}(this._delegate,h)}unlink(h){var p=this;return(0,g.Z)(function*(){return yield function ro(y,h){return oi.apply(this,arguments)}(p._delegate,h),p})()}updateEmail(h){return function Pd(y,h){return Mf((0,R.m9)(y),h,null)}(this._delegate,h)}updatePassword(h){return function zu(y,h){return Mf((0,R.m9)(y),null,h)}(this._delegate,h)}updatePhoneNumber(h){return function Pi(y,h){return Yt.apply(this,arguments)}(this._delegate,h)}updateProfile(h){return function zg(y,h){return dl.apply(this,arguments)}(this._delegate,h)}verifyBeforeUpdateEmail(h,p){return function Nd(y,h,p){return Gu.apply(this,arguments)}(this._delegate,h,p)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}on.USER_MAP=new WeakMap;const ou=re;let lh=(()=>{class y{constructor(p,v){if(this.app=p,v.isInitialized())return this._delegate=v.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:T}=p.options;ou(T,"invalid-api-key",{appName:p.name}),ou(T,"invalid-api-key",{appName:p.name});const N=typeof window<"u"?Vs:void 0;this._delegate=v.initialize({options:{persistence:Pr(T,p.name),popupRedirectResolver:N}}),this._delegate._updateErrorMap(lt),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?on.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(p){this._delegate.languageCode=p}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(p){this._delegate.tenantId=p}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(p,v){!function zr(y,h,p){const v=Ln(y);re(v._canInitEmulator,v,"emulator-config-failed"),re(/^https?:\/\//.test(h),v,"invalid-emulator-scheme");const T=!!p?.disableWarnings,N=Bo(h),{host:U,port:Z}=function Qc(y){const h=Bo(y),p=/(\/\/)?([^?#/]+)/.exec(y.substr(h.length));if(!p)return{host:"",port:null};const v=p[2].split("@").pop()||"",T=/^(\[[^\]]+\])(:|$)/.exec(v);if(T){const N=T[1];return{host:N,port:Id(v.substr(N.length+1))}}{const[N,U]=v.split(":");return{host:N,port:Id(U)}}}(h);v.config.emulator={url:`${N}//${U}${null===Z?"":`:${Z}`}/`},v.settings.appVerificationDisabledForTesting=!0,v.emulatorConfig=Object.freeze({host:U,port:Z,protocol:N.replace(":",""),options:Object.freeze({disableWarnings:T})}),T||function Bg(){function y(){const h=document.createElement("p"),p=h.style;h.innerText="Running in emulator mode. Do not use with production credentials.",p.position="fixed",p.width="100%",p.backgroundColor="#ffffff",p.border=".1em solid #000000",p.color="#b50000",p.bottom="0px",p.left="0px",p.margin="0px",p.zIndex="10000",p.textAlign="center",h.classList.add("firebase-emulator-warning"),document.body.appendChild(h)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",y):y())}()}(this._delegate,p,v)}applyActionCode(p){return function Ad(y,h){return Ci.apply(this,arguments)}(this._delegate,p)}checkActionCode(p){return $n(this._delegate,p)}confirmPasswordReset(p,v){return function io(y,h,p){return qi.apply(this,arguments)}(this._delegate,p,v)}createUserWithEmailAndPassword(p,v){var T=this;return(0,g.Z)(function*(){return Xr(T._delegate,function al(y,h,p){return Fa.apply(this,arguments)}(T._delegate,p,v))})()}fetchProvidersForEmail(p){return this.fetchSignInMethodsForEmail(p)}fetchSignInMethodsForEmail(p){return function Va(y,h){return ao.apply(this,arguments)}(this._delegate,p)}isSignInWithEmailLink(p){return function xd(y,h){const p=gn.parseLink(h);return"EMAIL_SIGNIN"===p?.operation}(0,p)}getRedirectResult(){var p=this;return(0,g.Z)(function*(){ou(im(),p._delegate,"operation-not-supported-in-this-environment");const v=yield function Ri(y,h){return Ya.apply(this,arguments)}(p._delegate,Vs);return v?Xr(p._delegate,Promise.resolve(v)):{credential:null,user:null}})()}addFrameworkForLogging(p){!function U_(y,h){Ln(y)._logFramework(h)}(this._delegate,p)}onAuthStateChanged(p,v,T){const{next:N,error:U,complete:Z}=dh(p,v,T);return this._delegate.onAuthStateChanged(N,U,Z)}onIdTokenChanged(p,v,T){const{next:N,error:U,complete:Z}=dh(p,v,T);return this._delegate.onIdTokenChanged(N,U,Z)}sendSignInLinkToEmail(p,v){return function qo(y,h,p){return La.apply(this,arguments)}(this._delegate,p,v)}sendPasswordResetEmail(p,v){return function M_(y,h,p){return ka.apply(this,arguments)}(this._delegate,p,v||void 0)}setPersistence(p){var v=this;return(0,g.Z)(function*(){let T;switch(function rp(y,h){_c(Object.values(Jr).includes(h),y,"invalid-persistence-type"),(0,R.b$)()?_c(h!==Jr.SESSION,y,"unsupported-persistence-type"):(0,R.UG)()?_c(h===Jr.NONE,y,"unsupported-persistence-type"):tp()?_c(h===Jr.NONE||h===Jr.LOCAL&&(0,R.hl)(),y,"unsupported-persistence-type"):_c(h===Jr.NONE||rm(),y,"unsupported-persistence-type")}(v._delegate,p),p){case Jr.SESSION:T=Zr;break;case Jr.LOCAL:T=(yield Rn(po)._isAvailable())?po:Ko;break;case Jr.NONE:T=vi;break;default:return he("argument-error",{appName:v._delegate.name})}return v._delegate.setPersistence(T)})()}signInAndRetrieveDataWithCredential(p){return this.signInWithCredential(p)}signInAnonymously(){return Xr(this._delegate,function hr(y){return Tf.apply(this,arguments)}(this._delegate))}signInWithCredential(p){return Xr(this._delegate,il(this._delegate,p))}signInWithCustomToken(p){return Xr(this._delegate,function Sd(y,h){return ms.apply(this,arguments)}(this._delegate,p))}signInWithEmailAndPassword(p,v){return Xr(this._delegate,function Md(y,h,p){return il((0,R.m9)(y),to.credential(h,p))}(this._delegate,p,v))}signInWithEmailLink(p,v){return Xr(this._delegate,function tr(y,h,p){return ul.apply(this,arguments)}(this._delegate,p,v))}signInWithPhoneNumber(p,v){return uh(this._delegate,function Ga(y,h,p){return Qo.apply(this,arguments)}(this._delegate,p,v))}signInWithPopup(p){var v=this;return(0,g.Z)(function*(){return ou(im(),v._delegate,"operation-not-supported-in-this-environment"),Xr(v._delegate,function Xo(y,h,p){return ea.apply(this,arguments)}(v._delegate,p,Vs))})()}signInWithRedirect(p){var v=this;return(0,g.Z)(function*(){return ou(im(),v._delegate,"operation-not-supported-in-this-environment"),yield sh(v._delegate),_o(v._delegate,p,Vs)})()}updateCurrentUser(p){return this._delegate.updateCurrentUser(p)}verifyPasswordResetCode(p){return function Wr(y,h){return oo.apply(this,arguments)}(this._delegate,p)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return y.Persistence=Jr,y})();function dh(y,h,p){let v=y;"function"!=typeof y&&({next:v,error:h,complete:p}=y);const T=v;return{next:U=>T(U&&on.getOrCreate(U)),error:h,complete:p}}function Pr(y,h){const p=function oh(y,h){const p=vc();if(!p)return[];const v=B(Eo,y,h);switch(p.getItem(v)){case Jr.NONE:return[vi];case Jr.LOCAL:return[po,Zr];case Jr.SESSION:return[Zr];default:return[]}}(y,h);if(typeof self<"u"&&!p.includes(po)&&p.push(po),typeof window<"u")for(const v of[Ko,Zr])p.includes(v)||p.push(v);return p.includes(vi)||p.push(vi),p}class au{constructor(){this.providerId="phone",this._delegate=new wn(om(J.Z.auth()))}static credential(h,p){return wn.credential(h,p)}verifyPhoneNumber(h,p){return this._delegate.verifyPhoneNumber(h,p)}unwrap(){return this._delegate}}au.PHONE_SIGN_IN_METHOD=wn.PHONE_SIGN_IN_METHOD,au.PROVIDER_ID=wn.PROVIDER_ID;const cm=re;class hh{constructor(h,p,v=J.Z.app()){var T;cm(null===(T=v.options)||void 0===T?void 0:T.apiKey,"invalid-api-key",{appName:v.name}),this._delegate=new Wd(h,p,v.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function dm(y){y.INTERNAL.registerComponent(new fe.wA("auth-compat",h=>{const p=h.getProvider("app-compat").getImmediate(),v=h.getProvider("auth");return new lh(p,v)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},EmailAuthProvider:to,FacebookAuthProvider:Ss,GithubAuthProvider:Pa,GoogleAuthProvider:Di,OAuthProvider:gs,SAMLAuthProvider:Ho,PhoneAuthProvider:au,PhoneMultiFactorGenerator:Fi,RecaptchaVerifier:hh,TwitterAuthProvider:ju,Auth:lh,AuthCredential:Js,Error:R.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),y.registerVersion("@firebase/auth-compat","0.4.2")}(J.Z)},5861:(ft,Me,k)=>{function g(R,oe,ne,ve,fe,Fe,we){try{var V=R[Fe](we),H=V.value}catch(ie){return void ne(ie)}V.done?oe(H):Promise.resolve(H).then(ve,fe)}function J(R){return function(){var oe=this,ne=arguments;return new Promise(function(ve,fe){var Fe=R.apply(oe,ne);function we(H){g(Fe,ve,fe,we,V,"next",H)}function V(H){g(Fe,ve,fe,we,V,"throw",H)}we(void 0)})}}k.d(Me,{Z:()=>J})},7582:(ft,Me,k)=>{function oe(ue,le){var ge={};for(var me in ue)Object.prototype.hasOwnProperty.call(ue,me)&&le.indexOf(me)<0&&(ge[me]=ue[me]);if(null!=ue&&"function"==typeof Object.getOwnPropertySymbols){var Ie=0;for(me=Object.getOwnPropertySymbols(ue);Ie<me.length;Ie++)le.indexOf(me[Ie])<0&&Object.prototype.propertyIsEnumerable.call(ue,me[Ie])&&(ge[me[Ie]]=ue[me[Ie]])}return ge}function ie(ue,le,ge,me){return new(ge||(ge=Promise))(function(be,et){function $e(Gt){try{pt(me.next(Gt))}catch(Mt){et(Mt)}}function Sn(Gt){try{pt(me.throw(Gt))}catch(Mt){et(Mt)}}function pt(Gt){Gt.done?be(Gt.value):function Ie(be){return be instanceof ge?be:new ge(function(et){et(be)})}(Gt.value).then($e,Sn)}pt((me=me.apply(ue,le||[])).next())})}function K(ue){return this instanceof K?(this.v=ue,this):new K(ue)}function he(ue,le,ge){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Ie,me=ge.apply(ue,le||[]),be=[];return Ie={},et("next"),et("throw"),et("return"),Ie[Symbol.asyncIterator]=function(){return this},Ie;function et(hn){me[hn]&&(Ie[hn]=function(_n){return new Promise(function(or,nn){be.push([hn,_n,or,nn])>1||$e(hn,_n)})})}function $e(hn,_n){try{!function Sn(hn){hn.value instanceof K?Promise.resolve(hn.value.v).then(pt,Gt):Mt(be[0][2],hn)}(me[hn](_n))}catch(or){Mt(be[0][3],or)}}function pt(hn){$e("next",hn)}function Gt(hn){$e("throw",hn)}function Mt(hn,_n){hn(_n),be.shift(),be.length&&$e(be[0][0],be[0][1])}}function Ce(ue){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var ge,le=ue[Symbol.asyncIterator];return le?le.call(ue):(ue=function pe(ue){var le="function"==typeof Symbol&&Symbol.iterator,ge=le&&ue[le],me=0;if(ge)return ge.call(ue);if(ue&&"number"==typeof ue.length)return{next:function(){return ue&&me>=ue.length&&(ue=void 0),{value:ue&&ue[me++],done:!ue}}};throw new TypeError(le?"Object is not iterable.":"Symbol.iterator is not defined.")}(ue),ge={},me("next"),me("throw"),me("return"),ge[Symbol.asyncIterator]=function(){return this},ge);function me(be){ge[be]=ue[be]&&function(et){return new Promise(function($e,Sn){!function Ie(be,et,$e,Sn){Promise.resolve(Sn).then(function(pt){be({value:pt,done:$e})},et)}($e,Sn,(et=ue[be](et)).done,et.value)})}}}k.d(Me,{FC:()=>he,KL:()=>Ce,_T:()=>oe,mG:()=>ie,qq:()=>K}),"function"==typeof SuppressedError&&SuppressedError}},ft=>{ft(ft.s=8680)}]);